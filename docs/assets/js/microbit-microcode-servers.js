// meta={"simUrl":"https://trg-microbit.userpxt.io/---simulator","cdnUrl":"https://pxt.azureedge.net","version":"v1.8.34","target":"microbit","targetVersion":"5.0.12"}
// boardDefinition={"visual":"microbit","gpioPinBlocks":[["P0"],["P1"],["P2"],["P3"],["P4","P5","P6","P7"],["P8","P9","P10","P11","P12"],["P16"]],"gpioPinMap":{"P0":"P0","P1":"P1","P2":"P2","P3":"P3","P4":"P4","P5":"P5","P6":"P6","P7":"P7","P8":"P8","P9":"P9","P10":"P10","P11":"P11","P12":"P12","P13":"P13","P14":"P14","P15":"P15","P16":"P16","P19":"P19","P20":"P20"},"spiPins":{"MOSI":"P15","MISO":"P14","SCK":"P13"},"i2cPins":{"SDA":"P20","SCL":"P19"},"analogInPins":["P0","P1","P2","P3","P10"],"groundPins":["GND"],"threeVoltPins":["+3v3"],"attachPowerOnRight":true,"onboardComponents":["accelerometer","buttonpair","ledmatrix","speaker","bluetooth","thermometer","compass","builtinspeaker","microphone","logotouch","flashlog","v2"],"pinStyles":{"P0":"croc","P1":"croc","P2":"croc","GND":"croc","+3v3":"croc"},"marginWhenBreadboarding":[0,0,80,0]}
// total=1133270 new=90.75% cached=0.00% other=9.25%
(function (ectx) {
'use strict';
const runtime = ectx.runtime;
const oops = ectx.oops;
const doNothing = ectx.doNothing;
const pxsim = ectx.pxsim;
const globals = ectx.globals;
const maybeYield = ectx.maybeYield;
const setupDebugger = ectx.setupDebugger;
const isBreakFrame = ectx.isBreakFrame;
const breakpoint = ectx.breakpoint;
const trace = ectx.trace;
const checkStack = ectx.checkStack;
const leave = ectx.leave;
const checkResumeConsumed = ectx.checkResumeConsumed;
const setupResume = ectx.setupResume;
const setupLambda = ectx.setupLambda;
const checkSubtype = ectx.checkSubtype;
const failedCast = ectx.failedCast;
const buildResume = ectx.buildResume;
const mkVTable = ectx.mkVTable;
const bind = ectx.bind;
const leaveAccessor = ectx.leaveAccessor;
const __this = runtime;
const pxtrt = pxsim.pxtrt;
let yieldSteps = 1;
ectx.setupYield(function() { yieldSteps = 100; })
pxsim.setTitle("jacdac-microbit-microcode-servers");
pxsim.setConfigData({}, {});
pxtrt.mapKeyNames = [
 "",
 "_attach",
 "_data",
 "_destroy",
 "_detach",
 "_device",
 "_eventCounter",
 "_handled",
 "_header",
 "_intensity",
 "_lastListenerTime",
 "_localTime",
 "_myDevice",
 "_oldBindingsHash",
 "_refreshing",
 "_registeredEvents",
 "_role",
 "_score",
 "_sendCmd",
 "_sendCmdId",
 "_sendCore",
 "_sendReport",
 "_sendWithAck",
 "_shortId",
 "_statusCode",
 "_statusVendorCode",
 "_value",
 "accelerometer",
 "add",
 "addListenerInternal",
 "addServer",
 "advertisementData",
 "allClients",
 "announceCallback",
 "announceflags",
 "attachClient",
 "autoBind",
 "autoBindCnt",
 "background",
 "bindRoles",
 "bindingHash",
 "bindings",
 "boundToDev",
 "boundToServiceIdx",
 "broadcast",
 "bufferPayload",
 "button",
 "buttonA",
 "buttonB",
 "buttonLogo",
 "buzzer",
 "c0",
 "calibrate",
 "checkChanges",
 "clearAttachCache",
 "clients",
 "close",
 "code",
 "condition",
 "config",
 "constants",
 "controlServer",
 "crc",
 "currentDuration",
 "currentOctave",
 "currentPos",
 "data",
 "detachClient",
 "device",
 "deviceId",
 "deviceIdentifier",
 "devices",
 "digitalRead",
 "digitalWrite",
 "disableBrain",
 "disableLogger",
 "disableRoleManager",
 "disabled",
 "div",
 "doCalibrate",
 "eid",
 "emit",
 "enabled",
 "eventCode",
 "eventCounter",
 "eventId",
 "eventSource",
 "flags",
 "fmt",
 "forceSimulators",
 "fp",
 "from",
 "fromBinary",
 "fromFrameless",
 "fullyBound",
 "gcDevices",
 "getNumber",
 "getPacket",
 "group",
 "handleCalibrateCommand",
 "handleConnected",
 "handleCustomCommand",
 "handleFloodPing",
 "handleInstanceName",
 "handleIntensity",
 "handleListSoundsCommand",
 "handlePacket",
 "handlePacketOuter",
 "handlePlayCommand",
 "handlePlayToneCommand",
 "handleReceivedBuffer",
 "handleReceivedNumber",
 "handleReceivedString",
 "handleRegBool",
 "handleRegBuffer",
 "handleRegFormat",
 "handleRegValue",
 "handleSendBuffer",
 "handleSendNumber",
 "handleSendString",
 "handleSendValue",
 "handleStatusCode",
 "handleValue",
 "handleVariant",
 "handled",
 "handler",
 "hasNextNote",
 "hasService",
 "host",
 "instanceName",
 "intensity",
 "intensityPackFormat",
 "isArray",
 "isBrain",
 "isClient",
 "isCommand",
 "isEvent",
 "isPressed",
 "isRegGet",
 "isRegSet",
 "isReport",
 "jdpacked",
 "jdunpack",
 "key",
 "lastEvent",
 "lastSeen",
 "lightLevel",
 "listeners",
 "log",
 "logger",
 "lookupQuery",
 "loudThreshold",
 "markHandled",
 "matchesRoleAt",
 "maxDecibels",
 "maxReading",
 "melodyArray",
 "minDecibels",
 "minPriority",
 "minReading",
 "mkEventCmd",
 "mkPacket",
 "multicommandClass",
 "nextCnt",
 "nextHold",
 "nextNote",
 "nextRetry",
 "nextSample",
 "nfmt",
 "nfmt2",
 "noWait",
 "notes",
 "numTries",
 "numberPayload",
 "on",
 "once",
 "onlyHeader",
 "packFormat",
 "packetFlags",
 "packetType",
 "parent",
 "parse",
 "pkt",
 "pkts",
 "play",
 "port",
 "possiblyNotImplemented",
 "pressTime",
 "pressed",
 "prevPressed",
 "processPacket",
 "proxyMode",
 "queries",
 "queueAnnounce",
 "quietThreshold",
 "radio",
 "raiseEvent",
 "readState",
 "readingError",
 "ready",
 "reattach",
 "regCode",
 "registerEvents",
 "registered",
 "registers",
 "repeating",
 "requiresAck",
 "resend",
 "reset",
 "resetIn",
 "respondForEach",
 "restartCounter",
 "role",
 "roleName",
 "roleQuery",
 "running",
 "score",
 "scoreFor",
 "screen",
 "select",
 "selfDevice",
 "sendAsMultiCommand",
 "sendChangeEvent",
 "sendCommand",
 "sendEvent",
 "sendReport",
 "sendUptime",
 "serial",
 "serializeState",
 "servers",
 "service",
 "serviceClass",
 "serviceClassAt",
 "serviceClassLength",
 "serviceCommand",
 "serviceIndex",
 "serviceOffset",
 "serviceOffsetAt",
 "services",
 "setPull",
 "setStatusCode",
 "setStreaming",
 "setThresholds",
 "shortId",
 "signal",
 "size",
 "soundLevel",
 "soundPlayer",
 "srcId",
 "start",
 "startClient",
 "startStreaming",
 "started",
 "stateReader",
 "stateUpdated",
 "statusCode",
 "stopStreaming",
 "streamingInterval",
 "streamingSamples",
 "stringPayload",
 "supressLog",
 "systemActive",
 "temperature",
 "time",
 "timeOut",
 "timestamp",
 "toString",
 "touchP0",
 "touchP1",
 "touchP2",
 "transmissionPower",
 "unattachedClients",
 "update",
 "value",
 "valuePackFormat",
 "variant",
 "vid",
 "word",
 "write",
 "writeAndClose",
 "writeEx"
];
__this.setupPerfCounters([]);
const pxsim_Array__getAt = pxsim.Array_.getAt;
const pxsim_Array__length = pxsim.Array_.length;
const pxsim_Array__mk = pxsim.Array_.mk;
const pxsim_Array__push = pxsim.Array_.push;
const pxsim_Boolean__bang = pxsim.Boolean_.bang;
const pxsim_String__concat = pxsim.String_.concat;
const pxsim_String__stringConv = pxsim.String_.stringConv;
const pxsim_numops_toBool = pxsim.numops.toBool;
const pxsim_numops_toBoolDecr = pxsim.numops.toBoolDecr;
const pxsim_pxtcore_mkAction = pxsim.pxtcore.mkAction;
const pxsim_pxtcore_mkClassInstance = pxsim.pxtcore.mkClassInstance;
const pxsim_pxtrt_ldlocRef = pxsim.pxtrt.ldlocRef;
const pxsim_pxtrt_mapGetByString = pxsim.pxtrt.mapGetByString;
const pxsim_pxtrt_stclo = pxsim.pxtrt.stclo;
const pxsim_pxtrt_stlocRef = pxsim.pxtrt.stlocRef;
const pxsim_Boolean_ = pxsim.Boolean_;
const pxsim_pxtcore = pxsim.pxtcore;
const pxsim_String_ = pxsim.String_;
const pxsim_ImageMethods = pxsim.ImageMethods;
const pxsim_Array_ = pxsim.Array_;
const pxsim_pxtrt = pxsim.pxtrt;
const pxsim_numops = pxsim.numops;


function _main___P3908(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    globals._evSource___3968 = (32768);
    globals._intervals___3970 = (undefined);
    globals.minPriority___2376 = (1);
    globals.beatsPerMinute___4012 = (120);
    globals.freqs___4014 = (_hex4013);
    globals._pollEventQueue___4052 = (undefined);
    globals.RUN_KEY___4085 = ("#run");
    globals.SCOPE_KEY___4086 = ("#scope");
    s.tmp_0 = settings_initScopes__P4097_mk(s);
    s.callLocIdx = 74; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    globals.identifyAnimationRunning___2829 = (false);
    globals.proxyMode___2832 = (false);
    s.tmp_0 = initPlatform__P2834_mk(s);
    s.callLocIdx = 99; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    globals.StreamingSamples___3026 = ("u8");
    globals.StreamingInterval___3027 = ("u32");
    globals.StatusCode___3039 = ("u16 u16");
    globals.InstanceName___3040 = ("s");
    globals.CommandNotImplemented___3053 = ("u16 u16");
    globals.DeviceDescription___3131 = ("s");
    globals.ProductIdentifier___3132 = ("u32");
    globals.FirmwareVersion___3134 = ("s");
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_LoggerServer__C3167_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_LoggerServer_constructor__P3169_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 239; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    globals.loggerServer___3176 = (s.tmp_0);
    globals.AllRolesAllocated___3270 = ("u8");
    globals.roleSettingPrefix___4255 = ("#jdr:");
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_RoleManagerServer__C3287_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac__rolemgr_RoleManagerServer_constructor__P3289_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 355; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    globals.roleManagerServer___3293 = (s.tmp_0);
    globals.CHANGE___3390 = ("change");
    globals.CONNECT___3391 = ("connect");
    globals.DISCONNECT___3392 = ("disconnect");
    globals.DEVICE_CONNECT___3393 = ("deviceConnect");
    globals.DEVICE_DISCONNECT___3394 = ("deviceDisconnect");
    globals.DEVICE_CHANGE___3395 = ("deviceChange");
    globals.DEVICE_ANNOUNCE___3396 = ("deviceAnnounce");
    globals.SELF_ANNOUNCE___3397 = ("selfAnnounce");
    globals.PACKET_PROCESS___3398 = ("packetProcess");
    globals.REPORT_RECEIVE___3399 = ("reportReceive");
    globals.REPORT_UPDATE___3400 = ("reportUpdate");
    globals.RESTART___3401 = ("restart");
    globals.PACKET_RECEIVE___3402 = ("packetReceive");
    globals.EVENT___3403 = ("packetEvent");
    globals.STATUS_EVENT___3404 = ("statusEvent");
    globals.IDENTIFY___3405 = ("identify");
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Bus__C3408_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_Bus_constructor__P3414_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 442; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    globals.bus___3430 = (s.tmp_0);
    globals.logPriority___3431 = (0);
    globals.JACDAC_PROXY_SETTING___3557 = ("__jacdac_proxy");
    globals.JACDAC_PROXY_SETTING_LATE___3558 = ("__jacdac_proxy_late");
    s.tmp_0 = jacdac___physStart__P2819_mk(s);
    s.callLocIdx = 768; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.tmp_0 = jacdac_setLed__P3565_mk(s);
    s.tmp_0.arg0 = 0;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 769; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(globals.onPlatformStart___3386);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = lambda_1_mk(s);
    s.tmp_0.argL = globals.onPlatformStart___3386;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 770; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 1:
  case 2:
    s.tmp_0 = jacdac_startProxy__P4330_mk(s);
    s.callLocIdx = 771; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.tmp_0 = control_runInParallel__P2295_mk(s);
    s.tmp_0.arg0 = jacdac_inline__P4339;
    s.callLocIdx = 773; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    globals.ERROR___3573 = ("error");
    globals.VERSION___3585 = ("v1.8.34");
    globals.initialized___4366 = (false);
    globals.Forces___3680 = ("i12.20 i12.20 i12.20");
    globals.Group___3706 = ("u8");
    globals.TransmissionPower___3707 = ("u8");
    globals.SendString___3718 = ("s");
    globals.SendNumber___3719 = ("f64");
    globals.SendValue___3720 = ("f64 s");
    globals.SendBuffer___3721 = ("b");
    globals.StringReceived___3722 = ("u32 u32 i8 b[1] s");
    globals.BufferReceived___3724 = ("u32 u32 i8 b[1] b");
    globals.Pressure___3732 = ("u0.16");
    globals.Up___3740 = ("u32");
    globals.Hold___3741 = ("u32");
    globals.Volume___3747 = ("u0.8");
    globals.PlayTone___3752 = ("u16 u16 u16");
    globals.Brightness___3779 = ("u0.8");
    globals.Columns___3781 = ("u16");
    globals.Variant___3782 = ("u8");
    globals.LightLevel___3793 = ("u0.16");
    globals.SoundLevel___3804 = ("u0.16");
    globals.LoudThreshold___3806 = ("u0.16");
    globals.QuietThreshold___3807 = ("u0.16");
    globals.Volume___3816 = ("u0.16");
    globals.Play___3822 = ("s");
    globals.Temperature___3839 = ("i22.10");
    r0 = pxsim_pxtcore_mkClassInstance(servers_AccelerometerServer__C3845_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_AccelerometerServer_constructor__P3846_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 840; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    globals.accelerometerServer___3849 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_MButton__C3851_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_BaseButton_constructor__P4397_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "A";
    s.tmp_1.arg2 = 1;
    s.callLocIdx = 856; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    globals.buttonA___3854 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_MButton__C3851_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_BaseButton_constructor__P4397_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "B";
    s.tmp_1.arg2 = 2;
    s.callLocIdx = 857; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    globals.buttonB___3855 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_LogoButton__C3853_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_BaseButton_constructor__P4397_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "Logo";
    s.tmp_1.arg2 = 121;
    s.callLocIdx = 858; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    globals.buttonLogo___3856 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_TouchButton__C3852_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_BaseButton_constructor__P4397_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "P0";
    s.tmp_1.arg2 = 100;
    s.callLocIdx = 859; s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    globals.touchP0___3857 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_TouchButton__C3852_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_BaseButton_constructor__P4397_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "P1";
    s.tmp_1.arg2 = 101;
    s.callLocIdx = 860; s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    globals.touchP1___3858 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_TouchButton__C3852_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_BaseButton_constructor__P4397_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "P2";
    s.tmp_1.arg2 = 102;
    s.callLocIdx = 861; s.pc = 19; return s.tmp_1;
  case 19:
    r0 = s.retval;
    globals.touchP2___3859 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_SoundLevelServer__C3861_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_SoundLevelServer_constructor__P3867_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 873; s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
    globals.soundLevelServer___3870 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_ScreenServer__C3872_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_ScreenServer_constructor__P3873_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 889; s.pc = 21; return s.tmp_1;
  case 21:
    r0 = s.retval;
    globals.screenServer___3875 = (s.tmp_0);
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "streamingInterval", 50);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "readingError", readingError_inline__P5232);
    s.tmp_1 = jacdac_createSimpleSensorServer__P3252_mk(s);
    s.tmp_1.arg0 = 400333340;
    s.tmp_1.arg1 = globals.LightLevel___3793;
    s.tmp_1.arg2 = lightLevelServer_inline__P5228;
    s.tmp_1.arg3 = s.tmp_0;
    s.callLocIdx = 890; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    globals.lightLevelServer___3877 = (r0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_SoundPlayerServer__C3879_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_SoundPlayerServer_constructor__P3880_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 903; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
    globals.soundPlayerServer___3882 = (s.tmp_0);
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "minReading", -10);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "maxReading", 50);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "variant", 2);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "streamingInterval", 1000);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "readingError", readingError_inline__P9502);
    s.tmp_1 = jacdac_createSimpleSensorServer__P3252_mk(s);
    s.tmp_1.arg0 = 337754823;
    s.tmp_1.arg1 = globals.Temperature___3839;
    s.tmp_1.arg2 = temperatureServer_inline__P9496;
    s.tmp_1.arg3 = s.tmp_0;
    s.callLocIdx = 904; s.pc = 24; return s.tmp_1;
  case 24:
    r0 = s.retval;
    globals.temperatureServer___3884 = (r0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_RadioServer__C3893_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_RadioServer_constructor__P3897_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 950; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    globals.radioServer___3900 = (s.tmp_0);
    r0 = pxsim_pxtcore_mkClassInstance(servers_BuzzerServer__C3902_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_BuzzerServer_constructor__P3903_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 959; s.pc = 26; return s.tmp_1;
  case 26:
    r0 = s.retval;
    globals.buzzerServer___3905 = (s.tmp_0);
    globals.firmwareVersion___3388 = (globals.VERSION___3585);
    s.tmp_0 = console_log__P2381_mk(s);
    s.tmp_0.arg0 = "starting microcode servers...";
    s.callLocIdx = 982; s.pc = 27; return s.tmp_0;
  case 27:
    r0 = s.retval;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "logger", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "buttonA", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "buttonB", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "buttonLogo", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "touchP0", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "touchP1", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "touchP2", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "screen", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "buzzer", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "radio", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "accelerometer", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "soundPlayer", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "forceSimulators", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "temperature", true);
    s.tmp_1 = servers_start__P3907_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 983; s.pc = 28; return s.tmp_1;
  case 28:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
_main___P3908.info = {"start":0,"length":0,"line":0,"column":0,"endLine":0,"endColumn":0,"fileName":"pxt_modules/jacdac-microbit/main.ts","functionName":"<main>","argumentNames":[]}
_main___P3908.continuations = [  ]

function _main___P3908_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: _main___P3908, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }

const _hex4013 = pxsim.BufferMethods.createBufferFromHex("1f00210023002500270029002c002e003100340037003a003e004100450049004e00520057005c00620068006e0075007b0083008b0093009c00a500af00b900c400d000dc00e900f70006011501260137014a015d01720188019f01b801d201ee010b022a024b026e029302ba02e40210033f037003a403dc03170455049704dd0427057505c80520067d06e0064907b8072d08a9082d09b9094d0aea0a900b400cfa0cc00d910e6f0f5a1053115b1272139a14d41520178018f519801b231dde1e")




function jacdac_inline__P4339(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_start__P3559_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 772; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_inline__P4339.info = {"start":67640,"length":13,"line":2038,"column":26,"endLine":2038,"endColumn":39,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_inline__P4339_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_inline__P4339, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_start__P3907(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_startServer__P3566_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 960; s.pc = 37; return s.tmp_0;
  case 37:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtrt.mkMap();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.arg0 = (s.tmp_1);
    s.tmp_1 = if_forceSimulators_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "forceSimulators");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["forceSimulators"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["forceSimulators"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 961; s.pc = 38; return s.tmp_1; }
    }
  case 38:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    s.tmp_4 = jacdac_isSimulator__P3554_mk(s);
    s.callLocIdx = 962; s.pc = 39; return s.tmp_4;
  case 39:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 4:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 33; continue; }
    s.tmp_7 = if_buttonA_1_mk(s);
    s.tmp_7.arg0 = s.arg0;
    if (!s.tmp_7.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_7.arg0, "buttonA");
    } else {
      s.tmp_7.fn = s.tmp_7.arg0.vtable.iface["buttonA"];
      if (s.tmp_7.fn == null) { s.retval = s.tmp_7.arg0.fields["buttonA"]; }
      else if (!s.tmp_7.fn.isGetter) { s.retval = bind(s.tmp_7); }
     else { s.callLocIdx = 963; s.pc = 40; return s.tmp_7; }
    }
  case 40:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 5; continue; }
    s.tmp_8 = servers_BaseButton__C4391_v3_1_mk(s);
    s.tmp_8.arg0 = globals.buttonA___3854;
    if (!checkSubtype(s.tmp_8.arg0, servers_BaseButton__C4391_VT)) failedCast(s.tmp_8.arg0);
    s.tmp_8.fn = s.tmp_8.arg0.vtable.methods.start;
    s.pc = 41; return s.tmp_8;
  case 41:
    r0 = s.retval;
  case 5:
  case 6:
    s.tmp_1 = if_buttonB_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "buttonB");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["buttonB"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["buttonB"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 964; s.pc = 42; return s.tmp_1; }
    }
  case 42:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = servers_BaseButton__C4391_v3_1_mk(s);
    s.tmp_2.arg0 = globals.buttonB___3855;
    if (!checkSubtype(s.tmp_2.arg0, servers_BaseButton__C4391_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 43; return s.tmp_2;
  case 43:
    r0 = s.retval;
  case 7:
  case 8:
    s.tmp_1 = if_buttonLogo_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "buttonLogo");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["buttonLogo"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["buttonLogo"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 965; s.pc = 44; return s.tmp_1; }
    }
  case 44:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_2 = servers_BaseButton__C4391_v3_1_mk(s);
    s.tmp_2.arg0 = globals.buttonLogo___3856;
    if (!checkSubtype(s.tmp_2.arg0, servers_BaseButton__C4391_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 45; return s.tmp_2;
  case 45:
    r0 = s.retval;
  case 9:
  case 10:
    s.tmp_1 = if_touchP0_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "touchP0");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["touchP0"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["touchP0"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 966; s.pc = 46; return s.tmp_1; }
    }
  case 46:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_2 = servers_BaseButton__C4391_v3_1_mk(s);
    s.tmp_2.arg0 = globals.touchP0___3857;
    if (!checkSubtype(s.tmp_2.arg0, servers_BaseButton__C4391_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 47; return s.tmp_2;
  case 47:
    r0 = s.retval;
  case 11:
  case 12:
    s.tmp_1 = if_touchP1_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "touchP1");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["touchP1"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["touchP1"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 967; s.pc = 48; return s.tmp_1; }
    }
  case 48:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    s.tmp_2 = servers_BaseButton__C4391_v3_1_mk(s);
    s.tmp_2.arg0 = globals.touchP1___3858;
    if (!checkSubtype(s.tmp_2.arg0, servers_BaseButton__C4391_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 49; return s.tmp_2;
  case 49:
    r0 = s.retval;
  case 13:
  case 14:
    s.tmp_1 = if_touchP2_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "touchP2");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["touchP2"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["touchP2"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 968; s.pc = 50; return s.tmp_1; }
    }
  case 50:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    s.tmp_2 = servers_BaseButton__C4391_v3_1_mk(s);
    s.tmp_2.arg0 = globals.touchP2___3859;
    if (!checkSubtype(s.tmp_2.arg0, servers_BaseButton__C4391_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 51; return s.tmp_2;
  case 51:
    r0 = s.retval;
  case 15:
  case 16:
    s.tmp_1 = if_temperature_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "temperature");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["temperature"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["temperature"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 969; s.pc = 52; return s.tmp_1; }
    }
  case 52:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
    s.tmp_2 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_2.arg0 = globals.temperatureServer___3884;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 53; return s.tmp_2;
  case 53:
    r0 = s.retval;
  case 17:
  case 18:
    s.tmp_1 = if_accelerometer_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "accelerometer");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["accelerometer"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["accelerometer"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 970; s.pc = 54; return s.tmp_1; }
    }
  case 54:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
    s.tmp_2 = servers_AccelerometerServer__C3845_v3_1_mk(s);
    s.tmp_2.arg0 = globals.accelerometerServer___3849;
    if (!checkSubtype(s.tmp_2.arg0, servers_AccelerometerServer__C3845_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 55; return s.tmp_2;
  case 55:
    r0 = s.retval;
  case 19:
  case 20:
    s.tmp_1 = if_soundLevel_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "soundLevel");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["soundLevel"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["soundLevel"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 971; s.pc = 56; return s.tmp_1; }
    }
  case 56:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
    s.tmp_2 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_2.arg0 = globals.soundLevelServer___3870;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 57; return s.tmp_2;
  case 57:
    r0 = s.retval;
  case 21:
  case 22:
    s.tmp_1 = if_radio_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "radio");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["radio"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["radio"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 972; s.pc = 58; return s.tmp_1; }
    }
  case 58:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 23; continue; }
    s.tmp_2 = servers_RadioServer__C3893_v3_1_mk(s);
    s.tmp_2.arg0 = globals.radioServer___3900;
    if (!checkSubtype(s.tmp_2.arg0, servers_RadioServer__C3893_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 59; return s.tmp_2;
  case 59:
    r0 = s.retval;
  case 23:
  case 24:
    s.tmp_1 = if_screen_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "screen");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["screen"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["screen"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 973; s.pc = 60; return s.tmp_1; }
    }
  case 60:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 25; continue; }
    s.tmp_2 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_2.arg0 = globals.screenServer___3875;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 61; return s.tmp_2;
  case 61:
    r0 = s.retval;
  case 25:
  case 26:
    s.tmp_1 = if_lightLevel_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "lightLevel");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["lightLevel"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["lightLevel"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 974; s.pc = 62; return s.tmp_1; }
    }
  case 62:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    s.tmp_2 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_2.arg0 = globals.lightLevelServer___3877;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 63; return s.tmp_2;
  case 63:
    r0 = s.retval;
  case 27:
  case 28:
    s.tmp_1 = if_soundPlayer_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "soundPlayer");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["soundPlayer"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["soundPlayer"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 975; s.pc = 64; return s.tmp_1; }
    }
  case 64:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 29; continue; }
    s.tmp_2 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_2.arg0 = globals.soundPlayerServer___3882;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 65; return s.tmp_2;
  case 65:
    r0 = s.retval;
  case 29:
  case 30:
    s.tmp_1 = if_buzzer_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "buzzer");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["buzzer"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["buzzer"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 976; s.pc = 66; return s.tmp_1; }
    }
  case 66:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 31; continue; }
    s.tmp_2 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_2.arg0 = globals.buzzerServer___3905;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.start;
    s.pc = 67; return s.tmp_2;
  case 67:
    r0 = s.retval;
  case 31:
  case 32:
  case 33:
  case 34:
    s.tmp_1 = jacdac_checkProxy__P3555_mk(s);
    s.callLocIdx = 977; s.pc = 68; return s.tmp_1;
  case 68:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 35; continue; }
    s.tmp_2 = jacdac_proxyFinalize__P3556_mk(s);
    s.callLocIdx = 978; s.pc = 69; return s.tmp_2;
  case 69:
    r0 = s.retval;
    { step = 36; continue; }
  case 35:
    s.tmp_0 = control_runInBackground__P2296_mk(s);
    s.tmp_0.arg0 = servers_start_inline__P4529;
    s.callLocIdx = 981; s.pc = 70; return s.tmp_0;
  case 70:
    r0 = s.retval;
  case 36:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_start__P3907.info = {"start":105,"length":1900,"line":5,"column":4,"endLine":54,"endColumn":5,"fileName":"pxt_modules/jacdac-microbit/main.ts","functionName":"start","argumentNames":["options"]}

function servers_start__P3907_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_start__P3907, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
} }





function servers_start_inline__P4529(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 100;
    s.callLocIdx = 979; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = basic_showIcon__P2279_mk(s);
    s.tmp_0.arg0 = 4;
    s.tmp_0.arg1 = 600;
    s.callLocIdx = 980; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_start_inline__P4529.info = {"start":1886,"length":102,"line":49,"column":36,"endLine":52,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/main.ts","functionName":"inline","argumentNames":[]}

function servers_start_inline__P4529_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_start_inline__P4529, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function basic_showIcon__P2279(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___4535 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = images_iconImage__P2283_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 19; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.res___4535 = (r0);
    setupResume(s, 2);
    pxsim_ImageMethods.showImage(s.res___4535, 0, s.arg1);
    checkResumeConsumed();
    return;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
basic_showIcon__P2279.info = {"start":4957,"length":141,"line":185,"column":4,"endLine":188,"endColumn":5,"fileName":"pxt_modules/core/icons.ts","functionName":"showIcon","argumentNames":["icon","interval"]}

function basic_showIcon__P2279_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: basic_showIcon__P2279, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  res___4535: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function images_iconImage__P2283(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(6, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(7, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(8, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(10, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(11, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq(12, s.tmp_0);
    if (r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(32, s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq(33, s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq(34, s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = pxsim_pxtcore.switch_eq(35, s.tmp_0);
    if (r0) { step = 17; continue; }
    r0 = pxsim_pxtcore.switch_eq(36, s.tmp_0);
    if (r0) { step = 18; continue; }
    r0 = pxsim_pxtcore.switch_eq(37, s.tmp_0);
    if (r0) { step = 19; continue; }
    r0 = pxsim_pxtcore.switch_eq(38, s.tmp_0);
    if (r0) { step = 20; continue; }
    r0 = pxsim_pxtcore.switch_eq(39, s.tmp_0);
    if (r0) { step = 21; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 22; continue; }
    r0 = pxsim_pxtcore.switch_eq(14, s.tmp_0);
    if (r0) { step = 23; continue; }
    r0 = pxsim_pxtcore.switch_eq(15, s.tmp_0);
    if (r0) { step = 24; continue; }
    r0 = pxsim_pxtcore.switch_eq(16, s.tmp_0);
    if (r0) { step = 25; continue; }
    r0 = pxsim_pxtcore.switch_eq(17, s.tmp_0);
    if (r0) { step = 26; continue; }
    r0 = pxsim_pxtcore.switch_eq(18, s.tmp_0);
    if (r0) { step = 27; continue; }
    r0 = pxsim_pxtcore.switch_eq(19, s.tmp_0);
    if (r0) { step = 28; continue; }
    r0 = pxsim_pxtcore.switch_eq(20, s.tmp_0);
    if (r0) { step = 29; continue; }
    r0 = pxsim_pxtcore.switch_eq(21, s.tmp_0);
    if (r0) { step = 30; continue; }
    r0 = pxsim_pxtcore.switch_eq(22, s.tmp_0);
    if (r0) { step = 31; continue; }
    r0 = pxsim_pxtcore.switch_eq(23, s.tmp_0);
    if (r0) { step = 32; continue; }
    r0 = pxsim_pxtcore.switch_eq(24, s.tmp_0);
    if (r0) { step = 33; continue; }
    r0 = pxsim_pxtcore.switch_eq(25, s.tmp_0);
    if (r0) { step = 34; continue; }
    r0 = pxsim_pxtcore.switch_eq(26, s.tmp_0);
    if (r0) { step = 35; continue; }
    r0 = pxsim_pxtcore.switch_eq(27, s.tmp_0);
    if (r0) { step = 36; continue; }
    r0 = pxsim_pxtcore.switch_eq(28, s.tmp_0);
    if (r0) { step = 37; continue; }
    r0 = pxsim_pxtcore.switch_eq(29, s.tmp_0);
    if (r0) { step = 38; continue; }
    r0 = pxsim_pxtcore.switch_eq(30, s.tmp_0);
    if (r0) { step = 39; continue; }
    r0 = pxsim_pxtcore.switch_eq(31, s.tmp_0);
    if (r0) { step = 40; continue; }
    r0 = s.tmp_0;
    { step = 41; continue; }
  case 1:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,255,0,255,0,255,255,255,255,255,255,255,255,255,255,0,255,255,255,0,0,0,255,0,0,0]));
    { step = 42; continue; }
  case 2:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,255,0,255,0,0,255,255,255,0,0,0,255,0,0,0,0,0,0,0,0]));
    { step = 42; continue; }
  case 3:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,255,0,255,0,0,0,0,0,0,255,0,0,0,255,0,255,255,255,0,0]));
    { step = 42; continue; }
  case 4:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,255,0,255,0,0,0,0,0,0,0,255,255,255,0,255,0,0,0,255,0]));
    { step = 42; continue; }
  case 5:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,255,0,255,0,0,0,0,0,0,0,255,0,255,0,255,0,255,0,255,0]));
    { step = 42; continue; }
  case 6:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,0,0,0,255,0,255,0,255,0,0,0,0,0,0,255,255,255,255,255,255,0,255,0,255,0]));
    { step = 42; continue; }
  case 7:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,255,255,0,255,255,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0]));
    { step = 42; continue; }
  case 8:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,255,0,255,0,0,0,0,0,0,0,0,255,0,0,0,255,0,255,0,0,0,255,0,0,0]));
    { step = 42; continue; }
  case 9:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,0,0,0,255,0,0,0,0,0,255,255,255,255,255,0,0,0,255,255,0,0,0,255,255,0]));
    { step = 42; continue; }
  case 10:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,255,255,255,255,255,255,0,255,255,0,0,0,0,0,0,255,0,255,0,0,255,255,255,0,0]));
    { step = 42; continue; }
  case 11:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,255,0,255,255,0,0,0,0,0,0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,0]));
    { step = 42; continue; }
  case 12:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,0,0,0,255,0,0,0,255,0,255,0,255,0,0,0,255,0,0,0,0]));
    { step = 42; continue; }
  case 13:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,0,0,0,255,0,255,0,255,0,0,0,255,0,0,0,255,0,255,0,255,0,0,0,255,0]));
    { step = 42; continue; }
  case 14:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,0,255,0,0,0,255,0,255,0,255,255,255,255,255,0,0,0,0,0,0]));
    { step = 42; continue; }
  case 15:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,0,0,0,0,255,255,0,0,0,255,0,255,0,0,255,0,0,255,0,255,255,255,255,255,0]));
    { step = 42; continue; }
  case 16:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,255,0,0]));
    { step = 42; continue; }
  case 17:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,255,0,0,0,255,0,255,0,255,0,0,0,255,0,255,0,255,0,0,0,255,0,0,0]));
    { step = 42; continue; }
  case 18:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,0,255,0,0,0,255,0,255,0,0,0,255,0,0,0,0,0,0,0,0]));
    { step = 42; continue; }
  case 19:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,255,255,255,255,255,0,0,0,255,255,0,0,0,255,255,0,0,0,255,255,255,255,255,255,0]));
    { step = 42; continue; }
  case 20:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,255,255,255,0,0,255,0,255,0,0,255,255,255,0,0,0,0,0,0,0]));
    { step = 42; continue; }
  case 21:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,255,0,0,255,255,255,0,255,0,0,0,255,0,0,255,255,0,255,0,255,255,0,0,255,0]));
    { step = 42; continue; }
  case 22:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,255,0,255,255,255,255,255,255,255,0,255,255,255,0,0,255,255,255,0,0,255,255,255,0,0]));
    { step = 42; continue; }
  case 23:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,255,255,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,0,255,0,255,0,0]));
    { step = 42; continue; }
  case 24:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,255,255,0,0,255,255,255,0,0,0,255,255,255,255,0,255,255,255,0,0,0,0,0,0,0]));
    { step = 42; continue; }
  case 25:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,255,0,0,0,255,255,255,0,255,255,255,255,255,0,255,255,255,0,0,255,0,255,0,0]));
    { step = 42; continue; }
  case 26:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,255,255,255,0,255,255,255,255,255,0,255,0,255,0,0,0,0,0,0,0]));
    { step = 42; continue; }
  case 27:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,255,0,255,255,255,255,255,255,255,0,0,255,0,0,255,255,255,255,255,255,255,0,255,255,0]));
    { step = 42; continue; }
  case 28:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,255,0,0,255,255,255,255,255,0,0,255,0,0,0,255,0,255,0,255,0,0,0,255,0]));
    { step = 42; continue; }
  case 29:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,255,255,255,0,255,0,255,0,255,255,255,255,255,255,255,255,255,255,255,255,0,255,0,255,0]));
    { step = 42; continue; }
  case 30:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,255,0,0,0,0,255,0,0,0,0,255,0,0,0,255,255,255,0,0,0,255,0,0,0]));
    { step = 42; continue; }
  case 31:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,255,0,0,0,0,255,0,0,0,0,255,0,0,0,0,255,255,255,0,0,255,0,255,0,0]));
    { step = 42; continue; }
  case 32:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,255,255,255,0,255,0,255,0,255,255,255,255,255,255,0,255,255,255,0,0,255,255,255,0,0]));
    { step = 42; continue; }
  case 33:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,255,255,255,0,255,255,255,255,255,0,0,255,0,0,255,0,255,0,0,255,255,255,0,0,0]));
    { step = 42; continue; }
  case 34:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,255,0,0,0,255,255,0,255,255,0,255,0,255,0,0,255,255,255,0,0,0,0,0,0,0]));
    { step = 42; continue; }
  case 35:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,0,255,0,0,255,0,255,0,0,255,255,255,255,0,255,255,0,255,0,255,255,255,255,0,0]));
    { step = 42; continue; }
  case 36:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,0,0,0,255,255,0,0,0,255,255,255,255,255,255,0,255,255,255,0,0,0,255,0,0,0]));
    { step = 42; continue; }
  case 37:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,255,0,0,0,0,255,0,0,0,0,255,0,0,255,255,255,0,0,255,255,255,0,0,0]));
    { step = 42; continue; }
  case 38:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,255,0,0,0,0,255,255,0,0,0,255,0,255,255,255,255,0,0,255,255,255,0,0,0]));
    { step = 42; continue; }
  case 39:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [255,0,255,0,255,255,0,255,0,255,255,255,255,255,255,0,0,255,0,0,0,0,255,0,0,0]));
    { step = 42; continue; }
  case 40:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,255,0,0,0,255,255,255,0,255,255,0,255,255,0,255,255,255,0,0,0,255,0,0,0]));
    { step = 42; continue; }
  case 41:
    r0 = pxsim.images.createImage(new pxsim.Image(5, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));
    { step = 42; continue; }
    r0 = undefined;
  case 42:
    return leave(s, r0)
  default: oops()
} } }
images_iconImage__P2283.info = {"start":9027,"length":13275,"line":280,"column":4,"endLine":537,"endColumn":5,"fileName":"pxt_modules/core/icons.ts","functionName":"iconImage","argumentNames":["i"]}

function images_iconImage__P2283_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: images_iconImage__P2283, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function pause__P2226(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = isNaN__P1984_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 18; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.arg0 = (20);
  case 1:
  case 2:
    setupResume(s, 4);
    pxsim.basic.pause(s.arg0);
    checkResumeConsumed();
    return;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
pause__P2226.info = {"start":737,"length":84,"line":23,"column":0,"endLine":26,"endColumn":1,"fileName":"pxt_modules/core/basic.ts","functionName":"pause","argumentNames":["ms"]}

function pause__P2226_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pause__P2226, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function isNaN__P1984(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 - 0);
    s.arg0 = (r0);
    r0 = (s.arg0 !== s.arg0);
    return leave(s, r0)
  default: oops()
} } }
isNaN__P1984.info = {"start":169,"length":80,"line":12,"column":0,"endLine":15,"endColumn":1,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"isNaN","argumentNames":["x"]}

function isNaN__P1984_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: isNaN__P1984, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function control_runInBackground__P2296(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.inBackground(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_runInBackground__P2296.info = {"start":316,"length":87,"line":15,"column":4,"endLine":17,"endColumn":5,"fileName":"pxt_modules/core/control.ts","functionName":"runInBackground","argumentNames":["a"]}

function control_runInBackground__P2296_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_runInBackground__P2296, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_proxyFinalize__P3556(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = globals.bus___3430.fields["proxyMode"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = jacdac_panic__P3432_mk(s);
    s.tmp_3.arg0 = "invalid proxy finalize";
    s.callLocIdx = 714; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = pxsim.control.dmesg("jacdac: dongle finalize");
    s.tmp_0 = jacdac_proxyLoop__P4329_mk(s);
    s.callLocIdx = 715; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_proxyFinalize__P3556.info = {"start":61462,"length":175,"line":1834,"column":4,"endLine":1838,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"proxyFinalize","argumentNames":[]}

function jacdac_proxyFinalize__P3556_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_proxyFinalize__P3556, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function jacdac_proxyLoop__P4329(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.statusPhase___4706 = undefined;
    s.sim___4707 = undefined;
    s.phase___4713 = undefined;
    s.r___4715 = undefined;
    s.g___4717 = undefined;
    s.b___4719 = undefined;
    s.tmp_0 = jacdac_EventSource_on__P3576_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.PACKET_PROCESS___3398;
    s.tmp_0.arg2 = jacdac_proxyLoop_inline__P4696;
    s.callLocIdx = 707; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.STATUS_EVENT___3404;
    s.tmp_0.arg2 = 200;
    s.callLocIdx = 708; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.statusPhase___4706 = (0);
    s.tmp_0 = jacdac_isSimulator__P3554_mk(s);
    s.callLocIdx = 709; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.sim___4707 = (r0);
  case 1:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 8; continue; }
    r0 = (s.statusPhase___4706 + 1);
    s.statusPhase___4706 = (r0);
    s.phase___4713 = (s.statusPhase___4706);
    r0 = pxsim_numops_toBoolDecr(s.sim___4707);
    if (!r0) { step = 2; continue; }
    r0 = 61440;
    { step = 3; continue; }
  case 2:
    r0 = 5632;
  case 3:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.r___4715 = (s.tmp_0);
    r0 = pxsim_numops_toBoolDecr(s.sim___4707);
    if (!r0) { step = 4; continue; }
    r0 = 61440;
    { step = 5; continue; }
  case 4:
    r0 = 1024;
  case 5:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.g___4717 = (s.tmp_0);
    s.b___4719 = (0);
    s.tmp_0 = Math_abs__P2019_mk(s);
    r0 = (s.phase___4713 & 31);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - 16);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 710; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.phase___4713 = (r0);
    r0 = (s.phase___4713 > 15);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.phase___4713 = (15);
  case 6:
  case 7:
    r0 = (s.r___4715 * s.phase___4713);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.r___4715 = (r0);
    r0 = (s.g___4717 * s.phase___4713);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.g___4717 = (r0);
    r0 = (s.b___4719 * s.phase___4713);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.b___4719 = (r0);
    s.tmp_0 = jacdac_setLed__P3565_mk(s);
    s.tmp_0.arg0 = s.r___4715;
    s.tmp_0.arg1 = s.g___4717;
    s.tmp_0.arg2 = s.b___4719;
    s.callLocIdx = 711; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 100;
    s.callLocIdx = 712; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    { step = 1; continue; }
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_proxyLoop__P4329.info = {"start":60344,"length":809,"line":1790,"column":4,"endLine":1819,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"proxyLoop","argumentNames":[]}

function jacdac_proxyLoop__P4329_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_proxyLoop__P4329, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  statusPhase___4706: undefined,
  sim___4707: undefined,
  phase___4713: undefined,
  r___4715: undefined,
  g___4717: undefined,
  b___4719: undefined,
} }





function jacdac_proxyLoop_inline__P4696(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.STATUS_EVENT___3404;
    s.tmp_0.arg2 = 201;
    s.callLocIdx = 706; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_proxyLoop_inline__P4696.info = {"start":60405,"length":92,"line":1791,"column":38,"endLine":1793,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_proxyLoop_inline__P4696_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_proxyLoop_inline__P4696, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function Math_abs__P2019(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (0 - s.arg0);
    { step = 2; continue; }
  case 1:
    r0 = s.arg0;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
Math_abs__P2019.info = {"start":16095,"length":77,"line":538,"column":4,"endLine":540,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"abs","argumentNames":["x"]}

function Math_abs__P2019_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_abs__P2019, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_EventSource_emit__P3578(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.useTry___4763 = undefined;
    s.listener___4765 = undefined;
    s.unnamed96___U2 = undefined;
    s.unnamed97___U3 = undefined;
    s.listener___4777 = undefined;
    s.unnamed98___U5 = undefined;
    s.unnamed99___U6 = undefined;
    s.handler___4784 = undefined;
    s.e___4792 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C3574_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = false;
    { step = 15; continue; }
  case 1:
  case 2:
    s.useTry___4763 = (false);
    s.listener___4765 = (undefined);
    r0 = s.arg0.fields["listeners"];
    s.unnamed96___U2 = (r0);
    s.unnamed97___U3 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed97___U3;
    r0 = pxsim_Array__length(s.unnamed96___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed96___U2, s.unnamed97___U3);
    s.listener___4765 = (r0);
    r0 = s.listener___4765.fields["key"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == globals.ERROR___3573);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    s.useTry___4763 = (true);
  case 4:
  case 5:
    r0 = (s.unnamed97___U3 + 1);
    s.unnamed97___U3 = (r0);
    { step = 3; continue; }
  case 6:
    s.unnamed96___U2 = (undefined);
    s.listener___4777 = (undefined);
    r0 = s.arg0.fields["listeners"];
    s.unnamed98___U5 = (r0);
    s.unnamed99___U6 = (0);
  case 7:
    s.tmp_0 = r0 = s.unnamed99___U6;
    r0 = pxsim_Array__length(s.unnamed98___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 14; continue; }
    r0 = pxsim_Array__getAt(s.unnamed98___U5, s.unnamed99___U6);
    s.listener___4777 = (r0);
    r0 = s.listener___4777.fields["key"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 === s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 12; continue; }
    r0 = s.listener___4777.fields["handler"];
    s.handler___4784 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.useTry___4763);
    if (!r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.beginTry(8);
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.handler___4784;
    s.tmp_0.arg0 = s.arg2;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 777; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 9; continue; }
  case 8:
    s.e___4792 = (undefined);
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___4792 = (r0);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.ERROR___3573;
    s.tmp_0.arg2 = s.e___4792;
    s.callLocIdx = 778; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
  case 9:
    { step = 11; continue; }
  case 10:
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.handler___4784;
    s.tmp_0.arg0 = s.arg2;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 779; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
  case 11:
  case 12:
  case 13:
    r0 = (s.unnamed99___U6 + 1);
    s.unnamed99___U6 = (r0);
    { step = 7; continue; }
  case 14:
    s.unnamed98___U5 = (undefined);
    r0 = true;
  case 15:
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_emit__P3578.info = {"start":2289,"length":748,"line":75,"column":8,"endLine":99,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"emit","argumentNames":["this","eventName","arg"]}

function jacdac_EventSource_emit__P3578_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_emit__P3578, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  useTry___4763: undefined,
  listener___4765: undefined,
  unnamed96___U2: undefined,
  unnamed97___U3: undefined,
  listener___4777: undefined,
  unnamed98___U5: undefined,
  unnamed99___U6: undefined,
  handler___4784: undefined,
  e___4792: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_EventSource_on__P3576(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C3574_VT)) failedCast(r0);
    s.tmp_0 = jacdac_EventSource_addListenerInternal__P4176_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.callLocIdx = 774; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = s.arg0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_on__P3576.info = {"start":576,"length":137,"line":21,"column":8,"endLine":24,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"on","argumentNames":["this","eventName","handler"]}

function jacdac_EventSource_on__P3576_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_on__P3576, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_EventSource_addListenerInternal__P4176(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.previous___4812 = undefined;
    s.listener___4829 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C3574_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = pxsim_pxtcore_mkAction(2, previous_inline__P4814);
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_4, 0, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_4, 1, s.arg2);
    s.tmp_5 = helpers_arrayFind__P2002_mk(s);
    r0 = s.arg0.fields["listeners"];
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = s.tmp_4;
    s.callLocIdx = 775; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
    s.previous___4812 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.previous___4812);
    if (!r0) { step = 5; continue; }
    { step = 7; continue; }
  case 5:
  case 6:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_EventListener__C3571_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_EventListener_constructor__P3572_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.callLocIdx = 776; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.listener___4829 = (s.tmp_0);
    r0 = s.arg0.fields["listeners"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.listener___4829);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_addListenerInternal__P4176.info = {"start":874,"length":529,"line":31,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"addListenerInternal","argumentNames":["this","eventName","handler"]}

function jacdac_EventSource_addListenerInternal__P4176_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_addListenerInternal__P4176, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  previous___4812: undefined,
  listener___4829: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function previous_inline__P4814(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["key"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === s.caps[0]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["handler"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
previous_inline__P4814.info = {"start":1125,"length":49,"line":38,"column":16,"endLine":38,"endColumn":65,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["l"]}

function previous_inline__P4814_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: previous_inline__P4814, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_EventListener_constructor__P3572(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventListener__C3571_VT)) failedCast(r0);
    r0 = (s.arg0).fields["key"] = (s.arg1);
    r0 = (s.arg0).fields["handler"] = (s.arg2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventListener_constructor__P3572.info = {"start":178,"length":161,"line":5,"column":8,"endLine":9,"endColumn":12,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["this","key","handler"]}

function jacdac_EventListener_constructor__P3572_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventListener_constructor__P3572, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arrayFind__P2002(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___4842 = undefined;
    s.i___4845 = undefined;
    s.v___4850 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___4842 = (r0);
    s.i___4845 = (0);
  case 1:
    r0 = (s.i___4845 < s.len___4842);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.arg0, s.i___4845);
    s.v___4850 = (r0);
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.v___4850;
    s.tmp_1.arg1 = s.i___4845;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 8; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.v___4850;
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = (s.i___4845 + 1);
    s.i___4845 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayFind__P2002.info = {"start":8018,"length":292,"line":271,"column":4,"endLine":278,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arrayFind","argumentNames":["arr","callbackfn"]}

function helpers_arrayFind__P2002_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayFind__P2002, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___4842: undefined,
  i___4845: undefined,
  v___4850: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_panic__P3432(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_error__P2380_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 443; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim_pxtcore.throwValue(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_panic__P3432.info = {"start":13159,"length":99,"line":372,"column":4,"endLine":375,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"panic","argumentNames":["message"]}

function jacdac_panic__P3432_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_panic__P3432, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function console_error__P2380(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P2377_mk(s);
    s.tmp_0.arg0 = 3;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 22; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_error__P2380.info = {"start":1077,"length":82,"line":45,"column":4,"endLine":47,"endColumn":5,"fileName":"pxt_modules/core/console.ts","functionName":"error","argumentNames":["text"]}

function console_error__P2380_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_error__P2380, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function console_add__P2377(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.text___4874 = undefined;
    s.i___4888 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 < globals.minPriority___2376);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 7; continue; }
  case 1:
  case 2:
    s.tmp_1 = console_inspect__P2383_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = 20;
    s.callLocIdx = 20; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.text___4874 = (r0);
    if ((s.text___4874) && (s.text___4874).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.text___4874);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.text___4874) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\n");
    s.text___4874 = (r0);
    r0 = pxsim.control.__log(s.arg0, s.text___4874);
    r0 = pxsim_numops_toBoolDecr(globals.listeners___3977);
    if (!r0) { step = 5; continue; }
    s.i___4888 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___4888;
    r0 = pxsim_Array__length(globals.listeners___3977);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = lambda_3_mk(s);
    r0 = pxsim_Array__getAt(globals.listeners___3977, s.i___4888);
    s.tmp_3.argL = r0;
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.text___4874;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 21; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    r0 = (s.i___4888 + 1);
    s.i___4888 = (r0);
    { step = 3; continue; }
  case 4:
  case 5:
  case 6:
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_add__P2377.info = {"start":508,"length":386,"line":25,"column":4,"endLine":35,"endColumn":5,"fileName":"pxt_modules/core/console.ts","functionName":"add","argumentNames":["priority","message"]}

function console_add__P2377_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_add__P2377, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  text___4874: undefined,
  i___4888: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_inspect__P2383(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.asArr___4919 = undefined;
    s.asString___4937 = undefined;
    s.keys___4949 = undefined;
    s.snipped___4953 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 17; continue; }
    { step = 16; continue; }
  case 1:
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == "number");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    { step = 17; continue; }
    { step = 15; continue; }
  case 2:
    r0 = pxsim_Array_.isArray(s.arg0);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 5; continue; }
    s.asArr___4919 = (s.arg0);
    r0 = pxsim_Array__length(s.asArr___4919);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = helpers_arrayJoin__P1994_mk(s);
    s.tmp_2.arg0 = s.asArr___4919;
    s.tmp_2.arg1 = ",";
    s.callLocIdx = 24; s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    { step = 17; continue; }
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    s.tmp_7 = helpers_arrayJoin__P1994_mk(s);
    s.tmp_8 = helpers_arraySlice__P2006_mk(s);
    s.tmp_8.arg0 = s.asArr___4919;
    s.tmp_8.arg1 = 0;
    s.tmp_8.arg2 = s.arg1;
    s.callLocIdx = 25; s.pc = 21; return s.tmp_8;
  case 21:
    r0 = s.retval;
    s.tmp_7.arg0 = r0;
    s.tmp_7.arg1 = ",";
    s.callLocIdx = 26; s.pc = 20; return s.tmp_7;
  case 20:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "...");
    { step = 17; continue; }
  case 4:
    { step = 14; continue; }
  case 5:
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_9, s.tmp_10);
    s.asString___4937 = (r0);
    r0 = (s.asString___4937 != "[object Object]");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 6:
    r0 = (s.asString___4937 != "[Object]");
  case 7:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = s.asString___4937;
    { step = 17; continue; }
  case 8:
  case 9:
    r0 = pxsim_pxtrt.keysOf(s.arg0);
    s.keys___4949 = (r0);
    r0 = pxsim_Array__length(s.keys___4949);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > s.arg1);
    s.snipped___4953 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.snipped___4953);
    if (!r0) { step = 10; continue; }
    s.tmp_0 = helpers_arraySlice__P2006_mk(s);
    s.tmp_0.arg0 = s.keys___4949;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 27; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.keys___4949 = (r0);
  case 10:
  case 11:
    r0 = pxsim_pxtcore_mkAction(1, console_inspect_inline__P4970);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_numops_toBoolDecr(s.snipped___4953);
    if (!r0) { step = 12; continue; }
    r0 = "\n    ...";
    { step = 13; continue; }
  case 12:
    r0 = pxsim_String_.mkEmpty();
  case 13:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_7 = helpers_arrayReduce__P2003_mk(s);
    s.tmp_7.arg0 = s.keys___4949;
    s.tmp_7.arg1 = s.tmp_0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7.arg2 = r0;
    s.callLocIdx = 28; s.pc = 25; return s.tmp_7;
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("{", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "\n}");
    { step = 17; continue; }
  case 14:
  case 15:
  case 16:
    r0 = undefined;
  case 17:
    return leave(s, r0)
  default: oops()
} } }
console_inspect__P2383.info = {"start":2002,"length":1165,"line":75,"column":4,"endLine":107,"endColumn":5,"fileName":"pxt_modules/core/console.ts","functionName":"inspect","argumentNames":["obj","maxElements"]}

function console_inspect__P2383_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_inspect__P2383, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  asArr___4919: undefined,
  asString___4937: undefined,
  keys___4949: undefined,
  snipped___4953: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_inspect_inline__P4970(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 1);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("\n    ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ": ");
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.arg1);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_6);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
console_inspect_inline__P4970.info = {"start":3003,"length":61,"line":101,"column":16,"endLine":101,"endColumn":77,"fileName":"pxt_modules/core/console.ts","functionName":"inline","argumentNames":["prev","currKey"]}

function console_inspect_inline__P4970_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_inspect_inline__P4970, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayReduce__P2003(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___4997 = undefined;
    s.i___5000 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___4997 = (r0);
    s.i___5000 = (0);
  case 1:
    r0 = (s.i___5000 < s.len___4997);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = lambda_4_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.arg2;
    r0 = pxsim_Array__getAt(s.arg0, s.i___5000);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.i___5000;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 9; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.arg2 = (r0);
    r0 = (s.i___5000 + 1);
    s.i___5000 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.arg2;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayReduce__P2003.info = {"start":8316,"length":317,"line":280,"column":4,"endLine":286,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arrayReduce","argumentNames":["arr","callbackfn","initialValue"]}

function helpers_arrayReduce__P2003_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayReduce__P2003, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___4997: undefined,
  i___5000: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arraySlice__P2006(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___5018 = undefined;
    s.len___5020 = undefined;
    s.i___5054 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___5018 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___5020 = (r0);
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.arg1 = (0);
    { step = 4; continue; }
  case 1:
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = Math_max__P2021_mk(s);
    r0 = (s.len___5020 + s.arg1);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.callLocIdx = 10; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.arg1 = (r0);
  case 2:
  case 3:
  case 4:
    r0 = (s.arg1 > s.len___5020);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.res___5018;
    { step = 15; continue; }
  case 5:
  case 6:
    r0 = (s.arg2 === undefined);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    s.arg2 = (s.len___5020);
    { step = 10; continue; }
  case 7:
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = (s.len___5020 + s.arg2);
    s.arg2 = (r0);
  case 8:
  case 9:
  case 10:
    r0 = (s.arg2 > s.len___5020);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.arg2 = (s.len___5020);
  case 11:
  case 12:
    s.i___5054 = (s.arg1);
  case 13:
    r0 = (s.i___5054 < s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_1 = r0 = s.res___5018;
    r0 = pxsim_Array__getAt(s.arg0, s.i___5054);
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    r0 = (s.i___5054 + 1);
    s.i___5054 = (r0);
    { step = 13; continue; }
  case 14:
    r0 = s.res___5018;
  case 15:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySlice__P2006.info = {"start":9027,"length":690,"line":303,"column":4,"endLine":328,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arraySlice","argumentNames":["arr","start","end"]}

function helpers_arraySlice__P2006_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySlice__P2006, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  res___5018: undefined,
  len___5020: undefined,
  i___5054: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function Math_max__P2021(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 >= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
Math_max__P2021.info = {"start":16564,"length":105,"line":556,"column":4,"endLine":559,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"max","argumentNames":["a","b"]}

function Math_max__P2021_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_max__P2021, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayJoin__P1994(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5086 = undefined;
    s.len___5087 = undefined;
    s.i___5090 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 === null);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.arg1 = (",");
  case 3:
  case 4:
    r0 = pxsim_String_.mkEmpty();
    s.r___5086 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___5087 = (r0);
    s.i___5090 = (0);
  case 5:
    r0 = (s.i___5090 < s.len___5087);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = (s.i___5090 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_1;
    { step = 7; continue; }
  case 6:
    r0 = s.arg1;
  case 7:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 8; continue; }
    if ((s.r___5086) && (s.r___5086).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.r___5086);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___5086) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_3 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.r___5086 = (r0);
  case 8:
  case 9:
    r0 = pxsim_Array__getAt(s.arg0, s.i___5090);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 10:
    r0 = pxsim_Array__getAt(s.arg0, s.i___5090);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === null);
  case 11:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_String_.mkEmpty();
    { step = 13; continue; }
  case 12:
    r0 = pxsim_Array__getAt(s.arg0, s.i___5090);
  case 13:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    if ((s.r___5086) && (s.r___5086).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.r___5086);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___5086) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.r___5086 = (r0);
    r0 = (s.i___5090 + 1);
    s.i___5090 = (r0);
    { step = 5; continue; }
  case 14:
    r0 = s.r___5086;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayJoin__P1994.info = {"start":4133,"length":432,"line":157,"column":4,"endLine":170,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arrayJoin","argumentNames":["arr","sep"]}

function helpers_arrayJoin__P1994_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayJoin__P1994, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  r___5086: undefined,
  len___5087: undefined,
  i___5090: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_checkProxy__P3555(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = settings_writeString__P2792_mk(s);
    s.tmp_0.arg0 = globals.JACDAC_PROXY_SETTING_LATE___3558;
    s.tmp_0.arg1 = "1";
    s.callLocIdx = 713; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = globals.bus___3430.fields["proxyMode"];
    return leave(s, r0)
  default: oops()
} } }
jacdac_checkProxy__P3555.info = {"start":61323,"length":133,"line":1829,"column":4,"endLine":1832,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"checkProxy","argumentNames":[]}

function jacdac_checkProxy__P3555_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_checkProxy__P3555, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function settings_writeString__P2792(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = settings_writeBuffer__P2791_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBufferFromUTF8(s.arg1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 75; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeString__P2792.info = {"start":1895,"length":125,"line":75,"column":4,"endLine":77,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"writeString","argumentNames":["key","value"]}

function settings_writeString__P2792_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeString__P2792, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function settings_writeBuffer__P2791(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._set(s.arg0, s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.settings._userClean();
    r0 = pxsim_pxtrt.panic(920);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeBuffer__P2791.info = {"start":1538,"length":290,"line":63,"column":4,"endLine":70,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"writeBuffer","argumentNames":["key","value"]}

function settings_writeBuffer__P2791_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeBuffer__P2791, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_BuzzerServer_constructor__P3903(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_BuzzerServer__C3902_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 458731991;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 951; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BuzzerServer_constructor__P3903.info = {"start":82,"length":62,"line":2,"column":8,"endLine":4,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitBuzzer.ts","functionName":"inline","argumentNames":["this"]}

function servers_BuzzerServer_constructor__P3903_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BuzzerServer_constructor__P3903, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_Server_constructor__P3451(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_EventSource_constructor__P3575_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 445; s.pc = 13; return s.tmp_2;
  case 13:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 11; continue; }
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_instanceName_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "instanceName");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["instanceName"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["instanceName"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 446; s.pc = 14; return s.tmp_2; }
    }
  case 14:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["instanceName"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_variant_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "variant");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["variant"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["variant"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 447; s.pc = 15; return s.tmp_2; }
    }
  case 15:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["variant"] = (s.tmp_1);
    s.tmp_1 = if_statusCode_1_mk(s);
    s.tmp_1.arg0 = s.arg2;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "statusCode");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["statusCode"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["statusCode"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 448; s.pc = 16; return s.tmp_1; }
    }
  case 16:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = r0 = s.arg0;
    s.tmp_5 = if_statusCode_1_mk(s);
    s.tmp_5.arg0 = s.arg2;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "statusCode");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["statusCode"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["statusCode"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 449; s.pc = 17; return s.tmp_5; }
    }
  case 17:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 65535);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["_statusCode"] = (s.tmp_3);
  case 1:
  case 2:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_intensityPackFormat_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "intensityPackFormat");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["intensityPackFormat"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["intensityPackFormat"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 450; s.pc = 18; return s.tmp_2; }
    }
  case 18:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["intensityPackFormat"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_valuePackFormat_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "valuePackFormat");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["valuePackFormat"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["valuePackFormat"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 451; s.pc = 19; return s.tmp_2; }
    }
  case 19:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["valuePackFormat"] = (s.tmp_1);
    r0 = s.arg0.fields["intensityPackFormat"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = if_intensity_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "intensity");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["intensity"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["intensity"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 452; s.pc = 20; return s.tmp_2; }
    }
  case 20:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_1;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    { step = 6; continue; }
  case 5:
    r0 = undefined;
  case 6:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = (s.arg0).fields["_intensity"] = (s.tmp_4);
    r0 = s.arg0.fields["valuePackFormat"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_2 = if_value_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "value");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["value"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["value"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 453; s.pc = 21; return s.tmp_2; }
    }
  case 21:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_1;
    { step = 8; continue; }
  case 7:
    r0 = 0;
  case 8:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    { step = 10; continue; }
  case 9:
    r0 = undefined;
  case 10:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = (s.arg0).fields["_value"] = (s.tmp_4);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_calibrate_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "calibrate");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["calibrate"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["calibrate"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 454; s.pc = 22; return s.tmp_2; }
    }
  case 22:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["calibrate"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_constants_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "constants");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["constants"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["constants"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 455; s.pc = 23; return s.tmp_2; }
    }
  case 23:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["constants"] = (s.tmp_1);
  case 11:
  case 12:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_constructor__P3451.info = {"start":14469,"length":889,"line":417,"column":8,"endLine":439,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","serviceClass","options"]}

function jacdac_Server_constructor__P3451_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_constructor__P3451, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_EventSource_constructor__P3575(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C3574_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_constructor__P3575.info = {"start":550,"length":16,"line":19,"column":8,"endLine":19,"endColumn":24,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_EventSource_constructor__P3575_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_constructor__P3575, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function servers_SoundPlayerServer_constructor__P3880(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundPlayerServer__C3879_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 335795000;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 891; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundPlayerServer_constructor__P3880.info = {"start":87,"length":68,"line":2,"column":8,"endLine":4,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitPlay.ts","functionName":"inline","argumentNames":["this"]}

function servers_SoundPlayerServer_constructor__P3880_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundPlayerServer_constructor__P3880, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function lightLevelServer_inline__P5228(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.input.lightLevel();
    s.tmp_0 = r0;
    r0 = (s.tmp_0 / 255);
    return leave(s, r0)
  default: oops()
} } }
lightLevelServer_inline__P5228.info = {"start":225,"length":32,"line":5,"column":8,"endLine":5,"endColumn":40,"fileName":"pxt_modules/jacdac-microbit/microbitLightLevel.ts","functionName":"inline","argumentNames":[]}

function lightLevelServer_inline__P5228_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: lightLevelServer_inline__P5228, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function readingError_inline__P5232(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = 0.05;
    return leave(s, r0)
  default: oops()
} } }
readingError_inline__P5232.info = {"start":330,"length":10,"line":8,"column":26,"endLine":8,"endColumn":36,"fileName":"pxt_modules/jacdac-microbit/microbitLightLevel.ts","functionName":"inline","argumentNames":[]}

function readingError_inline__P5232_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: readingError_inline__P5232, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_createSimpleSensorServer__P3252(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_SimpleSensorServer__C3246_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_SimpleSensorServer_constructor__P3249_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.tmp_1.arg3 = s.arg2;
    s.tmp_1.arg4 = s.arg3;
    s.callLocIdx = 273; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_createSimpleSensorServer__P3252.info = {"start":6173,"length":350,"line":183,"column":4,"endLine":195,"endColumn":5,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"createSimpleSensorServer","argumentNames":["serviceClass","packFormat","stateReader","options"]}

function jacdac_createSimpleSensorServer__P3252_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_createSimpleSensorServer__P3252, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_SimpleSensorServer_constructor__P3249(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SimpleSensorServer__C3246_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_SensorServer_constructor__P3239_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = s.arg4;
    s.callLocIdx = 262; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
    r0 = (s.arg0).fields["packFormat"] = (s.arg2);
    r0 = (s.arg0).fields["stateReader"] = (s.arg3);
    r0 = pxsim_numops_toBoolDecr(s.arg4);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = if_minReading_1_mk(s);
    s.tmp_0.arg0 = s.arg4;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "minReading");
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["minReading"];
      if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["minReading"]; }
      else if (!s.tmp_0.fn.isGetter) { s.retval = bind(s.tmp_0); }
     else { s.callLocIdx = 263; s.pc = 8; return s.tmp_0; }
    }
  case 8:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["minReading"] = (s.tmp_1);
    r0 = pxsim_numops_toBoolDecr(s.arg4);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = if_maxReading_1_mk(s);
    s.tmp_0.arg0 = s.arg4;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "maxReading");
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["maxReading"];
      if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["maxReading"]; }
      else if (!s.tmp_0.fn.isGetter) { s.retval = bind(s.tmp_0); }
     else { s.callLocIdx = 264; s.pc = 9; return s.tmp_0; }
    }
  case 9:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    r0 = undefined;
  case 4:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["maxReading"] = (s.tmp_1);
    r0 = pxsim_numops_toBoolDecr(s.arg4);
    if (!r0) { step = 5; continue; }
    s.tmp_0 = if_readingError_1_mk(s);
    s.tmp_0.arg0 = s.arg4;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "readingError");
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["readingError"];
      if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["readingError"]; }
      else if (!s.tmp_0.fn.isGetter) { s.retval = bind(s.tmp_0); }
     else { s.callLocIdx = 265; s.pc = 10; return s.tmp_0; }
    }
  case 10:
    r0 = s.retval;
    { step = 6; continue; }
  case 5:
    r0 = undefined;
  case 6:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["readingError"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SimpleSensorServer_constructor__P3249.info = {"start":4593,"length":530,"line":136,"column":8,"endLine":149,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"inline","argumentNames":["this","serviceClass","packFormat","stateReader","options"]}

function jacdac_SimpleSensorServer_constructor__P3249_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SimpleSensorServer_constructor__P3249, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_SensorServer_constructor__P3239(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorServer__C3236_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = s.arg2;
    s.callLocIdx = 240; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    r0 = (s.arg0).fields["streamingSamples"] = (0);
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = if_streamingInterval_1_mk(s);
    s.tmp_0.arg0 = s.arg2;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "streamingInterval");
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["streamingInterval"];
      if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["streamingInterval"]; }
      else if (!s.tmp_0.fn.isGetter) { s.retval = bind(s.tmp_0); }
     else { s.callLocIdx = 241; s.pc = 6; return s.tmp_0; }
    }
  case 6:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_1;
    { step = 4; continue; }
  case 3:
    r0 = 100;
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = (s.arg0).fields["streamingInterval"] = (s.tmp_2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_constructor__P3239.info = {"start":352,"length":266,"line":12,"column":8,"endLine":18,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"inline","argumentNames":["this","serviceClass","options"]}

function jacdac_SensorServer_constructor__P3239_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_constructor__P3239, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function servers_ScreenServer_constructor__P3873(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_ScreenServer__C3872_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 286070091;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 874; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_ScreenServer_constructor__P3873.info = {"start":82,"length":66,"line":2,"column":8,"endLine":4,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitScreen.ts","functionName":"inline","argumentNames":["this"]}

function servers_ScreenServer_constructor__P3873_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_ScreenServer_constructor__P3873, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function servers_RadioServer_constructor__P3897(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    r0 = (s.arg0).fields["enabled"] = (false);
    r0 = (s.arg0).fields["group"] = (1);
    r0 = (s.arg0).fields["transmissionPower"] = (6);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 449414863;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 905; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_constructor__P3897.info = {"start":154,"length":65,"line":6,"column":8,"endLine":8,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"inline","argumentNames":["this"]}

function servers_RadioServer_constructor__P3897_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_constructor__P3897, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function servers_RadioServer_start__P3898(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_start__P3468_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 906; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = s.arg0.fields["group"];
    s.tmp_0 = r0;
    r0 = pxsim.radio.setGroup(s.tmp_0);
    r0 = s.arg0.fields["transmissionPower"];
    s.tmp_0 = r0;
    r0 = pxsim.radio.setTransmitPower(s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_RadioServer_start_inline__P5315);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = radio_onReceivedBuffer__P3624_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 908; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, servers_RadioServer_start_inline__P5320);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = radio_onReceivedString__P3623_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 910; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, servers_RadioServer_start_inline__P5325);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = radio_onReceivedNumber__P3621_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 912; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, servers_RadioServer_start_inline__P5330);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = radio_onReceivedValue__P3622_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 914; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_start__P3898.info = {"start":229,"length":522,"line":10,"column":8,"endLine":22,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"start","argumentNames":["this"]}

function servers_RadioServer_start__P3898_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_start__P3898, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function servers_RadioServer_start_inline__P5315(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = servers_RadioServer_handleReceivedBuffer__P4427_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 907; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_start_inline__P5315.info = {"start":398,"length":37,"line":14,"column":35,"endLine":14,"endColumn":72,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"inline","argumentNames":["buf"]}

function servers_RadioServer_start_inline__P5315_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_start_inline__P5315, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_RadioServer_start_inline__P5320(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = servers_RadioServer_handleReceivedString__P4428_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 909; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_start_inline__P5320.info = {"start":472,"length":37,"line":15,"column":35,"endLine":15,"endColumn":72,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"inline","argumentNames":["str"]}

function servers_RadioServer_start_inline__P5320_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_start_inline__P5320, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_RadioServer_start_inline__P5325(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = servers_RadioServer_handleReceivedNumber__P4429_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    r0 = pxsim_String_.mkEmpty();
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 911; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_start_inline__P5325.info = {"start":546,"length":61,"line":16,"column":35,"endLine":17,"endColumn":52,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"inline","argumentNames":["value"]}

function servers_RadioServer_start_inline__P5325_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_start_inline__P5325, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_RadioServer_start_inline__P5330(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = servers_RadioServer_handleReceivedNumber__P4429_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 913; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_start_inline__P5330.info = {"start":656,"length":71,"line":19,"column":34,"endLine":20,"endColumn":54,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"inline","argumentNames":["name","value"]}

function servers_RadioServer_start_inline__P5330_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_start_inline__P5330, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_onReceivedValue__P3622(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = radio_init__P4371_mk(s);
    s.callLocIdx = 792; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    globals.onReceivedValueHandler___4368 = (s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_onReceivedValue__P3622.info = {"start":4085,"length":135,"line":112,"column":4,"endLine":115,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"onReceivedValue","argumentNames":["cb"]}

function radio_onReceivedValue__P3622_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_onReceivedValue__P3622, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function radio_init__P4371(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.initialized___4366);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    globals.initialized___4366 = (true);
    r0 = pxsim.radio.onDataReceived(radio_handleDataReceived__P4372);
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_init__P4371.info = {"start":1998,"length":128,"line":56,"column":4,"endLine":60,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"init","argumentNames":[]}

function radio_init__P4371_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_init__P4371, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function radio_handleDataReceived__P4372(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buffer___5345 = undefined;
    r0 = pxsim.radio.readRawPacket();
    s.buffer___5345 = (r0);
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.buffer___5345);
    if (!r0) { step = 17; continue; }
    s.tmp_0 = radio_RadioPacket_getPacket__P3628_mk(s);
    s.tmp_0.arg0 = s.buffer___5345;
    s.callLocIdx = 780; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    globals.lastPacket___3620 = (r0);
    r0 = globals.lastPacket___3620.fields["data"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 0);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_0;
    { step = 16; continue; }
  case 2:
  case 3:
    r0 = pxsim_numops_toBoolDecr(globals.onReceivedNumberHandler___4367);
    if (!r0) { step = 4; continue; }
    s.tmp_2 = lambda_2_mk(s);
    s.tmp_2.argL = globals.onReceivedNumberHandler___4367;
    s.tmp_3 = radio_RadioPacket_numberPayload__P3638_mk(s);
    s.tmp_3.arg0 = globals.lastPacket___3620;
    s.callLocIdx = 782; s.pc = 20; return s.tmp_3;
  case 20:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.callLocIdx = 783; s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
  case 4:
  case 5:
    { step = 16; continue; }
  case 6:
  case 7:
    r0 = pxsim_numops_toBoolDecr(globals.onReceivedValueHandler___4368);
    if (!r0) { step = 8; continue; }
    s.tmp_0 = lambda_3_mk(s);
    s.tmp_0.argL = globals.onReceivedValueHandler___4368;
    s.tmp_1 = radio_RadioPacket_stringPayload__P3636_mk(s);
    s.tmp_1.arg0 = globals.lastPacket___3620;
    s.callLocIdx = 784; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_2 = radio_RadioPacket_numberPayload__P3638_mk(s);
    s.tmp_2.arg0 = globals.lastPacket___3620;
    s.callLocIdx = 785; s.pc = 23; return s.tmp_2;
  case 23:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 786; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
  case 8:
  case 9:
    { step = 16; continue; }
  case 10:
    r0 = pxsim_numops_toBoolDecr(globals.onReceivedBufferHandler___4370);
    if (!r0) { step = 11; continue; }
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = globals.onReceivedBufferHandler___4370;
    s.tmp_1 = radio_RadioPacket_bufferPayload__P3640_mk(s);
    s.tmp_1.arg0 = globals.lastPacket___3620;
    s.callLocIdx = 787; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 788; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
  case 11:
  case 12:
    { step = 16; continue; }
  case 13:
    r0 = pxsim_numops_toBoolDecr(globals.onReceivedStringHandler___4369);
    if (!r0) { step = 14; continue; }
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = globals.onReceivedStringHandler___4369;
    s.tmp_1 = radio_RadioPacket_stringPayload__P3636_mk(s);
    s.tmp_1.arg0 = globals.lastPacket___3620;
    s.callLocIdx = 789; s.pc = 27; return s.tmp_1;
  case 27:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 790; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
  case 14:
  case 15:
  case 16:
    r0 = pxsim.radio.readRawPacket();
    s.buffer___5345 = (r0);
    { step = 1; continue; }
  case 17:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_handleDataReceived__P4372.info = {"start":2132,"length":1189,"line":62,"column":4,"endLine":89,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"handleDataReceived","argumentNames":[]}

function radio_handleDataReceived__P4372_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_handleDataReceived__P4372, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buffer___5345: undefined,
} }





function radio_RadioPacket_bufferPayload__P3640(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___5384 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 9);
    s.len___5384 = (r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 10, s.len___5384);
    return leaveAccessor(s, r0)
  default: oops()
} } }
radio_RadioPacket_bufferPayload__P3640.info = {"start":8841,"length":155,"line":251,"column":8,"endLine":254,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"bufferPayload","argumentNames":["this"]}
radio_RadioPacket_bufferPayload__P3640.isGetter = true;

function radio_RadioPacket_bufferPayload__P3640_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_bufferPayload__P3640, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  len___5384: undefined,
  arg0: undefined,
} }





function radio_RadioPacket_stringPayload__P3636(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.offset___5399 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    s.tmp_0 = radio_getStringOffset__P4376_mk(s);
    r0 = s.arg0.fields["data"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 0);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 798; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.offset___5399 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.offset___5399);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["data"];
    s.tmp_1 = r0;
    r0 = (s.offset___5399 + 1);
    s.tmp_2 = r0;
    r0 = s.arg0.fields["data"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, s.offset___5399);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, s.tmp_2, s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_0);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    return leaveAccessor(s, r0)
  default: oops()
} } }
radio_RadioPacket_stringPayload__P3636.info = {"start":7264,"length":201,"line":212,"column":8,"endLine":215,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"stringPayload","argumentNames":["this"]}
radio_RadioPacket_stringPayload__P3636.isGetter = true;

function radio_RadioPacket_stringPayload__P3636_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_stringPayload__P3636, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  offset___5399: undefined,
  arg0: undefined,
} }





function radio_getStringOffset__P4376(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 1:
    r0 = 9;
    { step = 5; continue; }
  case 2:
    r0 = 13;
    { step = 5; continue; }
  case 3:
    r0 = 17;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
    { step = 5; continue; }
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
radio_getStringOffset__P4376.info = {"start":13160,"length":421,"line":381,"column":4,"endLine":392,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"getStringOffset","argumentNames":["packetType"]}

function radio_getStringOffset__P4376_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_getStringOffset__P4376, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function radio_RadioPacket_numberPayload__P3638(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 0);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 5, 9);
    { step = 6; continue; }
  case 3:
  case 4:
    r0 = s.arg0.fields["data"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 14, 9);
    { step = 6; continue; }
  case 5:
    r0 = undefined;
  case 6:
    return leaveAccessor(s, r0)
  default: oops()
} } }
radio_RadioPacket_numberPayload__P3638.info = {"start":7852,"length":469,"line":226,"column":8,"endLine":236,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"numberPayload","argumentNames":["this"]}
radio_RadioPacket_numberPayload__P3638.isGetter = true;

function radio_RadioPacket_numberPayload__P3638_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_numberPayload__P3638, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function radio_RadioPacket_packetType__P3631(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
radio_RadioPacket_packetType__P3631.info = {"start":6783,"length":61,"line":192,"column":8,"endLine":194,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"packetType","argumentNames":["this"]}
radio_RadioPacket_packetType__P3631.isGetter = true;

function radio_RadioPacket_packetType__P3631_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_packetType__P3631, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function radio_RadioPacket_getPacket__P3628(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkClassInstance(radio_RadioPacket__C3627_VT);
    s.tmp_2 = r0;
    s.tmp_3 = radio_RadioPacket_constructor__P4373_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.arg0;
    s.callLocIdx = 795; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    r0 = s.tmp_2;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
radio_RadioPacket_getPacket__P3628.info = {"start":6162,"length":168,"line":172,"column":8,"endLine":176,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"getPacket","argumentNames":["data"]}

function radio_RadioPacket_getPacket__P3628_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_getPacket__P3628, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function radio_RadioPacket_constructor__P4373(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = (s.arg0).fields["data"] = (s.arg1);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim.control.createBuffer(36);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["data"] = (s.tmp_3);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_RadioPacket_constructor__P4373.info = {"start":6509,"length":146,"line":184,"column":8,"endLine":186,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"inline","argumentNames":["this","data"]}

function radio_RadioPacket_constructor__P4373_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_constructor__P4373, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_RadioServer_handleReceivedNumber__P4429(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.deviceSerialNumber___5471 = undefined;
    s.rssi___5474 = undefined;
    s.time___5477 = undefined;
    s.payload___5480 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_0 = radio_receivedSerial__P3663_mk(s);
    s.callLocIdx = 936; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.deviceSerialNumber___5471 = (r0);
    s.tmp_0 = radio_receivedSignalStrength__P3669_mk(s);
    s.callLocIdx = 937; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.rssi___5474 = (r0);
    s.tmp_0 = radio_receivedTime__P3666_mk(s);
    s.callLocIdx = 938; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.time___5477 = (r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.time___5477);
    r0 = pxsim_Array__push(s.tmp_0, s.deviceSerialNumber___5471);
    r0 = pxsim_Array__push(s.tmp_0, s.rssi___5474);
    r0 = pxsim_Array__push(s.tmp_0, s.arg2);
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_1 = jacdac_jdpack__P2934_mk(s);
    s.tmp_1.arg0 = "u32 u32 i8 x[3] f64 s";
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 939; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.payload___5480 = (r0);
    s.tmp_0 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_1.arg0 = 145;
    s.tmp_1.arg1 = s.payload___5480;
    s.callLocIdx = 940; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 941; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_handleReceivedNumber__P4429.info = {"start":3715,"length":637,"line":103,"column":8,"endLine":120,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"handleReceivedNumber","argumentNames":["this","name","data"]}

function servers_RadioServer_handleReceivedNumber__P4429_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_handleReceivedNumber__P4429, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  deviceSerialNumber___5471: undefined,
  rssi___5474: undefined,
  time___5477: undefined,
  payload___5480: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket_from__P2883(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___5495 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C2877_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDPacket_constructor__P4136_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 101; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.p___5495 = (s.tmp_0);
    s.tmp_0 = r0 = s.p___5495;
    r0 = pxsim.control.createBuffer(16);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_header"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDPacket_data__P2910_mk(s);
    s.tmp_0.arg0 = s.p___5495;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 102; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_serviceCommand__P2902_mk(s);
    s.tmp_0.arg0 = s.p___5495;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 103; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = s.p___5495;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_from__P2883.info = {"start":2032,"length":252,"line":56,"column":8,"endLine":62,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"from","argumentNames":["serviceCommand","data"]}

function jacdac_JDPacket_from__P2883_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_from__P2883, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  p___5495: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_serviceCommand__P2902(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 4, 14, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceCommand__P2902.info = {"start":5364,"length":110,"line":159,"column":8,"endLine":161,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceCommand","argumentNames":["this","cmd"]}

function jacdac_JDPacket_serviceCommand__P2902_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceCommand__P2902, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_serviceCommand__P2901(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 14);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceCommand__P2901.info = {"start":5246,"length":109,"line":156,"column":8,"endLine":158,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceCommand","argumentNames":["this"]}
jacdac_JDPacket_serviceCommand__P2901.isGetter = true;

function jacdac_JDPacket_serviceCommand__P2901_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceCommand__P2901, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_data__P2910(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.createBuffer(0);
    s.arg1 = (r0);
  case 1:
  case 2:
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 236);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.throwValue("packet data too big");
  case 3:
  case 4:
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, 12, s.tmp_3);
    r0 = (s.arg0).fields["_data"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_data__P2910.info = {"start":6424,"length":257,"line":200,"column":8,"endLine":206,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"data","argumentNames":["this","buf"]}

function jacdac_JDPacket_data__P2910_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_data__P2910, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_data__P2909(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_data"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_data__P2909.info = {"start":6354,"length":60,"line":196,"column":8,"endLine":198,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"data","argumentNames":["this"]}
jacdac_JDPacket_data__P2909.isGetter = true;

function jacdac_JDPacket_data__P2909_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_data__P2909, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDPacket_constructor__P4136(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["timestamp"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_constructor__P4136.info = {"start":1703,"length":79,"line":45,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JDPacket_constructor__P4136_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_constructor__P4136, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Server_sendReport__P4185(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_serviceIndex__P2899_mk(s);
    s.tmp_2.arg0 = s.arg1;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 476; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendReport__P2924_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_1.arg0 = globals.bus___3430;
    s.callLocIdx = 477; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 478; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendReport__P4185.info = {"start":19232,"length":190,"line":566,"column":8,"endLine":570,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendReport","argumentNames":["this","pkt"]}

function jacdac_Server_sendReport__P4185_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendReport__P4185, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_selfDevice__P3418(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = s.arg0.fields["_myDevice"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Device__C3525_VT);
    s.tmp_3 = r0;
    s.tmp_4 = jacdac_Device_constructor__P3529_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    r0 = pxsim.control.deviceLongSerialNumber();
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_5);
    s.tmp_4.arg1 = r0;
    r0 = pxsim.control.createBuffer(4);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 364; s.pc = 3; return s.tmp_4;
  case 3:
    r0 = s.retval;
    r0 = (s.arg0).fields["_myDevice"] = (s.tmp_3);
  case 1:
  case 2:
    r0 = s.arg0.fields["_myDevice"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Bus_selfDevice__P3418.info = {"start":3096,"length":273,"line":101,"column":8,"endLine":109,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"selfDevice","argumentNames":["this"]}
jacdac_Bus_selfDevice__P3418.isGetter = true;

function jacdac_Bus_selfDevice__P3418_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_selfDevice__P3418, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_Device_constructor__P3529(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = (s.arg0).fields["deviceId"] = (s.arg1);
    r0 = (s.arg0).fields["services"] = (s.arg2);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["clients"] = (s.tmp_3);
    s.tmp_4 = jacdac_EventSource_constructor__P3575_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 597; s.pc = 1; return s.tmp_4;
  case 1:
    r0 = s.retval;
    r0 = globals.bus___3430.fields["devices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_constructor__P3529.info = {"start":43304,"length":128,"line":1307,"column":8,"endLine":1310,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","deviceId","services"]}

function jacdac_Device_constructor__P3529_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_constructor__P3529, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket__sendReport__P2924(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_deviceIdentifier__P2892_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = s.arg1.fields["deviceId"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 152; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCore__P2923_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 153; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendReport__P2924.info = {"start":9696,"length":143,"line":299,"column":8,"endLine":303,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendReport","argumentNames":["this","dev"]}

function jacdac_JDPacket__sendReport__P2924_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendReport__P2924, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendCore__P2923(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 12);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 != s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_5 = jacdac_panic__P3432_mk(s);
    s.tmp_5.arg0 = "packet size mismatch";
    s.callLocIdx = 149; s.pc = 3; return s.tmp_5;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    s.tmp_0 = jacdac___physSendPacket__P2815_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 150; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_Bus_processPacket__P3428_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 151; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCore__P2923.info = {"start":9437,"length":249,"line":292,"column":8,"endLine":297,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCore","argumentNames":["this"]}

function jacdac_JDPacket__sendCore__P2923_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCore__P2923, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_Bus_processPacket__P3428(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.devId___5616 = undefined;
    s.multiCommandClass___5619 = undefined;
    s.crc___5631 = undefined;
    s.ack___5634 = undefined;
    s.h___5654 = undefined;
    s.unnamed86___U5 = undefined;
    s.unnamed87___U6 = undefined;
    s.h___5682 = undefined;
    s.dev___5697 = undefined;
    s.pktRestartCounter___5715 = undefined;
    s.matches___5758 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 4, 8);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    s.devId___5616 = (r0);
    s.tmp_0 = jacdac_JDPacket_multicommandClass__P2894_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 394; s.pc = 50; return s.tmp_0;
  case 50:
    r0 = s.retval;
    s.multiCommandClass___5619 = (r0);
    s.tmp_1 = jacdac_JDPacket_requiresAck__P2896_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 395; s.pc = 51; return s.tmp_1;
  case 51:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = jacdac_JDPacket_requiresAck__P2897_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_2.arg1 = false;
    s.callLocIdx = 396; s.pc = 52; return s.tmp_2;
  case 52:
    r0 = s.retval;
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_3, 4, 8);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_2);
    s.tmp_1 = r0;
    s.tmp_5 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 398; s.pc = 53; return s.tmp_5;
  case 53:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_4 = r0;
    r0 = (s.tmp_1 == s.tmp_4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg1.fields["_header"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 4, 0);
    s.crc___5631 = (r0);
    s.tmp_0 = jacdac_JDPacket_onlyHeader__P2884_mk(s);
    s.tmp_0.arg0 = s.crc___5631;
    s.callLocIdx = 400; s.pc = 54; return s.tmp_0;
  case 54:
    r0 = s.retval;
    s.ack___5634 = (r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P2899_mk(s);
    s.tmp_0.arg0 = s.ack___5634;
    s.tmp_0.arg1 = 63;
    s.callLocIdx = 401; s.pc = 55; return s.tmp_0;
  case 55:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendReport__P2924_mk(s);
    s.tmp_0.arg0 = s.ack___5634;
    s.tmp_1 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 402; s.pc = 57; return s.tmp_1;
  case 57:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 403; s.pc = 56; return s.tmp_0;
  case 56:
    r0 = s.retval;
  case 1:
  case 2:
  case 3:
  case 4:
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.PACKET_PROCESS___3398;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 404; s.pc = 58; return s.tmp_0;
  case 58:
    r0 = s.retval;
    r0 = (s.multiCommandClass___5619 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    s.tmp_4 = jacdac_JDPacket_isCommand__P2919_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 405; s.pc = 59; return s.tmp_4;
  case 59:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
    { step = 49; continue; }
  case 5:
  case 6:
    s.h___5654 = (undefined);
    r0 = s.arg0.fields["servers"];
    s.unnamed86___U5 = (r0);
    s.unnamed87___U6 = (0);
  case 7:
    s.tmp_0 = r0 = s.unnamed87___U6;
    r0 = pxsim_Array__length(s.unnamed86___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_Array__getAt(s.unnamed86___U5, s.unnamed87___U6);
    s.h___5654 = (r0);
    r0 = s.h___5654.fields["serviceClass"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.multiCommandClass___5619);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_2;
    { step = 9; continue; }
  case 8:
    r0 = s.h___5654.fields["running"];
  case 9:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 10; continue; }
    s.tmp_5 = jacdac_JDPacket_deviceIdentifier__P2892_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.tmp_6 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.callLocIdx = 406; s.pc = 61; return s.tmp_6;
  case 61:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 407; s.pc = 60; return s.tmp_5;
  case 60:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P2899_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = s.h___5654.fields["serviceIndex"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 408; s.pc = 62; return s.tmp_0;
  case 62:
    r0 = s.retval;
    s.tmp_0 = jacdac_Server__C3447_v0_2_mk(s);
    s.tmp_0.arg0 = s.h___5654;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacketOuter;
    s.pc = 63; return s.tmp_0;
  case 63:
    r0 = s.retval;
  case 10:
  case 11:
    r0 = (s.unnamed87___U6 + 1);
    s.unnamed87___U6 = (r0);
    { step = 7; continue; }
  case 12:
    s.unnamed86___U5 = (undefined);
    { step = 48; continue; }
  case 13:
    s.tmp_1 = r0 = s.devId___5616;
    s.tmp_3 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 409; s.pc = 64; return s.tmp_3;
  case 64:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_0;
    { step = 15; continue; }
  case 14:
    s.tmp_4 = jacdac_JDPacket_isCommand__P2919_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 410; s.pc = 65; return s.tmp_4;
  case 65:
    r0 = s.retval;
  case 15:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 20; continue; }
    r0 = s.arg0.fields["servers"];
    s.tmp_6 = r0;
    r0 = s.arg1.fields["_header"];
    s.tmp_9 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_9, 13);
    s.tmp_8 = r0;
    r0 = (s.tmp_8 & 63);
    s.tmp_7 = r0;
    r0 = pxsim_Array__getAt(s.tmp_6, s.tmp_7);
    s.h___5682 = (r0);
    s.tmp_0 = r0 = s.h___5682;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 16:
    r0 = s.h___5682.fields["running"];
  case 17:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 18; continue; }
    s.tmp_2 = jacdac_Server__C3447_v0_2_mk(s);
    s.tmp_2.arg0 = s.h___5682;
    s.tmp_2.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.handlePacketOuter;
    s.pc = 66; return s.tmp_2;
  case 66:
    r0 = s.retval;
  case 18:
  case 19:
    { step = 47; continue; }
  case 20:
    s.tmp_1 = jacdac_JDPacket_isCommand__P2919_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 412; s.pc = 67; return s.tmp_1;
  case 67:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
    { step = 49; continue; }
  case 21:
  case 22:
    r0 = pxsim_pxtcore_mkAction(1, dev_inline__P5701);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.devId___5616);
    s.tmp_3 = helpers_arrayFind__P2002_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_2;
    s.callLocIdx = 413; s.pc = 68; return s.tmp_3;
  case 68:
    r0 = s.retval;
    s.dev___5697 = (r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_3, 13);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 63);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 41; continue; }
    r0 = s.arg1.fields["_header"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 4, 14);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 0);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 37; continue; }
    r0 = s.arg1.fields["_data"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_8, 0);
    s.tmp_7 = r0;
    r0 = (s.tmp_7 & 15);
    s.pktRestartCounter___5715 = (r0);
    s.tmp_0 = r0 = s.dev___5697;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 23; continue; }
    r0 = s.tmp_0;
    { step = 24; continue; }
  case 23:
    s.tmp_2 = jacdac_Device_restartCounter__P3532_mk(s);
    s.tmp_2.arg0 = s.dev___5697;
    s.callLocIdx = 417; s.pc = 69; return s.tmp_2;
  case 69:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.pktRestartCounter___5715);
  case 24:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 25; continue; }
    s.tmp_4 = jacdac_log__P4284_mk(s);
    s.tmp_12 = jacdac_Device_shortId__P3536_mk(s);
    s.tmp_12.arg0 = s.dev___5697;
    s.callLocIdx = 418; s.pc = 71; return s.tmp_12;
  case 71:
    r0 = s.retval;
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 72);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 72:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat("device ", s.tmp_10);
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_9, " resetted (");
    s.tmp_8 = r0;
    s.tmp_15 = jacdac_Device_restartCounter__P3532_mk(s);
    s.tmp_15.arg0 = s.dev___5697;
    s.callLocIdx = 419; s.pc = 73; return s.tmp_15;
  case 73:
    r0 = s.retval;
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 74);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 74:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_8, s.tmp_13);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " > ");
    s.tmp_6 = r0;
    if ((s.pktRestartCounter___5715) && (s.pktRestartCounter___5715).vtable) {
    setupResume(s, 75);
    pxsim_String__stringConv(s.pktRestartCounter___5715);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.pktRestartCounter___5715) + ""; }
  case 75:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_16);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, ")");
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 420; s.pc = 70; return s.tmp_4;
  case 70:
    r0 = s.retval;
    r0 = s.arg0.fields["devices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.removeElement(s.tmp_0, s.dev___5697);
    s.tmp_0 = jacdac_Device__destroy__P3549_mk(s);
    s.tmp_0.arg0 = s.dev___5697;
    s.callLocIdx = 421; s.pc = 76; return s.tmp_0;
  case 76:
    r0 = s.retval;
    s.dev___5697 = (null);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.RESTART___3401;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 422; s.pc = 77; return s.tmp_0;
  case 77:
    r0 = s.retval;
  case 25:
  case 26:
    s.matches___5758 = (false);
    r0 = pxsim_numops_toBoolDecr(s.dev___5697);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Device__C3525_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_Device_constructor__P3529_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    r0 = s.arg1.fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_5, 4, 8);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_4);
    s.tmp_3.arg1 = r0;
    r0 = s.arg1.fields["_data"];
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 425; s.pc = 78; return s.tmp_3;
  case 78:
    r0 = s.retval;
    s.dev___5697 = (s.tmp_2);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_CONNECT___3393;
    s.tmp_0.arg2 = s.dev___5697;
    s.callLocIdx = 426; s.pc = 79; return s.tmp_0;
  case 79:
    r0 = s.retval;
    { step = 28; continue; }
  case 27:
    s.tmp_0 = jacdac_serviceMatches__P4310_mk(s);
    s.tmp_0.arg0 = s.dev___5697;
    r0 = s.arg1.fields["_data"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 428; s.pc = 80; return s.tmp_0;
  case 80:
    r0 = s.retval;
    s.matches___5758 = (r0);
    s.tmp_0 = r0 = s.dev___5697;
    r0 = s.arg1.fields["_data"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["services"] = (s.tmp_1);
  case 28:
    s.tmp_1 = jacdac_Device_isBrain__P3530_mk(s);
    s.tmp_2 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 430; s.pc = 82; return s.tmp_2;
  case 82:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 431; s.pc = 81; return s.tmp_1;
  case 81:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 29; continue; }
    r0 = s.tmp_0;
    { step = 30; continue; }
  case 29:
    s.tmp_3 = jacdac_Device_isBrain__P3530_mk(s);
    s.tmp_3.arg0 = s.dev___5697;
    s.callLocIdx = 432; s.pc = 83; return s.tmp_3;
  case 83:
    r0 = s.retval;
  case 30:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 31; continue; }
    r0 = s.tmp_4;
    { step = 32; continue; }
  case 31:
    s.tmp_6 = jacdac_Device_restartCounter__P3532_mk(s);
    s.tmp_6.arg0 = s.dev___5697;
    s.callLocIdx = 433; s.pc = 84; return s.tmp_6;
  case 84:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = s.arg0.fields["restartCounter"];
    s.tmp_7 = r0;
    r0 = (s.tmp_5 < s.tmp_7);
  case 32:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 33; continue; }
    s.tmp_9 = jacdac_log__P4284_mk(s);
    s.tmp_13 = jacdac_Device_shortId__P3536_mk(s);
    s.tmp_13.arg0 = s.dev___5697;
    s.callLocIdx = 434; s.pc = 86; return s.tmp_13;
  case 86:
    r0 = s.retval;
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 87);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 87:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat("device ", s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_10, " new proxy");
    s.tmp_9.arg0 = r0;
    s.callLocIdx = 435; s.pc = 85; return s.tmp_9;
  case 85:
    r0 = s.retval;
    s.tmp_0 = jacdac_resetToProxy__P4331_mk(s);
    s.callLocIdx = 436; s.pc = 88; return s.tmp_0;
  case 88:
    r0 = s.retval;
  case 33:
  case 34:
    r0 = pxsim_numops_toBoolDecr(s.matches___5758);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 35; continue; }
    s.tmp_2 = jacdac_Bus_reattach__P3427_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.dev___5697;
    s.callLocIdx = 437; s.pc = 89; return s.tmp_2;
  case 89:
    r0 = s.retval;
  case 35:
  case 36:
  case 37:
  case 38:
    r0 = pxsim_numops_toBoolDecr(s.dev___5697);
    if (!r0) { step = 39; continue; }
    s.tmp_0 = jacdac_Device_processPacket__P3545_mk(s);
    s.tmp_0.arg0 = s.dev___5697;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 438; s.pc = 90; return s.tmp_0;
  case 90:
    r0 = s.retval;
  case 39:
  case 40:
    { step = 49; continue; }
    { step = 44; continue; }
  case 41:
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_3, 13);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 63);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 63);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 42; continue; }
    s.tmp_4 = jacdac__gotAck__P2929_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 440; s.pc = 91; return s.tmp_4;
  case 91:
    r0 = s.retval;
  case 42:
  case 43:
  case 44:
    r0 = pxsim_numops_toBoolDecr(s.dev___5697);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 45; continue; }
    { step = 49; continue; }
  case 45:
  case 46:
    s.tmp_2 = jacdac_Device_processPacket__P3545_mk(s);
    s.tmp_2.arg0 = s.dev___5697;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 441; s.pc = 92; return s.tmp_2;
  case 92:
    r0 = s.retval;
  case 47:
  case 48:
  case 49:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_processPacket__P3428.info = {"start":8354,"length":3910,"line":248,"column":8,"endLine":336,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"processPacket","argumentNames":["this","pkt"]}

function jacdac_Bus_processPacket__P3428_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_processPacket__P3428, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  devId___5616: undefined,
  multiCommandClass___5619: undefined,
  crc___5631: undefined,
  ack___5634: undefined,
  h___5654: undefined,
  unnamed86___U5: undefined,
  unnamed87___U6: undefined,
  h___5682: undefined,
  dev___5697: undefined,
  pktRestartCounter___5715: undefined,
  matches___5758: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function dev_inline__P5701(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["deviceId"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
dev_inline__P5701.info = {"start":10078,"length":24,"line":286,"column":44,"endLine":286,"endColumn":68,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["d"]}

function dev_inline__P5701_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: dev_inline__P5701, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__gotAck__P2929(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numNotify___5824 = undefined;
    s.srcId___5825 = undefined;
    s.crc___5828 = undefined;
    s.a___5832 = undefined;
    s.unnamed56___U4 = undefined;
    s.unnamed57___U5 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(globals.ackAwaiters___4135);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 11; continue; }
  case 1:
  case 2:
    s.numNotify___5824 = (0);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 4, 8);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    s.srcId___5825 = (r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 14);
    s.crc___5828 = (r0);
    s.a___5832 = (undefined);
    s.unnamed56___U4 = (globals.ackAwaiters___4135);
    s.unnamed57___U5 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed57___U5;
    r0 = pxsim_Array__length(s.unnamed56___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed56___U4, s.unnamed57___U5);
    s.a___5832 = (r0);
    r0 = s.a___5832.fields["crc"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.crc___5828);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.a___5832.fields["srcId"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.srcId___5825);
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 6; continue; }
    r0 = (s.a___5832).fields["nextRetry"] = (0);
    r0 = s.a___5832.fields["eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(1023, s.tmp_0, 1);
    r0 = (s.numNotify___5824 + 1);
    s.numNotify___5824 = (r0);
  case 6:
  case 7:
    r0 = (s.unnamed57___U5 + 1);
    s.unnamed57___U5 = (r0);
    { step = 3; continue; }
  case 8:
    s.unnamed56___U4 = (undefined);
    r0 = pxsim_numops_toBoolDecr(s.numNotify___5824);
    if (!r0) { step = 9; continue; }
    s.tmp_0 = helpers_arrayFilter__P2001_mk(s);
    s.tmp_0.arg0 = globals.ackAwaiters___4135;
    s.tmp_0.arg1 = jacdac__gotAck_inline__P5861;
    s.callLocIdx = 171; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    globals.ackAwaiters___4135 = (r0);
  case 9:
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__gotAck__P2929.info = {"start":12483,"length":508,"line":388,"column":4,"endLine":401,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_gotAck","argumentNames":["pkt"]}

function jacdac__gotAck__P2929_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__gotAck__P2929, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  numNotify___5824: undefined,
  srcId___5825: undefined,
  crc___5828: undefined,
  a___5832: undefined,
  unnamed56___U4: undefined,
  unnamed57___U5: undefined,
  arg0: undefined,
} }





function jacdac__gotAck_inline__P5861(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 !== 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac__gotAck_inline__P5861.info = {"start":12962,"length":22,"line":400,"column":56,"endLine":400,"endColumn":78,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function jacdac__gotAck_inline__P5861_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__gotAck_inline__P5861, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function helpers_arrayFilter__P2001(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___5868 = undefined;
    s.len___5870 = undefined;
    s.i___5873 = undefined;
    s.v___5878 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___5868 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___5870 = (r0);
    s.i___5873 = (0);
  case 1:
    r0 = (s.i___5873 < s.len___5870);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.arg0, s.i___5873);
    s.v___5878 = (r0);
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.v___5878;
    s.tmp_1.arg1 = s.i___5873;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 7; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__push(s.res___5868, s.v___5878);
  case 2:
  case 3:
    r0 = (s.i___5873 + 1);
    s.i___5873 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = s.res___5868;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayFilter__P2001.info = {"start":7695,"length":317,"line":261,"column":4,"endLine":269,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arrayFilter","argumentNames":["arr","callbackfn"]}

function helpers_arrayFilter__P2001_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayFilter__P2001, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  res___5868: undefined,
  len___5870: undefined,
  i___5873: undefined,
  v___5878: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_processPacket__P3545(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.cmd___5910 = undefined;
    s.q___5921 = undefined;
    s.serviceIndex___5933 = undefined;
    s.q___5941 = undefined;
    s.serviceClass___5958 = undefined;
    s.ec___5969 = undefined;
    s.ahead___5982 = undefined;
    s.behind___5990 = undefined;
    s.client___6021 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.tmp_1);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.PACKET_RECEIVE___3402;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 612; s.pc = 34; return s.tmp_0;
  case 34:
    r0 = s.retval;
    r0 = s.arg1.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["queries"];
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 7; continue; }
    r0 = s.arg1.fields["_data"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, 4, 0);
    s.cmd___5910 = (r0);
    r0 = (s.cmd___5910 >> 12);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = jacdac_Device_lookupQuery__P4299_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = (s.cmd___5910 & 4095);
    s.tmp_2.arg1 = r0;
    r0 = s.arg1.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 13);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 63);
    s.tmp_2.arg2 = r0;
    s.callLocIdx = 616; s.pc = 35; return s.tmp_2;
  case 35:
    r0 = s.retval;
    s.q___5921 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.q___5921);
    if (!r0) { step = 3; continue; }
    r0 = (s.q___5921).fields["notImplemented"] = (true);
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
  case 8:
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 13);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 63);
    s.serviceIndex___5933 = (r0);
    s.tmp_1 = jacdac_JDPacket_isRegGet__P2907_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 618; s.pc = 36; return s.tmp_1;
  case 36:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = s.tmp_0;
    { step = 10; continue; }
  case 9:
    r0 = s.arg0.fields["queries"];
  case 10:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 13; continue; }
    s.tmp_3 = jacdac_Device_lookupQuery__P4299_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_4 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 619; s.pc = 38; return s.tmp_4;
  case 38:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = s.serviceIndex___5933;
    s.callLocIdx = 620; s.pc = 37; return s.tmp_3;
  case 37:
    r0 = s.retval;
    s.q___5941 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.q___5941);
    if (!r0) { step = 11; continue; }
    s.tmp_0 = r0 = s.q___5941;
    r0 = s.arg1.fields["_data"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["value"] = (s.tmp_1);
    s.tmp_0 = r0 = s.q___5941;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastReport"] = (s.tmp_1);
  case 11:
  case 12:
  case 13:
  case 14:
    s.tmp_0 = jacdac_Device_serviceClassAt__P3540_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.serviceIndex___5933;
    s.callLocIdx = 622; s.pc = 39; return s.tmp_0;
  case 39:
    r0 = s.retval;
    s.serviceClass___5958 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.serviceClass___5958);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = s.tmp_0;
    { step = 16; continue; }
  case 15:
    r0 = (s.serviceClass___5958 == 4294967295);
  case 16:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 17; continue; }
    { step = 33; continue; }
  case 17:
  case 18:
    s.tmp_4 = jacdac_JDPacket_isEvent__P2903_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 623; s.pc = 40; return s.tmp_4;
  case 40:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 27; continue; }
    r0 = s.arg0.fields["_eventCounter"];
    s.ec___5969 = (r0);
    r0 = (s.ec___5969 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
    s.tmp_2 = jacdac_JDPacket_eventCounter__P2905_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 624; s.pc = 41; return s.tmp_2;
  case 41:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - 1);
    s.ec___5969 = (r0);
  case 19:
  case 20:
    r0 = (s.ec___5969 + 1);
    s.ec___5969 = (r0);
    s.tmp_2 = jacdac_JDPacket_eventCounter__P2905_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 625; s.pc = 42; return s.tmp_2;
  case 42:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - s.ec___5969);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 127);
    s.ahead___5982 = (r0);
    s.tmp_1 = r0 = s.ec___5969;
    s.tmp_3 = jacdac_JDPacket_eventCounter__P2905_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 626; s.pc = 43; return s.tmp_3;
  case 43:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 127);
    s.behind___5990 = (r0);
    r0 = (s.ahead___5982 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 21; continue; }
    r0 = s.tmp_0;
    { step = 24; continue; }
  case 21:
    r0 = (s.behind___5990 < 60);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 22; continue; }
    r0 = s.tmp_1;
    { step = 23; continue; }
  case 22:
    r0 = (s.ahead___5982 < 5);
  case 23:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
  case 24:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 25; continue; }
    { step = 33; continue; }
  case 25:
  case 26:
    s.tmp_4 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = globals.EVENT___3403;
    s.tmp_4.arg2 = s.arg1;
    s.callLocIdx = 627; s.pc = 44; return s.tmp_4;
  case 44:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.EVENT___3403;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 628; s.pc = 45; return s.tmp_0;
  case 45:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_JDPacket_eventCounter__P2905_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 629; s.pc = 46; return s.tmp_2;
  case 46:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_eventCounter"] = (s.tmp_1);
  case 27:
  case 28:
    r0 = s.arg0.fields["clients"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 29; continue; }
    { step = 33; continue; }
  case 29:
  case 30:
    r0 = pxsim_pxtcore_mkAction(2, client_inline__P6023);
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_3, 0, s.serviceClass___5958);
    r0 = pxsim_pxtrt_stclo(s.tmp_3, 1, s.serviceIndex___5933);
    s.tmp_4 = helpers_arrayFind__P2002_mk(s);
    r0 = s.arg0.fields["clients"];
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.tmp_3;
    s.callLocIdx = 630; s.pc = 47; return s.tmp_4;
  case 47:
    r0 = s.retval;
    s.client___6021 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.client___6021);
    if (!r0) { step = 31; continue; }
    s.tmp_0 = jacdac_Client_handlePacketOuter__P3513_mk(s);
    s.tmp_0.arg0 = s.client___6021;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 631; s.pc = 48; return s.tmp_0;
  case 48:
    r0 = s.retval;
  case 31:
  case 32:
  case 33:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_processPacket__P3545.info = {"start":48890,"length":2541,"line":1481,"column":8,"endLine":1542,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"processPacket","argumentNames":["this","pkt"]}

function jacdac_Device_processPacket__P3545_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_processPacket__P3545, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  cmd___5910: undefined,
  q___5921: undefined,
  serviceIndex___5933: undefined,
  q___5941: undefined,
  serviceClass___5958: undefined,
  ec___5969: undefined,
  ahead___5982: undefined,
  behind___5990: undefined,
  client___6021: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function client_inline__P6023(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["broadcast"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.caps[0]);
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
client_inline__P6023.info = {"start":51102,"length":138,"line":1533,"column":45,"endLine":1536,"endColumn":52,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["c"]}

function client_inline__P6023_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: client_inline__P6023, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_Client_handlePacketOuter__P3513(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.code___6058 = undefined;
    s.register___6089 = undefined;
    s.unnamed92___U2 = undefined;
    s.unnamed93___U3 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = globals.bus___3430.fields["proxyMode"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 15; continue; }
  case 1:
  case 2:
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_4 = r0 = s.arg0;
    r0 = s.arg1.fields["_data"];
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["advertisementData"] = (s.tmp_5);
  case 3:
  case 4:
    s.tmp_1 = jacdac_JDPacket_isEvent__P2903_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 564; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_2 = jacdac_JDPacket_eventCode__P2904_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 565; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
    s.code___6058 = (r0);
    r0 = (s.code___6058 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = (s.arg0).fields["systemActive"] = (true);
    { step = 10; continue; }
  case 5:
    r0 = (s.code___6058 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = (s.arg0).fields["systemActive"] = (false);
    { step = 9; continue; }
  case 6:
    r0 = (s.code___6058 == 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_1 = helpers_arrayForEach__P2000_mk(s);
    r0 = s.arg0.fields["registers"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = jacdac_Client_handlePacketOuter_inline__P6079;
    s.callLocIdx = 567; s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
  case 7:
  case 8:
  case 9:
  case 10:
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.EVENT___3403;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 568; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    s.tmp_0 = jacdac_Client_raiseEvent__P4180_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.code___6058;
    s.callLocIdx = 569; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    { step = 14; continue; }
  case 11:
    s.register___6089 = (undefined);
    r0 = s.arg0.fields["registers"];
    s.unnamed92___U2 = (r0);
    s.unnamed93___U3 = (0);
  case 12:
    s.tmp_0 = r0 = s.unnamed93___U3;
    r0 = pxsim_Array__length(s.unnamed92___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 13; continue; }
    r0 = pxsim_Array__getAt(s.unnamed92___U2, s.unnamed93___U3);
    s.register___6089 = (r0);
    s.tmp_2 = jacdac_RegisterClient_handlePacket__P3487_mk(s);
    s.tmp_2.arg0 = s.register___6089;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 570; s.pc = 21; return s.tmp_2;
  case 21:
    r0 = s.retval;
    r0 = (s.unnamed93___U3 + 1);
    s.unnamed93___U3 = (r0);
    { step = 12; continue; }
  case 13:
    s.unnamed92___U2 = (undefined);
  case 14:
    s.tmp_0 = jacdac_Client__C3496_v0_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Client__C3496_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacket;
    s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
  case 15:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handlePacketOuter__P3513.info = {"start":36972,"length":826,"line":1129,"column":8,"endLine":1148,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_Client_handlePacketOuter__P3513_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handlePacketOuter__P3513, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  code___6058: undefined,
  register___6089: undefined,
  unnamed92___U2: undefined,
  unnamed93___U3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_handlePacketOuter_inline__P6079(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_RegisterClient_reset__P3477_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 566; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handlePacketOuter_inline__P6079.info = {"start":37541,"length":14,"line":1141,"column":43,"endLine":1141,"endColumn":57,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["r"]}

function jacdac_Client_handlePacketOuter_inline__P6079_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handlePacketOuter_inline__P6079, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Client_handlePacket__P3514(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handlePacket__P3514.info = {"start":37808,"length":30,"line":1150,"column":8,"endLine":1150,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_Client_handlePacket__P3514_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handlePacket__P3514, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_RegisterClient_handlePacket__P3487(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___6110 = undefined;
    s.changed___6113 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegisterClient__C3474_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isRegGet__P2907_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 539; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["code"];
    s.tmp_2 = r0;
    s.tmp_4 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 540; s.pc = 12; return s.tmp_4;
  case 12:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 == s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 9; continue; }
    r0 = s.arg1.fields["_data"];
    s.d___6110 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.d___6110);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = (s.tmp_1 != s.tmp_5);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_numops_toBoolDecr(s.d___6110);
    s.tmp_10 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_10);
  case 4:
    // jmp value (already in r0)
    s.tmp_11 = r0;
    r0 = pxsim_numops_toBool(s.tmp_11);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_11;
    { step = 6; continue; }
  case 5:
    s.tmp_14 = helpers_bufferEquals__P2619_mk(s);
    s.tmp_14.arg0 = s.d___6110;
    r0 = s.arg0.fields["_data"];
    s.tmp_14.arg1 = r0;
    s.callLocIdx = 542; s.pc = 13; return s.tmp_14;
  case 13:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    s.tmp_12 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_12);
  case 6:
    // jmp value (already in r0)
    s.tmp_15 = r0;
    s.changed___6113 = (s.tmp_15);
    r0 = (s.arg0).fields["_data"] = (s.d___6110);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.REPORT_RECEIVE___3399;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 543; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.changed___6113);
    if (!r0) { step = 7; continue; }
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.REPORT_UPDATE___3400;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 544; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___3390;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 545; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
  case 7:
  case 8:
  case 9:
  case 10:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegisterClient_handlePacket__P3487.info = {"start":31218,"length":537,"line":953,"column":8,"endLine":966,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_RegisterClient_handlePacket__P3487_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegisterClient_handlePacket__P3487, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  d___6110: undefined,
  changed___6113: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_bufferEquals__P2619(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___6171 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_7 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_11 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_10);
    s.tmp_9 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_9);
    s.tmp_8 = r0;
    r0 = (s.tmp_4 == s.tmp_8);
    { step = 11; continue; }
  case 3:
  case 4:
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_13 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_14 = r0;
    r0 = (s.tmp_13 != s.tmp_14);
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 5; continue; }
    r0 = false;
    { step = 11; continue; }
  case 5:
  case 6:
    s.i___6171 = (0);
  case 7:
    s.tmp_1 = r0 = s.i___6171;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___6171);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, s.i___6171);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 != s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 8; continue; }
    r0 = false;
    { step = 11; continue; }
  case 8:
  case 9:
    r0 = (s.i___6171 + 1);
    s.i___6171 = (r0);
    { step = 7; continue; }
  case 10:
    r0 = true;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferEquals__P2619.info = {"start":3970,"length":283,"line":139,"column":4,"endLine":147,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"bufferEquals","argumentNames":["l","r"]}

function helpers_bufferEquals__P2619_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferEquals__P2619, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  i___6171: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_raiseEvent__P4180(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = s.arg0.fields["eventSource"];
    s.tmp_0 = r0;
    r0 = (61440 + s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, s.tmp_1, 1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_raiseEvent__P4180.info = {"start":40241,"length":176,"line":1219,"column":8,"endLine":1224,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"raiseEvent","argumentNames":["this","value"]}

function jacdac_Client_raiseEvent__P4180_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_raiseEvent__P4180, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_RegisterClient_reset__P3477(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegisterClient__C3474_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_data"] = (undefined);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegisterClient_reset__P3477.info = {"start":29289,"length":101,"line":889,"column":8,"endLine":892,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"reset","argumentNames":["this"]}

function jacdac_RegisterClient_reset__P3477_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegisterClient_reset__P3477, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function helpers_arrayForEach__P2000(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___6207 = undefined;
    s.i___6210 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___6207 = (r0);
    s.i___6210 = (0);
  case 1:
    r0 = (s.i___6210 < s.len___6207);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___6210);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.i___6210;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 6; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    r0 = (s.i___6210 + 1);
    s.i___6210 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayForEach__P2000.info = {"start":7439,"length":250,"line":254,"column":4,"endLine":259,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arrayForEach","argumentNames":["arr","callbackfn"]}

function helpers_arrayForEach__P2000_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayForEach__P2000, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___6207: undefined,
  i___6210: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_eventCode__P2904(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isEvent__P2903_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 126; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_eventCode__P2904.info = {"start":5692,"length":147,"line":171,"column":8,"endLine":175,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"eventCode","argumentNames":["this"]}
jacdac_JDPacket_eventCode__P2904.isGetter = true;

function jacdac_JDPacket_eventCode__P2904_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_eventCode__P2904, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_eventCounter__P2905(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isEvent__P2903_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 128; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, 4, 14);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 >> 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 127);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_eventCounter__P2905.info = {"start":5849,"length":202,"line":177,"column":8,"endLine":182,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"eventCounter","argumentNames":["this"]}
jacdac_JDPacket_eventCounter__P2905.isGetter = true;

function jacdac_JDPacket_eventCounter__P2905_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_eventCounter__P2905, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isEvent__P2903(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isReport__P2920_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 123; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 13);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 63);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 <= 48);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_5;
    { step = 4; continue; }
  case 3:
    r0 = s.arg0.fields["_header"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_8, 4, 14);
    s.tmp_7 = r0;
    r0 = (s.tmp_7 & 32768);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 != 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = s.tmp_9;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isEvent__P2903.info = {"start":5484,"length":198,"line":163,"column":8,"endLine":169,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isEvent","argumentNames":["this"]}
jacdac_JDPacket_isEvent__P2903.isGetter = true;

function jacdac_JDPacket_isEvent__P2903_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isEvent__P2903, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isReport__P2920(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_3, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isReport__P2920.info = {"start":8555,"length":89,"line":267,"column":8,"endLine":269,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isReport","argumentNames":["this"]}
jacdac_JDPacket_isReport__P2920.isGetter = true;

function jacdac_JDPacket_isReport__P2920_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isReport__P2920, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_packetFlags__P2893(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_packetFlags__P2893.info = {"start":4144,"length":64,"line":121,"column":8,"endLine":123,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"packetFlags","argumentNames":["this"]}
jacdac_JDPacket_packetFlags__P2893.isGetter = true;

function jacdac_JDPacket_packetFlags__P2893_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_packetFlags__P2893, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_serviceClassAt__P3540(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = (s.arg1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = (s.arg1 << 2);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 11, s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_serviceClassAt__P3540.info = {"start":47013,"length":253,"line":1427,"column":8,"endLine":1434,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceClassAt","argumentNames":["this","serviceIndex"]}

function jacdac_Device_serviceClassAt__P3540_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_serviceClassAt__P3540, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_regCode__P2908(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 4095);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_regCode__P2908.info = {"start":6265,"length":79,"line":192,"column":8,"endLine":194,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"regCode","argumentNames":["this"]}
jacdac_JDPacket_regCode__P2908.isGetter = true;

function jacdac_JDPacket_regCode__P2908_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_regCode__P2908, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isRegGet__P2907(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 12);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 1);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isRegGet__P2907.info = {"start":6163,"length":92,"line":188,"column":8,"endLine":190,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isRegGet","argumentNames":["this"]}
jacdac_JDPacket_isRegGet__P2907.isGetter = true;

function jacdac_JDPacket_isRegGet__P2907_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isRegGet__P2907, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_Device_lookupQuery__P4299(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = s.arg0.fields["queries"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["queries"] = (s.tmp_4);
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkAction(2, jacdac_Device_lookupQuery_inline__P6291);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg2);
    s.tmp_1 = helpers_arrayFind__P2002_mk(s);
    r0 = s.arg0.fields["queries"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 609; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_lookupQuery__P4299.info = {"start":46295,"length":183,"line":1403,"column":8,"endLine":1406,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"lookupQuery","argumentNames":["this","reg","serv"]}

function jacdac_Device_lookupQuery__P4299_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_lookupQuery__P4299, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Device_lookupQuery_inline__P6291(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["reg"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.caps[0]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["serviceIdx"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_lookupQuery_inline__P6291.info = {"start":46426,"length":41,"line":1405,"column":37,"endLine":1405,"endColumn":78,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["q"]}

function jacdac_Device_lookupQuery_inline__P6291_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_lookupQuery_inline__P6291, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_getNumber__P2917(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, s.arg1, s.arg2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_getNumber__P2917.info = {"start":8239,"length":109,"line":255,"column":8,"endLine":257,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"getNumber","argumentNames":["this","fmt","offset"]}

function jacdac_JDPacket_getNumber__P2917_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_getNumber__P2917, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Bus_reattach__P3427(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.newClients___6339 = undefined;
    s.occupied___6341 = undefined;
    s.c___6349 = undefined;
    s.unnamed82___U3 = undefined;
    s.unnamed83___U4 = undefined;
    s.newClass___6356 = undefined;
    s.i___6396 = undefined;
    s.serviceClass___6406 = undefined;
    s.cc___6414 = undefined;
    s.unnamed84___U9 = undefined;
    s.unnamed85___U10 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.tmp_1);
    s.tmp_0 = jacdac_log__P4284_mk(s);
    s.tmp_7 = jacdac_Device_toString__P3537_mk(s);
    s.tmp_7.arg0 = s.arg1;
    s.callLocIdx = 381; s.pc = 25; return s.tmp_7;
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("roles: attaching to ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "; cl=");
    s.tmp_3 = r0;
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_10 = r0;
    r0 = pxsim_Array__length(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_8);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "/");
    s.tmp_1 = r0;
    r0 = s.arg0.fields["allClients"];
    s.tmp_13 = r0;
    r0 = pxsim_Array__length(s.tmp_13);
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_11);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 382; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    r0 = pxsim_Array__mk();
    s.newClients___6339 = (r0);
    r0 = s.arg1.fields["services"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 2);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.occupied___6341 = (r0);
    s.c___6349 = (undefined);
    r0 = s.arg1.fields["clients"];
    s.unnamed82___U3 = (r0);
    s.unnamed83___U4 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed83___U4;
    r0 = pxsim_Array__length(s.unnamed82___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed82___U3, s.unnamed83___U4);
    s.c___6349 = (r0);
    r0 = s.c___6349.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    s.tmp_3 = jacdac_Client__detach__P3516_mk(s);
    s.tmp_3.arg0 = s.c___6349;
    s.callLocIdx = 383; s.pc = 29; return s.tmp_3;
  case 29:
    r0 = s.retval;
    { step = 8; continue; }
  case 2:
  case 3:
    s.tmp_0 = jacdac_Device_serviceClassAt__P3540_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = s.c___6349.fields["serviceIndex"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 384; s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
    s.newClass___6356 = (r0);
    r0 = s.c___6349.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = (s.newClass___6356 == s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    s.tmp_2 = jacdac_Device_matchesRoleAt__P3538_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_3 = jacdac_Client_roleQuery__P3505_mk(s);
    s.tmp_3.arg0 = s.c___6349;
    s.callLocIdx = 385; s.pc = 32; return s.tmp_3;
  case 32:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    r0 = s.c___6349.fields["serviceClass"];
    s.tmp_2.arg2 = r0;
    r0 = s.c___6349.fields["serviceIndex"];
    s.tmp_2.arg3 = r0;
    s.callLocIdx = 386; s.pc = 31; return s.tmp_2;
  case 31:
    r0 = s.retval;
  case 5:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__push(s.newClients___6339, s.c___6349);
    r0 = s.c___6349.fields["serviceIndex"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setByte(s.occupied___6341, s.tmp_0, 1);
    { step = 7; continue; }
  case 6:
    s.tmp_0 = jacdac_Client__detach__P3516_mk(s);
    s.tmp_0.arg0 = s.c___6349;
    s.callLocIdx = 387; s.pc = 33; return s.tmp_0;
  case 33:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.unnamed83___U4 + 1);
    s.unnamed83___U4 = (r0);
    { step = 1; continue; }
  case 9:
    s.unnamed82___U3 = (undefined);
    r0 = (s.arg1).fields["clients"] = (s.newClients___6339);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_ANNOUNCE___3396;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 388; s.pc = 34; return s.tmp_0;
  case 34:
    r0 = s.retval;
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    { step = 23; continue; }
  case 10:
  case 11:
    s.i___6396 = (4);
  case 12:
    s.tmp_1 = r0 = s.i___6396;
    r0 = s.arg1.fields["services"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
    s.tmp_5 = r0 = s.occupied___6341;
    r0 = (s.i___6396 >> 2);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 13; continue; }
    { step = 21; continue; }
  case 13:
  case 14:
    r0 = s.arg1.fields["services"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_7, 11, s.i___6396);
    s.serviceClass___6406 = (r0);
    s.cc___6414 = (undefined);
    r0 = s.arg0.fields["unattachedClients"];
    s.unnamed84___U9 = (r0);
    s.unnamed85___U10 = (0);
  case 15:
    s.tmp_0 = r0 = s.unnamed85___U10;
    r0 = pxsim_Array__length(s.unnamed84___U9);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 20; continue; }
    r0 = pxsim_Array__getAt(s.unnamed84___U9, s.unnamed85___U10);
    s.cc___6414 = (r0);
    r0 = s.cc___6414.fields["serviceClass"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.serviceClass___6406);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 18; continue; }
    s.tmp_4 = console_add__P2377_mk(s);
    s.tmp_4.arg0 = globals.logPriority___3431;
    r0 = s.cc___6414.fields["_role"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 36);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 36:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat("reattach: ", s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_8, " -> ");
    s.tmp_7 = r0;
    s.tmp_13 = jacdac_Device_shortId__P3536_mk(s);
    s.tmp_13.arg0 = s.arg1;
    s.callLocIdx = 390; s.pc = 37; return s.tmp_13;
  case 37:
    r0 = s.retval;
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 38);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 38:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_11);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, ":");
    s.tmp_5 = r0;
    r0 = (s.i___6396 >> 2);
    s.tmp_15 = r0;
    if ((s.tmp_15) && (s.tmp_15).vtable) {
    setupResume(s, 39);
    pxsim_String__stringConv(s.tmp_15);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_15) + ""; }
  case 39:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_14);
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 391; s.pc = 35; return s.tmp_4;
  case 35:
    r0 = s.retval;
    s.tmp_1 = jacdac_Client__attach__P3515_mk(s);
    s.tmp_1.arg0 = s.cc___6414;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.serviceClass___6406;
    r0 = (s.i___6396 >> 2);
    s.tmp_1.arg3 = r0;
    s.callLocIdx = 392; s.pc = 40; return s.tmp_1;
  case 40:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
    { step = 20; continue; }
  case 16:
  case 17:
  case 18:
  case 19:
    r0 = (s.unnamed85___U10 + 1);
    s.unnamed85___U10 = (r0);
    { step = 15; continue; }
  case 20:
    s.unnamed84___U9 = (undefined);
  case 21:
    r0 = (s.i___6396 + 4);
    s.i___6396 = (r0);
    { step = 12; continue; }
  case 22:
  case 23:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_reattach__P3427.info = {"start":6446,"length":1898,"line":195,"column":8,"endLine":246,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"reattach","argumentNames":["this","dev"]}

function jacdac_Bus_reattach__P3427_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_reattach__P3427, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  newClients___6339: undefined,
  occupied___6341: undefined,
  c___6349: undefined,
  unnamed82___U3: undefined,
  unnamed83___U4: undefined,
  newClass___6356: undefined,
  i___6396: undefined,
  serviceClass___6406: undefined,
  cc___6414: undefined,
  unnamed84___U9: undefined,
  unnamed85___U10: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client__attach__P3515(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = s.arg0.fields["_device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = jacdac_panic__P3432_mk(s);
    s.tmp_1.arg0 = "invalid attach";
    s.callLocIdx = 572; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.arg0.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_6 = jacdac_Device_matchesRoleAt__P3538_mk(s);
    s.tmp_6.arg0 = s.arg1;
    s.tmp_7 = jacdac_Client_roleQuery__P3505_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.callLocIdx = 573; s.pc = 10; return s.tmp_7;
  case 10:
    r0 = s.retval;
    s.tmp_6.arg1 = r0;
    s.tmp_6.arg2 = s.arg2;
    s.tmp_6.arg3 = s.arg3;
    s.callLocIdx = 574; s.pc = 9; return s.tmp_6;
  case 9:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = false;
    { step = 7; continue; }
  case 3:
  case 4:
    s.tmp_8 = jacdac_Client_device__P3507_mk(s);
    s.tmp_8.arg0 = s.arg0;
    s.tmp_8.arg1 = s.arg1;
    s.callLocIdx = 575; s.pc = 11; return s.tmp_8;
  case 11:
    r0 = s.retval;
    r0 = (s.arg0).fields["serviceIndex"] = (s.arg3);
    s.tmp_0 = jacdac_Bus_attachClient__P3424_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 576; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
  case 5:
  case 6:
    s.tmp_0 = jacdac_log__P4284_mk(s);
    r0 = s.arg0.fields["_role"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("role: attach ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, " -> ");
    s.tmp_3 = r0;
    s.tmp_9 = jacdac_Device_toString__P3537_mk(s);
    s.tmp_9.arg0 = s.arg1;
    s.callLocIdx = 578; s.pc = 15; return s.tmp_9;
  case 15:
    r0 = s.retval;
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_7);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    if ((s.arg3) && (s.arg3).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.arg3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg3) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_10);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 579; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    r0 = s.arg1.fields["clients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    s.tmp_0 = jacdac_Client_handleConnected__P4179_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 580; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    r0 = true;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client__attach__P3515.info = {"start":37848,"length":639,"line":1152,"column":8,"endLine":1167,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_attach","argumentNames":["this","dev","serviceClass","serviceNum"]}

function jacdac_Client__attach__P3515_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client__attach__P3515, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_Client_handleConnected__P4179(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    s.tmp_0 = jacdac_ClientPacketQueue_resend__P4289_mk(s);
    r0 = s.arg0.fields["config"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 581; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CONNECT___3391;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 582; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handleConnected__P4179.info = {"start":38497,"length":508,"line":1169,"column":8,"endLine":1180,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleConnected","argumentNames":["this"]}

function jacdac_Client_handleConnected__P4179_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handleConnected__P4179, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_ClientPacketQueue_resend__P4289(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sn___6504 = undefined;
    s.hasNonSet___6518 = undefined;
    s.p___6520 = undefined;
    s.unnamed88___U3 = undefined;
    s.unnamed89___U4 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C4285_VT)) failedCast(r0);
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["serviceIndex"];
    s.sn___6504 = (r0);
    r0 = (s.sn___6504 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["pkts"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 11; continue; }
  case 3:
  case 4:
    s.hasNonSet___6518 = (false);
    s.p___6520 = (undefined);
    r0 = s.arg0.fields["pkts"];
    s.unnamed88___U3 = (r0);
    s.unnamed89___U4 = (0);
  case 5:
    s.tmp_0 = r0 = s.unnamed89___U4;
    r0 = pxsim_Array__length(s.unnamed88___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed88___U3, s.unnamed89___U4);
    s.p___6520 = (r0);
    r0 = pxsim.BufferMethods.getByte(s.p___6520, 3);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 >> 4);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 2);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 6; continue; }
    s.hasNonSet___6518 = (true);
  case 6:
  case 7:
    s.tmp_0 = jacdac_Client_sendCommand__P3517_mk(s);
    r0 = s.arg0.fields["parent"];
    s.tmp_0.arg0 = r0;
    s.tmp_1 = jacdac_JDPacket_fromFrameless__P2885_mk(s);
    s.tmp_1.arg0 = s.p___6520;
    s.callLocIdx = 534; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 535; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    r0 = (s.unnamed89___U4 + 1);
    s.unnamed89___U4 = (r0);
    { step = 5; continue; }
  case 8:
    s.unnamed88___U3 = (undefined);
    r0 = pxsim_numops_toBoolDecr(s.hasNonSet___6518);
    if (!r0) { step = 9; continue; }
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = helpers_arrayFilter__P2001_mk(s);
    r0 = s.arg0.fields["pkts"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = jacdac_ClientPacketQueue_resend_inline__P6542;
    s.callLocIdx = 536; s.pc = 14; return s.tmp_2;
  case 14:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["pkts"] = (s.tmp_1);
  case 9:
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_resend__P4289.info = {"start":27824,"length":559,"line":841,"column":8,"endLine":854,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"resend","argumentNames":["this"]}

function jacdac_ClientPacketQueue_resend__P4289_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_resend__P4289, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  sn___6504: undefined,
  hasNonSet___6518: undefined,
  p___6520: undefined,
  unnamed88___U3: undefined,
  unnamed89___U4: undefined,
  arg0: undefined,
} }





function jacdac_ClientPacketQueue_resend_inline__P6542(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.getByte(s.arg0, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 4);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_resend_inline__P6542.info = {"start":28320,"length":35,"line":852,"column":20,"endLine":852,"endColumn":55,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["p"]}

function jacdac_ClientPacketQueue_resend_inline__P6542_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_resend_inline__P6542, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_fromFrameless__P2885(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___6552 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C2877_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDPacket_constructor__P4136_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 105; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.p___6552 = (s.tmp_0);
    s.tmp_0 = r0 = s.p___6552;
    r0 = pxsim.control.createBuffer(16);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_header"] = (s.tmp_1);
    r0 = s.p___6552.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 12, s.arg0);
    s.tmp_0 = r0 = s.p___6552;
    r0 = pxsim.BufferMethods.slice(s.arg0, 4, -1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_data"] = (s.tmp_1);
    r0 = s.p___6552;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_fromFrameless__P2885.info = {"start":2424,"length":254,"line":68,"column":8,"endLine":74,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"fromFrameless","argumentNames":["frameless"]}

function jacdac_JDPacket_fromFrameless__P2885_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_fromFrameless__P2885, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  p___6552: undefined,
  arg0: undefined,
} }





function jacdac_Client_sendCommand__P3517(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Client_start__P3521_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 590; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_serviceIndex__P2899_mk(s);
    s.tmp_2.arg0 = s.arg1;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 591; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCmd__P2925_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = s.arg0.fields["_device"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 593; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_sendCommand__P3517.info = {"start":39351,"length":200,"line":1193,"column":8,"endLine":1198,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendCommand","argumentNames":["this","pkt"]}

function jacdac_Client_sendCommand__P3517_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_sendCommand__P3517, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendCmd__P2925(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket__sendCmdId__P2926_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = s.arg1.fields["deviceId"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 154; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCmd__P2925.info = {"start":9849,"length":104,"line":305,"column":8,"endLine":308,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCmd","argumentNames":["this","dev"]}

function jacdac_JDPacket__sendCmd__P2925_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCmd__P2925, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendCmdId__P2926(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_deviceIdentifier__P2892_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 155; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 3, s.tmp_1);
    s.tmp_0 = jacdac_JDPacket__sendCore__P2923_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 156; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCmdId__P2926.info = {"start":9963,"length":192,"line":310,"column":8,"endLine":315,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCmdId","argumentNames":["this","devId"]}

function jacdac_JDPacket__sendCmdId__P2926_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCmdId__P2926, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_start__P3521(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = s.arg0.fields["started"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = (s.arg0).fields["started"] = (true);
    s.tmp_0 = jacdac_start__P3559_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 594; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_Bus_startClient__P3425_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 595; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_start__P3521.info = {"start":41336,"length":156,"line":1249,"column":8,"endLine":1254,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Client_start__P3521_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_start__P3521, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Bus_startClient__P3425(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    r0 = s.arg0.fields["allClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_0 = jacdac_Bus_clearAttachCache__P3420_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 380; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_startClient__P3425.info = {"start":6078,"length":164,"line":183,"column":8,"endLine":187,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"startClient","argumentNames":["this","client"]}

function jacdac_Bus_startClient__P3425_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_startClient__P3425, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_clearAttachCache__P3420(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___6630 = undefined;
    s.unnamed78___U1 = undefined;
    s.unnamed79___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    s.d___6630 = (undefined);
    r0 = s.arg0.fields["devices"];
    s.unnamed78___U1 = (r0);
    s.unnamed79___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed79___U2;
    r0 = pxsim_Array__length(s.unnamed78___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed78___U1, s.unnamed79___U2);
    s.d___6630 = (r0);
    r0 = s.d___6630.fields["services"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_5);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 3);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    s.tmp_6 = r0 = s.d___6630;
    s.tmp_8 = helpers_bufferConcat__P2618_mk(s);
    r0 = s.d___6630.fields["services"];
    s.tmp_8.arg0 = r0;
    r0 = pxsim.control.createBuffer(1);
    s.tmp_8.arg1 = r0;
    s.callLocIdx = 366; s.pc = 5; return s.tmp_8;
  case 5:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = (s.tmp_6).fields["services"] = (s.tmp_7);
  case 2:
  case 3:
    r0 = (s.unnamed79___U2 + 1);
    s.unnamed79___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed78___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_clearAttachCache__P3420.info = {"start":3794,"length":308,"line":123,"column":8,"endLine":129,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"clearAttachCache","argumentNames":["this"]}

function jacdac_Bus_clearAttachCache__P3420_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_clearAttachCache__P3420, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  d___6630: undefined,
  unnamed78___U1: undefined,
  unnamed79___U2: undefined,
  arg0: undefined,
} }





function helpers_bufferConcat__P2618(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___6648 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.r___6648 = (r0);
    r0 = pxsim.BufferMethods.write(s.r___6648, 0, s.arg0);
    s.tmp_0 = r0 = s.r___6648;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, s.tmp_1, s.arg1);
    r0 = s.r___6648;
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferConcat__P2618.info = {"start":3785,"length":179,"line":132,"column":4,"endLine":137,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"bufferConcat","argumentNames":["a","b"]}

function helpers_bufferConcat__P2618_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferConcat__P2618, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  r___6648: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_attachClient__P3424(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.removeElement(s.tmp_0, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_attachClient__P3424.info = {"start":5971,"length":97,"line":179,"column":8,"endLine":181,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"attachClient","argumentNames":["this","client"]}

function jacdac_Bus_attachClient__P3424_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_attachClient__P3424, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_device__P3507(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = s.arg0.fields["_device"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["_device"] = (s.arg1);
    s.tmp_0 = helpers_arrayForEach__P2000_mk(s);
    r0 = s.arg0.fields["registers"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = jacdac_Client_device_inline__P6686;
    s.callLocIdx = 561; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_device__P3507.info = {"start":34598,"length":192,"line":1057,"column":8,"endLine":1062,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"device","argumentNames":["this","device"]}

function jacdac_Client_device__P3507_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_device__P3507, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_device_inline__P6686(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_RegisterClient_reset__P3477_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 560; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_device_inline__P6686.info = {"start":34747,"length":18,"line":1060,"column":39,"endLine":1060,"endColumn":57,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["reg"]}

function jacdac_Client_device_inline__P6686_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_device_inline__P6686, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Client_device__P3506(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = s.arg0.fields["_device"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Client_device__P3506.info = {"start":34532,"length":56,"line":1053,"column":8,"endLine":1055,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"device","argumentNames":["this"]}
jacdac_Client_device__P3506.isGetter = true;

function jacdac_Client_device__P3506_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_device__P3506, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Client_role__P3503(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = s.arg0.fields["_role"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Client_role__P3503.info = {"start":33990,"length":52,"line":1035,"column":8,"endLine":1037,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"role","argumentNames":["this"]}
jacdac_Client_role__P3503.isGetter = true;

function jacdac_Client_role__P3503_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_role__P3503, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Client_roleQuery__P3505(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___6697 = undefined;
    s.query___6711 = undefined;
    s.r___6720 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = s.arg0.fields["_role"];
    s.tmp_0 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_0, "?", undefined);
    s.i___6697 = (r0);
    r0 = (s.i___6697 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ClientRoleQuery__C3488_VT);
    s.tmp_1 = r0;
    s.tmp_2 = jacdac_ClientRoleQuery_constructor__P3489_mk(s);
    s.tmp_2.arg0 = s.tmp_1;
    r0 = s.arg0.fields["_role"];
    s.tmp_2.arg1 = r0;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 556; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    r0 = s.tmp_1;
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_3 = helpers_stringSubstr__P2009_mk(s);
    r0 = s.arg0.fields["_role"];
    s.tmp_3.arg0 = r0;
    r0 = (s.i___6697 + 1);
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 557; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.query___6711 = (r0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ClientRoleQuery__C3488_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_ClientRoleQuery_constructor__P3489_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_2 = helpers_stringSubstr__P2009_mk(s);
    r0 = s.arg0.fields["_role"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = 0;
    s.tmp_2.arg2 = s.i___6697;
    s.callLocIdx = 558; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.query___6711;
    s.callLocIdx = 559; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.r___6720 = (s.tmp_0);
    r0 = s.r___6720;
  case 3:
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Client_roleQuery__P3505.info = {"start":34224,"length":298,"line":1045,"column":8,"endLine":1051,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"roleQuery","argumentNames":["this"]}
jacdac_Client_roleQuery__P3505.isGetter = true;

function jacdac_Client_roleQuery__P3505_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_roleQuery__P3505, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  i___6697: undefined,
  query___6711: undefined,
  r___6720: undefined,
  arg0: undefined,
} }





function helpers_stringSubstr__P2009(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg2 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_String_.length(s.arg0);
    { step = 4; continue; }
  case 1:
    s.tmp_1 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_1;
    { step = 3; continue; }
  case 2:
    r0 = 0;
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.arg2 = (s.tmp_3);
    r0 = pxsim_String_.substr(s.arg0, s.arg1, s.arg2);
    return leave(s, r0)
  default: oops()
} } }
helpers_stringSubstr__P2009.info = {"start":11286,"length":204,"line":379,"column":4,"endLine":382,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"stringSubstr","argumentNames":["s","start","length"]}

function helpers_stringSubstr__P2009_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringSubstr__P2009, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_ClientRoleQuery_constructor__P3489(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.kv___6750 = undefined;
    s.unnamed90___U1 = undefined;
    s.unnamed91___U2 = undefined;
    s.i___6755 = undefined;
    s.key___6763 = undefined;
    s.value___6768 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientRoleQuery__C3488_VT)) failedCast(r0);
    r0 = (s.arg0).fields["role"] = (s.arg1);
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 10; continue; }
    s.kv___6750 = (undefined);
    s.tmp_0 = helpers_stringSplit__P2013_mk(s);
    s.tmp_0.arg0 = s.arg2;
    s.tmp_0.arg1 = "&";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 546; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.unnamed90___U1 = (r0);
    s.unnamed91___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed91___U2;
    r0 = pxsim_Array__length(s.unnamed90___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed90___U1, s.unnamed91___U2);
    s.kv___6750 = (r0);
    r0 = pxsim_String_.indexOf(s.kv___6750, "=", undefined);
    s.i___6755 = (r0);
    r0 = (s.i___6755 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    { step = 8; continue; }
  case 2:
  case 3:
    s.tmp_1 = helpers_stringSlice__P2010_mk(s);
    s.tmp_1.arg0 = s.kv___6750;
    s.tmp_1.arg1 = 0;
    s.tmp_1.arg2 = s.i___6755;
    s.callLocIdx = 547; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.key___6763 = (r0);
    s.tmp_0 = helpers_stringSlice__P2010_mk(s);
    s.tmp_0.arg0 = s.kv___6750;
    r0 = (s.i___6755 + 1);
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 548; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    s.value___6768 = (r0);
    s.tmp_0 = r0 = s.key___6763;
    r0 = pxsim_pxtcore.switch_eq("dev", s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq("srvi", s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq("srvo", s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 4:
    r0 = (s.arg0).fields["device"] = (s.value___6768);
    { step = 7; continue; }
  case 5:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = parseInt__P1988_mk(s);
    s.tmp_2.arg0 = s.value___6768;
    s.tmp_2.arg1 = undefined;
    s.callLocIdx = 549; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["serviceIndex"] = (s.tmp_1);
    { step = 7; continue; }
  case 6:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = parseInt__P1988_mk(s);
    s.tmp_2.arg0 = s.value___6768;
    s.tmp_2.arg1 = undefined;
    s.callLocIdx = 550; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["serviceOffset"] = (s.tmp_1);
  case 7:
  case 8:
    r0 = (s.unnamed91___U2 + 1);
    s.unnamed91___U2 = (r0);
    { step = 1; continue; }
  case 9:
    s.unnamed90___U1 = (undefined);
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientRoleQuery_constructor__P3489.info = {"start":31806,"length":792,"line":970,"column":8,"endLine":989,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","role","query"]}

function jacdac_ClientRoleQuery_constructor__P3489_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientRoleQuery_constructor__P3489, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  kv___6750: undefined,
  unnamed90___U1: undefined,
  unnamed91___U2: undefined,
  i___6755: undefined,
  key___6763: undefined,
  value___6768: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function parseInt__P1988(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.start___6806 = undefined;
    s.sign___6836 = undefined;
    s.output___6881 = undefined;
    s.hasDigit___6882 = undefined;
    s.i___6883 = undefined;
    s.code___6890 = undefined;
    s.val___6897 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 1:
    r0 = (s.arg1 != null);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 2:
    r0 = (s.arg1 < 2);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_3;
    { step = 4; continue; }
  case 3:
    r0 = (s.arg1 > 36);
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
  case 6:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 7; continue; }
    r0 = NaN;
    { step = 46; continue; }
  case 7:
  case 8:
    s.start___6806 = (0);
  case 9:
    s.tmp_1 = r0 = s.start___6806;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 10:
    s.tmp_3 = helpers_isWhitespace__P2015_mk(s);
    r0 = pxsim_String_.charCodeAt(s.arg0, s.start___6806);
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 0; s.pc = 47; return s.tmp_3;
  case 47:
    r0 = s.retval;
  case 11:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 12; continue; }
    r0 = (s.start___6806 + 1);
    s.start___6806 = (r0);
    { step = 9; continue; }
  case 12:
    s.tmp_1 = r0 = s.start___6806;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 === s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = NaN;
    { step = 46; continue; }
  case 13:
  case 14:
    s.sign___6836 = (1);
    r0 = pxsim_String_.charAt(s.arg0, s.start___6806);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq("-", s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq("+", s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 15:
    s.sign___6836 = (-1);
  case 16:
    r0 = (s.start___6806 + 1);
    s.start___6806 = (r0);
  case 17:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = s.tmp_0;
    { step = 19; continue; }
  case 18:
    r0 = (s.arg1 == 16);
  case 19:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 20; continue; }
    r0 = s.tmp_2;
    { step = 21; continue; }
  case 20:
    r0 = pxsim_String_.charAt(s.arg0, s.start___6806);
    s.tmp_3 = r0;
    r0 = ("0" === s.tmp_3);
  case 21:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 22; continue; }
    r0 = s.tmp_4;
    { step = 25; continue; }
  case 22:
    s.tmp_7 = r0 = s.arg0;
    r0 = (s.start___6806 + 1);
    s.tmp_8 = r0;
    r0 = pxsim_String_.charAt(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    r0 = ("x" === s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 23; continue; }
    r0 = s.tmp_5;
    { step = 24; continue; }
  case 23:
    s.tmp_10 = r0 = s.arg0;
    r0 = (s.start___6806 + 1);
    s.tmp_11 = r0;
    r0 = pxsim_String_.charAt(s.tmp_10, s.tmp_11);
    s.tmp_9 = r0;
    r0 = ("X" === s.tmp_9);
  case 24:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = s.tmp_12;
  case 25:
    // jmp value (already in r0)
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    if (!r0) { step = 26; continue; }
    s.arg1 = (16);
    r0 = (s.start___6806 + 2);
    s.start___6806 = (r0);
    { step = 29; continue; }
  case 26:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    s.arg1 = (10);
  case 27:
  case 28:
  case 29:
    s.output___6881 = (0);
    s.hasDigit___6882 = (false);
    s.i___6883 = (s.start___6806);
  case 30:
    s.tmp_1 = r0 = s.i___6883;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 45; continue; }
    r0 = pxsim_String_.charCodeAt(s.arg0, s.i___6883);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 | 32);
    s.code___6890 = (r0);
    s.val___6897 = (undefined);
    r0 = (s.code___6890 >= 48);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 31; continue; }
    r0 = s.tmp_0;
    { step = 32; continue; }
  case 31:
    r0 = (s.code___6890 < 58);
  case 32:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 33; continue; }
    r0 = (s.code___6890 - 48);
    s.val___6897 = (r0);
    { step = 38; continue; }
  case 33:
    r0 = (s.code___6890 >= 97);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 34; continue; }
    r0 = s.tmp_0;
    { step = 35; continue; }
  case 34:
    r0 = (s.code___6890 < 123);
  case 35:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 36; continue; }
    r0 = (10 + s.code___6890);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 97);
    s.val___6897 = (r0);
  case 36:
  case 37:
  case 38:
    r0 = (s.val___6897 == undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 39; continue; }
    r0 = s.tmp_0;
    { step = 40; continue; }
  case 39:
    r0 = (s.val___6897 >= s.arg1);
  case 40:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 43; continue; }
    r0 = pxsim_numops_toBoolDecr(s.hasDigit___6882);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 41; continue; }
    r0 = NaN;
    { step = 46; continue; }
  case 41:
  case 42:
    { step = 45; continue; }
  case 43:
  case 44:
    s.hasDigit___6882 = (true);
    r0 = (s.output___6881 * s.arg1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + s.val___6897);
    s.output___6881 = (r0);
    r0 = (s.i___6883 + 1);
    s.i___6883 = (r0);
    { step = 30; continue; }
  case 45:
    r0 = (s.sign___6836 * s.output___6881);
  case 46:
    return leave(s, r0)
  default: oops()
} } }
parseInt__P1988.info = {"start":1064,"length":1690,"line":44,"column":0,"endLine":103,"endColumn":1,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"parseInt","argumentNames":["text","radix"]}

function parseInt__P1988_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: parseInt__P1988, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  start___6806: undefined,
  sign___6836: undefined,
  output___6881: undefined,
  hasDigit___6882: undefined,
  i___6883: undefined,
  code___6890: undefined,
  val___6897: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_isWhitespace__P2015(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(11, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(12, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(32, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(160, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(65279, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(10, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(8232, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(8233, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 1:
  case 2:
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
  case 8:
  case 9:
  case 10:
    r0 = true;
    { step = 12; continue; }
  case 11:
    r0 = false;
    { step = 12; continue; }
    r0 = undefined;
  case 12:
    return leave(s, r0)
  default: oops()
} } }
helpers_isWhitespace__P2015.info = {"start":14864,"length":674,"line":503,"column":4,"endLine":520,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"isWhitespace","argumentNames":["c"]}

function helpers_isWhitespace__P2015_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_isWhitespace__P2015, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function helpers_stringSlice__P2010(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___6956 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.length(s.arg0);
    s.len___6956 = (r0);
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = Math_max__P2021_mk(s);
    r0 = (s.len___6956 + s.arg1);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.callLocIdx = 11; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.arg1 = (r0);
  case 1:
  case 2:
    r0 = (s.arg2 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.arg2 = (s.len___6956);
    { step = 6; continue; }
  case 3:
    r0 = (s.arg2 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.arg2 = (0);
  case 4:
  case 5:
  case 6:
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = (s.len___6956 + s.arg2);
    s.arg2 = (r0);
  case 7:
  case 8:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.arg2 - s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_String_.substr(s.tmp_0, s.tmp_1, s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
helpers_stringSlice__P2010.info = {"start":11496,"length":440,"line":384,"column":4,"endLine":402,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"stringSlice","argumentNames":["s","start","end"]}

function helpers_stringSlice__P2010_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringSlice__P2010, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  len___6956: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_stringSplit__P2013(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.A___6991 = undefined;
    s.lim___6993 = undefined;
    s.s___7009 = undefined;
    s.p___7012 = undefined;
    s.R___7013 = undefined;
    s.z___7027 = undefined;
    s.T___7040 = undefined;
    s.q___7041 = undefined;
    s.e___7047 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.A___6991 = (r0);
    s.lim___6993 = (0);
    r0 = (s.arg2 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (536870912 - 1);
    s.lim___6993 = (r0);
    { step = 4; continue; }
  case 1:
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.lim___6993 = (0);
    { step = 3; continue; }
  case 2:
    r0 = (s.arg2 | 0);
    s.lim___6993 = (r0);
  case 3:
  case 4:
    r0 = pxsim_String_.length(s.arg0);
    s.s___7009 = (r0);
    s.p___7012 = (0);
    s.R___7013 = (s.arg1);
    r0 = (s.lim___6993 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.A___6991;
    { step = 21; continue; }
  case 5:
  case 6:
    r0 = (s.arg1 === undefined);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    r0 = pxsim_Array_.setAt(s.A___6991, 0, s.arg0);
    r0 = s.A___6991;
    { step = 21; continue; }
  case 7:
  case 8:
    r0 = (s.s___7009 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.tmp_1 = helpers_splitMatch__P3936_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = 0;
    s.tmp_1.arg2 = s.R___7013;
    s.callLocIdx = 14; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.z___7027 = (r0);
    r0 = (s.z___7027 > -1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = s.A___6991;
    { step = 21; continue; }
  case 9:
  case 10:
    r0 = pxsim_Array_.setAt(s.A___6991, 0, s.arg0);
    r0 = s.A___6991;
    { step = 21; continue; }
  case 11:
  case 12:
    s.q___7041 = (s.p___7012);
  case 13:
    r0 = (s.q___7041 != s.s___7009);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
    s.tmp_1 = helpers_splitMatch__P3936_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.q___7041;
    s.tmp_1.arg2 = s.R___7013;
    s.callLocIdx = 15; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
    s.e___7047 = (r0);
    r0 = (s.e___7047 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = (s.q___7041 + 1);
    s.q___7041 = (r0);
    { step = 19; continue; }
  case 14:
    r0 = (s.e___7047 == s.p___7012);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = (s.q___7041 + 1);
    s.q___7041 = (r0);
    { step = 18; continue; }
  case 15:
    s.tmp_0 = helpers_stringSlice__P2010_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.p___7012;
    s.tmp_0.arg2 = s.q___7041;
    s.callLocIdx = 16; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.T___7040 = (r0);
    r0 = pxsim_Array__push(s.A___6991, s.T___7040);
    r0 = pxsim_Array__length(s.A___6991);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.lim___6993);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
    r0 = s.A___6991;
    { step = 21; continue; }
  case 16:
  case 17:
    s.p___7012 = (s.e___7047);
    s.q___7041 = (s.p___7012);
  case 18:
  case 19:
    { step = 13; continue; }
  case 20:
    s.tmp_0 = helpers_stringSlice__P2010_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.p___7012;
    s.tmp_0.arg2 = s.q___7041;
    s.callLocIdx = 17; s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
    s.T___7040 = (r0);
    r0 = pxsim_Array__push(s.A___6991, s.T___7040);
    r0 = s.A___6991;
  case 21:
    return leave(s, r0)
  default: oops()
} } }
helpers_stringSplit__P2013.info = {"start":12919,"length":1319,"line":434,"column":4,"endLine":478,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"stringSplit","argumentNames":["S","separator","limit"]}

function helpers_stringSplit__P2013_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringSplit__P2013, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  A___6991: undefined,
  lim___6993: undefined,
  s___7009: undefined,
  p___7012: undefined,
  R___7013: undefined,
  z___7027: undefined,
  T___7040: undefined,
  q___7041: undefined,
  e___7047: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_splitMatch__P3936(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___7092 = undefined;
    s.s___7095 = undefined;
    s.i___7105 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.length(s.arg2);
    s.r___7092 = (r0);
    r0 = pxsim_String_.length(s.arg0);
    s.s___7095 = (r0);
    r0 = (s.arg1 + s.r___7092);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.s___7095);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = -1;
    { step = 7; continue; }
  case 1:
  case 2:
    s.i___7105 = (0);
  case 3:
    r0 = (s.i___7105 < s.r___7092);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_3 = r0 = s.arg0;
    r0 = (s.arg1 + s.i___7105);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.arg2, s.i___7105);
    s.tmp_5 = r0;
    r0 = (s.tmp_2 != s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = -1;
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = (s.i___7105 + 1);
    s.i___7105 = (r0);
    { step = 3; continue; }
  case 6:
    r0 = (s.arg1 + s.r___7092);
  case 7:
    return leave(s, r0)
  default: oops()
} } }
helpers_splitMatch__P3936.info = {"start":14244,"length":289,"line":480,"column":4,"endLine":489,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"splitMatch","argumentNames":["S","q","R"]}

function helpers_splitMatch__P3936_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_splitMatch__P3936, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  r___7092: undefined,
  s___7095: undefined,
  i___7105: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Device_matchesRoleAt__P3538(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.role___7130 = undefined;
    s.d___7164 = undefined;
    s.mrole___7228 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = s.arg1.fields["role"];
    s.role___7130 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.role___7130);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = true;
    { step = 25; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["deviceId"];
    s.tmp_3 = r0;
    r0 = (s.role___7130 == s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = true;
    { step = 25; continue; }
  case 3:
  case 4:
    s.tmp_5 = r0 = s.role___7130;
    r0 = s.arg0.fields["deviceId"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_9, ":");
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_7 = r0;
    if ((s.arg3) && (s.arg3).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.arg3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg3) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_11);
    s.tmp_6 = r0;
    r0 = (s.tmp_5 == s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    s.tmp_12 = jacdac_log__P4284_mk(s);
    if ((s.role___7130) && (s.role___7130).vtable) {
    setupResume(s, 30);
    pxsim_String__stringConv(s.role___7130);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.role___7130) + ""; }
  case 30:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat("role: match ", s.tmp_14);
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_13, " (precise:)");
    s.tmp_12.arg0 = r0;
    s.callLocIdx = 602; s.pc = 29; return s.tmp_12;
  case 29:
    r0 = s.retval;
    r0 = true;
    { step = 25; continue; }
  case 5:
  case 6:
    r0 = pxsim_String_.indexOf(s.role___7130, ":", undefined);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = false;
    { step = 25; continue; }
  case 7:
  case 8:
    r0 = s.arg1.fields["device"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == "self");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 9; continue; }
    s.tmp_4 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_4.arg0 = globals.bus___3430;
    s.callLocIdx = 603; s.pc = 31; return s.tmp_4;
  case 31:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    { step = 10; continue; }
  case 9:
    r0 = s.arg0.fields["deviceId"];
  case 10:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    s.d___7164 = (s.tmp_5);
    r0 = s.arg1.fields["device"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.d___7164);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 23; continue; }
    r0 = s.arg1.fields["serviceIndex"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != undefined);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 11; continue; }
    r0 = s.tmp_2;
    { step = 12; continue; }
  case 11:
    r0 = s.arg1.fields["serviceIndex"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.arg3);
  case 12:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 13; continue; }
    s.tmp_6 = jacdac_log__P4284_mk(s);
    if ((s.role___7130) && (s.role___7130).vtable) {
    setupResume(s, 33);
    pxsim_String__stringConv(s.role___7130);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.role___7130) + ""; }
  case 33:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat("role: match ", s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " (dev:srvi)");
    s.tmp_6.arg0 = r0;
    s.callLocIdx = 604; s.pc = 32; return s.tmp_6;
  case 32:
    r0 = s.retval;
    r0 = true;
    { step = 25; continue; }
  case 13:
  case 14:
    r0 = s.arg1.fields["serviceOffset"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = s.tmp_0;
    { step = 16; continue; }
  case 15:
    r0 = s.arg1.fields["serviceOffset"];
    s.tmp_2 = r0;
    s.tmp_4 = jacdac_Device_serviceOffsetAt__P4300_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg2;
    s.tmp_4.arg2 = s.arg3;
    s.callLocIdx = 605; s.pc = 34; return s.tmp_4;
  case 34:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 == s.tmp_3);
  case 16:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 17; continue; }
    s.tmp_6 = jacdac_log__P4284_mk(s);
    if ((s.role___7130) && (s.role___7130).vtable) {
    setupResume(s, 36);
    pxsim_String__stringConv(s.role___7130);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.role___7130) + ""; }
  case 36:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat("role: match ", s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " (dev:srvo)");
    s.tmp_6.arg0 = r0;
    s.callLocIdx = 606; s.pc = 35; return s.tmp_6;
  case 35:
    r0 = s.retval;
  case 17:
  case 18:
    r0 = s.arg1.fields["serviceIndex"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 19; continue; }
    r0 = s.tmp_0;
    { step = 20; continue; }
  case 19:
    r0 = s.arg1.fields["serviceOffset"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 != undefined);
  case 20:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 21; continue; }
    s.tmp_4 = jacdac_log__P4284_mk(s);
    if ((s.role___7130) && (s.role___7130).vtable) {
    setupResume(s, 38);
    pxsim_String__stringConv(s.role___7130);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.role___7130) + ""; }
  case 38:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat("role: match ", s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, " (dev:!srv)");
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 607; s.pc = 37; return s.tmp_4;
  case 37:
    r0 = s.retval;
    r0 = true;
    { step = 25; continue; }
  case 21:
  case 22:
  case 23:
  case 24:
    s.tmp_0 = jacdac__rolemgr_getRole__P3285_mk(s);
    r0 = s.arg0.fields["deviceId"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg3;
    s.callLocIdx = 608; s.pc = 39; return s.tmp_0;
  case 39:
    r0 = s.retval;
    s.mrole___7228 = (r0);
    r0 = (s.mrole___7228 == s.role___7130);
  case 25:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_matchesRoleAt__P3538.info = {"start":44342,"length":1943,"line":1348,"column":8,"endLine":1401,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"matchesRoleAt","argumentNames":["this","query","serviceClass","serviceIdx"]}

function jacdac_Device_matchesRoleAt__P3538_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_matchesRoleAt__P3538, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  role___7130: undefined,
  d___7164: undefined,
  mrole___7228: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac__rolemgr_getRole__P3285(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = settings_readString__P2797_mk(s);
    if ((globals.roleSettingPrefix___4255) && (globals.roleSettingPrefix___4255).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(globals.roleSettingPrefix___4255);
    checkResumeConsumed();
    return;
    } else { s.retval = (globals.roleSettingPrefix___4255) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, ":");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_7);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 277; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_getRole__P3285.info = {"start":217,"length":141,"line":8,"column":4,"endLine":10,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"getRole","argumentNames":["devid","servIdx"]}

function jacdac__rolemgr_getRole__P3285_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_getRole__P3285, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function settings_readString__P2797(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___7255 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._get(s.arg0);
    s.buf___7255 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.buf___7255);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
    r0 = pxsim.BufferMethods.toString(s.buf___7255);
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
settings_readString__P2797.info = {"start":2827,"length":177,"line":110,"column":4,"endLine":116,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"readString","argumentNames":["key"]}

function settings_readString__P2797_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readString__P2797, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  buf___7255: undefined,
  arg0: undefined,
} }





function settings_readBuffer__P2796(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._get(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_readBuffer__P2796.info = {"start":2694,"length":72,"line":103,"column":4,"endLine":105,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"readBuffer","argumentNames":["key"]}

function settings_readBuffer__P2796_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readBuffer__P2796, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Device_serviceOffsetAt__P4300(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.o___7272 = undefined;
    s.n___7275 = undefined;
    s.i___7277 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    s.o___7272 = (-1);
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 2);
    s.n___7275 = (r0);
    s.i___7277 = (0);
  case 1:
    r0 = (s.i___7277 < s.n___7275);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_3 = jacdac_Device_serviceClassAt__P3540_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.i___7277;
    s.callLocIdx = 611; s.pc = 8; return s.tmp_3;
  case 8:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = (s.o___7272 + 1);
    s.o___7272 = (r0);
    r0 = (s.arg2 == s.i___7277);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.o___7272;
    { step = 7; continue; }
  case 2:
  case 3:
  case 4:
  case 5:
    r0 = (s.i___7277 + 1);
    s.i___7277 = (r0);
    { step = 1; continue; }
  case 6:
    r0 = -1;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_serviceOffsetAt__P4300.info = {"start":46579,"length":424,"line":1412,"column":8,"endLine":1425,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceOffsetAt","argumentNames":["this","serviceClass","serviceIndex"]}

function jacdac_Device_serviceOffsetAt__P4300_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_serviceOffsetAt__P4300, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  o___7272: undefined,
  n___7275: undefined,
  i___7277: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Device_serviceClassLength__P3539(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 2);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_serviceClassLength__P3539.info = {"start":46488,"length":81,"line":1408,"column":8,"endLine":1410,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceClassLength","argumentNames":["this"]}
jacdac_Device_serviceClassLength__P3539.isGetter = true;

function jacdac_Device_serviceClassLength__P3539_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_serviceClassLength__P3539, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Client__detach__P3516(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    s.tmp_0 = jacdac_log__P4284_mk(s);
    s.tmp_3 = jacdac_Client_roleName__P3504_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 583; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("roles: dettached ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 584; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = (s.arg0).fields["serviceIndex"] = (null);
    r0 = s.arg0.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["_device"];
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 1; continue; }
    s.tmp_6 = jacdac_panic__P3432_mk(s);
    s.tmp_6.arg0 = "invalid detach";
    s.callLocIdx = 586; s.pc = 8; return s.tmp_6;
  case 8:
    r0 = s.retval;
  case 1:
  case 2:
    s.tmp_0 = jacdac_Client_device__P3507_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = null;
    s.callLocIdx = 587; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.tmp_0 = jacdac_Bus_detachClient__P3423_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 588; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 3:
  case 4:
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DISCONNECT___3392;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 589; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client__detach__P3516.info = {"start":39015,"length":326,"line":1182,"column":8,"endLine":1191,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_detach","argumentNames":["this"]}

function jacdac_Client__detach__P3516_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client__detach__P3516, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
} }





function jacdac_Bus_detachClient__P3423(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_2 = r0;
    r0 = pxsim_Array_.indexOf(s.tmp_2, s.arg1, undefined);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.arg1);
    s.tmp_0 = jacdac_Bus_clearAttachCache__P3420_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 379; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_detachClient__P3423.info = {"start":5753,"length":208,"line":172,"column":8,"endLine":177,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"detachClient","argumentNames":["this","client"]}

function jacdac_Bus_detachClient__P3423_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_detachClient__P3423, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_roleName__P3504(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___7342 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = s.arg0.fields["_role"];
    s.tmp_0 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_0, "?", undefined);
    s.i___7342 = (r0);
    r0 = (s.i___7342 > -1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = helpers_stringSubstr__P2009_mk(s);
    r0 = s.arg0.fields["_role"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.tmp_1.arg2 = s.i___7342;
    s.callLocIdx = 555; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["_role"];
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Client_roleName__P3504.info = {"start":34052,"length":162,"line":1039,"column":8,"endLine":1043,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"roleName","argumentNames":["this"]}
jacdac_Client_roleName__P3504.isGetter = true;

function jacdac_Client_roleName__P3504_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_roleName__P3504, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  i___7342: undefined,
  arg0: undefined,
} }





function jacdac_Device_toString__P3537(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Device_shortId__P3536_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 601; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_toString__P3537.info = {"start":44278,"length":54,"line":1344,"column":8,"endLine":1346,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_Device_toString__P3537_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_toString__P3537, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_resetToProxy__P4331(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.control.dmesg("jacdac: reset in dongle");
    s.tmp_0 = settings_writeNumber__P2794_mk(s);
    s.tmp_0.arg0 = globals.JACDAC_PROXY_SETTING___3557;
    s.tmp_0.arg1 = 1;
    s.callLocIdx = 722; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    setupResume(s, 2);
    pxsim.control.reset();
    checkResumeConsumed();
    return;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_resetToProxy__P4331.info = {"start":62382,"length":158,"line":1863,"column":4,"endLine":1867,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"resetToProxy","argumentNames":[]}

function jacdac_resetToProxy__P4331_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_resetToProxy__P4331, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function settings_writeNumber__P2794(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_1 = settings_writeBuffer__P2791_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_2 = msgpack_packNumberArray__P2616_mk(s);
    s.tmp_2.arg0 = s.tmp_0;
    s.callLocIdx = 76; s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 77; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeNumber__P2794.info = {"start":2265,"length":122,"line":89,"column":4,"endLine":91,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"writeNumber","argumentNames":["key","value"]}

function settings_writeNumber__P2794_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeNumber__P2794, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function msgpack_packNumberArray__P2616(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.off___7376 = undefined;
    s.n___7378 = undefined;
    s.unnamed50___U2 = undefined;
    s.unnamed51___U3 = undefined;
    s.buf___7388 = undefined;
    s.n___7394 = undefined;
    s.unnamed52___U6 = undefined;
    s.unnamed53___U7 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.off___7376 = (0);
    s.n___7378 = (undefined);
    s.unnamed50___U2 = (s.arg0);
    s.unnamed51___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed51___U3;
    r0 = pxsim_Array__length(s.unnamed50___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed50___U2, s.unnamed51___U3);
    s.n___7378 = (r0);
    s.tmp_2 = r0 = s.off___7376;
    s.tmp_4 = msgpack_packNumberCore__P4030_mk(s);
    s.tmp_4.arg0 = null;
    s.tmp_4.arg1 = s.off___7376;
    s.tmp_4.arg2 = s.n___7378;
    s.callLocIdx = 53; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.off___7376 = (r0);
    r0 = (s.unnamed51___U3 + 1);
    s.unnamed51___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed50___U2 = (undefined);
    r0 = pxsim.control.createBuffer(s.off___7376);
    s.buf___7388 = (r0);
    s.off___7376 = (0);
    s.n___7394 = (undefined);
    s.unnamed52___U6 = (s.arg0);
    s.unnamed53___U7 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed53___U7;
    r0 = pxsim_Array__length(s.unnamed52___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed52___U6, s.unnamed53___U7);
    s.n___7394 = (r0);
    s.tmp_2 = r0 = s.off___7376;
    s.tmp_4 = msgpack_packNumberCore__P4030_mk(s);
    s.tmp_4.arg0 = s.buf___7388;
    s.tmp_4.arg1 = s.off___7376;
    s.tmp_4.arg2 = s.n___7394;
    s.callLocIdx = 54; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.off___7376 = (r0);
    r0 = (s.unnamed53___U7 + 1);
    s.unnamed53___U7 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed52___U6 = (undefined);
    r0 = s.buf___7388;
    return leave(s, r0)
  default: oops()
} } }
msgpack_packNumberArray__P2616.info = {"start":3427,"length":330,"line":117,"column":4,"endLine":128,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"packNumberArray","argumentNames":["nums"]}

function msgpack_packNumberArray__P2616_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_packNumberArray__P2616, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  off___7376: undefined,
  n___7378: undefined,
  unnamed50___U2: undefined,
  unnamed51___U3: undefined,
  buf___7388: undefined,
  n___7394: undefined,
  unnamed52___U6: undefined,
  unnamed53___U7: undefined,
  arg0: undefined,
} }





function msgpack_packNumberCore__P4030(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tag___7408 = undefined;
    s.fmt___7451 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tag___7408 = (203);
    s.tmp_1 = r0 = s.arg2;
    r0 = (s.arg2 << 0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = r0 = s.arg2;
    r0 = (s.arg2 >>> 0);
    s.tmp_4 = r0;
    r0 = (s.tmp_3 == s.tmp_4);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 19; continue; }
    r0 = (-31 <= s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_6;
    { step = 4; continue; }
  case 3:
    r0 = (s.arg2 <= 127);
  case 4:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 7; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 5; continue; }
    r0 = pxsim.BufferMethods.setByte(s.arg0, s.arg1, s.arg2);
  case 5:
  case 6:
    r0 = 1;
    { step = 23; continue; }
    { step = 18; continue; }
  case 7:
    r0 = (0 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = (s.arg2 <= 255);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 8; continue; }
    s.tag___7408 = (204);
    { step = 11; continue; }
  case 8:
    r0 = (s.arg2 <= 65535);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tag___7408 = (205);
    { step = 10; continue; }
  case 9:
    s.tag___7408 = (206);
  case 10:
  case 11:
    { step = 17; continue; }
  case 12:
    r0 = (-127 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    s.tag___7408 = (208);
    { step = 16; continue; }
  case 13:
    r0 = (-32767 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tag___7408 = (209);
    { step = 15; continue; }
  case 14:
    s.tag___7408 = (210);
  case 15:
  case 16:
  case 17:
  case 18:
  case 19:
  case 20:
    s.tmp_0 = msgpack_tagFormat__P4029_mk(s);
    s.tmp_0.arg0 = s.tag___7408;
    s.callLocIdx = 49; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.fmt___7451 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 21; continue; }
    r0 = pxsim.BufferMethods.setByte(s.arg0, s.arg1, s.tag___7408);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.fmt___7451;
    r0 = (s.arg1 + 1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.arg2);
  case 21:
  case 22:
    s.tmp_1 = pins_sizeOf__P2607_mk(s);
    s.tmp_1.arg0 = s.fmt___7451;
    s.callLocIdx = 50; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
  case 23:
    return leave(s, r0)
  default: oops()
} } }
msgpack_packNumberCore__P4030.info = {"start":1632,"length":951,"line":56,"column":4,"endLine":86,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"packNumberCore","argumentNames":["buf","offset","num"]}

function msgpack_packNumberCore__P4030_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_packNumberCore__P4030, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tag___7408: undefined,
  fmt___7451: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function pins_sizeOf__P2607(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = Buffer_sizeOfNumberFormat__P2647_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 48; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
pins_sizeOf__P2607.info = {"start":42,"length":101,"line":2,"column":4,"endLine":4,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"sizeOf","argumentNames":["format"]}

function pins_sizeOf__P2607_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pins_sizeOf__P2607, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function Buffer_sizeOfNumberFormat__P2647(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(6, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(7, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(8, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(10, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq(12, s.tmp_0);
    if (r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.switch_eq(11, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(15, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq(16, s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq(14, s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 1:
  case 2:
  case 3:
  case 4:
    r0 = 1;
    { step = 18; continue; }
  case 5:
  case 6:
  case 7:
  case 8:
    r0 = 2;
    { step = 18; continue; }
  case 9:
  case 10:
  case 11:
  case 12:
  case 13:
  case 14:
    r0 = 4;
    { step = 18; continue; }
  case 15:
  case 16:
    r0 = 8;
    { step = 18; continue; }
  case 17:
    r0 = 0;
  case 18:
    return leave(s, r0)
  default: oops()
} } }
Buffer_sizeOfNumberFormat__P2647.info = {"start":14912,"length":856,"line":508,"column":4,"endLine":532,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"sizeOfNumberFormat","argumentNames":["format"]}

function Buffer_sizeOfNumberFormat__P2647_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_sizeOfNumberFormat__P2647, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function msgpack_tagFormat__P4029(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(203, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(204, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(205, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(206, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(208, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(209, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(210, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 1:
    r0 = 16;
    { step = 9; continue; }
  case 2:
    r0 = 7;
    { step = 9; continue; }
  case 3:
    r0 = 9;
    { step = 9; continue; }
  case 4:
    r0 = 12;
    { step = 9; continue; }
  case 5:
    r0 = 6;
    { step = 9; continue; }
  case 6:
    r0 = 8;
    { step = 9; continue; }
  case 7:
    r0 = 10;
    { step = 9; continue; }
  case 8:
    r0 = null;
    { step = 9; continue; }
    r0 = undefined;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
msgpack_tagFormat__P4029.info = {"start":1145,"length":481,"line":42,"column":4,"endLine":54,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"tagFormat","argumentNames":["tag"]}

function msgpack_tagFormat__P4029_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_tagFormat__P4029, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_isBrain__P3530(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Device_hasService__P3546_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 272387813;
    s.callLocIdx = 598; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_isBrain__P3530.info = {"start":43442,"length":78,"line":1312,"column":8,"endLine":1314,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"isBrain","argumentNames":["this"]}
jacdac_Device_isBrain__P3530.isGetter = true;

function jacdac_Device_isBrain__P3530_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_isBrain__P3530, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_hasService__P3546(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.n___7510 = undefined;
    s.i___7512 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 2);
    s.n___7510 = (r0);
    s.i___7512 = (0);
  case 1:
    r0 = (s.i___7512 < s.n___7510);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = jacdac_Device_serviceClassAt__P3540_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.i___7512;
    s.callLocIdx = 633; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = true;
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = (s.i___7512 + 1);
    s.i___7512 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = false;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_hasService__P3546.info = {"start":51441,"length":228,"line":1544,"column":8,"endLine":1549,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"hasService","argumentNames":["this","serviceClass"]}

function jacdac_Device_hasService__P3546_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_hasService__P3546, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  n___7510: undefined,
  i___7512: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_serviceMatches__P4310(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ds___7527 = undefined;
    s.i___7538 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["services"];
    s.ds___7527 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.ds___7527);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.BufferMethods.length(s.ds___7527);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 != s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 3; continue; }
    r0 = false;
    { step = 9; continue; }
  case 3:
  case 4:
    s.i___7538 = (4);
  case 5:
    s.tmp_1 = r0 = s.i___7538;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = pxsim.BufferMethods.getByte(s.ds___7527, s.i___7538);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, s.i___7538);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 != s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
    r0 = false;
    { step = 9; continue; }
  case 6:
  case 7:
    r0 = (s.i___7538 + 1);
    s.i___7538 = (r0);
    { step = 5; continue; }
  case 8:
    r0 = true;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
jacdac_serviceMatches__P4310.info = {"start":57687,"length":249,"line":1715,"column":4,"endLine":1720,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceMatches","argumentNames":["dev","serv"]}

function jacdac_serviceMatches__P4310_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_serviceMatches__P4310, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  ds___7527: undefined,
  i___7538: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device__destroy__P3549(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___7561 = undefined;
    s.unnamed94___U1 = undefined;
    s.unnamed95___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    s.tmp_0 = jacdac_log__P4284_mk(s);
    s.tmp_3 = jacdac_Device_shortId__P3536_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 634; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("destroy ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 635; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.c___7561 = (undefined);
    r0 = s.arg0.fields["clients"];
    s.unnamed94___U1 = (r0);
    s.unnamed95___U2 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed95___U2;
    r0 = pxsim_Array__length(s.unnamed94___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed94___U1, s.unnamed95___U2);
    s.c___7561 = (r0);
    s.tmp_2 = jacdac_Client__detach__P3516_mk(s);
    s.tmp_2.arg0 = s.c___7561;
    s.callLocIdx = 636; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    r0 = (s.unnamed95___U2 + 1);
    s.unnamed95___U2 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed94___U1 = (undefined);
    r0 = (s.arg0).fields["clients"] = (null);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_DISCONNECT___3394;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 637; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.DEVICE_DISCONNECT___3394;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 638; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device__destroy__P3549.info = {"start":52186,"length":238,"line":1566,"column":8,"endLine":1572,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_destroy","argumentNames":["this"]}

function jacdac_Device__destroy__P3549_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device__destroy__P3549, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  c___7561: undefined,
  unnamed94___U1: undefined,
  unnamed95___U2: undefined,
  arg0: undefined,
} }





function jacdac_Device_shortId__P3536(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = s.arg0.fields["_shortId"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = r0 = s.arg0;
    s.tmp_5 = jacdac_shortDeviceId__P3524_mk(s);
    r0 = s.arg0.fields["deviceId"];
    s.tmp_5.arg0 = r0;
    s.callLocIdx = 600; s.pc = 3; return s.tmp_5;
  case 3:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["_shortId"] = (s.tmp_4);
  case 1:
  case 2:
    r0 = s.arg0.fields["_shortId"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_shortId__P3536.info = {"start":44082,"length":186,"line":1338,"column":8,"endLine":1342,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"shortId","argumentNames":["this"]}
jacdac_Device_shortId__P3536.isGetter = true;

function jacdac_Device_shortId__P3536_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_shortId__P3536, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_shortDeviceId__P3524(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.h___7589 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = Buffer_fromHex__P2638_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 596; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.hash(s.tmp_0, 30);
    s.h___7589 = (r0);
    r0 = (s.h___7589 % 26);
    s.tmp_7 = r0;
    r0 = (65 + s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_6);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim.Math_.idiv(s.h___7589, 26);
    s.tmp_12 = r0;
    r0 = (s.tmp_12 % 26);
    s.tmp_11 = r0;
    r0 = (65 + s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_8);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.Math_.idiv(s.h___7589, 676);
    s.tmp_17 = r0;
    r0 = (s.tmp_17 % 10);
    s.tmp_16 = r0;
    r0 = (48 + s.tmp_16);
    s.tmp_15 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_15);
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_13);
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.Math_.idiv(s.h___7589, 6760);
    s.tmp_22 = r0;
    r0 = (s.tmp_22 % 10);
    s.tmp_21 = r0;
    r0 = (48 + s.tmp_21);
    s.tmp_20 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_20);
    s.tmp_19 = r0;
    if ((s.tmp_19) && (s.tmp_19).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_19);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_19) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_18 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_18);
    return leave(s, r0)
  default: oops()
} } }
jacdac_shortDeviceId__P3524.info = {"start":42436,"length":390,"line":1280,"column":4,"endLine":1288,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"shortDeviceId","argumentNames":["devid"]}

function jacdac_shortDeviceId__P3524_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_shortDeviceId__P3524, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  h___7589: undefined,
  arg0: undefined,
} }





function Buffer_fromHex__P2638(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.hexStr___7647 = undefined;
    s.res___7649 = undefined;
    s.i___7658 = undefined;
    s.p0___7664 = undefined;
    s.p1___7673 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.hexStr___7647 = ("0123456789abcdef");
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 1);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.res___7649 = (r0);
    s.tmp_0 = helpers_stringToLowerCase__P2012_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 55; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.arg0 = (r0);
    s.i___7658 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___7658;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_3 = r0 = s.hexStr___7647;
    r0 = pxsim_String_.charAt(s.arg0, s.i___7658);
    s.tmp_4 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_3, s.tmp_4, undefined);
    s.p0___7664 = (r0);
    s.tmp_0 = r0 = s.hexStr___7647;
    s.tmp_2 = r0 = s.arg0;
    r0 = (s.i___7658 + 1);
    s.tmp_3 = r0;
    r0 = pxsim_String_.charAt(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_0, s.tmp_1, undefined);
    s.p1___7673 = (r0);
    r0 = (s.p0___7664 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.p1___7673 < 0);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.throwValue("Invalid hex");
  case 4:
  case 5:
    s.tmp_2 = r0 = s.res___7649;
    r0 = (s.i___7658 >> 1);
    s.tmp_3 = r0;
    r0 = (s.p0___7664 << 4);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 | s.p1___7673);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, s.tmp_3, s.tmp_4);
    r0 = (s.i___7658 + 2);
    s.i___7658 = (r0);
    { step = 1; continue; }
  case 6:
    r0 = s.res___7649;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromHex__P2638.info = {"start":8064,"length":469,"line":285,"column":4,"endLine":297,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"fromHex","argumentNames":["hex"]}

function Buffer_fromHex__P2638_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromHex__P2638, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  hexStr___7647: undefined,
  res___7649: undefined,
  i___7658: undefined,
  p0___7664: undefined,
  p1___7673: undefined,
  arg0: undefined,
} }





function helpers_stringToLowerCase__P2012(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___7704 = undefined;
    s.prev___7705 = undefined;
    s.i___7706 = undefined;
    s.c___7712 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.mkEmpty();
    s.r___7704 = (r0);
    s.prev___7705 = (0);
    s.i___7706 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___7706;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_String_.charCodeAt(s.arg0, s.i___7706);
    s.c___7712 = (r0);
    r0 = (65 <= s.c___7712);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___7712 <= 90);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    if ((s.r___7704) && (s.r___7704).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.r___7704);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___7704) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_2 = r0;
    s.tmp_7 = helpers_stringSlice__P2010_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.tmp_7.arg1 = s.prev___7705;
    s.tmp_7.arg2 = s.i___7706;
    s.callLocIdx = 12; s.pc = 8; return s.tmp_7;
  case 8:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = (s.c___7712 + 32);
    s.tmp_10 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.r___7704 = (r0);
    r0 = (s.i___7706 + 1);
    s.prev___7705 = (r0);
  case 4:
  case 5:
    r0 = (s.i___7706 + 1);
    s.i___7706 = (r0);
    { step = 1; continue; }
  case 6:
    if ((s.r___7704) && (s.r___7704).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.r___7704);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___7704) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = helpers_stringSlice__P2010_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.prev___7705;
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 13; s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___7704 = (r0);
    r0 = s.r___7704;
    return leave(s, r0)
  default: oops()
} } }
helpers_stringToLowerCase__P2012.info = {"start":12527,"length":386,"line":420,"column":4,"endLine":432,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"stringToLowerCase","argumentNames":["s"]}

function helpers_stringToLowerCase__P2012_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringToLowerCase__P2012, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  r___7704: undefined,
  prev___7705: undefined,
  i___7706: undefined,
  c___7712: undefined,
  arg0: undefined,
} }





function jacdac_log__P4284(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P2377_mk(s);
    s.tmp_0.arg0 = globals.logPriority___3431;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("jd: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 444; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_log__P4284.info = {"start":13264,"length":80,"line":377,"column":4,"endLine":379,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"log","argumentNames":["msg"]}

function jacdac_log__P4284_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_log__P4284, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Device_restartCounter__P3532(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 0);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 15);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_restartCounter__P3532.info = {"start":43662,"length":146,"line":1320,"column":8,"endLine":1324,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"restartCounter","argumentNames":["this"]}
jacdac_Device_restartCounter__P3532.isGetter = true;

function jacdac_Device_restartCounter__P3532_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_restartCounter__P3532, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Device_announceflags__P3531(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C3525_VT)) failedCast(r0);
    r0 = s.arg0.fields["services"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_announceflags__P3531.info = {"start":43530,"length":122,"line":1316,"column":8,"endLine":1318,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"announceflags","argumentNames":["this"]}
jacdac_Device_announceflags__P3531.isGetter = true;

function jacdac_Device_announceflags__P3531_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_announceflags__P3531, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Server_handlePacketOuter__P3462(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.cmd___7778 = undefined;
    s.isGet___7825 = undefined;
    s.regCode___7829 = undefined;
    s.constant___7832 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 14);
    s.cmd___7778 = (r0);
    s.tmp_0 = r0 = s.cmd___7778;
    r0 = pxsim_pxtcore.switch_eq(4355, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(4361, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(4359, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(4098, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(8194, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(4097, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(8193, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = s.tmp_0;
    { step = 13; continue; }
  case 1:
    s.tmp_1 = jacdac_Server_handleStatusCode__P4186_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 464; s.pc = 21; return s.tmp_1;
  case 21:
    r0 = s.retval;
    { step = 20; continue; }
  case 2:
    s.tmp_0 = jacdac_Server_handleInstanceName__P4187_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 465; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    { step = 20; continue; }
  case 3:
    s.tmp_0 = jacdac_Server_handleVariant__P4188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 466; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
    { step = 20; continue; }
  case 4:
  case 5:
    r0 = s.arg0.fields["valuePackFormat"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    { step = 13; continue; }
  case 6:
  case 7:
    s.tmp_3 = jacdac_Server_handleValue__P4189_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.arg1;
    s.callLocIdx = 467; s.pc = 24; return s.tmp_3;
  case 24:
    r0 = s.retval;
    { step = 20; continue; }
  case 8:
  case 9:
    r0 = s.arg0.fields["intensityPackFormat"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    { step = 13; continue; }
  case 10:
  case 11:
    s.tmp_3 = jacdac_Server_handleIntensity__P4190_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.arg1;
    s.callLocIdx = 468; s.pc = 25; return s.tmp_3;
  case 25:
    r0 = s.retval;
    { step = 20; continue; }
  case 12:
    s.tmp_0 = jacdac_Server__C3447_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handleCalibrateCommand;
    s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
    { step = 20; continue; }
  case 13:
    r0 = s.arg0.fields["constants"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    s.tmp_1 = jacdac_JDPacket_isRegGet__P2907_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 469; s.pc = 27; return s.tmp_1;
  case 27:
    r0 = s.retval;
    s.isGet___7825 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.isGet___7825);
    if (!r0) { step = 16; continue; }
    s.tmp_0 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 470; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
    s.regCode___7829 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, constant_inline__P7838);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.regCode___7829);
    s.tmp_2 = helpers_arrayFilter__P2001_mk(s);
    r0 = s.arg0.fields["constants"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 472; s.pc = 29; return s.tmp_2;
  case 29:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_1, 0);
    s.constant___7832 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.constant___7832);
    if (!r0) { step = 14; continue; }
    s.tmp_0 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.regCode___7829;
    s.tmp_1 = if_packFormat_1_mk(s);
    s.tmp_1.arg0 = s.constant___7832;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "packFormat");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["packFormat"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["packFormat"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 473; s.pc = 31; return s.tmp_1; }
    }
  case 31:
    r0 = s.retval;
    s.tmp_0.arg3 = r0;
    s.tmp_2 = if_value_1_mk(s);
    s.tmp_2.arg0 = s.constant___7832;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "value");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["value"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["value"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 474; s.pc = 32; return s.tmp_2; }
    }
  case 32:
    r0 = s.retval;
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 475; s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
    { step = 20; continue; }
  case 14:
  case 15:
  case 16:
  case 17:
  case 18:
  case 19:
    r0 = (s.arg0).fields["stateUpdated"] = (false);
    s.tmp_0 = jacdac_Server__C3447_v1_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacket;
    s.pc = 33; return s.tmp_0;
  case 33:
    r0 = s.retval;
  case 20:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handlePacketOuter__P3462.info = {"start":17114,"length":2001,"line":507,"column":8,"endLine":558,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_Server_handlePacketOuter__P3462_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handlePacketOuter__P3462, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  cmd___7778: undefined,
  isGet___7825: undefined,
  regCode___7829: undefined,
  constant___7832: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function constant_inline__P7838(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = if_code_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "code");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["code"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["code"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 471; s.pc = 1; return s.tmp_1; }
    }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 === s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
constant_inline__P7838.info = {"start":18598,"length":27,"line":541,"column":24,"endLine":541,"endColumn":51,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["cst"]}

function constant_inline__P7838_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: constant_inline__P7838, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Server_handlePacket__P3463(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handlePacket__P3463.info = {"start":19125,"length":30,"line":560,"column":8,"endLine":560,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_Server_handlePacket__P3463_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handlePacket__P3463, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleRegValue__P4194(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.getset___7864 = undefined;
    s.reg___7874 = undefined;
    s.v___7904 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 12);
    s.getset___7864 = (r0);
    r0 = (s.getset___7864 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.getset___7864 > 2);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = s.arg4;
    { step = 17; continue; }
  case 3:
  case 4:
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 4095);
    s.reg___7874 = (r0);
    r0 = (s.reg___7874 != s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg4;
    { step = 17; continue; }
  case 5:
  case 6:
    s.tmp_1 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 513; s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    r0 = (s.getset___7864 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    r0 = (s.arg4 != undefined);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 7; continue; }
    r0 = s.tmp_1;
    { step = 8; continue; }
  case 7:
    r0 = (s.arg4 != null);
  case 8:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.arg4);
    s.tmp_4 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_5 = jacdac_JDPacket_jdpacked__P2886_mk(s);
    r0 = s.arg1.fields["_header"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 4, 14);
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = s.arg3;
    s.tmp_5.arg2 = s.tmp_3;
    s.callLocIdx = 515; s.pc = 20; return s.tmp_5;
  case 20:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 516; s.pc = 19; return s.tmp_4;
  case 19:
    r0 = s.retval;
  case 9:
  case 10:
    { step = 16; continue; }
  case 11:
    r0 = (s.arg2 >> 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = s.arg4;
    { step = 17; continue; }
  case 12:
  case 13:
    s.tmp_2 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_2.arg1 = s.arg3;
    s.callLocIdx = 517; s.pc = 21; return s.tmp_2;
  case 21:
    r0 = s.retval;
    s.v___7904 = (r0);
    r0 = pxsim_Array__getAt(s.v___7904, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.arg4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = (s.arg0).fields["stateUpdated"] = (true);
    r0 = pxsim_Array__getAt(s.v___7904, 0);
    s.arg4 = (r0);
  case 14:
  case 15:
  case 16:
    r0 = s.arg4;
  case 17:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegValue__P4194.info = {"start":22966,"length":991,"line":681,"column":8,"endLine":707,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegValue","argumentNames":["this","pkt","register","fmt","current"]}

function jacdac_Server_handleRegValue__P4194_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegValue__P4194, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  getset___7864: undefined,
  reg___7874: undefined,
  v___7904: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_JDPacket_jdunpack__P2914(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___7920 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_data"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg1;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_1;
    { step = 4; continue; }
  case 3:
    s.tmp_2 = jacdac_jdunpack__P2933_mk(s);
    r0 = s.arg0.fields["_data"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 133; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.p___7920 = (s.tmp_3);
    s.tmp_0 = r0 = s.p___7920;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = pxsim_Array__mk();
  case 6:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_jdunpack__P2914.info = {"start":6942,"length":159,"line":220,"column":8,"endLine":223,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"jdunpack","argumentNames":["this","fmt"]}

function jacdac_JDPacket_jdunpack__P2914_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_jdunpack__P2914, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  p___7920: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdunpack__P2933(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.e___7945 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_Array__mk();
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = pxsim_pxtcore.beginTry(5);
    r0 = pxsim_pxtcore.endTry();
    s.tmp_0 = jacdac_jdunpackCore__P4171_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 192; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    { step = 7; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 6; continue; }
  case 5:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___7945 = (r0);
    s.tmp_0 = console_error__P2380_mk(s);
    s.tmp_0.arg0 = s.e___7945;
    s.callLocIdx = 193; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = pxsim_Array__mk();
    { step = 7; continue; }
  case 6:
    r0 = undefined;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdunpack__P2933.info = {"start":7060,"length":439,"line":217,"column":4,"endLine":230,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdunpack","argumentNames":["buf","fmt"]}

function jacdac_jdunpack__P2933_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdunpack__P2933, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  e___7945: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdunpackCore__P4171(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.repeatRes___7952 = undefined;
    s.res___7957 = undefined;
    s.off___7959 = undefined;
    s.fp0___7960 = undefined;
    s.parser___7961 = undefined;
    s.sz___7998 = undefined;
    s.c0___8002 = undefined;
    s.endoff___8009 = undefined;
    s.fmt1___8039 = undefined;
    s.v___8047 = undefined;
    s.subbuf___8085 = undefined;
    s.zerop___8100 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    { step = 2; continue; }
  case 1:
    r0 = null;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.repeatRes___7952 = (s.tmp_0);
    r0 = pxsim_Array__mk();
    s.res___7957 = (r0);
    s.off___7959 = (0);
    s.fp0___7960 = (0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_TokenParser__C4168_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_TokenParser_constructor__P4170_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 182; s.pc = 58; return s.tmp_1;
  case 58:
    r0 = s.retval;
    s.parser___7961 = (s.tmp_0);
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_Array__mk();
    { step = 57; continue; }
  case 5:
  case 6:
  case 7:
    s.tmp_4 = jacdac_TokenParser_parse__P4169_mk(s);
    s.tmp_4.arg0 = s.parser___7961;
    s.callLocIdx = 183; s.pc = 59; return s.tmp_4;
  case 59:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 52; continue; }
    r0 = s.parser___7961.fields["isArray"];
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_5;
    { step = 9; continue; }
  case 8:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
  case 9:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 10; continue; }
    s.tmp_8 = r0 = s.res___7957;
    s.tmp_10 = jacdac_jdunpackCore__P4171_mk(s);
    s.tmp_11 = r0 = s.arg0;
    s.tmp_12 = r0 = s.off___7959;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_13 = r0;
    r0 = (s.tmp_13 - s.tmp_12);
    s.tmp_14 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_11, s.tmp_12, s.tmp_14);
    s.tmp_10.arg0 = r0;
    s.tmp_15 = helpers_stringSlice__P2010_mk(s);
    s.tmp_15.arg0 = s.arg1;
    s.tmp_15.arg1 = s.fp0___7960;
    s.tmp_15.arg2 = undefined;
    s.callLocIdx = 185; s.pc = 61; return s.tmp_15;
  case 61:
    r0 = s.retval;
    s.tmp_10.arg1 = r0;
    s.tmp_10.arg2 = 1;
    s.callLocIdx = 186; s.pc = 60; return s.tmp_10;
  case 60:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_Array__push(s.tmp_8, s.tmp_9);
    r0 = s.res___7957;
    { step = 57; continue; }
  case 10:
  case 11:
    r0 = s.parser___7961.fields["fp"];
    s.fp0___7960 = (r0);
    r0 = s.parser___7961.fields["size"];
    s.sz___7998 = (r0);
    r0 = s.parser___7961.fields["c0"];
    s.c0___8002 = (r0);
    r0 = (s.c0___8002 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
    s.endoff___8009 = (s.off___7959);
  case 12:
    s.tmp_1 = r0 = s.endoff___8009;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_0;
    { step = 14; continue; }
  case 13:
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.endoff___8009);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 0);
  case 14:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 15; continue; }
    r0 = (s.endoff___8009 + 1);
    s.endoff___8009 = (r0);
    { step = 12; continue; }
  case 15:
    r0 = (s.endoff___8009 - s.off___7959);
    s.sz___7998 = (r0);
    { step = 19; continue; }
  case 16:
    r0 = (s.sz___7998 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - s.off___7959);
    s.sz___7998 = (r0);
  case 17:
  case 18:
  case 19:
    r0 = s.parser___7961.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 26; continue; }
    r0 = s.parser___7961.fields["nfmt2"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
    r0 = 11;
    { step = 21; continue; }
  case 20:
    r0 = s.parser___7961.fields["nfmt"];
  case 21:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.fmt1___8039 = (s.tmp_3);
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.fmt1___8039, s.off___7959);
    s.v___8047 = (r0);
    r0 = s.parser___7961.fields["nfmt2"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
    s.tmp_1 = r0 = s.v___8047;
    s.tmp_4 = r0 = s.arg0;
    r0 = s.parser___7961.fields["nfmt"];
    s.tmp_5 = r0;
    r0 = (s.off___7959 + 4);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, s.tmp_5, s.tmp_6);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 * 4294967296);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.v___8047 = (r0);
  case 22:
  case 23:
    r0 = s.parser___7961.fields["div"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 24; continue; }
    r0 = s.parser___7961.fields["div"];
    s.tmp_2 = r0;
    r0 = (s.v___8047 / s.tmp_2);
    s.v___8047 = (r0);
  case 24:
  case 25:
    r0 = pxsim_Array__push(s.res___7957, s.v___8047);
    r0 = s.parser___7961.fields["size"];
    s.tmp_0 = r0;
    r0 = (s.off___7959 + s.tmp_0);
    s.off___7959 = (r0);
    { step = 43; continue; }
  case 26:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.off___7959;
    r0 = (s.off___7959 + s.sz___7998);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - s.tmp_1);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, s.tmp_1, s.tmp_3);
    s.subbuf___8085 = (r0);
    r0 = (s.c0___8002 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 27; continue; }
    r0 = s.tmp_0;
    { step = 28; continue; }
  case 27:
    r0 = (s.c0___8002 == 115);
  case 28:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 33; continue; }
    s.zerop___8100 = (0);
  case 29:
    s.tmp_1 = r0 = s.zerop___8100;
    r0 = pxsim.BufferMethods.length(s.subbuf___8085);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 30; continue; }
    r0 = s.tmp_0;
    { step = 31; continue; }
  case 30:
    r0 = pxsim.BufferMethods.getByte(s.subbuf___8085, s.zerop___8100);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 0);
  case 31:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 32; continue; }
    r0 = (s.zerop___8100 + 1);
    s.zerop___8100 = (r0);
    { step = 29; continue; }
  case 32:
    s.tmp_0 = r0 = s.res___7957;
    s.tmp_3 = r0 = s.subbuf___8085;
    r0 = (s.zerop___8100 - 0);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_3, 0, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    { step = 40; continue; }
  case 33:
    r0 = (s.c0___8002 == 98);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 34; continue; }
    r0 = pxsim_Array__push(s.res___7957, s.subbuf___8085);
    { step = 39; continue; }
  case 34:
    r0 = (s.c0___8002 == 120);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 35; continue; }
    { step = 38; continue; }
  case 35:
    r0 = (s.c0___8002 == 114);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 36; continue; }
    s.tmp_2 = r0 = s.res___7957;
    s.tmp_4 = jacdac_jdunpackCore__P4171_mk(s);
    s.tmp_4.arg0 = s.subbuf___8085;
    s.tmp_5 = helpers_stringSlice__P2010_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.tmp_5.arg1 = s.fp0___7960;
    s.tmp_5.arg2 = undefined;
    s.callLocIdx = 190; s.pc = 63; return s.tmp_5;
  case 63:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    s.tmp_4.arg2 = 2;
    s.callLocIdx = 191; s.pc = 62; return s.tmp_4;
  case 62:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.tmp_3);
    { step = 52; continue; }
    { step = 37; continue; }
  case 36:
    r0 = pxsim_pxtcore.throwValue("whoops");
  case 37:
  case 38:
  case 39:
  case 40:
    s.tmp_0 = r0 = s.off___7959;
    r0 = pxsim.BufferMethods.length(s.subbuf___8085);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.off___7959 = (r0);
    r0 = (s.c0___8002 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 41; continue; }
    r0 = (s.off___7959 + 1);
    s.off___7959 = (r0);
  case 41:
  case 42:
  case 43:
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 44; continue; }
    r0 = s.tmp_0;
    { step = 45; continue; }
  case 44:
    r0 = s.parser___7961.fields["fp"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 >= s.tmp_2);
  case 45:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 50; continue; }
    r0 = (s.parser___7961).fields["fp"] = (0);
    r0 = (s.arg2 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 46; continue; }
    r0 = pxsim_Array__push(s.repeatRes___7952, s.res___7957);
    r0 = pxsim_Array__mk();
    s.res___7957 = (r0);
  case 46:
  case 47:
    s.tmp_1 = r0 = s.off___7959;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 >= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 48; continue; }
    { step = 52; continue; }
  case 48:
  case 49:
  case 50:
  case 51:
    { step = 7; continue; }
  case 52:
    r0 = (s.arg2 == 2);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 55; continue; }
    r0 = pxsim_Array__length(s.res___7957);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 53; continue; }
    r0 = pxsim_Array__push(s.repeatRes___7952, s.res___7957);
  case 53:
  case 54:
    r0 = s.repeatRes___7952;
    { step = 57; continue; }
    { step = 56; continue; }
  case 55:
    r0 = s.res___7957;
    { step = 57; continue; }
  case 56:
    r0 = undefined;
  case 57:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdunpackCore__P4171.info = {"start":4469,"length":2585,"line":141,"column":4,"endLine":215,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdunpackCore","argumentNames":["buf","fmt","repeat"]}

function jacdac_jdunpackCore__P4171_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdunpackCore__P4171, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  repeatRes___7952: undefined,
  res___7957: undefined,
  off___7959: undefined,
  fp0___7960: undefined,
  parser___7961: undefined,
  sz___7998: undefined,
  c0___8002: undefined,
  endoff___8009: undefined,
  fmt1___8039: undefined,
  v___8047: undefined,
  subbuf___8085: undefined,
  zerop___8100: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_bufferToString__P4165(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.toString(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_bufferToString__P4165.info = {"start":1270,"length":74,"line":43,"column":4,"endLine":45,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"bufferToString","argumentNames":["buf"]}

function jacdac_bufferToString__P4165_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_bufferToString__P4165, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_bufferSlice__P4167(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.arg2 - s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, s.tmp_1, s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_bufferSlice__P4167.info = {"start":1436,"length":114,"line":51,"column":4,"endLine":53,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"bufferSlice","argumentNames":["buf","start","end"]}

function jacdac_bufferSlice__P4167_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_bufferSlice__P4167, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_TokenParser_parse__P4169(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.fmt___8202 = undefined;
    s.endp___8212 = undefined;
    s.word___8228 = undefined;
    s.dotIdx___8241 = undefined;
    s.c0___8247 = undefined;
    s.sz0___8262 = undefined;
    s.sz1___8270 = undefined;
    s.c1___8296 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_TokenParser__C4168_VT)) failedCast(r0);
    r0 = (s.arg0).fields["div"] = (1);
    r0 = (s.arg0).fields["isArray"] = (false);
    r0 = s.arg0.fields["fmt"];
    s.fmt___8202 = (r0);
  case 1:
    r0 = s.arg0.fields["fp"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.length(s.fmt___8202);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 50; continue; }
    r0 = s.arg0.fields["fp"];
    s.endp___8212 = (r0);
  case 2:
    s.tmp_1 = r0 = s.endp___8212;
    r0 = pxsim_String_.length(s.fmt___8202);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.charCodeAt(s.fmt___8202, s.endp___8212);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 32);
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    r0 = (s.endp___8212 + 1);
    s.endp___8212 = (r0);
    { step = 2; continue; }
  case 5:
    s.tmp_0 = helpers_stringSlice__P2010_mk(s);
    s.tmp_0.arg0 = s.fmt___8202;
    r0 = s.arg0.fields["fp"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.endp___8212;
    s.callLocIdx = 172; s.pc = 52; return s.tmp_0;
  case 52:
    r0 = s.retval;
    s.word___8228 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.endp___8212 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["fp"] = (s.tmp_1);
    r0 = pxsim_numops_toBoolDecr(s.word___8228);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    { step = 1; continue; }
  case 6:
  case 7:
    r0 = pxsim_String_.indexOf(s.word___8228, ".", undefined);
    s.dotIdx___8241 = (r0);
    r0 = pxsim_String_.charCodeAt(s.word___8228, 0);
    s.c0___8247 = (r0);
    r0 = (s.c0___8247 == 105);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 8:
    r0 = (s.c0___8247 == 117);
  case 9:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_1;
    { step = 11; continue; }
  case 10:
    r0 = (s.dotIdx___8241 >= 0);
  case 11:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 12; continue; }
    s.tmp_3 = parseInt__P1988_mk(s);
    s.tmp_4 = helpers_stringSlice__P2010_mk(s);
    s.tmp_4.arg0 = s.word___8228;
    s.tmp_4.arg1 = 1;
    s.tmp_4.arg2 = s.dotIdx___8241;
    s.callLocIdx = 173; s.pc = 54; return s.tmp_4;
  case 54:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = undefined;
    s.callLocIdx = 174; s.pc = 53; return s.tmp_3;
  case 53:
    r0 = s.retval;
    s.sz0___8262 = (r0);
    s.tmp_0 = parseInt__P1988_mk(s);
    s.tmp_1 = helpers_stringSlice__P2010_mk(s);
    s.tmp_1.arg0 = s.word___8228;
    r0 = (s.dotIdx___8241 + 1);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 175; s.pc = 56; return s.tmp_1;
  case 56:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 176; s.pc = 55; return s.tmp_0;
  case 55:
    r0 = s.retval;
    s.sz1___8270 = (r0);
    r0 = pxsim_String_.charAt(s.word___8228, 0);
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 57);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 57:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.sz0___8262 + s.sz1___8270);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 58);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 58:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_2);
    s.word___8228 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = (1 << s.sz1___8270);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["div"] = (s.tmp_1);
  case 12:
  case 13:
    r0 = pxsim_String_.charCodeAt(s.word___8228, 1);
    s.c1___8296 = (r0);
    r0 = (s.c1___8296 == 91);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = parseInt__P1988_mk(s);
    s.tmp_4 = helpers_stringSlice__P2010_mk(s);
    s.tmp_4.arg0 = s.word___8228;
    s.tmp_4.arg1 = 2;
    s.tmp_4.arg2 = undefined;
    s.callLocIdx = 177; s.pc = 60; return s.tmp_4;
  case 60:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = undefined;
    s.callLocIdx = 178; s.pc = 59; return s.tmp_3;
  case 59:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["size"] = (s.tmp_2);
    { step = 15; continue; }
  case 14:
    r0 = (s.arg0).fields["size"] = (-1);
  case 15:
    s.tmp_2 = r0 = s.word___8228;
    r0 = pxsim_String_.length(s.word___8228);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - 1);
    s.tmp_3 = r0;
    r0 = pxsim_String_.charCodeAt(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 93);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 16:
    s.tmp_6 = r0 = s.word___8228;
    r0 = pxsim_String_.length(s.word___8228);
    s.tmp_8 = r0;
    r0 = (s.tmp_8 - 2);
    s.tmp_7 = r0;
    r0 = pxsim_String_.charCodeAt(s.tmp_6, s.tmp_7);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 91);
  case 17:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    if (!r0) { step = 18; continue; }
    s.tmp_10 = helpers_stringSlice__P2010_mk(s);
    s.tmp_10.arg0 = s.word___8228;
    s.tmp_10.arg1 = 0;
    s.tmp_10.arg2 = -2;
    s.callLocIdx = 179; s.pc = 61; return s.tmp_10;
  case 61:
    r0 = s.retval;
    s.word___8228 = (r0);
    r0 = (s.arg0).fields["isArray"] = (true);
  case 18:
  case 19:
    r0 = (s.arg0).fields["nfmt2"] = (null);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_numberFormatOfType__P4164_mk(s);
    s.tmp_2.arg0 = s.word___8228;
    s.callLocIdx = 180; s.pc = 62; return s.tmp_2;
  case 62:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nfmt"] = (s.tmp_1);
    r0 = s.arg0.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 24; continue; }
    r0 = (s.word___8228 == "u64");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
    r0 = (s.arg0).fields["nfmt"] = (11);
    r0 = (s.arg0).fields["nfmt2"] = (true);
    { step = 23; continue; }
  case 20:
    r0 = (s.word___8228 == "i64");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
    r0 = (s.arg0).fields["nfmt"] = (5);
    r0 = (s.arg0).fields["nfmt2"] = (true);
  case 21:
  case 22:
  case 23:
  case 24:
  case 25:
    r0 = (s.arg0).fields["word"] = (s.word___8228);
    r0 = s.arg0.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 46; continue; }
    r0 = (s.c0___8247 == 114);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 28; continue; }
    r0 = (s.c1___8296 != 58);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 26; continue; }
    s.c0___8247 = (0);
  case 26:
  case 27:
    { step = 43; continue; }
  case 28:
    r0 = (s.c0___8247 == 115);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 29; continue; }
    r0 = s.tmp_0;
    { step = 30; continue; }
  case 29:
    r0 = (s.c0___8247 == 98);
  case 30:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 31; continue; }
    r0 = s.tmp_1;
    { step = 32; continue; }
  case 31:
    r0 = (s.c0___8247 == 120);
  case 32:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 37; continue; }
    r0 = pxsim_String_.length(s.word___8228);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 != 1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 33; continue; }
    r0 = s.tmp_3;
    { step = 34; continue; }
  case 33:
    r0 = s.arg0.fields["size"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == -1);
  case 34:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 35; continue; }
    s.c0___8247 = (0);
  case 35:
  case 36:
    { step = 42; continue; }
  case 37:
    r0 = (s.c0___8247 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 40; continue; }
    r0 = pxsim_String_.length(s.word___8228);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 != 1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 38; continue; }
    s.c0___8247 = (0);
  case 38:
  case 39:
    { step = 41; continue; }
  case 40:
    s.c0___8247 = (0);
  case 41:
  case 42:
  case 43:
    r0 = (s.c0___8247 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 44; continue; }
    if ((s.word___8228) && (s.word___8228).vtable) {
    setupResume(s, 63);
    pxsim_String__stringConv(s.word___8228);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.word___8228) + ""; }
  case 63:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("invalid format: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_pxtcore.throwValue(s.tmp_1);
  case 44:
  case 45:
    r0 = (s.arg0).fields["c0"] = (s.c0___8247);
    { step = 49; continue; }
  case 46:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = Buffer_sizeOfNumberFormat__P2647_mk(s);
    r0 = s.arg0.fields["nfmt"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 181; s.pc = 64; return s.tmp_2;
  case 64:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["size"] = (s.tmp_1);
    r0 = s.arg0.fields["nfmt2"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 47; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["size"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 4);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["size"] = (s.tmp_3);
  case 47:
  case 48:
    r0 = (s.arg0).fields["c0"] = (-1);
  case 49:
    r0 = true;
    { step = 51; continue; }
    { step = 1; continue; }
  case 50:
    r0 = false;
  case 51:
    return leave(s, r0)
  default: oops()
} } }
jacdac_TokenParser_parse__P4169.info = {"start":1801,"length":2656,"line":67,"column":8,"endLine":138,"endColumn":9,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"parse","argumentNames":["this"]}

function jacdac_TokenParser_parse__P4169_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_TokenParser_parse__P4169, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  fmt___8202: undefined,
  endp___8212: undefined,
  word___8228: undefined,
  dotIdx___8241: undefined,
  c0___8247: undefined,
  sz0___8262: undefined,
  sz1___8270: undefined,
  c1___8296: undefined,
  arg0: undefined,
} }





function jacdac_numberFormatOfType__P4164(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq("u8", s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq("u16", s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq("u32", s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq("i8", s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq("i16", s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq("i32", s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq("f32", s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq("f64", s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 1:
    r0 = 2;
    { step = 10; continue; }
  case 2:
    r0 = 4;
    { step = 10; continue; }
  case 3:
    r0 = 11;
    { step = 10; continue; }
  case 4:
    r0 = 1;
    { step = 10; continue; }
  case 5:
    r0 = 3;
    { step = 10; continue; }
  case 6:
    r0 = 5;
    { step = 10; continue; }
  case 7:
    r0 = 13;
    { step = 10; continue; }
  case 8:
    r0 = 14;
    { step = 10; continue; }
  case 9:
    r0 = null;
    { step = 10; continue; }
    r0 = undefined;
  case 10:
    return leave(s, r0)
  default: oops()
} } }
jacdac_numberFormatOfType__P4164.info = {"start":466,"length":798,"line":18,"column":4,"endLine":41,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"numberFormatOfType","argumentNames":["tp"]}

function jacdac_numberFormatOfType__P4164_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_numberFormatOfType__P4164, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_TokenParser_constructor__P4170(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_TokenParser__C4168_VT)) failedCast(r0);
    r0 = (s.arg0).fields["fmt"] = (s.arg1);
    r0 = (s.arg0).fields["fp"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_TokenParser_constructor__P4170.info = {"start":1756,"length":35,"line":65,"column":8,"endLine":65,"endColumn":43,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"inline","argumentNames":["this","fmt"]}

function jacdac_TokenParser_constructor__P4170_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_TokenParser_constructor__P4170, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_jdpacked__P2886(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_jdpack__P2934_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = s.arg2;
    s.callLocIdx = 106; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 107; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_jdpacked__P2886.info = {"start":2688,"length":145,"line":76,"column":8,"endLine":78,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"jdpacked","argumentNames":["serviceCommand","fmt","nums"]}

function jacdac_JDPacket_jdpacked__P2886_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_jdpacked__P2886, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket_markHandled__P2889(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_handled"] = (true);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_markHandled__P2889.info = {"start":3246,"length":58,"line":92,"column":8,"endLine":94,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"markHandled","argumentNames":["this"]}

function jacdac_JDPacket_markHandled__P2889_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_markHandled__P2889, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Server_handleCalibrateCommand__P4191(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["_statusCode"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["calibrate"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = jacdac_Server_setStatusCode__P3460_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = 2;
    s.callLocIdx = 496; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, jacdac_Server_handleCalibrateCommand_inline__P8469);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = control_runInBackground__P2296_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 498; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 499; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleCalibrateCommand__P4191.info = {"start":21376,"length":362,"line":636,"column":8,"endLine":643,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleCalibrateCommand","argumentNames":["this","pkt"]}

function jacdac_Server_handleCalibrateCommand__P4191_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleCalibrateCommand__P4191, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleCalibrateCommand_inline__P8469(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_Server_doCalibrate__P4192_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 497; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleCalibrateCommand_inline__P8469.info = {"start":21655,"length":24,"line":641,"column":40,"endLine":641,"endColumn":64,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_Server_handleCalibrateCommand_inline__P8469_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleCalibrateCommand_inline__P8469, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_JDPacket_possiblyNotImplemented__P2890(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___8480 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_handled"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["_header"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_6, 3);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 & 4);
  case 2:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 3; continue; }
    { step = 5; continue; }
  case 3:
  case 4:
    s.tmp_8 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_8.arg0 = s.arg0;
    s.callLocIdx = 110; s.pc = 6; return s.tmp_8;
  case 6:
    r0 = s.retval;
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, 4, 0);
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_3);
    s.tmp_5 = jacdac_JDPacket_jdpacked__P2886_mk(s);
    s.tmp_5.arg0 = 3;
    s.tmp_5.arg1 = globals.CommandNotImplemented___3053;
    s.tmp_5.arg2 = s.tmp_0;
    s.callLocIdx = 113; s.pc = 7; return s.tmp_5;
  case 7:
    r0 = s.retval;
    s.p___8480 = (r0);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P2899_mk(s);
    s.tmp_0.arg0 = s.p___8480;
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 13);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 63);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 115; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendReport__P2924_mk(s);
    s.tmp_0.arg0 = s.p___8480;
    s.tmp_1 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_1.arg0 = globals.bus___3430;
    s.callLocIdx = 116; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 117; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_possiblyNotImplemented__P2890.info = {"start":3314,"length":540,"line":96,"column":8,"endLine":110,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"possiblyNotImplemented","argumentNames":["this"]}

function jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_possiblyNotImplemented__P2890, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  p___8480: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_handled__P2888(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_handled"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_handled__P2888.info = {"start":3176,"length":60,"line":88,"column":8,"endLine":90,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"handled","argumentNames":["this"]}
jacdac_JDPacket_handled__P2888.isGetter = true;

function jacdac_JDPacket_handled__P2888_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_handled__P2888, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_Server_doCalibrate__P4192(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.e___8506 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = pxsim_pxtcore.beginTry(1);
    s.tmp_0 = if_calibrate_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "calibrate"), 1);
      s.callLocIdx = 500; s.pc = 3; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["calibrate"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["calibrate"], 1); s.callLocIdx = 500; s.pc = 3; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 500; s.pc = 3; return s.tmp_0;; }
     else { s.callLocIdx = 500; s.pc = 3; return s.tmp_0; }
    }
  case 3:
    r0 = s.retval;
    s.tmp_0 = jacdac_Server_setStatusCode__P3460_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 501; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___8506 = (r0);
    s.tmp_0 = jacdac_Server_setStatusCode__P3460_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 100;
    s.callLocIdx = 502; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_doCalibrate__P4192.info = {"start":21748,"length":270,"line":645,"column":8,"endLine":652,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"doCalibrate","argumentNames":["this"]}

function jacdac_Server_doCalibrate__P4192_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_doCalibrate__P4192, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  e___8506: undefined,
  arg0: undefined,
} }





function jacdac_Server_setStatusCode__P3460(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.cc___8511 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = (s.arg1 & 65535);
    s.cc___8511 = (r0);
    r0 = s.arg0.fields["_statusCode"];
    s.tmp_1 = r0;
    r0 = (s.cc___8511 !== s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["_statusCode"] = (s.cc___8511);
    s.tmp_0 = jacdac_Server_sendChangeEvent__P3466_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 462; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_setStatusCode__P3460.info = {"start":16644,"length":210,"line":491,"column":8,"endLine":497,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"setStatusCode","argumentNames":["this","code"]}

function jacdac_Server_setStatusCode__P3460_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_setStatusCode__P3460, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  cc___8511: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_sendChangeEvent__P3466(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_sendEvent__P3465_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 3;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 484; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___3390;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 485; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendChangeEvent__P3466.info = {"start":19837,"length":112,"line":584,"column":8,"endLine":587,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendChangeEvent","argumentNames":["this"]}

function jacdac_Server_sendChangeEvent__P3466_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendChangeEvent__P3466, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Server_sendEvent__P3465(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pkt___8536 = undefined;
    s.now___8548 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    s.tmp_2 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 3:
    r0 = pxsim.control.createBuffer(0);
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_5 = jacdac_Bus_mkEventCmd__P3419_mk(s);
    s.tmp_5.arg0 = globals.bus___3430;
    s.tmp_5.arg1 = s.arg1;
    s.callLocIdx = 479; s.pc = 7; return s.tmp_5;
  case 7:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.tmp_3;
    s.callLocIdx = 480; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.pkt___8536 = (r0);
    s.tmp_0 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.pkt___8536;
    s.callLocIdx = 481; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    r0 = pxsim.control.millis();
    s.now___8548 = (r0);
    s.tmp_0 = jacdac_delayedSend__P2975_mk(s);
    s.tmp_0.arg0 = s.pkt___8536;
    r0 = (s.now___8548 + 20);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 482; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.tmp_0 = jacdac_delayedSend__P2975_mk(s);
    s.tmp_0.arg0 = s.pkt___8536;
    r0 = (s.now___8548 + 100);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 483; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendEvent__P3465.info = {"start":19432,"length":395,"line":572,"column":8,"endLine":582,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendEvent","argumentNames":["this","eventCode","data"]}

function jacdac_Server_sendEvent__P3465_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendEvent__P3465, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  pkt___8536: undefined,
  now___8548: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_delayedSend__P2975(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dp___8569 = undefined;
    s.i___8574 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(globals.delayedPackets___4213);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    globals.delayedPackets___4213 = (r0);
    s.tmp_0 = control_runInParallel__P2295_mk(s);
    s.tmp_0.arg0 = jacdac_processDelayedPackets__P4216;
    s.callLocIdx = 224; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_DelayedPacket__C4214_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_DelayedPacket_constructor__P4215_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg0;
    s.callLocIdx = 225; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.dp___8569 = (s.tmp_0);
    s.i___8574 = (0);
  case 3:
    s.tmp_1 = r0 = s.i___8574;
    r0 = pxsim_Array__length(globals.delayedPackets___4213);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(globals.delayedPackets___4213, s.i___8574);
    r0 = r0.fields["timestamp"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 > s.arg1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array_.insertAt(globals.delayedPackets___4213, s.i___8574, s.dp___8569);
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = (s.i___8574 + 1);
    s.i___8574 = (r0);
    { step = 3; continue; }
  case 6:
    r0 = pxsim_Array__push(globals.delayedPackets___4213, s.dp___8569);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_delayedSend__P2975.info = {"start":252,"length":495,"line":13,"column":4,"endLine":26,"endColumn":5,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"delayedSend","argumentNames":["pkt","timestamp"]}

function jacdac_delayedSend__P2975_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_delayedSend__P2975, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  dp___8569: undefined,
  i___8574: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_DelayedPacket_constructor__P4215(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_DelayedPacket__C4214_VT)) failedCast(r0);
    r0 = (s.arg0).fields["timestamp"] = (s.arg1);
    r0 = (s.arg0).fields["pkt"] = (s.arg2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_DelayedPacket_constructor__P4215.info = {"start":126,"length":114,"line":7,"column":8,"endLine":10,"endColumn":12,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"inline","argumentNames":["this","timestamp","pkt"]}

function jacdac_DelayedPacket_constructor__P4215_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_DelayedPacket_constructor__P4215, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_processDelayedPackets__P4216(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___8603 = undefined;
    s.curr___8607 = undefined;
  case 1:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 10; continue; }
    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 10;
    s.callLocIdx = 226; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    r0 = pxsim.control.millis();
    s.now___8603 = (r0);
  case 2:
    r0 = pxsim_Array__getAt(globals.delayedPackets___4213, 0);
    s.curr___8607 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.curr___8607);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = s.curr___8607.fields["timestamp"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > s.now___8603);
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    { step = 7; continue; }
  case 5:
  case 6:
    r0 = pxsim_Array_.removeAt(globals.delayedPackets___4213, 0);
    s.tmp_0 = jacdac_JDPacket__sendCore__P2923_mk(s);
    r0 = s.curr___8607.fields["pkt"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 228; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    { step = 2; continue; }
  case 7:
    r0 = pxsim_Array__length(globals.delayedPackets___4213);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    globals.delayedPackets___4213 = (null);
    { step = 11; continue; }
  case 8:
  case 9:
    { step = 1; continue; }
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_processDelayedPackets__P4216.info = {"start":753,"length":470,"line":28,"column":4,"endLine":43,"endColumn":5,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"processDelayedPackets","argumentNames":[]}

function jacdac_processDelayedPackets__P4216_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_processDelayedPackets__P4216, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  now___8603: undefined,
  curr___8607: undefined,
} }





function helpers_arrayShift__P1993(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array_.removeAt(s.arg0, 0);
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayShift__P1993.info = {"start":4045,"length":82,"line":153,"column":4,"endLine":155,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arrayShift","argumentNames":["arr"]}

function helpers_arrayShift__P1993_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayShift__P1993, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Bus_mkEventCmd__P3419(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["_eventCounter"] = (0);
  case 1:
  case 2:
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 127);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_eventCounter"] = (s.tmp_1);
    r0 = (s.arg1 >> 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = jacdac_panic__P3432_mk(s);
    s.tmp_1.arg0 = "invalid evcode";
    s.callLocIdx = 365; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 << 8);
    s.tmp_1 = r0;
    r0 = (32768 | s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 | s.arg1);
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_mkEventCmd__P3419.info = {"start":3379,"length":405,"line":111,"column":8,"endLine":121,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"mkEventCmd","argumentNames":["this","evCode"]}

function jacdac_Bus_mkEventCmd__P3419_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_mkEventCmd__P3419, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_statusCode__P3452(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["_statusCode"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Server_statusCode__P3452.info = {"start":15368,"length":64,"line":441,"column":8,"endLine":443,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"statusCode","argumentNames":["this"]}
jacdac_Server_statusCode__P3452.isGetter = true;

function jacdac_Server_statusCode__P3452_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_statusCode__P3452, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Server_handleIntensity__P4190(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.v___8665 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 1;
    r0 = s.arg0.fields["intensityPackFormat"];
    s.tmp_0.arg3 = r0;
    r0 = s.arg0.fields["_intensity"];
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 493; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.v___8665 = (r0);
    s.tmp_0 = jacdac_Server_intensity__P3457_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.v___8665;
    s.callLocIdx = 494; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleIntensity__P4190.info = {"start":21076,"length":270,"line":625,"column":8,"endLine":633,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleIntensity","argumentNames":["this","pkt"]}

function jacdac_Server_handleIntensity__P4190_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleIntensity__P4190, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  v___8665: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_intensity__P3457(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["intensityPackFormat"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = jacdac_panic__P3432_mk(s);
    s.tmp_3.arg0 = "invalid intensity register";
    s.callLocIdx = 458; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.arg0.fields["_intensity"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = (s.arg0).fields["_intensity"] = (s.arg1);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___3390;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 459; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_intensity__P3457.info = {"start":16076,"length":252,"line":471,"column":8,"endLine":477,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"intensity","argumentNames":["this","value"]}

function jacdac_Server_intensity__P3457_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_intensity__P3457, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_intensity__P3456(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["_intensity"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Server_intensity__P3456.info = {"start":16004,"length":62,"line":467,"column":8,"endLine":469,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"intensity","argumentNames":["this"]}
jacdac_Server_intensity__P3456.isGetter = true;

function jacdac_Server_intensity__P3456_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_intensity__P3456, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Server_handleValue__P4189(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.v___8697 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 2;
    r0 = s.arg0.fields["valuePackFormat"];
    s.tmp_0.arg3 = r0;
    r0 = s.arg0.fields["_value"];
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 491; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.v___8697 = (r0);
    s.tmp_0 = jacdac_Server_value__P3459_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.v___8697;
    s.callLocIdx = 492; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleValue__P4189.info = {"start":20809,"length":257,"line":615,"column":8,"endLine":623,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleValue","argumentNames":["this","pkt"]}

function jacdac_Server_handleValue__P4189_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleValue__P4189, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  v___8697: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_value__P3459(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["valuePackFormat"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = jacdac_panic__P3432_mk(s);
    s.tmp_3.arg0 = "invalid value register";
    s.callLocIdx = 460; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.arg0.fields["_value"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = (s.arg0).fields["_value"] = (s.arg1);
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___3390;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 461; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_value__P3459.info = {"start":16402,"length":232,"line":483,"column":8,"endLine":489,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"value","argumentNames":["this","value"]}

function jacdac_Server_value__P3459_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_value__P3459, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_value__P3458(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["_value"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Server_value__P3458.info = {"start":16338,"length":54,"line":479,"column":8,"endLine":481,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"value","argumentNames":["this"]}
jacdac_Server_value__P3458.isGetter = true;

function jacdac_Server_value__P3458_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_value__P3458, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Server_handleVariant__P4188(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["variant"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 263;
    s.tmp_2.arg3 = "u8";
    r0 = s.arg0.fields["variant"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 489; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 490; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleVariant__P4188.info = {"start":20582,"length":217,"line":609,"column":8,"endLine":613,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleVariant","argumentNames":["this","pkt"]}

function jacdac_Server_handleVariant__P4188_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleVariant__P4188, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleInstanceName__P4187(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["instanceName"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = 265;
    s.tmp_1.arg3 = globals.InstanceName___3040;
    r0 = s.arg0.fields["instanceName"];
    s.tmp_1.arg4 = r0;
    s.callLocIdx = 487; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 488; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleInstanceName__P4187.info = {"start":20228,"length":344,"line":598,"column":8,"endLine":607,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleInstanceName","argumentNames":["this","pkt"]}

function jacdac_Server_handleInstanceName__P4187_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleInstanceName__P4187, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleStatusCode__P4186(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_statusCode"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = s.arg0.fields["_statusVendorCode"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_2);
    s.tmp_3 = jacdac_Server_handleRegFormat__P4193_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.arg1;
    s.tmp_3.arg2 = 259;
    s.tmp_3.arg3 = globals.StatusCode___3039;
    s.tmp_3.arg4 = s.tmp_0;
    s.callLocIdx = 486; s.pc = 1; return s.tmp_3;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleStatusCode__P4186.info = {"start":19959,"length":259,"line":589,"column":8,"endLine":596,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleStatusCode","argumentNames":["this","pkt"]}

function jacdac_Server_handleStatusCode__P4186_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleStatusCode__P4186, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleRegFormat__P4193(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.getset___8770 = undefined;
    s.reg___8780 = undefined;
    s.v___8802 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 12);
    s.getset___8770 = (r0);
    r0 = (s.getset___8770 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.getset___8770 > 2);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = s.arg4;
    { step = 13; continue; }
  case 3:
  case 4:
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 4095);
    s.reg___8780 = (r0);
    r0 = (s.reg___8780 != s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg4;
    { step = 13; continue; }
  case 5:
  case 6:
    s.tmp_1 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 505; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    r0 = (s.getset___8770 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_1 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_2 = jacdac_JDPacket_jdpacked__P2886_mk(s);
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.arg3;
    s.tmp_2.arg2 = s.arg4;
    s.callLocIdx = 507; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 508; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    { step = 12; continue; }
  case 7:
    r0 = (s.arg2 >> 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = s.arg4;
    { step = 13; continue; }
  case 8:
  case 9:
    s.tmp_2 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_2.arg1 = s.arg3;
    s.callLocIdx = 509; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
    s.v___8802 = (r0);
    s.tmp_3 = jacdac_jdpackEqual__P2935_mk(s);
    s.tmp_3.arg0 = s.arg3;
    s.tmp_3.arg1 = s.v___8802;
    s.tmp_3.arg2 = s.arg4;
    s.callLocIdx = 510; s.pc = 18; return s.tmp_3;
  case 18:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = (s.arg0).fields["stateUpdated"] = (true);
    s.arg4 = (s.v___8802);
  case 10:
  case 11:
  case 12:
    r0 = s.arg4;
  case 13:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegFormat__P4193.info = {"start":22028,"length":896,"line":654,"column":8,"endLine":678,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegFormat","argumentNames":["this","pkt","register","fmt","current"]}

function jacdac_Server_handleRegFormat__P4193_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegFormat__P4193, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  getset___8770: undefined,
  reg___8780: undefined,
  v___8802: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_jdpackEqual__P2935(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.leftBuffer___8828 = undefined;
    s.rightBuffer___8833 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 !== s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = false;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 3; continue; }
    r0 = true;
    { step = 5; continue; }
  case 3:
  case 4:
    s.tmp_7 = jacdac_jdpack__P2934_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.tmp_7.arg1 = s.arg1;
    s.callLocIdx = 206; s.pc = 6; return s.tmp_7;
  case 6:
    r0 = s.retval;
    s.leftBuffer___8828 = (r0);
    s.tmp_0 = jacdac_jdpack__P2934_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg2;
    s.callLocIdx = 207; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.rightBuffer___8833 = (r0);
    s.tmp_0 = helpers_bufferEquals__P2619_mk(s);
    s.tmp_0.arg0 = s.leftBuffer___8828;
    s.tmp_0.arg1 = s.rightBuffer___8833;
    s.callLocIdx = 208; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdpackEqual__P2935.info = {"start":12870,"length":333,"line":387,"column":4,"endLine":398,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdpackEqual","argumentNames":["fmt","left","right"]}

function jacdac_jdpackEqual__P2935_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdpackEqual__P2935, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  leftBuffer___8828: undefined,
  rightBuffer___8833: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket_isCommand__P2919(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, 3);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isCommand__P2919.info = {"start":8454,"length":91,"line":263,"column":8,"endLine":265,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isCommand","argumentNames":["this"]}
jacdac_JDPacket_isCommand__P2919.isGetter = true;

function jacdac_JDPacket_isCommand__P2919_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isCommand__P2919, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_onlyHeader__P2884(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 104; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_onlyHeader__P2884.info = {"start":2294,"length":120,"line":64,"column":8,"endLine":66,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"onlyHeader","argumentNames":["serviceCommand"]}

function jacdac_JDPacket_onlyHeader__P2884_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_onlyHeader__P2884, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_crc__P2900(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_crc__P2900.info = {"start":5139,"length":97,"line":152,"column":8,"endLine":154,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"crc","argumentNames":["this"]}
jacdac_JDPacket_crc__P2900.isGetter = true;

function jacdac_JDPacket_crc__P2900_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_crc__P2900, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_requiresAck__P2897(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    s.tmp_1 = r0 = s.arg1;
    s.tmp_3 = jacdac_JDPacket_requiresAck__P2896_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 121; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 3);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 ^ 2);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_4, 3, s.tmp_5);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_requiresAck__P2897.info = {"start":4646,"length":145,"line":138,"column":8,"endLine":141,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"requiresAck","argumentNames":["this","ack"]}

function jacdac_JDPacket_requiresAck__P2897_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_requiresAck__P2897, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_requiresAck__P2896(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = true;
    { step = 2; continue; }
  case 1:
    r0 = false;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_requiresAck__P2896.info = {"start":4518,"length":119,"line":135,"column":8,"endLine":137,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"requiresAck","argumentNames":["this"]}
jacdac_JDPacket_requiresAck__P2896.isGetter = true;

function jacdac_JDPacket_requiresAck__P2896_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_requiresAck__P2896, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_multicommandClass__P2894(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 11, 4);
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = undefined;
  case 3:
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_multicommandClass__P2894.info = {"start":4218,"length":214,"line":125,"column":8,"endLine":129,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"multicommandClass","argumentNames":["this"]}
jacdac_JDPacket_multicommandClass__P2894.isGetter = true;

function jacdac_JDPacket_multicommandClass__P2894_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_multicommandClass__P2894, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac___physSendPacket__P2815(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.payload___8886 = undefined;
    s.tailend___8890 = undefined;
    s.crc___8910 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = helpers_bufferConcat__P2618_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 81; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.payload___8886 = (r0);
    r0 = pxsim.BufferMethods.length(s.payload___8886);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 3);
    s.tailend___8890 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.tailend___8890);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = helpers_bufferConcat__P2618_mk(s);
    s.tmp_0.arg0 = s.payload___8886;
    r0 = (4 - s.tailend___8890);
    s.tmp_1 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 82; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.payload___8886 = (r0);
  case 1:
  case 2:
    s.tmp_0 = r0 = s.payload___8886;
    r0 = pxsim.BufferMethods.length(s.payload___8886);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 2, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 2, s.tmp_1);
    s.tmp_0 = jacdac_jdCrc16__P4105_mk(s);
    r0 = pxsim.BufferMethods.slice(s.payload___8886, 2, -1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 83; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.crc___8910 = (r0);
    s.tmp_0 = r0 = s.payload___8886;
    r0 = (s.crc___8910 >> 0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 0, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 0, s.tmp_1);
    s.tmp_0 = r0 = s.payload___8886;
    r0 = (s.crc___8910 >> 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 1, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 1, s.tmp_1);
    r0 = pxsim_pxtcore.sendMessage("jacdac", s.payload___8886, undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physSendPacket__P2815.info = {"start":625,"length":540,"line":27,"column":4,"endLine":37,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physSendPacket","argumentNames":["header","data"]}

function jacdac___physSendPacket__P2815_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physSendPacket__P2815, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  payload___8886: undefined,
  tailend___8890: undefined,
  crc___8910: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdCrc16__P4105(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.crc___8939 = undefined;
    s.i___8940 = undefined;
    s.data___8946 = undefined;
    s.x___8950 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.crc___8939 = (65535);
    s.i___8940 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___8940;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___8940);
    s.data___8946 = (r0);
    r0 = (s.crc___8939 >> 8);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 ^ s.data___8946);
    s.x___8950 = (r0);
    s.tmp_0 = r0 = s.x___8950;
    r0 = (s.x___8950 >> 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 ^ s.tmp_1);
    s.x___8950 = (r0);
    r0 = (s.crc___8939 << 8);
    s.tmp_2 = r0;
    r0 = (s.x___8950 << 12);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 ^ s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.x___8950 << 5);
    s.tmp_4 = r0;
    r0 = (s.tmp_1 ^ s.tmp_4);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 ^ s.x___8950);
    s.crc___8939 = (r0);
    r0 = (s.crc___8939 & 65535);
    s.crc___8939 = (r0);
    r0 = (s.i___8940 + 1);
    s.i___8940 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.crc___8939;
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdCrc16__P4105.info = {"start":204,"length":308,"line":11,"column":4,"endLine":21,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"jdCrc16","argumentNames":["p"]}

function jacdac_jdCrc16__P4105_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdCrc16__P4105, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  crc___8939: undefined,
  i___8940: undefined,
  data___8946: undefined,
  x___8950: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_deviceIdentifier__P2892(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idb___8982 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    s.tmp_0 = Buffer_fromHex__P2638_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 118; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.idb___8982 = (r0);
    r0 = pxsim.BufferMethods.length(s.idb___8982);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_2, 4, s.idb___8982);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_deviceIdentifier__P2892.info = {"start":3987,"length":147,"line":116,"column":8,"endLine":119,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"deviceIdentifier","argumentNames":["this","id"]}

function jacdac_JDPacket_deviceIdentifier__P2892_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_deviceIdentifier__P2892, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  idb___8982: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_deviceIdentifier__P2891(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 4, 8);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_deviceIdentifier__P2891.info = {"start":3864,"length":114,"line":112,"column":8,"endLine":115,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"deviceIdentifier","argumentNames":["this"]}
jacdac_JDPacket_deviceIdentifier__P2891.isGetter = true;

function jacdac_JDPacket_deviceIdentifier__P2891_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_deviceIdentifier__P2891, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_serviceIndex__P2899(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = (s.arg1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = jacdac_panic__P3432_mk(s);
    s.tmp_1.arg0 = "serviceIndex not set";
    s.callLocIdx = 122; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 13);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 192);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 13, s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceIndex__P2899.info = {"start":4908,"length":221,"line":146,"column":8,"endLine":150,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceIndex","argumentNames":["this","serviceIdx"]}

function jacdac_JDPacket_serviceIndex__P2899_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceIndex__P2899, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_serviceIndex__P2898(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 13);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 63);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceIndex__P2898.info = {"start":4801,"length":98,"line":143,"column":8,"endLine":145,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceIndex","argumentNames":["this"]}
jacdac_JDPacket_serviceIndex__P2898.isGetter = true;

function jacdac_JDPacket_serviceIndex__P2898_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceIndex__P2898, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_jdpack__P2934(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___9033 = undefined;
    s.res___9039 = undefined;
    s.e___9048 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = undefined;
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = pxsim_pxtcore.beginTry(5);
    s.tmp_0 = jacdac_jdpackCore__P4172_mk(s);
    s.tmp_0.arg0 = null;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = 0;
    s.callLocIdx = 203; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.len___9033 = (r0);
    r0 = pxsim.control.createBuffer(s.len___9033);
    s.res___9039 = (r0);
    s.tmp_0 = jacdac_jdpackCore__P4172_mk(s);
    s.tmp_0.arg0 = s.res___9039;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = 0;
    s.callLocIdx = 204; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    r0 = s.res___9039;
    { step = 7; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 6; continue; }
  case 5:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___9048 = (r0);
    s.tmp_0 = console_error__P2380_mk(s);
    s.tmp_0.arg0 = s.e___9048;
    s.callLocIdx = 205; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = undefined;
    { step = 7; continue; }
  case 6:
    r0 = undefined;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdpack__P2934.info = {"start":12163,"length":701,"line":365,"column":4,"endLine":385,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdpack","argumentNames":["fmt","data"]}

function jacdac_jdpack__P2934_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdpack__P2934, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  len___9033: undefined,
  res___9039: undefined,
  e___9048: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdpackCore__P4172(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idx___9056 = undefined;
    s.parser___9057 = undefined;
    s.c0___9064 = undefined;
    s.dataItem___9075 = undefined;
    s.fmt0___9083 = undefined;
    s.velt___9091 = undefined;
    s.unnamed58___U6 = undefined;
    s.unnamed59___U7 = undefined;
    s.arr___9100 = undefined;
    s.v___9109 = undefined;
    s.unnamed60___U10 = undefined;
    s.unnamed61___U11 = undefined;
    s.vp___9125 = undefined;
    s.vp32___9132 = undefined;
    s.buf___9190 = undefined;
    s.sz___9225 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    s.idx___9056 = (0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_TokenParser__C4168_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_TokenParser_constructor__P4170_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 194; s.pc = 49; return s.tmp_1;
  case 49:
    r0 = s.retval;
    s.parser___9057 = (s.tmp_0);
  case 1:
    s.tmp_1 = jacdac_TokenParser_parse__P4169_mk(s);
    s.tmp_1.arg0 = s.parser___9057;
    s.callLocIdx = 195; s.pc = 50; return s.tmp_1;
  case 50:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 46; continue; }
    r0 = s.parser___9057.fields["c0"];
    s.c0___9064 = (r0);
    r0 = (s.c0___9064 == 120);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.parser___9057.fields["size"];
    s.tmp_1 = r0;
    r0 = (s.arg3 + s.tmp_1);
    s.arg3 = (r0);
    { step = 1; continue; }
  case 2:
  case 3:
    s.tmp_0 = r0 = s.idx___9056;
    r0 = (s.tmp_0 + 1);
    s.idx___9056 = (r0);
    r0 = pxsim_Array__getAt(s.arg2, s.tmp_0);
    s.dataItem___9075 = (r0);
    r0 = (s.c0___9064 == 114);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = helpers_stringSlice__P2010_mk(s);
    s.tmp_1.arg0 = s.arg1;
    r0 = s.parser___9057.fields["fp"];
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 196; s.pc = 51; return s.tmp_1;
  case 51:
    r0 = s.retval;
    s.fmt0___9083 = (r0);
    s.velt___9091 = (undefined);
    s.unnamed58___U6 = (s.dataItem___9075);
    s.unnamed59___U7 = (0);
  case 4:
    s.tmp_0 = r0 = s.unnamed59___U7;
    r0 = pxsim_Array__length(s.unnamed58___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_Array__getAt(s.unnamed58___U6, s.unnamed59___U7);
    s.velt___9091 = (r0);
    s.tmp_2 = jacdac_jdpackCore__P4172_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.fmt0___9083;
    s.tmp_2.arg2 = s.velt___9091;
    s.tmp_2.arg3 = s.arg3;
    s.callLocIdx = 197; s.pc = 52; return s.tmp_2;
  case 52:
    r0 = s.retval;
    s.arg3 = (r0);
    r0 = (s.unnamed59___U7 + 1);
    s.unnamed59___U7 = (r0);
    { step = 4; continue; }
  case 5:
    s.unnamed58___U6 = (undefined);
    { step = 46; continue; }
  case 6:
  case 7:
    s.arr___9100 = (undefined);
    r0 = s.parser___9057.fields["isArray"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    s.arr___9100 = (s.dataItem___9075);
    { step = 9; continue; }
  case 8:
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.dataItem___9075);
    s.arr___9100 = (s.tmp_0);
  case 9:
    s.v___9109 = (undefined);
    s.unnamed60___U10 = (s.arr___9100);
    s.unnamed61___U11 = (0);
  case 10:
    s.tmp_0 = r0 = s.unnamed61___U11;
    r0 = pxsim_Array__length(s.unnamed60___U10);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 45; continue; }
    r0 = pxsim_Array__getAt(s.unnamed60___U10, s.unnamed61___U11);
    s.v___9109 = (r0);
    r0 = s.parser___9057.fields["nfmt"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 !== null);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 23; continue; }
    r0 = pxsim_pxtcore.typeOf(s.v___9109);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 != "number");
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.typeOf(s.v___9109);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 53);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 53:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat("expecting number, got ", s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_pxtcore.throwValue(s.tmp_6);
  case 11:
  case 12:
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 21; continue; }
    r0 = s.parser___9057.fields["div"];
    s.tmp_9 = r0;
    r0 = (s.v___9109 * s.tmp_9);
    s.vp___9125 = (r0);
    r0 = s.parser___9057.fields["nfmt2"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = (s.vp___9125 / 4294967296);
    s.tmp_1 = r0;
    r0 = pxsim.Math_.floor(s.tmp_1);
    s.vp32___9132 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.parser___9057.fields["nfmt"];
    s.tmp_1 = r0;
    s.tmp_2 = r0 = s.arg3;
    r0 = (s.vp___9125 | 0);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.tmp_3);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.parser___9057.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.arg3 + 4);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.vp32___9132);
    { step = 20; continue; }
  case 13:
    r0 = s.parser___9057.fields["div"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 14:
    r0 = s.parser___9057.fields["nfmt"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 11);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 15; continue; }
    r0 = s.tmp_2;
    { step = 16; continue; }
  case 15:
    r0 = s.parser___9057.fields["nfmt"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == 5);
  case 16:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
  case 17:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 18; continue; }
    s.tmp_7 = r0 = s.arg0;
    r0 = s.parser___9057.fields["nfmt"];
    s.tmp_8 = r0;
    s.tmp_9 = r0 = s.arg3;
    r0 = (s.vp___9125 | 0);
    s.tmp_10 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_7, s.tmp_8, s.tmp_9, s.tmp_10);
    { step = 19; continue; }
  case 18:
    s.tmp_0 = r0 = s.arg0;
    r0 = s.parser___9057.fields["nfmt"];
    s.tmp_1 = r0;
    s.tmp_2 = r0 = s.arg3;
    s.tmp_4 = jacdac_clampWithNumberFormat__P4173_mk(s);
    s.tmp_4.arg0 = s.vp___9125;
    r0 = s.parser___9057.fields["nfmt"];
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 198; s.pc = 54; return s.tmp_4;
  case 54:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.tmp_3);
  case 19:
  case 20:
  case 21:
  case 22:
    r0 = s.parser___9057.fields["size"];
    s.tmp_0 = r0;
    r0 = (s.arg3 + s.tmp_0);
    s.arg3 = (r0);
    { step = 44; continue; }
  case 23:
    s.buf___9190 = (undefined);
    r0 = pxsim_pxtcore.typeOf(s.v___9109);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 28; continue; }
    r0 = (s.c0___9064 == 122);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 24; continue; }
    if ((s.v___9109) && (s.v___9109).vtable) {
    setupResume(s, 55);
    pxsim_String__stringConv(s.v___9109);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.v___9109) + ""; }
  case 55:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "\u0000");
    s.tmp_3 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_3);
    s.buf___9190 = (r0);
    { step = 27; continue; }
  case 24:
    r0 = (s.c0___9064 == 115);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 25; continue; }
    r0 = pxsim.control.createBufferFromUTF8(s.v___9109);
    s.buf___9190 = (r0);
    { step = 26; continue; }
  case 25:
    r0 = pxsim_pxtcore.throwValue("unexpected string");
  case 26:
  case 27:
    { step = 37; continue; }
  case 28:
    s.tmp_0 = r0 = s.v___9109;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 29; continue; }
    r0 = s.tmp_0;
    { step = 30; continue; }
  case 29:
    r0 = pxsim_pxtcore.typeOf(s.v___9109);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "object");
  case 30:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 31; continue; }
    r0 = s.tmp_2;
    { step = 32; continue; }
  case 31:
    r0 = pxsim.BufferMethods.length(s.v___9109);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != null);
  case 32:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 35; continue; }
    r0 = (s.c0___9064 == 98);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 33; continue; }
    s.buf___9190 = (s.v___9109);
    { step = 34; continue; }
  case 33:
    r0 = pxsim_pxtcore.throwValue("unexpected buffer");
  case 34:
    { step = 36; continue; }
  case 35:
    r0 = pxsim_pxtcore.throwValue("expecting string or buffer");
  case 36:
  case 37:
    r0 = s.parser___9057.fields["size"];
    s.sz___9225 = (r0);
    r0 = (s.sz___9225 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 40; continue; }
    r0 = pxsim.BufferMethods.length(s.buf___9190);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > s.sz___9225);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 38; continue; }
    s.tmp_3 = r0 = s.buf___9190;
    r0 = (s.sz___9225 - 0);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_3, 0, s.tmp_4);
    s.buf___9190 = (r0);
  case 38:
  case 39:
    { step = 41; continue; }
  case 40:
    r0 = pxsim.BufferMethods.length(s.buf___9190);
    s.sz___9225 = (r0);
  case 41:
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 42; continue; }
    r0 = pxsim.BufferMethods.write(s.arg0, s.arg3, s.buf___9190);
  case 42:
  case 43:
    r0 = (s.arg3 + s.sz___9225);
    s.arg3 = (r0);
  case 44:
    r0 = (s.unnamed61___U11 + 1);
    s.unnamed61___U11 = (r0);
    { step = 10; continue; }
  case 45:
    s.unnamed60___U10 = (undefined);
    { step = 1; continue; }
  case 46:
    r0 = pxsim_Array__length(s.arg2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.idx___9056);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 47; continue; }
    r0 = pxsim_pxtcore.throwValue("format too short");
  case 47:
  case 48:
    r0 = s.arg3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdpackCore__P4172.info = {"start":7505,"length":2984,"line":232,"column":4,"endLine":311,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdpackCore","argumentNames":["trg","fmt","data","off"]}

function jacdac_jdpackCore__P4172_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdpackCore__P4172, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  idx___9056: undefined,
  parser___9057: undefined,
  c0___9064: undefined,
  dataItem___9075: undefined,
  fmt0___9083: undefined,
  velt___9091: undefined,
  unnamed58___U6: undefined,
  unnamed59___U7: undefined,
  arr___9100: undefined,
  v___9109: undefined,
  unnamed60___U10: undefined,
  unnamed61___U11: undefined,
  vp___9125: undefined,
  vp32___9132: undefined,
  buf___9190: undefined,
  sz___9225: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_stringToBuffer__P4166(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_stringToBuffer__P4166.info = {"start":1350,"length":80,"line":47,"column":4,"endLine":49,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"stringToBuffer","argumentNames":["str"]}

function jacdac_stringToBuffer__P4166_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_stringToBuffer__P4166, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_clampWithNumberFormat__P4173(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 == 13);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 == 14);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0;
    { step = 43; continue; }
  case 3:
  case 4:
    s.tmp_3 = isNaN__P1984_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 202; s.pc = 44; return s.tmp_3;
  case 44:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
    r0 = 0;
    { step = 43; continue; }
  case 5:
  case 6:
    r0 = (s.arg1 == 11);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 11; continue; }
    r0 = (s.arg0 < 0);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 7; continue; }
    r0 = 0;
    { step = 43; continue; }
  case 7:
  case 8:
    r0 = (s.arg0 > 4294967295);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 9; continue; }
    r0 = 4294967295;
    { step = 43; continue; }
  case 9:
  case 10:
    r0 = (s.arg0 >>> 0);
    { step = 43; continue; }
  case 11:
  case 12:
    r0 = (s.arg0 < 0);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 25; continue; }
    s.tmp_8 = r0 = s.arg1;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_8);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_8);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_8);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_8);
    if (r0) { step = 18; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_8);
    if (r0) { step = 21; continue; }
    r0 = s.tmp_8;
    { step = 24; continue; }
  case 13:
  case 14:
    r0 = 0;
    { step = 43; continue; }
  case 15:
    r0 = (s.arg0 <= -128);
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    if (!r0) { step = 16; continue; }
    r0 = -128;
    { step = 43; continue; }
  case 16:
  case 17:
    { step = 24; continue; }
  case 18:
    r0 = (s.arg0 <= -32768);
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_10);
    if (!r0) { step = 19; continue; }
    r0 = -32768;
    { step = 43; continue; }
  case 19:
  case 20:
    { step = 24; continue; }
  case 21:
    r0 = (s.arg0 <= -2147483648);
    s.tmp_11 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_11);
    if (!r0) { step = 22; continue; }
    r0 = -2147483648;
    { step = 43; continue; }
  case 22:
  case 23:
  case 24:
    { step = 42; continue; }
  case 25:
    s.tmp_12 = r0 = s.arg1;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_12);
    if (r0) { step = 26; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_12);
    if (r0) { step = 29; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_12);
    if (r0) { step = 32; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_12);
    if (r0) { step = 35; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_12);
    if (r0) { step = 38; continue; }
    r0 = s.tmp_12;
    { step = 41; continue; }
  case 26:
    r0 = (s.arg0 >= 255);
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    if (!r0) { step = 27; continue; }
    r0 = 255;
    { step = 43; continue; }
  case 27:
  case 28:
    { step = 41; continue; }
  case 29:
    r0 = (s.arg0 >= 65535);
    s.tmp_14 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_14);
    if (!r0) { step = 30; continue; }
    r0 = 65535;
    { step = 43; continue; }
  case 30:
  case 31:
    { step = 41; continue; }
  case 32:
    r0 = (s.arg0 >= 127);
    s.tmp_15 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_15);
    if (!r0) { step = 33; continue; }
    r0 = 127;
    { step = 43; continue; }
  case 33:
  case 34:
    { step = 41; continue; }
  case 35:
    r0 = (s.arg0 >= 32767);
    s.tmp_16 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_16);
    if (!r0) { step = 36; continue; }
    r0 = 32767;
    { step = 43; continue; }
  case 36:
  case 37:
    { step = 41; continue; }
  case 38:
    r0 = (s.arg0 >= 2147483647);
    s.tmp_17 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_17);
    if (!r0) { step = 39; continue; }
    r0 = 2147483647;
    { step = 43; continue; }
  case 39:
  case 40:
  case 41:
  case 42:
    r0 = (s.arg0 | 0);
  case 43:
    return leave(s, r0)
  default: oops()
} } }
jacdac_clampWithNumberFormat__P4173.info = {"start":10526,"length":1631,"line":314,"column":4,"endLine":363,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"clampWithNumberFormat","argumentNames":["v","format"]}

function jacdac_clampWithNumberFormat__P4173_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_clampWithNumberFormat__P4173, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_receivedTime__P3666(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.lastPacket___3620);
    if (!r0) { step = 1; continue; }
    r0 = globals.lastPacket___3620.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 5, 1);
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
radio_receivedTime__P3666.info = {"start":5773,"length":95,"line":145,"column":4,"endLine":147,"endColumn":5,"fileName":"pxt_modules/radio/targetoverrides.ts","functionName":"receivedTime","argumentNames":[]}

function radio_receivedTime__P3666_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_receivedTime__P3666, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function radio_RadioPacket_time__P3632(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 5, 1);
    return leaveAccessor(s, r0)
  default: oops()
} } }
radio_RadioPacket_time__P3632.info = {"start":6854,"length":87,"line":196,"column":8,"endLine":198,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"time","argumentNames":["this"]}
radio_RadioPacket_time__P3632.isGetter = true;

function radio_RadioPacket_time__P3632_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_time__P3632, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function radio_receivedSignalStrength__P3669(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.lastPacket___3620);
    if (!r0) { step = 1; continue; }
    r0 = globals.lastPacket___3620.fields["data"];
    s.tmp_0 = r0;
    r0 = globals.lastPacket___3620.fields["data"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 4);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 5, s.tmp_1);
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    return leave(s, r0)
  default: oops()
} } }
radio_receivedSignalStrength__P3669.info = {"start":7200,"length":107,"line":183,"column":4,"endLine":185,"endColumn":5,"fileName":"pxt_modules/radio/targetoverrides.ts","functionName":"receivedSignalStrength","argumentNames":[]}

function radio_receivedSignalStrength__P3669_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_receivedSignalStrength__P3669, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
} }





function radio_RadioPacket_signal__P3630(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["data"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 4);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 5, s.tmp_1);
    return leaveAccessor(s, r0)
  default: oops()
} } }
radio_RadioPacket_signal__P3630.info = {"start":6665,"length":108,"line":188,"column":8,"endLine":190,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"signal","argumentNames":["this"]}
radio_RadioPacket_signal__P3630.isGetter = true;

function radio_RadioPacket_signal__P3630_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_signal__P3630, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function radio_receivedSerial__P3663(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.lastPacket___3620);
    if (!r0) { step = 1; continue; }
    r0 = globals.lastPacket___3620.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 5, 5);
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
radio_receivedSerial__P3663.info = {"start":4615,"length":99,"line":115,"column":4,"endLine":117,"endColumn":5,"fileName":"pxt_modules/radio/targetoverrides.ts","functionName":"receivedSerial","argumentNames":[]}

function radio_receivedSerial__P3663_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_receivedSerial__P3663, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function radio_RadioPacket_serial__P3634(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 5, 5);
    return leaveAccessor(s, r0)
  default: oops()
} } }
radio_RadioPacket_serial__P3634.info = {"start":7057,"length":89,"line":204,"column":8,"endLine":206,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"serial","argumentNames":["this"]}
radio_RadioPacket_serial__P3634.isGetter = true;

function radio_RadioPacket_serial__P3634_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_serial__P3634, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function radio_onReceivedNumber__P3621(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = radio_init__P4371_mk(s);
    s.callLocIdx = 791; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    globals.onReceivedNumberHandler___4367 = (s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_onReceivedNumber__P3621.info = {"start":3634,"length":132,"line":99,"column":4,"endLine":102,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"onReceivedNumber","argumentNames":["cb"]}

function radio_onReceivedNumber__P3621_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_onReceivedNumber__P3621, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_RadioServer_handleReceivedString__P4428(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.deviceSerialNumber___9364 = undefined;
    s.rssi___9367 = undefined;
    s.time___9370 = undefined;
    s.payload___9373 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_0 = radio_receivedSerial__P3663_mk(s);
    s.callLocIdx = 930; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.deviceSerialNumber___9364 = (r0);
    s.tmp_0 = radio_receivedSignalStrength__P3669_mk(s);
    s.callLocIdx = 931; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.rssi___9367 = (r0);
    s.tmp_0 = radio_receivedTime__P3666_mk(s);
    s.callLocIdx = 932; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.time___9370 = (r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.time___9370);
    r0 = pxsim_Array__push(s.tmp_0, s.deviceSerialNumber___9364);
    r0 = pxsim_Array__push(s.tmp_0, s.rssi___9367);
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_1 = jacdac_jdpack__P2934_mk(s);
    s.tmp_1.arg0 = globals.StringReceived___3722;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 933; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.payload___9373 = (r0);
    s.tmp_0 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_1.arg0 = 144;
    s.tmp_1.arg1 = s.payload___9373;
    s.callLocIdx = 934; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 935; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_handleReceivedString__P4428.info = {"start":3161,"length":544,"line":89,"column":8,"endLine":101,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"handleReceivedString","argumentNames":["this","data"]}

function servers_RadioServer_handleReceivedString__P4428_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_handleReceivedString__P4428, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  deviceSerialNumber___9364: undefined,
  rssi___9367: undefined,
  time___9370: undefined,
  payload___9373: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_onReceivedString__P3623(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = radio_init__P4371_mk(s);
    s.callLocIdx = 793; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    globals.onReceivedStringHandler___4369 = (s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_onReceivedString__P3623.info = {"start":4533,"length":132,"line":125,"column":4,"endLine":128,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"onReceivedString","argumentNames":["cb"]}

function radio_onReceivedString__P3623_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_onReceivedString__P3623, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_RadioServer_handleReceivedBuffer__P4427(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.deviceSerialNumber___9393 = undefined;
    s.rssi___9396 = undefined;
    s.time___9399 = undefined;
    s.payload___9402 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_0 = radio_receivedSerial__P3663_mk(s);
    s.callLocIdx = 924; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.deviceSerialNumber___9393 = (r0);
    s.tmp_0 = radio_receivedSignalStrength__P3669_mk(s);
    s.callLocIdx = 925; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.rssi___9396 = (r0);
    s.tmp_0 = radio_receivedTime__P3666_mk(s);
    s.callLocIdx = 926; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.time___9399 = (r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.time___9399);
    r0 = pxsim_Array__push(s.tmp_0, s.deviceSerialNumber___9393);
    r0 = pxsim_Array__push(s.tmp_0, s.rssi___9396);
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_1 = jacdac_jdpack__P2934_mk(s);
    s.tmp_1.arg0 = globals.BufferReceived___3724;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 927; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.payload___9402 = (r0);
    s.tmp_0 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_1.arg0 = 146;
    s.tmp_1.arg1 = s.payload___9402;
    s.callLocIdx = 928; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 929; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_handleReceivedBuffer__P4427.info = {"start":2607,"length":544,"line":75,"column":8,"endLine":87,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"handleReceivedBuffer","argumentNames":["this","data"]}

function servers_RadioServer_handleReceivedBuffer__P4427_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_handleReceivedBuffer__P4427, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  deviceSerialNumber___9393: undefined,
  rssi___9396: undefined,
  time___9399: undefined,
  payload___9402: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_onReceivedBuffer__P3624(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = radio_init__P4371_mk(s);
    s.callLocIdx = 794; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    globals.onReceivedBufferHandler___4370 = (s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_onReceivedBuffer__P3624.info = {"start":4950,"length":132,"line":136,"column":4,"endLine":139,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"onReceivedBuffer","argumentNames":["cb"]}

function radio_onReceivedBuffer__P3624_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_onReceivedBuffer__P3624, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_SoundLevelServer_constructor__P3867(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundLevelServer__C3861_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    r0 = (s.arg0).fields["enabled"] = (false);
    r0 = (s.arg0).fields["registered"] = (false);
    r0 = (s.arg0).fields["minDecibels"] = (56);
    r0 = (s.arg0).fields["maxDecibels"] = (132);
    r0 = (s.arg0).fields["loudThreshold"] = (0.5);
    r0 = (s.arg0).fields["quietThreshold"] = (0.2);
    s.tmp_2 = jacdac_SensorServer_constructor__P3239_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 346888797;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 862; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_constructor__P3867.info = {"start":346,"length":67,"line":10,"column":8,"endLine":12,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"inline","argumentNames":["this"]}

function servers_SoundLevelServer_constructor__P3867_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_constructor__P3867, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function servers_AccelerometerServer_constructor__P3846(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AccelerometerServer__C3845_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    r0 = (s.arg0).fields["lastEvent"] = (-1);
    s.tmp_2 = jacdac_SensorServer_constructor__P3239_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 521405449;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 829; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_constructor__P3846.info = {"start":134,"length":69,"line":3,"column":8,"endLine":5,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":["this"]}

function servers_AccelerometerServer_constructor__P3846_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_constructor__P3846, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function servers_AccelerometerServer_start__P3847(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AccelerometerServer__C3845_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_start__P3468_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 830; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, servers_AccelerometerServer_start_inline__P9439);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onGesture(11, s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_AccelerometerServer_start_inline__P9446);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onGesture(5, s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_AccelerometerServer_start_inline__P9453);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onGesture(6, s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_AccelerometerServer_start_inline__P9460);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onGesture(1, s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_AccelerometerServer_start_inline__P9467);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onGesture(2, s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_AccelerometerServer_start_inline__P9474);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onGesture(3, s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_AccelerometerServer_start_inline__P9481);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onGesture(4, s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_AccelerometerServer_start_inline__P9488);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onGesture(7, s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start__P3847.info = {"start":213,"length":1173,"line":7,"column":8,"endLine":33,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"start","argumentNames":["this"]}

function servers_AccelerometerServer_start__P3847_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start__P3847, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_AccelerometerServer_start_inline__P9439(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 139;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 831; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 831; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 831; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 831; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start_inline__P9439.info = {"start":292,"length":91,"line":9,"column":43,"endLine":11,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":[]}

function servers_AccelerometerServer_start_inline__P9439_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start_inline__P9439, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_AccelerometerServer_start_inline__P9446(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 133;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 832; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 832; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 832; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 832; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start_inline__P9446.info = {"start":431,"length":92,"line":12,"column":46,"endLine":14,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":[]}

function servers_AccelerometerServer_start_inline__P9446_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start_inline__P9446, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_AccelerometerServer_start_inline__P9453(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 134;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 833; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 833; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 833; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 833; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start_inline__P9453.info = {"start":573,"length":94,"line":15,"column":48,"endLine":17,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":[]}

function servers_AccelerometerServer_start_inline__P9453_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start_inline__P9453, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_AccelerometerServer_start_inline__P9460(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 129;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 834; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 834; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 834; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 834; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start_inline__P9460.info = {"start":713,"length":92,"line":18,"column":44,"endLine":20,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":[]}

function servers_AccelerometerServer_start_inline__P9460_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start_inline__P9460, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_AccelerometerServer_start_inline__P9467(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 130;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 835; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 835; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 835; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 835; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start_inline__P9467.info = {"start":853,"length":94,"line":21,"column":46,"endLine":23,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":[]}

function servers_AccelerometerServer_start_inline__P9467_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start_inline__P9467, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_AccelerometerServer_start_inline__P9474(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 131;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 836; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 836; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 836; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 836; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start_inline__P9474.info = {"start":995,"length":94,"line":24,"column":46,"endLine":26,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":[]}

function servers_AccelerometerServer_start_inline__P9474_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start_inline__P9474, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_AccelerometerServer_start_inline__P9481(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 132;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 837; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 837; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 837; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 837; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start_inline__P9481.info = {"start":1138,"length":95,"line":27,"column":47,"endLine":29,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":[]}

function servers_AccelerometerServer_start_inline__P9481_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start_inline__P9481, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_AccelerometerServer_start_inline__P9488(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 135;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 838; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 838; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 838; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 838; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_start_inline__P9488.info = {"start":1281,"length":94,"line":30,"column":46,"endLine":32,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"inline","argumentNames":[]}

function servers_AccelerometerServer_start_inline__P9488_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_start_inline__P9488, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function temperatureServer_inline__P9496(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.input.temperature();
    return leave(s, r0)
  default: oops()
} } }
temperatureServer_inline__P9496.info = {"start":228,"length":25,"line":5,"column":8,"endLine":5,"endColumn":33,"fileName":"pxt_modules/jacdac-microbit/microbitTemperature.ts","functionName":"inline","argumentNames":[]}

function temperatureServer_inline__P9496_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: temperatureServer_inline__P9496, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function readingError_inline__P9502(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = 3;
    return leave(s, r0)
  default: oops()
} } }
readingError_inline__P9502.info = {"start":440,"length":7,"line":11,"column":26,"endLine":11,"endColumn":33,"fileName":"pxt_modules/jacdac-microbit/microbitTemperature.ts","functionName":"inline","argumentNames":[]}

function readingError_inline__P9502_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: readingError_inline__P9502, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_Server_start__P3468(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = (s.arg0).fields["running"] = (true);
    s.tmp_0 = jacdac_start__P3559_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 529; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_Bus_addServer__P3417_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 530; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = jacdac_Server__C3447_v4_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "start";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_start__P3468.info = {"start":26121,"length":184,"line":780,"column":8,"endLine":786,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Server_start__P3468_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_start__P3468, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Server_log__P4199(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dev___9521 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["supressLog"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 7; continue; }
  case 1:
  case 2:
    r0 = (globals.logPriority___3431 < globals.minPriority___2376);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    s.tmp_2 = jacdac_Device_toString__P3537_mk(s);
    s.tmp_3 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_3.arg0 = globals.bus___3430;
    s.callLocIdx = 531; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 532; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.dev___9521 = (r0);
    r0 = s.arg0.fields["instanceName"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg0.fields["instanceName"];
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(".", s.tmp_1);
    { step = 6; continue; }
  case 5:
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("[", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "]");
  case 6:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    s.tmp_7 = console_add__P2377_mk(s);
    s.tmp_7.arg0 = globals.logPriority___3431;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_11 = r0;
    if ((s.dev___9521) && (s.dev___9521).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.dev___9521);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.dev___9521) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_12 = r0;
    r0 = pxsim_String__concat(s.tmp_11, s.tmp_12);
    s.tmp_10 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_10, s.tmp_13);
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_9, ">");
    s.tmp_8 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_8, s.tmp_14);
    s.tmp_7.arg1 = r0;
    s.callLocIdx = 533; s.pc = 12; return s.tmp_7;
  case 12:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_log__P4199.info = {"start":26511,"length":527,"line":797,"column":8,"endLine":812,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"log","argumentNames":["this","text"]}

function jacdac_Server_log__P4199_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_log__P4199, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  dev___9521: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_addServer__P3417(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg1;
    r0 = s.arg0.fields["servers"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["serviceIndex"] = (s.tmp_1);
    r0 = s.arg0.fields["servers"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_addServer__P3417.info = {"start":2218,"length":129,"line":72,"column":8,"endLine":75,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"addServer","argumentNames":["this","server"]}

function jacdac_Bus_addServer__P3417_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_addServer__P3417, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_BaseButton_constructor__P4397(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_BaseButton__C4391_VT)) failedCast(r0);
    r0 = (s.arg0).fields["button"] = (s.arg2);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    r0 = (s.arg0).fields["nextHold"] = (500000);
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_2, "instanceName", s.arg1);
    s.tmp_3 = jacdac_SensorServer_constructor__P3239_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = 343122531;
    s.tmp_3.arg2 = s.tmp_2;
    s.callLocIdx = 841; s.pc = 1; return s.tmp_3;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = servers_BaseButton__C4391_v6_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_2.arg0, servers_BaseButton__C4391_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.isPressed;
    s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["pressed"] = (s.tmp_1);
    r0 = s.arg0.fields["pressed"];
    s.tmp_0 = r0;
    r0 = (s.arg0).fields["prevPressed"] = (s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BaseButton_constructor__P4397.info = {"start":213,"length":210,"line":8,"column":8,"endLine":12,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"inline","argumentNames":["this","dev","button"]}

function servers_BaseButton_constructor__P4397_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BaseButton_constructor__P4397, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function servers_BaseButton_isPressed__P4394(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_BaseButton__C4391_VT)) failedCast(r0);
    r0 = false;
    return leave(s, r0)
  default: oops()
} } }
servers_BaseButton_isPressed__P4394.info = {"start":986,"length":58,"line":29,"column":8,"endLine":31,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"isPressed","argumentNames":["this"]}

function servers_BaseButton_isPressed__P4394_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BaseButton_isPressed__P4394, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function servers_BaseButton_start__P4393(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_BaseButton__C4391_VT)) failedCast(r0);
    s.tmp_0 = jacdac_Server_start__P3468_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 842; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, servers_BaseButton_start_inline__P9602);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = s.arg0.fields["button"];
    s.tmp_1 = r0;
    r0 = pxsim.control.onEvent(s.tmp_1, 0, s.tmp_0, 0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BaseButton_start__P4393.info = {"start":433,"length":543,"line":14,"column":8,"endLine":27,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"start","argumentNames":["this"]}

function servers_BaseButton_start__P4393_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BaseButton_start__P4393, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function servers_BaseButton_start_inline__P9602(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.v___9603 = undefined;
    r0 = pxsim.control.eventValue();
    s.v___9603 = (r0);
    r0 = (s.v___9603 === 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = true;
    { step = 6; continue; }
  case 1:
    r0 = (s.v___9603 === 2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_1;
    { step = 3; continue; }
  case 2:
    r0 = (s.v___9603 === 3);
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = false;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
  case 5:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
  case 6:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    s.tmp_5 = servers_BaseButton_update__P4395_mk(s);
    s.tmp_5.arg0 = s.caps[0];
    s.tmp_5.arg1 = s.tmp_4;
    s.callLocIdx = 843; s.pc = 7; return s.tmp_5;
  case 7:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BaseButton_start_inline__P9602.info = {"start":542,"length":423,"line":16,"column":73,"endLine":26,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"inline","argumentNames":[]}

function servers_BaseButton_start_inline__P9602_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BaseButton_start_inline__P9602, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  v___9603: undefined,
} }





function servers_BaseButton_update__P4395(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pressLen___9656 = undefined;
    s.pressLen___9673 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_BaseButton__C4391_VT)) failedCast(r0);
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 11; continue; }
  case 1:
  case 2:
    r0 = (s.arg0).fields["pressed"] = (s.arg1);
    r0 = s.arg0.fields["pressed"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["prevPressed"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 !== s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg0.fields["pressed"];
    s.tmp_3 = r0;
    r0 = (s.arg0).fields["prevPressed"] = (s.tmp_3);
    r0 = s.arg0.fields["pressed"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = jacdac_Server_sendEvent__P3465_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = 1;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 844; s.pc = 12; return s.tmp_1;
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["pressTime"] = (s.tmp_1);
    r0 = (s.arg0).fields["nextHold"] = (500);
    r0 = pxsim_pxtcore_mkAction(1, servers_BaseButton_update_inline__P9648);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = control_runInBackground__P2296_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 847; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    r0 = pxsim.control.millis();
    s.tmp_0 = r0;
    r0 = s.arg0.fields["pressTime"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    s.pressLen___9656 = (r0);
    r0 = (s.arg0).fields["nextHold"] = (0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.pressLen___9656);
    s.tmp_1 = jacdac_Server_sendEvent__P3465_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = 2;
    s.tmp_2 = jacdac_jdpack__P2934_mk(s);
    s.tmp_2.arg0 = globals.Up___3740;
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 848; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 849; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
  case 4:
    { step = 10; continue; }
  case 5:
    r0 = s.arg0.fields["pressed"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = s.arg0.fields["pressTime"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
    s.pressLen___9673 = (r0);
    r0 = s.arg0.fields["nextHold"];
    s.tmp_1 = r0;
    r0 = (s.pressLen___9673 >= s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["nextHold"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 500);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["nextHold"] = (s.tmp_3);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.pressLen___9673);
    s.tmp_1 = jacdac_Server_sendEvent__P3465_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = 129;
    s.tmp_2 = jacdac_jdpack__P2934_mk(s);
    s.tmp_2.arg0 = globals.Hold___3741;
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 850; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 851; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, servers_BaseButton_update_inline__P9696);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = control_runInBackground__P2296_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 854; s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
  case 6:
  case 7:
  case 8:
  case 9:
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BaseButton_update__P4395.info = {"start":1054,"length":1537,"line":33,"column":8,"endLine":69,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"update","argumentNames":["this","pressed"]}

function servers_BaseButton_update__P4395_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BaseButton_update__P4395, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  pressLen___9656: undefined,
  pressLen___9673: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_BaseButton_update_inline__P9648(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 500;
    s.callLocIdx = 845; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = s.caps[0].fields["pressed"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.caps[0].fields["nextHold"];
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = servers_BaseButton_update__P4395_mk(s);
    s.tmp_2.arg0 = s.caps[0];
    s.tmp_2.arg1 = true;
    s.callLocIdx = 846; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BaseButton_update_inline__P9648.info = {"start":1506,"length":141,"line":43,"column":44,"endLine":46,"endColumn":21,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"inline","argumentNames":[]}

function servers_BaseButton_update_inline__P9648_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BaseButton_update_inline__P9648, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function servers_BaseButton_update_inline__P9696(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 500;
    s.callLocIdx = 852; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = s.caps[0].fields["pressed"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.caps[0].fields["nextHold"];
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = servers_BaseButton_update__P4395_mk(s);
    s.tmp_2.arg0 = s.caps[0];
    s.tmp_2.arg1 = true;
    s.callLocIdx = 853; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BaseButton_update_inline__P9696.info = {"start":2407,"length":141,"line":63,"column":44,"endLine":66,"endColumn":21,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"inline","argumentNames":[]}

function servers_BaseButton_update_inline__P9696_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BaseButton_update_inline__P9696, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function jacdac_isSimulator__P3554(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sim___9704 = undefined;
    s.tmp_1 = control_deviceDalVersion__P2826_mk(s);
    s.callLocIdx = 705; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == "sim");
    s.sim___9704 = (r0);
    r0 = s.sim___9704;
    return leave(s, r0)
  default: oops()
} } }
jacdac_isSimulator__P3554.info = {"start":60226,"length":112,"line":1785,"column":4,"endLine":1788,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"isSimulator","argumentNames":[]}

function jacdac_isSimulator__P3554_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_isSimulator__P3554, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  sim___9704: undefined,
} }





function control_deviceDalVersion__P2826(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = 33554432;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 1048576);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = "sim";
    { step = 2; continue; }
  case 1:
    r0 = "2.0";
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
control_deviceDalVersion__P2826.info = {"start":359,"length":105,"line":16,"column":4,"endLine":18,"endColumn":5,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"deviceDalVersion","argumentNames":[]}

function control_deviceDalVersion__P2826_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_deviceDalVersion__P2826, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function control_ramSize__P2345(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = 33554432;
    return leave(s, r0)
  default: oops()
} } }
control_ramSize__P2345.info = {"start":3464,"length":66,"line":129,"column":4,"endLine":131,"endColumn":5,"fileName":"pxt_modules/core/control.ts","functionName":"ramSize","argumentNames":[]}

function control_ramSize__P2345_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_ramSize__P2345, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_startServer__P3566(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.lastClient___9729 = undefined;
    s.disconnectCnt___9760 = undefined;
    s.diconnected___9761 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtrt.mkMap();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.arg0 = (s.tmp_1);
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    s.tmp_4 = if_logger_1_mk(s);
    s.tmp_4.arg0 = s.arg0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "logger");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["logger"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["logger"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 757; s.pc = 3; return s.tmp_4; }
    }
  case 3:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "disableLogger", s.tmp_1);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "disableRoleManager", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "noWait", true);
    s.tmp_5 = jacdac_start__P3559_mk(s);
    s.tmp_5.arg0 = s.tmp_0;
    s.callLocIdx = 758; s.pc = 4; return s.tmp_5;
  case 4:
    r0 = s.retval;
    r0 = pxsim_pxtrt.mklocRef();
    s.lastClient___9729 = (r0);
    s.tmp_0 = r0 = s.lastClient___9729;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    r0 = pxsim_pxtcore_mkAction(1, jacdac_startServer_inline__P9735);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.lastClient___9729);
    s.tmp_1 = jacdac_EventSource_on__P3576_mk(s);
    s.tmp_1.arg0 = globals.bus___3430;
    s.tmp_1.arg1 = globals.PACKET_PROCESS___3398;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 764; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    r0 = pxsim_pxtrt.mklocRef();
    s.disconnectCnt___9760 = (r0);
    r0 = pxsim_pxtrt_stlocRef(s.disconnectCnt___9760, 0);
    r0 = pxsim_pxtrt.mklocRef();
    s.diconnected___9761 = (r0);
    r0 = pxsim_pxtrt_stlocRef(s.diconnected___9761, false);
    r0 = pxsim_pxtcore_mkAction(3, jacdac_startServer_inline__P9766);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.disconnectCnt___9760);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.lastClient___9729);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.diconnected___9761);
    s.tmp_1 = jacdac_EventSource_on__P3576_mk(s);
    s.tmp_1.arg0 = globals.bus___3430;
    s.tmp_1.arg1 = globals.SELF_ANNOUNCE___3397;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 767; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_startServer__P3566.info = {"start":65179,"length":1340,"line":1962,"column":4,"endLine":1998,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"startServer","argumentNames":["options"]}

function jacdac_startServer__P3566_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_startServer__P3566, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  lastClient___9729: undefined,
  disconnectCnt___9760: undefined,
  diconnected___9761: undefined,
  arg0: undefined,
} }





function jacdac_startServer_inline__P9735(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = jacdac_JDPacket_isReport__P2920_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 760; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    r0 = s.arg0.fields["_data"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_7, 4, 0);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 2048);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 3; continue; }
    s.tmp_8 = r0 = s.caps[0];
    r0 = pxsim.control.millis();
    s.tmp_9 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_8, s.tmp_9);
    s.tmp_0 = jacdac_setLedChannel__P3564_mk(s);
    s.tmp_0.arg0 = 1;
    s.tmp_0.arg1 = 65535;
    s.callLocIdx = 762; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    setupResume(s, 9);
    pxsim.control.waitMicros(50);
    checkResumeConsumed();
    return;
  case 9:
    r0 = s.retval;
    s.tmp_0 = jacdac_setLedChannel__P3564_mk(s);
    s.tmp_0.arg0 = 1;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 763; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 3:
  case 4:
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_startServer_inline__P9735.info = {"start":65437,"length":510,"line":1967,"column":31,"endLine":1979,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["pkt"]}

function jacdac_startServer_inline__P9735_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_startServer_inline__P9735, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  arg0: undefined,
} }





function jacdac_startServer_inline__P9766(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = r0 = s.caps[0];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    r0 = pxsim.control.millis();
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_ldlocRef(s.caps[1]);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 - s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 1500);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 2);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 0);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 1; continue; }
    r0 = 0;
    { step = 2; continue; }
  case 1:
    r0 = 65535;
  case 2:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    s.tmp_8 = jacdac_setLedChannel__P3564_mk(s);
    s.tmp_8.arg0 = 0;
    s.tmp_8.arg1 = s.tmp_7;
    s.callLocIdx = 765; s.pc = 7; return s.tmp_8;
  case 7:
    r0 = s.retval;
    r0 = pxsim_pxtrt_stlocRef(s.caps[2], true);
    { step = 6; continue; }
  case 3:
    r0 = pxsim_pxtrt_ldlocRef(s.caps[2]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_1 = jacdac_setLedChannel__P3564_mk(s);
    s.tmp_1.arg0 = 0;
    s.tmp_1.arg1 = 0;
    s.callLocIdx = 766; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    r0 = pxsim_pxtrt_stlocRef(s.caps[2], false);
  case 4:
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_startServer_inline__P9766.info = {"start":66042,"length":470,"line":1983,"column":30,"endLine":1997,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_startServer_inline__P9766_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_startServer_inline__P9766, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
} }





function jacdac_setLedChannel__P3564(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = undefined;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_setLedChannel__P3564.info = {"start":64870,"length":98,"line":1949,"column":4,"endLine":1951,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"setLedChannel","argumentNames":["ch","val"]}

function jacdac_setLedChannel__P3564_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_setLedChannel__P3564, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__setLedChannel__P2822(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__setLedChannel__P2822.info = {"start":129,"length":145,"line":5,"column":4,"endLine":8,"endColumn":5,"fileName":"pxt_modules/jacdac/nonmaker.ts","functionName":"_setLedChannel","argumentNames":["ch","val"]}

function jacdac__setLedChannel__P2822_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__setLedChannel__P2822, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function console_log__P2381(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = console_add__P2377_mk(s);
    s.tmp_0.arg0 = 1;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 23; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_log__P2381.info = {"start":1314,"length":86,"line":55,"column":4,"endLine":57,"endColumn":5,"fileName":"pxt_modules/core/console.ts","functionName":"log","argumentNames":["value"]}

function console_log__P2381_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_log__P2381, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_start__P3559(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.id___9801 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = globals.bus___3430.fields["controlServer"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 25; continue; }
  case 1:
  case 2:
    r0 = pxsim_numops_toBoolDecr(globals.productIdentifier___3387);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 5; continue; }
    r0 = 0;
    s.id___9801 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.id___9801);
    if (!r0) { step = 3; continue; }
    r0 = (s.id___9801 & 268435455);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 | 805306368);
    globals.productIdentifier___3387 = (r0);
  case 3:
  case 4:
  case 5:
  case 6:
    s.tmp_0 = jacdac_Bus_start__P3416_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.callLocIdx = 729; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
    s.tmp_0 = jacdac_log__P4284_mk(s);
    s.tmp_0.arg0 = "jacdac starting";
    s.callLocIdx = 730; s.pc = 27; return s.tmp_0;
  case 27:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    r0 = pxsim_pxtrt.mkMap();
  case 8:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.arg0 = (s.tmp_1);
    s.tmp_2 = if_disableBrain_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "disableBrain");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["disableBrain"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["disableBrain"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 731; s.pc = 28; return s.tmp_2; }
    }
  case 28:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_3 = if_disableBrain_2_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_8 = if_disableRoleManager_1_mk(s);
    s.tmp_8.arg0 = s.arg0;
    if (!s.tmp_8.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_8.arg0, "disableRoleManager");
    } else {
      s.tmp_8.fn = s.tmp_8.arg0.vtable.iface["disableRoleManager"];
      if (s.tmp_8.fn == null) { s.retval = s.tmp_8.arg0.fields["disableRoleManager"]; }
      else if (!s.tmp_8.fn.isGetter) { s.retval = bind(s.tmp_8); }
     else { s.callLocIdx = 732; s.pc = 30; return s.tmp_8; }
    }
  case 30:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3.arg1 = r0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_3.arg0, "disableBrain", s.tmp_3.arg1);
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["set/disableBrain"];
      if (s.tmp_3.fn === null) { s.tmp_3.arg0.fields["disableBrain"] = s.tmp_3.arg1; }
      else if (s.tmp_3.fn === undefined) { failedCast(s.tmp_3.arg0) } 
     else { s.callLocIdx = 733; s.pc = 29; return s.tmp_3; }
    }
  case 29:
    r0 = s.retval;
  case 9:
  case 10:
    s.tmp_0 = jacdac_enablePower__P4326_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 734; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
    s.tmp_0 = jacdac_enablePowerFaultPin__P4327_mk(s);
    s.callLocIdx = 735; s.pc = 32; return s.tmp_0;
  case 32:
    r0 = s.retval;
    s.tmp_0 = jacdac_enableIdentityLED__P4328_mk(s);
    s.callLocIdx = 736; s.pc = 33; return s.tmp_0;
  case 33:
    r0 = s.retval;
    s.tmp_3 = if_disableBrain_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "disableBrain");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["disableBrain"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["disableBrain"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 737; s.pc = 34; return s.tmp_3; }
    }
  case 34:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_BrainServer__C4305_VT);
    s.tmp_4 = r0;
    s.tmp_5 = jacdac_BrainServer_constructor__P4307_mk(s);
    s.tmp_5.arg0 = s.tmp_4;
    s.callLocIdx = 738; s.pc = 35; return s.tmp_5;
  case 35:
    r0 = s.retval;
    s.tmp_6 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_6.arg0 = s.tmp_4;
    if (!checkSubtype(s.tmp_6.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_6.arg0);
    s.tmp_6.fn = s.tmp_6.arg0.vtable.methods.start;
    s.pc = 36; return s.tmp_6;
  case 36:
    r0 = s.retval;
  case 11:
  case 12:
    s.tmp_1 = if_proxyMode_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "proxyMode");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["proxyMode"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["proxyMode"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 739; s.pc = 37; return s.tmp_1; }
    }
  case 37:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ProxyServer__C4302_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_ProxyServer_constructor__P4304_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.callLocIdx = 740; s.pc = 38; return s.tmp_3;
  case 38:
    r0 = s.retval;
    s.tmp_4 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_4.arg0 = s.tmp_2;
    if (!checkSubtype(s.tmp_4.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_4.arg0);
    s.tmp_4.fn = s.tmp_4.arg0.vtable.methods.start;
    s.pc = 39; return s.tmp_4;
  case 39:
    r0 = s.retval;
    r0 = (globals.bus___3430).fields["proxyMode"] = (true);
  case 13:
  case 14:
    s.tmp_3 = if_disableLogger_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "disableLogger");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["disableLogger"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["disableLogger"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 741; s.pc = 40; return s.tmp_3; }
    }
  case 40:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    s.tmp_4 = console_addListener__P2384_mk(s);
    s.tmp_4.arg0 = jacdac_start_inline__P9851;
    s.callLocIdx = 743; s.pc = 41; return s.tmp_4;
  case 41:
    r0 = s.retval;
    s.tmp_0 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_0.arg0 = globals.loggerServer___3176;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.start;
    s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
  case 15:
  case 16:
    s.tmp_3 = if_disableRoleManager_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "disableRoleManager");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["disableRoleManager"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["disableRoleManager"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 744; s.pc = 43; return s.tmp_3; }
    }
  case 43:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
    s.tmp_4 = jacdac_Server__C3447_v3_1_mk(s);
    s.tmp_4.arg0 = globals.roleManagerServer___3293;
    if (!checkSubtype(s.tmp_4.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_4.arg0);
    s.tmp_4.fn = s.tmp_4.arg0.vtable.methods.start;
    s.pc = 44; return s.tmp_4;
  case 44:
    r0 = s.retval;
  case 17:
  case 18:
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.onEvent(s.tmp_0, 1, jacdac_consumePackets__P4332, 0);
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.onEvent(s.tmp_0, 100, jacdac_start_inline__P9879, 0);
    s.tmp_0 = jacdac_log__P4284_mk(s);
    s.tmp_0.arg0 = "started";
    s.callLocIdx = 748; s.pc = 45; return s.tmp_0;
  case 45:
    r0 = s.retval;
    s.tmp_3 = if_noWait_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "noWait");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["noWait"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["noWait"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 749; s.pc = 46; return s.tmp_3; }
    }
  case 46:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 19; continue; }
    r0 = s.tmp_0;
    { step = 20; continue; }
  case 19:
    r0 = globals.roleManagerServer___3293;
  case 20:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 23; continue; }
    s.tmp_5 = jacdac_log__P4284_mk(s);
    s.tmp_5.arg0 = "waiting for devices to enumerate...";
    s.callLocIdx = 750; s.pc = 47; return s.tmp_5;
  case 47:
    r0 = s.retval;
    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 1000;
    s.callLocIdx = 751; s.pc = 48; return s.tmp_0;
  case 48:
    r0 = s.retval;
    r0 = globals.roleManagerServer___3293.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
    s.tmp_1 = jacdac__rolemgr_RoleManagerServer_bindRoles__P3291_mk(s);
    s.tmp_1.arg0 = globals.roleManagerServer___3293;
    s.callLocIdx = 752; s.pc = 49; return s.tmp_1;
  case 49:
    r0 = s.retval;
  case 21:
  case 22:
  case 23:
  case 24:
  case 25:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start__P3559.info = {"start":62874,"length":1900,"line":1881,"column":4,"endLine":1941,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["options"]}

function jacdac_start__P3559_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start__P3559, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  id___9801: undefined,
  arg0: undefined,
} }





function jacdac_start_inline__P9851(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.charAt(s.arg1, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != ":");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_LoggerServer_add__P3175_mk(s);
    s.tmp_2.arg0 = globals.loggerServer___3176;
    s.tmp_2.arg1 = s.arg0;
    s.tmp_2.arg2 = s.arg1;
    s.callLocIdx = 742; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start_inline__P9851.info = {"start":63959,"length":114,"line":1914,"column":32,"endLine":1916,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["pri","msg"]}

function jacdac_start_inline__P9851_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start_inline__P9851, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_start_inline__P9879(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_Bus_queueAnnounce__P3422_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.callLocIdx = 747; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start_inline__P9879.info = {"start":64449,"length":44,"line":1929,"column":71,"endLine":1930,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_start_inline__P9879_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start_inline__P9879, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles__P3291(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.cl___9900 = undefined;
    s.unnamed68___U1 = undefined;
    s.unnamed69___U2 = undefined;
    s.query___9914 = undefined;
    s.serviceClass___9922 = undefined;
    s.services___9925 = undefined;
    s.serviceOffset___9949 = undefined;
    s.bindings___9982 = undefined;
    s.wraps___9984 = undefined;
    s.cl___9995 = undefined;
    s.unnamed70___U10 = undefined;
    s.unnamed71___U11 = undefined;
    s.b___10004 = undefined;
    s.w___10026 = undefined;
    s.unnamed72___U14 = undefined;
    s.unnamed73___U15 = undefined;
    s.servers___10045 = undefined;
    s.b___10048 = undefined;
    s.unnamed74___U18 = undefined;
    s.unnamed75___U19 = undefined;
    s.hn___10050 = undefined;
    s.h___10054 = undefined;
    s.h___10100 = undefined;
    s.d___10124 = undefined;
    s.unnamed76___U24 = undefined;
    s.unnamed77___U25 = undefined;
    s.dev___10132 = undefined;
    s.score___10195 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C3287_VT)) failedCast(r0);
    r0 = s.arg0.fields["running"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 51; continue; }
  case 1:
  case 2:
    s.cl___9900 = (undefined);
    r0 = globals.bus___3430.fields["allClients"];
    s.unnamed68___U1 = (r0);
    s.unnamed69___U2 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed69___U2;
    r0 = pxsim_Array__length(s.unnamed68___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 24; continue; }
    r0 = pxsim_Array__getAt(s.unnamed68___U1, s.unnamed69___U2);
    s.cl___9900 = (r0);
    r0 = s.cl___9900.fields["broadcast"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.cl___9900.fields["_role"];
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_5;
    { step = 7; continue; }
  case 6:
    r0 = s.cl___9900.fields["_device"];
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
  case 7:
    // jmp value (already in r0)
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_10);
    if (!r0) { step = 22; continue; }
    s.tmp_11 = jacdac_Client_roleQuery__P3505_mk(s);
    s.tmp_11.arg0 = s.cl___9900;
    s.callLocIdx = 320; s.pc = 52; return s.tmp_11;
  case 52:
    r0 = s.retval;
    s.query___9914 = (r0);
    s.tmp_0 = r0 = s.query___9914;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 8:
    r0 = s.query___9914.fields["device"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === "self");
  case 9:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
    r0 = s.cl___9900.fields["serviceClass"];
    s.serviceClass___9922 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, services_inline__P9927);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.serviceClass___9922);
    s.tmp_1 = helpers_arrayFilter__P2001_mk(s);
    r0 = globals.bus___3430.fields["servers"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 321; s.pc = 53; return s.tmp_1;
  case 53:
    r0 = s.retval;
    s.services___9925 = (r0);
    r0 = pxsim_Array__length(s.services___9925);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = s.cl___9900.fields["_device"];
    s.tmp_2 = r0;
    s.tmp_4 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_4.arg0 = globals.bus___3430;
    s.callLocIdx = 323; s.pc = 54; return s.tmp_4;
  case 54:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 != s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 10; continue; }
    s.tmp_5 = jacdac__rolemgr_setRole__P3286_mk(s);
    r0 = s.cl___9900.fields["_device"];
    r0 = r0.fields["deviceId"];
    s.tmp_5.arg0 = r0;
    r0 = s.cl___9900.fields["serviceIndex"];
    s.tmp_5.arg1 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_5.arg2 = r0;
    s.callLocIdx = 325; s.pc = 55; return s.tmp_5;
  case 55:
    r0 = s.retval;
    { step = 17; continue; }
  case 10:
    r0 = s.query___9914.fields["serviceOffset"];
    s.serviceOffset___9949 = (r0);
    s.tmp_3 = isNaN__P1984_mk(s);
    s.tmp_3.arg0 = s.serviceOffset___9949;
    s.callLocIdx = 326; s.pc = 56; return s.tmp_3;
  case 56:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 11; continue; }
    r0 = s.tmp_0;
    { step = 14; continue; }
  case 11:
    r0 = s.query___9914.fields["serviceOffset"];
    s.tmp_7 = r0;
    r0 = pxsim_Array__getAt(s.services___9925, s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 12; continue; }
    r0 = s.tmp_4;
    { step = 13; continue; }
  case 12:
    r0 = s.query___9914.fields["serviceOffset"];
    s.tmp_9 = r0;
    r0 = pxsim_Array__getAt(s.services___9925, s.tmp_9);
    r0 = r0.fields["serviceIndex"];
    s.tmp_8 = r0;
    r0 = s.cl___9900.fields["serviceIndex"];
    s.tmp_10 = r0;
    r0 = (s.tmp_8 != s.tmp_10);
  case 13:
    // jmp value (already in r0)
    s.tmp_11 = r0;
    r0 = s.tmp_11;
  case 14:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 15; continue; }
    s.tmp_13 = jacdac__rolemgr_setRole__P3286_mk(s);
    r0 = s.cl___9900.fields["_device"];
    r0 = r0.fields["deviceId"];
    s.tmp_13.arg0 = r0;
    r0 = s.cl___9900.fields["serviceIndex"];
    s.tmp_13.arg1 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_13.arg2 = r0;
    s.callLocIdx = 328; s.pc = 57; return s.tmp_13;
  case 57:
    r0 = s.retval;
  case 15:
  case 16:
  case 17:
  case 18:
  case 19:
  case 20:
  case 21:
  case 22:
  case 23:
    r0 = (s.unnamed69___U2 + 1);
    s.unnamed69___U2 = (r0);
    { step = 3; continue; }
  case 24:
    s.unnamed68___U1 = (undefined);
    r0 = globals.bus___3430.fields["unattachedClients"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 25; continue; }
    s.tmp_3 = jacdac__rolemgr_RoleManagerServer_checkChanges__P4269_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 329; s.pc = 58; return s.tmp_3;
  case 58:
    r0 = s.retval;
    { step = 51; continue; }
  case 25:
  case 26:
    r0 = pxsim_Array__mk();
    s.bindings___9982 = (r0);
    s.tmp_0 = helpers_arrayMap__P1997_mk(s);
    r0 = globals.bus___3430.fields["devices"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = wraps_inline__P9986;
    s.callLocIdx = 331; s.pc = 59; return s.tmp_0;
  case 59:
    r0 = s.retval;
    s.wraps___9984 = (r0);
    s.cl___9995 = (undefined);
    r0 = globals.bus___3430.fields["allClients"];
    s.unnamed70___U10 = (r0);
    s.unnamed71___U11 = (0);
  case 27:
    s.tmp_0 = r0 = s.unnamed71___U11;
    r0 = pxsim_Array__length(s.unnamed70___U10);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 38; continue; }
    r0 = pxsim_Array__getAt(s.unnamed70___U10, s.unnamed71___U11);
    s.cl___9995 = (r0);
    r0 = s.cl___9995.fields["broadcast"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 28; continue; }
    r0 = s.tmp_2;
    { step = 29; continue; }
  case 28:
    r0 = s.cl___9995.fields["_role"];
  case 29:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 36; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_RoleBinding__C4258_VT);
    s.tmp_6 = r0;
    s.tmp_7 = jacdac__rolemgr_RoleBinding_constructor__P4261_mk(s);
    s.tmp_7.arg0 = s.tmp_6;
    r0 = s.cl___9995.fields["_role"];
    s.tmp_7.arg1 = r0;
    r0 = s.cl___9995.fields["serviceClass"];
    s.tmp_7.arg2 = r0;
    s.tmp_8 = jacdac_Client_roleQuery__P3505_mk(s);
    s.tmp_8.arg0 = s.cl___9995;
    s.callLocIdx = 334; s.pc = 61; return s.tmp_8;
  case 61:
    r0 = s.retval;
    s.tmp_7.arg3 = r0;
    s.callLocIdx = 335; s.pc = 60; return s.tmp_7;
  case 60:
    r0 = s.retval;
    s.b___10004 = (s.tmp_6);
    r0 = s.cl___9995.fields["_device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 34; continue; }
    s.tmp_1 = r0 = s.b___10004;
    r0 = s.cl___9995.fields["_device"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["boundToDev"] = (s.tmp_2);
    r0 = s.cl___9995.fields["serviceIndex"];
    s.tmp_0 = r0;
    r0 = (s.b___10004).fields["boundToServiceIdx"] = (s.tmp_0);
    s.w___10026 = (undefined);
    s.unnamed72___U14 = (s.wraps___9984);
    s.unnamed73___U15 = (0);
  case 30:
    s.tmp_0 = r0 = s.unnamed73___U15;
    r0 = pxsim_Array__length(s.unnamed72___U14);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 33; continue; }
    r0 = pxsim_Array__getAt(s.unnamed72___U14, s.unnamed73___U15);
    s.w___10026 = (r0);
    r0 = s.w___10026.fields["device"];
    s.tmp_3 = r0;
    r0 = s.cl___9995.fields["_device"];
    s.tmp_4 = r0;
    r0 = (s.tmp_3 == s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 31; continue; }
    r0 = s.w___10026.fields["bindings"];
    s.tmp_5 = r0;
    r0 = s.cl___9995.fields["serviceIndex"];
    s.tmp_6 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_5, s.tmp_6, s.b___10004);
    { step = 33; continue; }
  case 31:
  case 32:
    r0 = (s.unnamed73___U15 + 1);
    s.unnamed73___U15 = (r0);
    { step = 30; continue; }
  case 33:
    s.unnamed72___U14 = (undefined);
  case 34:
  case 35:
    r0 = pxsim_Array__push(s.bindings___9982, s.b___10004);
  case 36:
  case 37:
    r0 = (s.unnamed71___U11 + 1);
    s.unnamed71___U11 = (r0);
    { step = 27; continue; }
  case 38:
    s.unnamed70___U10 = (undefined);
    r0 = pxsim_Array__mk();
    s.servers___10045 = (r0);
    s.b___10048 = (undefined);
    s.unnamed74___U18 = (s.bindings___9982);
    s.unnamed75___U19 = (0);
  case 39:
    s.tmp_0 = r0 = s.unnamed75___U19;
    r0 = pxsim_Array__length(s.unnamed74___U18);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 42; continue; }
    r0 = pxsim_Array__getAt(s.unnamed74___U18, s.unnamed75___U19);
    s.b___10048 = (r0);
    s.tmp_2 = jacdac__rolemgr_RoleBinding_host__P4259_mk(s);
    s.tmp_2.arg0 = s.b___10048;
    s.callLocIdx = 339; s.pc = 62; return s.tmp_2;
  case 62:
    r0 = s.retval;
    s.hn___10050 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, h_inline__P10057);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.hn___10050);
    s.tmp_1 = helpers_arrayFind__P2002_mk(s);
    s.tmp_1.arg0 = s.servers___10045;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 340; s.pc = 63; return s.tmp_1;
  case 63:
    r0 = s.retval;
    s.h___10054 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.h___10054);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 40; continue; }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_ServerBindings__C4262_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac__rolemgr_ServerBindings_constructor__P4265_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.hn___10050;
    s.callLocIdx = 341; s.pc = 64; return s.tmp_3;
  case 64:
    r0 = s.retval;
    s.h___10054 = (s.tmp_2);
    r0 = pxsim_Array__push(s.servers___10045, s.h___10054);
  case 40:
  case 41:
    r0 = s.h___10054.fields["bindings"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.b___10048);
    r0 = (s.unnamed75___U19 + 1);
    s.unnamed75___U19 = (r0);
    { step = 39; continue; }
  case 42:
    s.unnamed74___U18 = (undefined);
    s.tmp_0 = helpers_arrayFilter__P2001_mk(s);
    s.tmp_0.arg0 = s.servers___10045;
    s.tmp_0.arg1 = jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10083;
    s.callLocIdx = 343; s.pc = 65; return s.tmp_0;
  case 65:
    r0 = s.retval;
    s.servers___10045 = (r0);
    s.tmp_0 = console_log__P2381_mk(s);
    r0 = pxsim_Array__length(s.servers___10045);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 67);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 67:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("binding: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " servers");
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 344; s.pc = 66; return s.tmp_0;
  case 66:
    r0 = s.retval;
  case 43:
    r0 = pxsim_Array__length(s.servers___10045);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 50; continue; }
    s.tmp_2 = jacdac__rolemgr_maxIn__P4266_mk(s);
    s.tmp_2.arg0 = s.servers___10045;
    s.tmp_2.arg1 = h_inline__P10104;
    s.tmp_2.arg2 = h_inline__P10114;
    s.callLocIdx = 345; s.pc = 68; return s.tmp_2;
  case 68:
    r0 = s.retval;
    s.h___10100 = (r0);
    s.d___10124 = (undefined);
    s.unnamed76___U24 = (s.wraps___9984);
    s.unnamed77___U25 = (0);
  case 44:
    s.tmp_0 = r0 = s.unnamed77___U25;
    r0 = pxsim_Array__length(s.unnamed76___U24);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 45; continue; }
    r0 = pxsim_Array__getAt(s.unnamed76___U24, s.unnamed77___U25);
    s.d___10124 = (r0);
    s.tmp_2 = r0 = s.d___10124;
    s.tmp_4 = jacdac__rolemgr_ServerBindings_scoreFor__P4264_mk(s);
    s.tmp_4.arg0 = s.h___10100;
    s.tmp_4.arg1 = s.d___10124;
    s.tmp_4.arg2 = false;
    s.callLocIdx = 346; s.pc = 69; return s.tmp_4;
  case 69:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["score"] = (s.tmp_3);
    r0 = (s.unnamed77___U25 + 1);
    s.unnamed77___U25 = (r0);
    { step = 44; continue; }
  case 45:
    s.unnamed76___U24 = (undefined);
    s.tmp_0 = jacdac__rolemgr_maxIn__P4266_mk(s);
    s.tmp_0.arg0 = s.wraps___9984;
    s.tmp_0.arg1 = dev_inline__P10136;
    s.tmp_0.arg2 = dev_inline__P10144;
    s.callLocIdx = 347; s.pc = 70; return s.tmp_0;
  case 70:
    r0 = s.retval;
    s.dev___10132 = (r0);
    r0 = s.dev___10132.fields["score"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 46; continue; }
    r0 = pxsim_Array_.removeElement(s.servers___10045, s.h___10100);
    { step = 43; continue; }
  case 46:
  case 47:
    s.tmp_0 = helpers_arraySort__P1996_mk(s);
    r0 = s.h___10100.fields["bindings"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10165;
    s.callLocIdx = 348; s.pc = 71; return s.tmp_0;
  case 71:
    r0 = s.retval;
    s.tmp_0 = jacdac__rolemgr_ServerBindings_scoreFor__P4264_mk(s);
    s.tmp_0.arg0 = s.h___10100;
    s.tmp_0.arg1 = s.dev___10132;
    s.tmp_0.arg2 = true;
    s.callLocIdx = 349; s.pc = 72; return s.tmp_0;
  case 72:
    r0 = s.retval;
    s.score___10195 = (r0);
    s.tmp_1 = jacdac__rolemgr_ServerBindings_fullyBound__P4263_mk(s);
    s.tmp_1.arg0 = s.h___10100;
    s.callLocIdx = 350; s.pc = 73; return s.tmp_1;
  case 73:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 48; continue; }
    r0 = pxsim_Array_.removeElement(s.servers___10045, s.h___10100);
    { step = 49; continue; }
  case 48:
    r0 = pxsim_pxtcore_mkAction(1, jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10211);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.dev___10132);
    s.tmp_1 = r0 = s.h___10100;
    s.tmp_3 = helpers_arrayFilter__P2001_mk(s);
    r0 = s.h___10100.fields["bindings"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_0;
    s.callLocIdx = 351; s.pc = 74; return s.tmp_3;
  case 74:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["bindings"] = (s.tmp_2);
  case 49:
    { step = 43; continue; }
  case 50:
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_checkChanges__P4269_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 352; s.pc = 75; return s.tmp_0;
  case 75:
    r0 = s.retval;
  case 51:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles__P3291.info = {"start":7985,"length":5980,"line":217,"column":8,"endLine":349,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"bindRoles","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles__P3291_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles__P3291, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  cl___9900: undefined,
  unnamed68___U1: undefined,
  unnamed69___U2: undefined,
  query___9914: undefined,
  serviceClass___9922: undefined,
  services___9925: undefined,
  serviceOffset___9949: undefined,
  bindings___9982: undefined,
  wraps___9984: undefined,
  cl___9995: undefined,
  unnamed70___U10: undefined,
  unnamed71___U11: undefined,
  b___10004: undefined,
  w___10026: undefined,
  unnamed72___U14: undefined,
  unnamed73___U15: undefined,
  servers___10045: undefined,
  b___10048: undefined,
  unnamed74___U18: undefined,
  unnamed75___U19: undefined,
  hn___10050: undefined,
  h___10054: undefined,
  h___10100: undefined,
  d___10124: undefined,
  unnamed76___U24: undefined,
  unnamed77___U25: undefined,
  dev___10132: undefined,
  score___10195: undefined,
  arg0: undefined,
} }





function services_inline__P9927(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
services_inline__P9927.info = {"start":8630,"length":45,"line":229,"column":67,"endLine":229,"endColumn":112,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["server"]}

function services_inline__P9927_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: services_inline__P9927, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function wraps_inline__P9986(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_DeviceWrapper__C4256_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac__rolemgr_DeviceWrapper_constructor__P4257_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.callLocIdx = 330; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
wraps_inline__P9986.info = {"start":10253,"length":25,"line":261,"column":42,"endLine":261,"endColumn":67,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["d"]}

function wraps_inline__P9986_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: wraps_inline__P9986, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function h_inline__P10057(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["host"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
h_inline__P10057.info = {"start":11147,"length":17,"line":284,"column":37,"endLine":284,"endColumn":54,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["h"]}

function h_inline__P10057_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: h_inline__P10057, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10083(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_2 = jacdac__rolemgr_ServerBindings_fullyBound__P4263_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 342; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10083.info = {"start":11444,"length":18,"line":293,"column":37,"endLine":293,"endColumn":55,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["h"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10083_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10083, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function h_inline__P10104(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["bindings"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = s.arg1.fields["bindings"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_0 - s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
h_inline__P10104.info = {"start":11860,"length":47,"line":302,"column":20,"endLine":302,"endColumn":67,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function h_inline__P10104_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: h_inline__P10104, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function h_inline__P10114(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg1.fields["host"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["host"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.compare(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
h_inline__P10114.info = {"start":11929,"length":32,"line":303,"column":20,"endLine":303,"endColumn":52,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function h_inline__P10114_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: h_inline__P10114, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function dev_inline__P10136(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["score"];
    s.tmp_0 = r0;
    r0 = s.arg1.fields["score"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
dev_inline__P10136.info = {"start":12335,"length":27,"line":314,"column":20,"endLine":314,"endColumn":47,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function dev_inline__P10136_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: dev_inline__P10136, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function dev_inline__P10144(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg1.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.compare(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
dev_inline__P10144.info = {"start":12384,"length":54,"line":315,"column":20,"endLine":315,"endColumn":74,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function dev_inline__P10144_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: dev_inline__P10144, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10165(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___10168 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_0 = r0;
    r0 = s.arg1.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    s.c___10168 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.c___10168);
    if (!r0) { step = 1; continue; }
    r0 = s.c___10168;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["roleQuery"];
    r0 = r0.fields["serviceOffset"];
    s.tmp_0 = r0;
    r0 = s.arg1.fields["roleQuery"];
    r0 = r0.fields["serviceOffset"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    s.c___10168 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.c___10168);
    if (!r0) { step = 3; continue; }
    r0 = s.c___10168;
    { step = 5; continue; }
  case 3:
  case 4:
    r0 = s.arg0.fields["role"];
    s.tmp_0 = r0;
    r0 = s.arg1.fields["role"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.compare(s.tmp_0, s.tmp_1);
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10165.info = {"start":12936,"length":289,"line":326,"column":32,"endLine":332,"endColumn":17,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10165_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10165, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  c___10168: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10211(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_0 = r0;
    r0 = s.caps[0].fields["device"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 != s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10211.info = {"start":13838,"length":31,"line":344,"column":24,"endLine":344,"endColumn":55,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["b"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10211_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P10211, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function helpers_arraySort__P1996(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 1);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    s.arg1 = (helpers_arraySort_inline__P10228);
  case 3:
  case 4:
    s.tmp_0 = helpers_sortHelper__P3934_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 3; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySort__P1996.info = {"start":5663,"length":859,"line":207,"column":4,"endLine":227,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arraySort","argumentNames":["arr","callbackfn"]}

function helpers_arraySort__P1996_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySort__P1996, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arraySort_inline__P10228(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.aIsUndef___10231 = undefined;
    s.bIsUndef___10235 = undefined;
    s.aIsNull___10246 = undefined;
    s.bIsNull___10250 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 === undefined);
    s.aIsUndef___10231 = (r0);
    r0 = (s.arg1 === undefined);
    s.bIsUndef___10235 = (r0);
    s.tmp_0 = r0 = s.aIsUndef___10231;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.bIsUndef___10235;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = 0;
    { step = 17; continue; }
    { step = 8; continue; }
  case 3:
    r0 = pxsim_numops_toBoolDecr(s.aIsUndef___10231);
    if (!r0) { step = 4; continue; }
    r0 = 1;
    { step = 17; continue; }
    { step = 7; continue; }
  case 4:
    r0 = pxsim_numops_toBoolDecr(s.bIsUndef___10235);
    if (!r0) { step = 5; continue; }
    r0 = -1;
    { step = 17; continue; }
  case 5:
  case 6:
  case 7:
  case 8:
    r0 = (s.arg0 === null);
    s.aIsNull___10246 = (r0);
    r0 = (s.arg1 === null);
    s.bIsNull___10250 = (r0);
    s.tmp_0 = r0 = s.aIsNull___10246;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = s.tmp_0;
    { step = 10; continue; }
  case 9:
    r0 = s.bIsNull___10250;
  case 10:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = 0;
    { step = 17; continue; }
    { step = 16; continue; }
  case 11:
    r0 = pxsim_numops_toBoolDecr(s.aIsNull___10246);
    if (!r0) { step = 12; continue; }
    r0 = 1;
    { step = 17; continue; }
    { step = 15; continue; }
  case 12:
    r0 = pxsim_numops_toBoolDecr(s.bIsNull___10250);
    if (!r0) { step = 13; continue; }
    r0 = -1;
    { step = 17; continue; }
  case 13:
  case 14:
  case 15:
  case 16:
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_7);
    s.tmp_5 = r0;
    r0 = pxsim_String_.compare(s.tmp_2, s.tmp_5);
  case 17:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySort_inline__P10228.info = {"start":5826,"length":636,"line":209,"column":25,"endLine":224,"endColumn":13,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"inline","argumentNames":["a","b"]}

function helpers_arraySort_inline__P10228_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySort_inline__P10228, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  aIsUndef___10231: undefined,
  bIsUndef___10235: undefined,
  aIsNull___10246: undefined,
  bIsNull___10250: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_sortHelper__P3934(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___10285 = undefined;
    s.i___10288 = undefined;
    s.j___10294 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0;
    { step = 11; continue; }
  case 3:
  case 4:
    r0 = pxsim_Array__length(s.arg0);
    s.len___10285 = (r0);
    s.i___10288 = (0);
  case 5:
    s.tmp_1 = r0 = s.i___10288;
    r0 = (s.len___10285 - 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = (s.i___10288 + 1);
    s.j___10294 = (r0);
  case 6:
    r0 = (s.j___10294 < s.len___10285);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___10288);
    s.tmp_3.arg0 = r0;
    r0 = pxsim_Array__getAt(s.arg0, s.j___10294);
    s.tmp_3.arg1 = r0;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 1; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    s.tmp_4 = helpers_swap__P3933_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.i___10288;
    s.tmp_4.arg2 = s.j___10294;
    s.callLocIdx = 2; s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.j___10294 + 1);
    s.j___10294 = (r0);
    { step = 6; continue; }
  case 9:
    r0 = (s.i___10288 + 1);
    s.i___10288 = (r0);
    { step = 5; continue; }
  case 10:
    r0 = s.arg0;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
helpers_sortHelper__P3934.info = {"start":5176,"length":481,"line":191,"column":4,"endLine":205,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"sortHelper","argumentNames":["arr","callbackfn"]}

function helpers_sortHelper__P3934_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_sortHelper__P3934, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___10285: undefined,
  i___10288: undefined,
  j___10294: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_swap__P3933(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.temp___10323 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__getAt(s.arg0, s.arg1);
    s.temp___10323 = (r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, s.tmp_1, s.tmp_2);
    r0 = pxsim_Array_.setAt(s.arg0, s.arg2, s.temp___10323);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_swap__P3933.info = {"start":5030,"length":140,"line":185,"column":4,"endLine":189,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"swap","argumentNames":["arr","i","j"]}

function helpers_swap__P3933_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_swap__P3933, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  temp___10323: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_ServerBindings_scoreFor__P4264(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numBound___10338 = undefined;
    s.numPossible___10339 = undefined;
    s.dev___10340 = undefined;
    s.missing___10343 = undefined;
    s.b___10346 = undefined;
    s.unnamed66___U5 = undefined;
    s.unnamed67___U6 = undefined;
    s.sbuf___10361 = undefined;
    s.idx___10364 = undefined;
    s.serviceIndex___10370 = undefined;
    s.serviceClass___10376 = undefined;
    s.i___10382 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C4262_VT)) failedCast(r0);
    s.numBound___10338 = (0);
    s.numPossible___10339 = (0);
    r0 = s.arg1.fields["device"];
    s.dev___10340 = (r0);
    r0 = pxsim_Array__mk();
    s.missing___10343 = (r0);
    s.b___10346 = (undefined);
    r0 = s.arg0.fields["bindings"];
    s.unnamed66___U5 = (r0);
    s.unnamed67___U6 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed67___U6;
    r0 = pxsim_Array__length(s.unnamed66___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed66___U5, s.unnamed67___U6);
    s.b___10346 = (r0);
    r0 = s.b___10346.fields["boundToDev"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = s.b___10346.fields["boundToDev"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.dev___10340);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 2; continue; }
    r0 = (s.numBound___10338 + 1);
    s.numBound___10338 = (r0);
  case 2:
  case 3:
    { step = 5; continue; }
  case 4:
    r0 = pxsim_Array__push(s.missing___10343, s.b___10346);
  case 5:
    r0 = (s.unnamed67___U6 + 1);
    s.unnamed67___U6 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed66___U5 = (undefined);
    r0 = s.dev___10340.fields["services"];
    s.sbuf___10361 = (r0);
    s.idx___10364 = (4);
  case 7:
    s.tmp_1 = r0 = s.idx___10364;
    r0 = pxsim.BufferMethods.length(s.sbuf___10361);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
    r0 = (s.idx___10364 >> 2);
    s.serviceIndex___10370 = (r0);
    r0 = s.arg1.fields["bindings"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_1, s.serviceIndex___10370);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    { step = 16; continue; }
  case 8:
  case 9:
    r0 = pxsim.BufferMethods.getNumber(s.sbuf___10361, 11, s.idx___10364);
    s.serviceClass___10376 = (r0);
    s.i___10382 = (0);
  case 10:
    s.tmp_1 = r0 = s.i___10382;
    r0 = pxsim_Array__length(s.missing___10343);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = pxsim_Array__getAt(s.missing___10343, s.i___10382);
    r0 = r0.fields["serviceClass"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.serviceClass___10376);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 13; continue; }
    r0 = (s.numPossible___10339 + 1);
    s.numPossible___10339 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 11; continue; }
    s.tmp_0 = jacdac__rolemgr_RoleBinding_select__P4260_mk(s);
    r0 = pxsim_Array__getAt(s.missing___10343, s.i___10382);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.serviceIndex___10370;
    s.callLocIdx = 288; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.tmp_0 = console_add__P2377_mk(s);
    s.tmp_0.arg0 = globals.logPriority___3431;
    r0 = pxsim_Array__getAt(s.missing___10343, s.i___10382);
    r0 = r0.fields["role"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat("bind: ", s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_8, " -> ");
    s.tmp_7 = r0;
    s.tmp_13 = jacdac_Device_shortId__P3536_mk(s);
    s.tmp_13.arg0 = s.dev___10340;
    s.callLocIdx = 289; s.pc = 24; return s.tmp_13;
  case 24:
    r0 = s.retval;
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 25);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 25:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_11);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, ":");
    s.tmp_5 = r0;
    if ((s.serviceIndex___10370) && (s.serviceIndex___10370).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.serviceIndex___10370);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.serviceIndex___10370) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_14);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, " -> ");
    s.tmp_3 = r0;
    r0 = pxsim_Array__getAt(s.missing___10343, s.i___10382);
    r0 = r0.fields["boundToDev"];
    s.tmp_16 = r0;
    if ((s.tmp_16) && (s.tmp_16).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_16);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_16) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_15 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_15);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.missing___10343, s.i___10382);
    r0 = r0.fields["boundToServiceIdx"];
    s.tmp_18 = r0;
    if ((s.tmp_18) && (s.tmp_18).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_18);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_18) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_17 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_17);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 290; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
  case 11:
  case 12:
    s.tmp_0 = helpers_arraySplice__P1991_mk(s);
    s.tmp_0.arg0 = s.missing___10343;
    s.tmp_0.arg1 = s.i___10382;
    s.tmp_0.arg2 = 1;
    s.callLocIdx = 291; s.pc = 29; return s.tmp_0;
  case 29:
    r0 = s.retval;
    { step = 15; continue; }
  case 13:
  case 14:
    r0 = (s.i___10382 + 1);
    s.i___10382 = (r0);
    { step = 10; continue; }
  case 15:
  case 16:
    r0 = (s.idx___10364 + 4);
    s.idx___10364 = (r0);
    { step = 7; continue; }
  case 17:
    r0 = (s.numPossible___10339 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = 0;
    { step = 20; continue; }
  case 18:
  case 19:
    r0 = (s.numBound___10338 << 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | s.numPossible___10339);
  case 20:
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_scoreFor__P4264.info = {"start":2602,"length":2028,"line":73,"column":8,"endLine":118,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"scoreFor","argumentNames":["this","devwrap","select"]}

function jacdac__rolemgr_ServerBindings_scoreFor__P4264_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_scoreFor__P4264, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  numBound___10338: undefined,
  numPossible___10339: undefined,
  dev___10340: undefined,
  missing___10343: undefined,
  b___10346: undefined,
  unnamed66___U5: undefined,
  unnamed67___U6: undefined,
  sbuf___10361: undefined,
  idx___10364: undefined,
  serviceIndex___10370: undefined,
  serviceClass___10376: undefined,
  i___10382: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arraySplice__P1991(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___10460 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    s.i___10460 = (0);
  case 3:
    r0 = (s.i___10460 < s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array_.removeAt(s.arg0, s.arg1);
    r0 = (s.i___10460 + 1);
    s.i___10460 = (r0);
    { step = 3; continue; }
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySplice__P1991.info = {"start":3642,"length":213,"line":137,"column":4,"endLine":144,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arraySplice","argumentNames":["arr","start","len"]}

function helpers_arraySplice__P1991_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySplice__P1991, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  i___10460: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_RoleBinding_select__P4260(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dev___10475 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C4258_VT)) failedCast(r0);
    r0 = s.arg1.fields["device"];
    s.dev___10475 = (r0);
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_1 = r0;
    r0 = (s.dev___10475 == s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["boundToServiceIdx"];
    s.tmp_2 = r0;
    r0 = (s.arg2 == s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    s.tmp_5 = jacdac__rolemgr_setRole__P3286_mk(s);
    r0 = s.arg0.fields["boundToDev"];
    r0 = r0.fields["deviceId"];
    s.tmp_5.arg0 = r0;
    r0 = s.arg0.fields["boundToServiceIdx"];
    s.tmp_5.arg1 = r0;
    s.tmp_5.arg2 = null;
    s.callLocIdx = 285; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = s.arg1.fields["bindings"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, s.arg2, s.arg0);
    s.tmp_0 = jacdac__rolemgr_setRole__P3286_mk(s);
    r0 = s.dev___10475.fields["deviceId"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg2;
    r0 = s.arg0.fields["role"];
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 286; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = (s.arg0).fields["boundToDev"] = (s.dev___10475);
    r0 = (s.arg0).fields["boundToServiceIdx"] = (s.arg2);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_select__P4260.info = {"start":1609,"length":520,"line":48,"column":8,"endLine":59,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"select","argumentNames":["this","devwrap","serviceIdx"]}

function jacdac__rolemgr_RoleBinding_select__P4260_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_select__P4260, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  dev___10475: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_maxIn__P4266(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.maxElt___10515 = undefined;
    s.i___10517 = undefined;
    s.c___10523 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__getAt(s.arg0, 0);
    s.maxElt___10515 = (r0);
    s.i___10517 = (1);
  case 1:
    s.tmp_1 = r0 = s.i___10517;
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg1;
    s.tmp_3.arg0 = s.maxElt___10515;
    r0 = pxsim_Array__getAt(s.arg0, s.i___10517);
    s.tmp_3.arg1 = r0;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 292; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.c___10523 = (r0);
    r0 = (s.c___10523 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 2:
    r0 = (s.c___10523 == 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_1;
    { step = 4; continue; }
  case 3:
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg2;
    s.tmp_3.arg0 = s.maxElt___10515;
    r0 = pxsim_Array__getAt(s.arg0, s.i___10517);
    s.tmp_3.arg1 = r0;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 293; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 < 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.arg0, s.i___10517);
    s.maxElt___10515 = (r0);
  case 6:
  case 7:
    r0 = (s.i___10517 + 1);
    s.i___10517 = (r0);
    { step = 1; continue; }
  case 8:
    r0 = s.maxElt___10515;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_maxIn__P4266.info = {"start":4642,"length":356,"line":121,"column":4,"endLine":132,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"maxIn","argumentNames":["arr","cmp","cmdTie"]}

function jacdac__rolemgr_maxIn__P4266_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_maxIn__P4266, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  maxElt___10515: undefined,
  i___10517: undefined,
  c___10523: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_ServerBindings_fullyBound__P4263(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C4262_VT)) failedCast(r0);
    s.tmp_0 = helpers_arrayEvery__P1999_mk(s);
    r0 = s.arg0.fields["bindings"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = jacdac__rolemgr_ServerBindings_fullyBound_inline__P10552;
    s.callLocIdx = 287; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_fullyBound__P4263.info = {"start":2255,"length":94,"line":66,"column":8,"endLine":68,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"fullyBound","argumentNames":["this"]}
jacdac__rolemgr_ServerBindings_fullyBound__P4263.isGetter = true;

function jacdac__rolemgr_ServerBindings_fullyBound__P4263_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_fullyBound__P4263, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_ServerBindings_fullyBound_inline__P10552(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 != null);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_fullyBound_inline__P10552.info = {"start":2313,"length":25,"line":67,"column":39,"endLine":67,"endColumn":64,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["b"]}

function jacdac__rolemgr_ServerBindings_fullyBound_inline__P10552_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_fullyBound_inline__P10552, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function helpers_arrayEvery__P1999(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___10560 = undefined;
    s.i___10563 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__length(s.arg0);
    s.len___10560 = (r0);
    s.i___10563 = (0);
  case 1:
    r0 = (s.i___10563 < s.len___10560);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_4 = lambda_3_mk(s);
    s.tmp_4.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___10563);
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.i___10563;
    setupLambda(s.tmp_4, s.tmp_4.argL);
    s.callLocIdx = 5; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = false;
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = (s.i___10563 + 1);
    s.i___10563 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = true;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayEvery__P1999.info = {"start":7135,"length":298,"line":246,"column":4,"endLine":252,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arrayEvery","argumentNames":["arr","callbackfn"]}

function helpers_arrayEvery__P1999_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayEvery__P1999, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___10560: undefined,
  i___10563: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_ServerBindings_constructor__P4265(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C4262_VT)) failedCast(r0);
    r0 = (s.arg0).fields["host"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["bindings"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_constructor__P4265.info = {"start":2209,"length":36,"line":64,"column":8,"endLine":64,"endColumn":44,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","host"]}

function jacdac__rolemgr_ServerBindings_constructor__P4265_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_constructor__P4265, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleBinding_host__P4259(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.slashIdx___10586 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C4258_VT)) failedCast(r0);
    r0 = s.arg0.fields["roleQuery"];
    r0 = r0.fields["device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["roleQuery"];
    r0 = r0.fields["device"];
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["role"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_1, "/", undefined);
    s.slashIdx___10586 = (r0);
    r0 = (s.slashIdx___10586 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["role"];
    { step = 5; continue; }
    { step = 4; continue; }
  case 3:
    s.tmp_1 = helpers_stringSlice__P2010_mk(s);
    r0 = s.arg0.fields["role"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    r0 = (s.slashIdx___10586 - 1);
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 284; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_host__P4259.info = {"start":1341,"length":258,"line":40,"column":8,"endLine":46,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"host","argumentNames":["this"]}

function jacdac__rolemgr_RoleBinding_host__P4259_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_host__P4259, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  slashIdx___10586: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleBinding_constructor__P4261(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C4258_VT)) failedCast(r0);
    r0 = (s.arg0).fields["role"] = (s.arg1);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg2);
    r0 = (s.arg0).fields["roleQuery"] = (s.arg3);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_constructor__P4261.info = {"start":1204,"length":127,"line":38,"column":8,"endLine":38,"endColumn":135,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","role","serviceClass","roleQuery"]}

function jacdac__rolemgr_RoleBinding_constructor__P4261_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_constructor__P4261, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac__rolemgr_DeviceWrapper_constructor__P4257(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_DeviceWrapper__C4256_VT)) failedCast(r0);
    r0 = (s.arg0).fields["device"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["bindings"] = (s.tmp_1);
    r0 = (s.arg0).fields["score"] = (-1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_DeviceWrapper_constructor__P4257.info = {"start":1064,"length":38,"line":31,"column":8,"endLine":31,"endColumn":46,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","device"]}

function jacdac__rolemgr_DeviceWrapper_constructor__P4257_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_DeviceWrapper_constructor__P4257, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayMap__P1997(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___10609 = undefined;
    s.len___10611 = undefined;
    s.i___10614 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___10609 = (r0);
    r0 = pxsim_Array__length(s.arg0);
    s.len___10611 = (r0);
    s.i___10614 = (0);
  case 1:
    r0 = (s.i___10614 < s.len___10611);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.res___10609;
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___10614);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.i___10614;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 4; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    r0 = (s.i___10614 + 1);
    s.i___10614 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.res___10609;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayMap__P1997.info = {"start":6528,"length":299,"line":229,"column":4,"endLine":236,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"arrayMap","argumentNames":["arr","callbackfn"]}

function helpers_arrayMap__P1997_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayMap__P1997, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  res___10609: undefined,
  len___10611: undefined,
  i___10614: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_checkChanges__P4269(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.newHash___10631 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C3287_VT)) failedCast(r0);
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_bindingHash__P4268_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 353; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.newHash___10631 = (r0);
    r0 = s.arg0.fields["_oldBindingsHash"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.newHash___10631);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["_oldBindingsHash"] = (s.newHash___10631);
    s.tmp_0 = jacdac_Server__C3447_v4_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "roles: bindings changed";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_Server_sendChangeEvent__P3466_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 354; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_checkChanges__P4269.info = {"start":13975,"length":416,"line":351,"column":8,"endLine":361,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"checkChanges","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_checkChanges__P4269_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_checkChanges__P4269, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  newHash___10631: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindingHash__P4268(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___10645 = undefined;
    s.n___10646 = undefined;
    s.i___10650 = undefined;
    s.client___10655 = undefined;
    s.buf___10695 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C3287_VT)) failedCast(r0);
    r0 = pxsim_String_.mkEmpty();
    s.r___10645 = (r0);
    r0 = globals.bus___3430.fields["allClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__length(s.tmp_0);
    s.n___10646 = (r0);
    s.i___10650 = (0);
  case 1:
    r0 = (s.i___10650 < s.n___10646);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = globals.bus___3430.fields["allClients"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_1, s.i___10650);
    s.client___10655 = (r0);
    r0 = s.client___10655.fields["_role"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim_String_.mkEmpty();
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.client___10655.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 4:
    r0 = s.client___10655.fields["_device"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_3;
    { step = 6; continue; }
  case 5:
    r0 = s.client___10655.fields["_device"];
    r0 = r0.fields["deviceId"];
  case 6:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 7:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_5;
    { step = 9; continue; }
  case 8:
    r0 = pxsim_String_.mkEmpty();
  case 9:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    if ((s.r___10645) && (s.r___10645).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.r___10645);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___10645) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_14 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_15 = r0;
    r0 = pxsim_String__concat(s.tmp_14, s.tmp_15);
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_13, ":");
    s.tmp_12 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat(s.tmp_12, s.tmp_16);
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_11, ":");
    s.tmp_10 = r0;
    r0 = s.client___10655.fields["serviceIndex"];
    s.tmp_18 = r0;
    if ((s.tmp_18) && (s.tmp_18).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_18);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_18) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_17 = r0;
    r0 = pxsim_String__concat(s.tmp_10, s.tmp_17);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_8);
    s.r___10645 = (r0);
    r0 = (s.i___10650 + 1);
    s.i___10650 = (r0);
    { step = 1; continue; }
  case 10:
    r0 = pxsim.control.createBufferFromUTF8(s.r___10645);
    s.buf___10695 = (r0);
    r0 = pxsim.BufferMethods.hash(s.buf___10695, 32);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindingHash__P4268.info = {"start":7482,"length":493,"line":203,"column":8,"endLine":215,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"bindingHash","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_bindingHash__P4268_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindingHash__P4268, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  r___10645: undefined,
  n___10646: undefined,
  i___10650: undefined,
  client___10655: undefined,
  buf___10695: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_setRole__P3286(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.key___10705 = undefined;
    s.i___10720 = undefined;
    s.name___10726 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    if ((globals.roleSettingPrefix___4255) && (globals.roleSettingPrefix___4255).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(globals.roleSettingPrefix___4255);
    checkResumeConsumed();
    return;
    } else { s.retval = (globals.roleSettingPrefix___4255) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_6);
    s.key___10705 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_String_.indexOf(s.arg2, "?", undefined);
    s.i___10720 = (r0);
    r0 = (s.i___10720 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg2;
    { step = 2; continue; }
  case 1:
    s.tmp_1 = helpers_stringSubstr__P2009_mk(s);
    s.tmp_1.arg0 = s.arg2;
    s.tmp_1.arg1 = 0;
    s.tmp_1.arg2 = s.i___10720;
    s.callLocIdx = 278; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.name___10726 = (s.tmp_2);
    s.tmp_0 = settings_writeString__P2792_mk(s);
    s.tmp_0.arg0 = s.key___10705;
    s.tmp_0.arg1 = s.name___10726;
    s.callLocIdx = 279; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.tmp_0 = console_add__P2377_mk(s);
    s.tmp_0.arg0 = globals.logPriority___3431;
    if ((s.name___10726) && (s.name___10726).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.name___10726);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.name___10726) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("role: set ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, " -> ");
    s.tmp_3 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_6);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_7);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 280; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    s.tmp_0 = settings_remove__P2802_mk(s);
    s.tmp_0.arg0 = s.key___10705;
    s.callLocIdx = 281; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.tmp_0 = console_add__P2377_mk(s);
    s.tmp_0.arg0 = globals.logPriority___3431;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("role: clear binding ", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_4);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 282; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
  case 4:
    s.tmp_0 = jacdac_Bus_clearAttachCache__P3420_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.callLocIdx = 283; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_setRole__P3286.info = {"start":364,"length":608,"line":12,"column":4,"endLine":26,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"setRole","argumentNames":["devid","servIdx","role"]}

function jacdac__rolemgr_setRole__P3286_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_setRole__P3286, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  key___10705: undefined,
  i___10720: undefined,
  name___10726: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function settings_remove__P2802(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._remove(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_remove__P2802.info = {"start":4098,"length":64,"line":165,"column":4,"endLine":167,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"remove","argumentNames":["key"]}

function settings_remove__P2802_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_remove__P2802, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Bus_queueAnnounce__P3422(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ids___10773 = undefined;
    s.buf___10805 = undefined;
    s.i___10811 = undefined;
    s.cl___10837 = undefined;
    s.unnamed80___U4 = undefined;
    s.unnamed81___U5 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    s.tmp_0 = helpers_arrayMap__P1997_mk(s);
    r0 = s.arg0.fields["servers"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = ids_inline__P10775;
    s.callLocIdx = 367; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    s.ids___10773 = (r0);
    r0 = s.arg0.fields["restartCounter"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 15);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["restartCounter"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["restartCounter"] = (s.tmp_3);
  case 1:
  case 2:
    r0 = globals.roleManagerServer___3293.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = 2048;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_2 = r0 = s.ids___10773;
    r0 = s.arg0.fields["restartCounter"];
    s.tmp_7 = r0;
    r0 = (s.tmp_7 | s.tmp_1);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 | 256);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 | 512);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | 1024);
    s.tmp_3 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_2, 0, s.tmp_3);
    r0 = pxsim_Array__length(s.ids___10773);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 * 4);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___10805 = (r0);
    s.i___10811 = (0);
  case 5:
    s.tmp_1 = r0 = s.i___10811;
    r0 = pxsim_Array__length(s.ids___10773);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_3 = r0 = s.buf___10805;
    r0 = (s.i___10811 * 4);
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.ids___10773, s.i___10811);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_3, 11, s.tmp_4, s.tmp_5);
    r0 = (s.i___10811 + 1);
    s.i___10811 = (r0);
    { step = 5; continue; }
  case 6:
    s.tmp_0 = jacdac_JDPacket__sendReport__P2924_mk(s);
    s.tmp_1 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_1.arg0 = 0;
    s.tmp_1.arg1 = s.buf___10805;
    s.callLocIdx = 369; s.pc = 21; return s.tmp_1;
  case 21:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_2 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 370; s.pc = 22; return s.tmp_2;
  case 22:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 371; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.SELF_ANNOUNCE___3397;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 372; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
    s.cl___10837 = (undefined);
    r0 = s.arg0.fields["allClients"];
    s.unnamed80___U4 = (r0);
    s.unnamed81___U5 = (0);
  case 7:
    s.tmp_0 = r0 = s.unnamed81___U5;
    r0 = pxsim_Array__length(s.unnamed80___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed80___U4, s.unnamed81___U5);
    s.cl___10837 = (r0);
    s.tmp_2 = jacdac_Client__C3496_v1_1_mk(s);
    s.tmp_2.arg0 = s.cl___10837;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Client__C3496_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.announceCallback;
    s.pc = 24; return s.tmp_2;
  case 24:
    r0 = s.retval;
    r0 = (s.unnamed81___U5 + 1);
    s.unnamed81___U5 = (r0);
    { step = 7; continue; }
  case 8:
    s.unnamed80___U4 = (undefined);
    s.tmp_0 = jacdac_Bus_gcDevices__P4278_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 373; s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
    r0 = globals.roleManagerServer___3293.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = s.tmp_0;
    { step = 10; continue; }
  case 9:
    r0 = s.arg0.fields["resetIn"];
  case 10:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = s.arg0.fields["resetIn"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.tmp_3);
    s.tmp_4 = jacdac_JDPacket_sendAsMultiCommand__P2927_mk(s);
    s.tmp_5 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_5.arg0 = 8320;
    s.tmp_6 = jacdac_jdpack__P2934_mk(s);
    s.tmp_6.arg0 = "u32";
    s.tmp_6.arg1 = s.tmp_2;
    s.callLocIdx = 375; s.pc = 28; return s.tmp_6;
  case 28:
    r0 = s.retval;
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 376; s.pc = 27; return s.tmp_5;
  case 27:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = 0;
    s.callLocIdx = 377; s.pc = 26; return s.tmp_4;
  case 26:
    r0 = s.retval;
  case 11:
  case 12:
    r0 = globals.roleManagerServer___3293.fields["autoBind"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_0;
    { step = 14; continue; }
  case 13:
    r0 = globals.roleManagerServer___3293.fields["running"];
  case 14:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 17; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["autoBindCnt"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["autoBindCnt"] = (s.tmp_3);
    r0 = s.arg0.fields["autoBindCnt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = (s.arg0).fields["autoBindCnt"] = (0);
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_bindRoles__P3291_mk(s);
    s.tmp_0.arg0 = globals.roleManagerServer___3293;
    s.callLocIdx = 378; s.pc = 29; return s.tmp_0;
  case 29:
    r0 = s.retval;
  case 15:
  case 16:
  case 17:
  case 18:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_queueAnnounce__P3422.info = {"start":4193,"length":1550,"line":135,"column":8,"endLine":170,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"queueAnnounce","argumentNames":["this"]}

function jacdac_Bus_queueAnnounce__P3422_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_queueAnnounce__P3422, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  ids___10773: undefined,
  buf___10805: undefined,
  i___10811: undefined,
  cl___10837: undefined,
  unnamed80___U4: undefined,
  unnamed81___U5: undefined,
  arg0: undefined,
} }





function ids_inline__P10775(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["serviceClass"];
    { step = 2; continue; }
  case 1:
    r0 = -1;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
ids_inline__P10775.info = {"start":4252,"length":38,"line":136,"column":41,"endLine":136,"endColumn":79,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["h"]}

function ids_inline__P10775_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: ids_inline__P10775, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_sendAsMultiCommand__P2927(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 5);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 3, s.tmp_1);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 4, s.arg1);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 8, 2863311530);
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P2899_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 61;
    s.callLocIdx = 157; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCore__P2923_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 158; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_sendAsMultiCommand__P2927.info = {"start":10165,"length":509,"line":317,"column":8,"endLine":329,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"sendAsMultiCommand","argumentNames":["this","serviceClass"]}

function jacdac_JDPacket_sendAsMultiCommand__P2927_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_sendAsMultiCommand__P2927, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_gcDevices__P4278(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___10900 = undefined;
    s.cutoff___10903 = undefined;
    s.numdel___10909 = undefined;
    s.i___10910 = undefined;
    s.dev___10917 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = pxsim.control.millis();
    s.now___10900 = (r0);
    r0 = (s.now___10900 - 2000);
    s.cutoff___10903 = (r0);
    s.tmp_1 = jacdac_Bus_selfDevice__P3418_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 359; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.now___10900);
    s.numdel___10909 = (0);
    s.i___10910 = (0);
  case 1:
    s.tmp_1 = r0 = s.i___10910;
    r0 = s.arg0.fields["devices"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    r0 = s.arg0.fields["devices"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.tmp_4, s.i___10910);
    s.dev___10917 = (r0);
    r0 = s.dev___10917.fields["lastSeen"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < s.cutoff___10903);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_2 = helpers_arraySplice__P1991_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.i___10910;
    s.tmp_2.arg2 = 1;
    s.callLocIdx = 360; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    r0 = (s.i___10910 - 1);
    s.i___10910 = (r0);
    s.tmp_0 = jacdac_Device__destroy__P3549_mk(s);
    s.tmp_0.arg0 = s.dev___10917;
    s.callLocIdx = 361; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = (s.numdel___10909 + 1);
    s.numdel___10909 = (r0);
  case 2:
  case 3:
    r0 = (s.i___10910 + 1);
    s.i___10910 = (r0);
    { step = 1; continue; }
  case 4:
    r0 = pxsim_numops_toBoolDecr(s.numdel___10909);
    if (!r0) { step = 5; continue; }
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_CHANGE___3395;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 362; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___3390;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 363; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_gcDevices__P4278.info = {"start":2357,"length":639,"line":77,"column":8,"endLine":96,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"gcDevices","argumentNames":["this"]}

function jacdac_Bus_gcDevices__P4278_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_gcDevices__P4278, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  now___10900: undefined,
  cutoff___10903: undefined,
  numdel___10909: undefined,
  i___10910: undefined,
  dev___10917: undefined,
  arg0: undefined,
} }





function jacdac_Client_announceCallback__P3523(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_announceCallback__P3523.info = {"start":42303,"length":21,"line":1276,"column":8,"endLine":1276,"endColumn":29,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"announceCallback","argumentNames":["this"]}

function jacdac_Client_announceCallback__P3523_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_announceCallback__P3523, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Bus_isClient__P3421(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = globals.roleManagerServer___3293.fields["running"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Bus_isClient__P3421.info = {"start":4112,"length":71,"line":131,"column":8,"endLine":133,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"isClient","argumentNames":["this"]}
jacdac_Bus_isClient__P3421.isGetter = true;

function jacdac_Bus_isClient__P3421_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_isClient__P3421, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_consumePackets__P4332(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___10951 = undefined;
    s.pkt___10958 = undefined;
  case 1:
    s.tmp_1 = jacdac___physGetPacket__P2816_mk(s);
    s.callLocIdx = 723; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.buf___10951 = (r0);
    r0 = (null != s.tmp_0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    s.tmp_3 = jacdac_JDPacket_fromBinary__P2882_mk(s);
    s.tmp_3.arg0 = s.buf___10951;
    s.callLocIdx = 724; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.pkt___10958 = (r0);
    s.tmp_0 = r0 = s.pkt___10958;
    s.tmp_2 = jacdac___physGetTimestamp__P2817_mk(s);
    s.callLocIdx = 725; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["timestamp"] = (s.tmp_1);
    s.tmp_0 = jacdac_Bus_processPacket__P3428_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = s.pkt___10958;
    s.callLocIdx = 726; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_consumePackets__P4332.info = {"start":62546,"length":273,"line":1869,"column":4,"endLine":1876,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"consumePackets","argumentNames":[]}

function jacdac_consumePackets__P4332_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_consumePackets__P4332, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buf___10951: undefined,
  pkt___10958: undefined,
} }





function jacdac___physGetTimestamp__P2817(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.recvQ___4104);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 0;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim.control.millis();
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac___physGetTimestamp__P2817.info = {"start":1523,"length":121,"line":52,"column":4,"endLine":55,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physGetTimestamp","argumentNames":[]}

function jacdac___physGetTimestamp__P2817_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physGetTimestamp__P2817, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_JDPacket_fromBinary__P2882(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___10973 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C2877_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDPacket_constructor__P4136_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 100; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.p___10973 = (s.tmp_0);
    s.tmp_0 = r0 = s.p___10973;
    r0 = pxsim.BufferMethods.slice(s.arg0, 0, 16);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_header"] = (s.tmp_1);
    s.tmp_0 = r0 = s.p___10973;
    s.tmp_2 = r0 = s.arg0;
    r0 = s.p___10973.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 12);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 16, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_data"] = (s.tmp_1);
    r0 = s.p___10973;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_fromBinary__P2882.info = {"start":1792,"length":230,"line":49,"column":8,"endLine":54,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"fromBinary","argumentNames":["buf"]}

function jacdac_JDPacket_fromBinary__P2882_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_fromBinary__P2882, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  p___10973: undefined,
  arg0: undefined,
} }





function jacdac___physGetPacket__P2816(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_numops_toBoolDecr(globals.recvQ___4104);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_Array_.removeAt(globals.recvQ___4104, 0);
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac___physGetPacket__P2816.info = {"start":1286,"length":115,"line":43,"column":4,"endLine":46,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physGetPacket","argumentNames":[]}

function jacdac___physGetPacket__P2816_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physGetPacket__P2816, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac___physId__P2814(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = 30;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physId__P2814.info = {"start":139,"length":59,"line":7,"column":4,"endLine":9,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physId","argumentNames":[]}

function jacdac___physId__P2814_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physId__P2814, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac__rolemgr_RoleManagerServer_constructor__P3289(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C3287_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    r0 = (s.arg0).fields["autoBind"] = (true);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 508264038;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 294; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_constructor__P3289.info = {"start":5133,"length":68,"line":138,"column":8,"endLine":140,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_constructor__P3289_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_constructor__P3289, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_LoggerServer_constructor__P3169(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C3167_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = (s.arg0).fields["minPriority"] = (4);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 316415946;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 229; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_constructor__P3169.info = {"start":164,"length":101,"line":5,"column":8,"endLine":8,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_LoggerServer_constructor__P3169_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_constructor__P3169, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_LoggerServer_add__P3175(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___11047 = undefined;
    s.unnamed64___U1 = undefined;
    s.unnamed65___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C3167_VT)) failedCast(r0);
    r0 = s.arg0.fields["running"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_4;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.length(s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
  case 4:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_7;
    { step = 6; continue; }
  case 5:
    r0 = globals.bus___3430.fields["controlServer"];
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    s.tmp_12 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_12);
    s.tmp_11 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_10);
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_8);
  case 6:
    // jmp value (already in r0)
    s.tmp_14 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_14);
    if (!r0) { step = 7; continue; }
    { step = 17; continue; }
  case 7:
  case 8:
    r0 = s.arg0.fields["minPriority"];
    s.tmp_16 = r0;
    r0 = (s.arg1 < s.tmp_16);
    s.tmp_15 = r0;
    r0 = pxsim_numops_toBool(s.tmp_15);
    if (!r0) { step = 9; continue; }
    r0 = s.tmp_15;
    { step = 10; continue; }
  case 9:
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_18 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_18);
    s.tmp_17 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_17);
  case 10:
    // jmp value (already in r0)
    s.tmp_19 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_19);
    if (!r0) { step = 11; continue; }
    { step = 17; continue; }
  case 11:
  case 12:
    r0 = pxsim.control.millis();
    s.tmp_22 = r0;
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_23 = r0;
    r0 = (s.tmp_22 - s.tmp_23);
    s.tmp_21 = r0;
    r0 = (s.tmp_21 > 3000);
    s.tmp_20 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_20);
    if (!r0) { step = 13; continue; }
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = (s.arg0).fields["minPriority"] = (4);
    { step = 17; continue; }
  case 13:
  case 14:
    s.buf___11047 = (undefined);
    s.tmp_0 = Buffer_chunkedFromUTF8__P2641_mk(s);
    s.tmp_0.arg0 = s.arg2;
    s.tmp_0.arg1 = 236;
    s.callLocIdx = 236; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.unnamed64___U1 = (r0);
    s.unnamed65___U2 = (0);
  case 15:
    s.tmp_0 = r0 = s.unnamed65___U2;
    r0 = pxsim_Array__length(s.unnamed64___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 16; continue; }
    r0 = pxsim_Array__getAt(s.unnamed64___U1, s.unnamed65___U2);
    s.buf___11047 = (r0);
    s.tmp_2 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_3 = jacdac_JDPacket_from__P2883_mk(s);
    r0 = (128 + s.arg1);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.buf___11047;
    s.callLocIdx = 237; s.pc = 20; return s.tmp_3;
  case 20:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 238; s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    r0 = (s.unnamed65___U2 + 1);
    s.unnamed65___U2 = (r0);
    { step = 15; continue; }
  case 16:
    s.unnamed64___U1 = (undefined);
  case 17:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_add__P3175.info = {"start":2090,"length":833,"line":57,"column":8,"endLine":80,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"add","argumentNames":["this","priority","message"]}

function jacdac_LoggerServer_add__P3175_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_add__P3175, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  tmp_23: undefined,
  buf___11047: undefined,
  unnamed64___U1: undefined,
  unnamed65___U2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function Buffer_chunkedFromUTF8__P2641(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.chunks___11062 = undefined;
    s.pos___11064 = undefined;
    s.len___11070 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg1 < 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.throwValue("Oops");
  case 1:
  case 2:
    r0 = pxsim_Array__mk();
    s.chunks___11062 = (r0);
    s.pos___11064 = (0);
  case 3:
    s.tmp_1 = r0 = s.pos___11064;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_3 = Buffer_chunkLen__P4033_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.pos___11064;
    s.tmp_3.arg2 = s.arg1;
    s.callLocIdx = 58; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.len___11070 = (r0);
    s.tmp_0 = r0 = s.chunks___11062;
    s.tmp_3 = helpers_stringSlice__P2010_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.pos___11064;
    r0 = (s.pos___11064 + s.len___11070);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 59; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = (s.pos___11064 + s.len___11070);
    s.pos___11064 = (r0);
    { step = 3; continue; }
  case 4:
    r0 = s.chunks___11062;
    return leave(s, r0)
  default: oops()
} } }
Buffer_chunkedFromUTF8__P2641.info = {"start":10703,"length":381,"line":379,"column":4,"endLine":390,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"chunkedFromUTF8","argumentNames":["str","maxBytes"]}

function Buffer_chunkedFromUTF8__P2641_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_chunkedFromUTF8__P2641, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  chunks___11062: undefined,
  pos___11064: undefined,
  len___11070: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Buffer_chunkLen__P4033(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.L___11095 = undefined;
    s.R___11099 = undefined;
    s.m___11117 = undefined;
    s.ll___11126 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.Math_.idiv(s.arg2, 3);
    s.L___11095 = (r0);
    s.R___11099 = (s.arg2);
    s.tmp_4 = helpers_stringSlice__P2010_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg1;
    r0 = (s.arg1 + s.R___11099);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 56; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.R___11099;
    { step = 9; continue; }
  case 1:
  case 2:
  case 3:
    r0 = (s.L___11095 < s.R___11099);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 8; continue; }
    r0 = (s.L___11095 + s.R___11099);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 >> 1);
    s.m___11117 = (r0);
    r0 = (s.m___11117 == s.L___11095);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    { step = 8; continue; }
  case 4:
  case 5:
    s.tmp_3 = helpers_stringSlice__P2010_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.arg1;
    r0 = (s.arg1 + s.m___11117);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 57; s.pc = 11; return s.tmp_3;
  case 11:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.ll___11126 = (r0);
    r0 = (s.ll___11126 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.L___11095 = (s.m___11117);
    { step = 7; continue; }
  case 6:
    s.R___11099 = (s.m___11117);
  case 7:
    { step = 3; continue; }
  case 8:
    r0 = s.L___11095;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
Buffer_chunkLen__P4033.info = {"start":10201,"length":496,"line":358,"column":4,"endLine":377,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"chunkLen","argumentNames":["s","off","maxlen"]}

function Buffer_chunkLen__P4033_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_chunkLen__P4033, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  L___11095: undefined,
  R___11099: undefined,
  m___11117: undefined,
  ll___11126: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function console_addListener__P2384(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(globals.listeners___3977);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    globals.listeners___3977 = (r0);
  case 1:
  case 2:
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_Array_.indexOf(globals.listeners___3977, s.arg0, undefined);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > -1);
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    { step = 7; continue; }
  case 5:
  case 6:
    r0 = pxsim_Array__push(globals.listeners___3977, s.arg0);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_addListener__P2384.info = {"start":3264,"length":236,"line":114,"column":4,"endLine":118,"endColumn":5,"fileName":"pxt_modules/core/console.ts","functionName":"addListener","argumentNames":["listener"]}

function console_addListener__P2384_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_addListener__P2384, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_ProxyServer_constructor__P4304(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ProxyServer__C4302_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 384932169;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 639; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ProxyServer_constructor__P4304.info = {"start":52508,"length":54,"line":1578,"column":8,"endLine":1580,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_ProxyServer_constructor__P4304_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ProxyServer_constructor__P4304, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_BrainServer_constructor__P4307(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_BrainServer__C4305_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 272387813;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 640; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_BrainServer_constructor__P4307.info = {"start":52617,"length":61,"line":1584,"column":8,"endLine":1586,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_BrainServer_constructor__P4307_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_BrainServer_constructor__P4307, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_enableIdentityLED__P4328(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = null;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = jacdac_log__P4284_mk(s);
    s.tmp_1.arg0 = "enabling identity LED";
    s.callLocIdx = 698; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_on__P3576_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.IDENTIFY___3405;
    s.tmp_0.arg2 = jacdac_enableIdentityLED_inline__P11179;
    s.callLocIdx = 704; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED__P4328.info = {"start":59705,"length":515,"line":1769,"column":4,"endLine":1783,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enableIdentityLED","argumentNames":[]}

function jacdac_enableIdentityLED__P4328_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED__P4328, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_enableIdentityLED_inline__P11179(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = control_runInBackground__P2296_mk(s);
    s.tmp_0.arg0 = jacdac_enableIdentityLED_inline__P11181;
    s.callLocIdx = 703; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED_inline__P11179.info = {"start":59852,"length":338,"line":1772,"column":29,"endLine":1780,"endColumn":18,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enableIdentityLED_inline__P11179_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED_inline__P11179, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_enableIdentityLED_inline__P11181(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___11182 = undefined;
    s.i___11182 = (0);
  case 1:
    r0 = (s.i___11182 < 7);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = jacdac_setPinByCfg__P4325_mk(s);
    s.tmp_1.arg0 = 13;
    s.tmp_1.arg1 = true;
    s.callLocIdx = 699; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 50;
    s.callLocIdx = 700; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_setPinByCfg__P4325_mk(s);
    s.tmp_0.arg0 = 13;
    s.tmp_0.arg1 = false;
    s.callLocIdx = 701; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 150;
    s.callLocIdx = 702; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    r0 = (s.i___11182 + 1);
    s.i___11182 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED_inline__P11181.info = {"start":59898,"length":291,"line":1773,"column":40,"endLine":1780,"endColumn":17,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enableIdentityLED_inline__P11181_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED_inline__P11181, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  i___11182: undefined,
} }





function jacdac_setPinByCfg__P4325(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pin___11197 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = null;
    s.pin___11197 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.pin___11197);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = 0;
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 65536);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.arg1 = (r0);
  case 3:
  case 4:
    s.tmp_0 = if_digitalWrite_2_mk(s);
    s.tmp_0.arg0 = s.pin___11197;
    s.tmp_0.arg1 = s.arg1;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "digitalWrite"), 2);
      s.callLocIdx = 683; s.pc = 6; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["digitalWrite"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["digitalWrite"], 2); s.callLocIdx = 683; s.pc = 6; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 683; s.pc = 6; return s.tmp_0;; }
     else { s.callLocIdx = 683; s.pc = 6; return s.tmp_0; }
    }
  case 6:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_setPinByCfg__P4325.info = {"start":58197,"length":247,"line":1732,"column":4,"endLine":1738,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"setPinByCfg","argumentNames":["cfg","val"]}

function jacdac_setPinByCfg__P4325_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_setPinByCfg__P4325, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  pin___11197: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function pins_pinByCfg__P2828(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = null;
    return leave(s, r0)
  default: oops()
} } }
pins_pinByCfg__P2828.info = {"start":489,"length":82,"line":22,"column":4,"endLine":24,"endColumn":5,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"pinByCfg","argumentNames":["key"]}

function pins_pinByCfg__P2828_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pins_pinByCfg__P2828, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_enablePowerFaultPin__P4327(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.faultpin___11216 = undefined;
    r0 = null;
    s.faultpin___11216 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.faultpin___11216);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = jacdac_log__P4284_mk(s);
    s.tmp_0.arg0 = "enabling power fault pin";
    s.callLocIdx = 686; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = if_setPull_2_mk(s);
    s.tmp_0.arg0 = s.faultpin___11216;
    s.tmp_0.arg1 = 1;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "setPull"), 2);
      s.callLocIdx = 687; s.pc = 4; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["setPull"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["setPull"], 2); s.callLocIdx = 687; s.pc = 4; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 687; s.pc = 4; return s.tmp_0;; }
     else { s.callLocIdx = 687; s.pc = 4; return s.tmp_0; }
    }
  case 4:
    r0 = s.retval;
    s.tmp_0 = if_digitalRead_1_mk(s);
    s.tmp_0.arg0 = s.faultpin___11216;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "digitalRead"), 1);
      s.callLocIdx = 688; s.pc = 5; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["digitalRead"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["digitalRead"], 1); s.callLocIdx = 688; s.pc = 5; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 688; s.pc = 5; return s.tmp_0;; }
     else { s.callLocIdx = 688; s.pc = 5; return s.tmp_0; }
    }
  case 5:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkAction(1, jacdac_enablePowerFaultPin_inline__P11230);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.faultpin___11216);
    s.tmp_1 = jacdac_EventSource_on__P3576_mk(s);
    s.tmp_1.arg0 = globals.bus___3430;
    s.tmp_1.arg1 = globals.SELF_ANNOUNCE___3397;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 696; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin__P4327.info = {"start":58659,"length":1040,"line":1746,"column":4,"endLine":1767,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enablePowerFaultPin","argumentNames":[]}

function jacdac_enablePowerFaultPin__P4327_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin__P4327, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  faultpin___11216: undefined,
} }





function jacdac_enablePowerFaultPin_inline__P11230(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_2 = if_digitalRead_1_mk(s);
    s.tmp_2.arg0 = s.caps[0];
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "digitalRead"), 1);
      s.callLocIdx = 689; s.pc = 3; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["digitalRead"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["digitalRead"], 1); s.callLocIdx = 689; s.pc = 3; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 689; s.pc = 3; return s.tmp_2;; }
     else { s.callLocIdx = 689; s.pc = 3; return s.tmp_2; }
    }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == false);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = control_runInParallel__P2295_mk(s);
    s.tmp_3.arg0 = jacdac_enablePowerFaultPin_inline__P11236;
    s.callLocIdx = 695; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin_inline__P11230.info = {"start":59089,"length":593,"line":1754,"column":41,"endLine":1765,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enablePowerFaultPin_inline__P11230_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin_inline__P11230, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function jacdac_enablePowerFaultPin_inline__P11236(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.control.dmesg("jacdac power overload; restarting power");
    s.tmp_0 = jacdac_enablePower__P4326_mk(s);
    s.tmp_0.arg0 = false;
    s.callLocIdx = 690; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_setPinByCfg__P4325_mk(s);
    s.tmp_0.arg0 = 1103;
    s.tmp_0.arg1 = true;
    s.callLocIdx = 691; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 200;
    s.callLocIdx = 692; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = jacdac_setPinByCfg__P4325_mk(s);
    s.tmp_0.arg0 = 1103;
    s.tmp_0.arg1 = false;
    s.callLocIdx = 693; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = jacdac_enablePower__P4326_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 694; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin_inline__P11236.info = {"start":59194,"length":455,"line":1756,"column":42,"endLine":1763,"endColumn":21,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enablePowerFaultPin_inline__P11236_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin_inline__P11236, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_enablePower__P4326(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_setPinByCfg__P4325_mk(s);
    s.tmp_0.arg0 = 1104;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 684; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePower__P4326.info = {"start":58450,"length":203,"line":1740,"column":4,"endLine":1744,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enablePower","argumentNames":["enabled"]}

function jacdac_enablePower__P4326_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePower__P4326, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Bus_start__P3416(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = s.arg0.fields["controlServer"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ControlServer__C3550_VT);
    s.tmp_5 = r0;
    s.tmp_6 = jacdac_ControlServer_constructor__P3551_mk(s);
    s.tmp_6.arg0 = s.tmp_5;
    s.callLocIdx = 358; s.pc = 4; return s.tmp_6;
  case 4:
    r0 = s.retval;
    r0 = (s.arg0).fields["controlServer"] = (s.tmp_5);
    s.tmp_0 = jacdac_Server__C3447_v3_1_mk(s);
    r0 = s.arg0.fields["controlServer"];
    s.tmp_0.arg0 = r0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.start;
    s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_start__P3416.info = {"start":2059,"length":149,"line":65,"column":8,"endLine":70,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Bus_start__P3416_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_start__P3416, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
} }





function jacdac_ControlServer_constructor__P3551(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C3550_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_statusVendorCode"] = (0);
    s.tmp_2 = jacdac_Server_constructor__P3451_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 0;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 641; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_constructor__P3551.info = {"start":52742,"length":63,"line":1590,"column":8,"endLine":1592,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_ControlServer_constructor__P3551_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_constructor__P3551, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function control_getConfigValue__P2825(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg1;
    return leave(s, r0)
  default: oops()
} } }
control_getConfigValue__P2825.info = {"start":260,"length":93,"line":12,"column":4,"endLine":14,"endColumn":5,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"getConfigValue","argumentNames":["key","defl"]}

function control_getConfigValue__P2825_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_getConfigValue__P2825, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_running__P3415(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    r0 = s.arg0.fields["controlServer"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Bus_running__P3415.info = {"start":1984,"length":65,"line":61,"column":8,"endLine":63,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"running","argumentNames":["this"]}
jacdac_Bus_running__P3415.isGetter = true;

function jacdac_Bus_running__P3415_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_running__P3415, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function control_runInParallel__P2295(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.control.inBackground(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_runInParallel__P2295.info = {"start":195,"length":85,"line":10,"column":4,"endLine":12,"endColumn":5,"fileName":"pxt_modules/core/control.ts","functionName":"runInParallel","argumentNames":["a"]}

function control_runInParallel__P2295_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_runInParallel__P2295, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_startProxy__P4330(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.isLate___11276 = undefined;
    r0 = pxsim.settings._exists(globals.JACDAC_PROXY_SETTING_LATE___3558);
    s.isLate___11276 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.isLate___11276);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = settings_remove__P2802_mk(s);
    s.tmp_0.arg0 = globals.JACDAC_PROXY_SETTING_LATE___3558;
    s.callLocIdx = 717; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = pxsim.settings._exists(globals.JACDAC_PROXY_SETTING___3557);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    { step = 9; continue; }
  case 3:
  case 4:
    r0 = pxsim_numops_toBoolDecr(s.isLate___11276);
    if (!r0) { step = 5; continue; }
    r0 = "late";
    { step = 6; continue; }
  case 5:
    r0 = "early";
  case 6:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat("jacdac: start dongle (", s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, ")");
    s.tmp_4 = r0;
    r0 = pxsim.control.dmesg(s.tmp_4);
    s.tmp_0 = settings_remove__P2802_mk(s);
    s.tmp_0.arg0 = globals.JACDAC_PROXY_SETTING___3557;
    s.callLocIdx = 719; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "disableLogger", false);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "disableRoleManager", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "noWait", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "proxyMode", true);
    s.tmp_1 = jacdac_start__P3559_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 720; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.isLate___11276);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = jacdac_proxyLoop__P4329_mk(s);
    s.callLocIdx = 721; s.pc = 14; return s.tmp_2;
  case 14:
    r0 = s.retval;
  case 7:
  case 8:
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_startProxy__P4330.info = {"start":61767,"length":609,"line":1842,"column":4,"endLine":1861,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"startProxy","argumentNames":[]}

function jacdac_startProxy__P4330_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_startProxy__P4330, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  isLate___11276: undefined,
} }





function settings_exists__P2803(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._exists(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_exists__P2803.info = {"start":4224,"length":71,"line":172,"column":4,"endLine":174,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"exists","argumentNames":["key"]}

function settings_exists__P2803_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_exists__P2803, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_setLed__P3565(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = undefined;
    r0 = undefined;
    r0 = undefined;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_setLed__P3565.info = {"start":64974,"length":150,"line":1953,"column":4,"endLine":1957,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"setLed","argumentNames":["r","g","b"]}

function jacdac_setLed__P3565_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_setLed__P3565, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac___physStart__P2819(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (globals.recvQ___4104 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_Array__mk();
    globals.recvQ___4104 = (r0);
    s.tmp_0 = control_simmessages_onReceived__P2660_mk(s);
    s.tmp_0.arg0 = "jacdac";
    s.tmp_0.arg1 = jacdac___physStart_inline__P11318;
    s.callLocIdx = 88; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.tmp_0 = control_runInParallel__P2295_mk(s);
    s.tmp_0.arg0 = jacdac___physStart_inline__P11419;
    s.callLocIdx = 91; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart__P2819.info = {"start":1919,"length":1277,"line":69,"column":4,"endLine":102,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physStart","argumentNames":[]}

function jacdac___physStart__P2819_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart__P2819, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac___physStart_inline__P11318(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.crc___11344 = undefined;
    s.num___11360 = undefined;
    s.b0___11361 = undefined;
    s.tmp___11371 = undefined;
    s.nextoff___11383 = undefined;
    s.skip___11402 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 != s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.BufferMethods.toHex(s.arg0);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("bad size in sim jdpkt: ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim.control.dmesg(s.tmp_4);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 0, s.tmp_1);
    s.arg0 = (r0);
  case 1:
  case 2:
    s.tmp_0 = jacdac_jdCrc16__P4105_mk(s);
    r0 = pxsim.BufferMethods.slice(s.arg0, 2, -1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 86; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.crc___11344 = (r0);
    r0 = pxsim.BufferMethods.getNumber(s.arg0, 4, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != s.crc___11344);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim.control.dmesg("bad crc in sim");
    { step = 8; continue; }
  case 3:
    s.num___11360 = (0);
    r0 = pxsim.BufferMethods.slice(s.arg0, 0, -1);
    s.b0___11361 = (r0);
  case 4:
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.arg0, 12);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 16);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 0, s.tmp_3);
    s.tmp___11371 = (r0);
    r0 = pxsim_Array__push(globals.recvQ___4104, s.tmp___11371);
    r0 = pxsim.BufferMethods.getByte(s.arg0, 12);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 16);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 + 3);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & -4);
    s.nextoff___11383 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.slice(s.arg0, s.nextoff___11383, -1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 12, s.tmp_1);
    r0 = (s.nextoff___11383 - 12);
    s.skip___11402 = (r0);
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.skip___11402);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    { step = 7; continue; }
  case 5:
  case 6:
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 2);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.skip___11402);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, 2, s.tmp_3);
    { step = 4; continue; }
  case 7:
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, 1, 1);
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart_inline__P11318.info = {"start":2063,"length":901,"line":72,"column":49,"endLine":94,"endColumn":9,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"inline","argumentNames":["buf"]}

function jacdac___physStart_inline__P11318_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart_inline__P11318, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  crc___11344: undefined,
  num___11360: undefined,
  b0___11361: undefined,
  tmp___11371: undefined,
  nextoff___11383: undefined,
  skip___11402: undefined,
  arg0: undefined,
} }





function jacdac___physStart_inline__P11419(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

  case 1:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 2; continue; }
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, 100, 1);
    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 500;
    s.callLocIdx = 90; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart_inline__P11419.info = {"start":3046,"length":143,"line":96,"column":30,"endLine":101,"endColumn":9,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"inline","argumentNames":[]}

function jacdac___physStart_inline__P11419_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart_inline__P11419, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function control_simmessages_onReceived__P2660(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = pxsim_numops_toBoolDecr(globals.handlers___4058);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtrt.mkMap();
    globals.handlers___4058 = (r0);
  case 3:
  case 4:
    r0 = pxsim_pxtrt.mapSetGeneric(globals.handlers___4058, s.arg0, s.arg1);
    r0 = pxsim.control.onEvent(2999, 1, control_simmessages_consumeMessages__P4059, 0);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_simmessages_onReceived__P2660.info = {"start":1063,"length":293,"line":32,"column":4,"endLine":39,"endColumn":5,"fileName":"pxt_modules/core/controlmessage.ts","functionName":"onReceived","argumentNames":["channel","handler"]}

function control_simmessages_onReceived__P2660_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_simmessages_onReceived__P2660, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_simmessages_consumeMessages__P4059(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.channel___11444 = undefined;
    s.msg___11449 = undefined;
    s.handler___11452 = undefined;
  case 1:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.peekMessageChannel();
    s.channel___11444 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.channel___11444);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    { step = 8; continue; }
  case 2:
  case 3:
    r0 = pxsim_pxtcore.readMessageData();
    s.msg___11449 = (r0);
    s.tmp_0 = r0 = globals.handlers___4058;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    r0 = pxsim_pxtrt.mapGetGeneric(globals.handlers___4058, s.channel___11444);
  case 5:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.handler___11452 = (s.tmp_1);
    r0 = pxsim_numops_toBoolDecr(s.handler___11452);
    if (!r0) { step = 6; continue; }
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.handler___11452;
    s.tmp_0.arg0 = s.msg___11449;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 67; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 6:
  case 7:
    { step = 1; continue; }
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_simmessages_consumeMessages__P4059.info = {"start":564,"length":414,"line":15,"column":4,"endLine":27,"endColumn":5,"fileName":"pxt_modules/core/controlmessage.ts","functionName":"consumeMessages","argumentNames":[]}

function control_simmessages_consumeMessages__P4059_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_simmessages_consumeMessages__P4059, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  channel___11444: undefined,
  msg___11449: undefined,
  handler___11452: undefined,
} }





function jacdac___physIsRunning__P2818(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (globals.recvQ___4104 != null);
    return leave(s, r0)
  default: oops()
} } }
jacdac___physIsRunning__P2818.info = {"start":1743,"length":79,"line":61,"column":4,"endLine":63,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physIsRunning","argumentNames":[]}

function jacdac___physIsRunning__P2818_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physIsRunning__P2818, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_Bus_constructor__P3414(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C3408_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["servers"] = (s.tmp_3);
    s.tmp_4 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["devices"] = (s.tmp_5);
    r0 = (s.arg0).fields["restartCounter"] = (0);
    r0 = (s.arg0).fields["resetIn"] = (2000000);
    r0 = (s.arg0).fields["autoBindCnt"] = (0);
    r0 = (s.arg0).fields["_eventCounter"] = (0);
    r0 = (s.arg0).fields["proxyMode"] = (false);
    s.tmp_6 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_7 = r0;
    r0 = (s.tmp_6).fields["unattachedClients"] = (s.tmp_7);
    s.tmp_8 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_9 = r0;
    r0 = (s.tmp_8).fields["allClients"] = (s.tmp_9);
    r0 = (s.arg0).fields["_refreshing"] = (false);
    s.tmp_10 = jacdac_EventSource_constructor__P3575_mk(s);
    s.tmp_10.arg0 = s.arg0;
    s.callLocIdx = 356; s.pc = 1; return s.tmp_10;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_constructor__P3414.info = {"start":1929,"length":45,"line":57,"column":8,"endLine":59,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_Bus_constructor__P3414_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_constructor__P3414, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  arg0: undefined,
} }





function initPlatform__P2834(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    globals.onPlatformStart___3386 = (initPlatform_inline__P11471);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
initPlatform__P2834.info = {"start":1952,"length":488,"line":78,"column":0,"endLine":89,"endColumn":1,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"initPlatform","argumentNames":[]}

function initPlatform__P2834_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: initPlatform__P2834, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function initPlatform_inline__P11471(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.reset___11479 = undefined;
    globals.productIdentifier___3387 = (854992189);
    s.tmp_0 = jacdac_EventSource_on__P3576_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.STATUS_EVENT___3404;
    s.tmp_0.arg2 = handleStatusEvent__P2833;
    s.callLocIdx = 97; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = pxsim.settings._exists(globals.JACDAC_PROXY_SETTING___3557);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.reset___11479 = (reset_inline__P11480);
    r0 = pxsim.input.onButtonPressed(1, s.reset___11479);
    r0 = pxsim.input.onButtonPressed(2, s.reset___11479);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
initPlatform_inline__P11471.info = {"start":2091,"length":347,"line":80,"column":29,"endLine":88,"endColumn":5,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"inline","argumentNames":[]}

function initPlatform_inline__P11471_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: initPlatform_inline__P11471, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  reset___11479: undefined,
} }





function reset_inline__P11480(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    setupResume(s, 1);
    pxsim.control.reset();
    checkResumeConsumed();
    return;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
reset_inline__P11480.info = {"start":2299,"length":21,"line":84,"column":26,"endLine":84,"endColumn":47,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"inline","argumentNames":[]}

function reset_inline__P11480_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: reset_inline__P11480, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function handleStatusEvent__P2833(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(200, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(201, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(202, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 1:
    r0 = pxsim.control.dmesg("jacdac: dongle started");
    globals.proxyMode___2832 = (true);
    s.tmp_0 = proxyAnimation__P2831_mk(s);
    s.callLocIdx = 95; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    { step = 6; continue; }
  case 2:
    { step = 6; continue; }
  case 3:
    r0 = pxsim_numops_toBoolDecr(globals.proxyMode___2832);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.tmp_2 = identifyAnimation__P2830_mk(s);
    s.callLocIdx = 96; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 4:
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
handleStatusEvent__P2833.info = {"start":1407,"length":484,"line":57,"column":0,"endLine":72,"endColumn":1,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"handleStatusEvent","argumentNames":["event"]}

function handleStatusEvent__P2833_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: handleStatusEvent__P2833, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function identifyAnimation__P2830(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sc___11506 = undefined;
    r0 = pxsim_numops_toBoolDecr(globals.identifyAnimationRunning___2829);
    if (!r0) { step = 1; continue; }
    { step = 3; continue; }
  case 1:
  case 2:
    globals.identifyAnimationRunning___2829 = (true);
    r0 = pxsim.led.screenshot();
    s.sc___11506 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, identifyAnimation_inline__P11510);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.sc___11506);
    s.tmp_1 = control_runInParallel__P2295_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 93; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
identifyAnimation__P2830.info = {"start":612,"length":571,"line":28,"column":0,"endLine":46,"endColumn":1,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"identifyAnimation","argumentNames":[]}

function identifyAnimation__P2830_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: identifyAnimation__P2830, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  sc___11506: undefined,
} }





function identifyAnimation_inline__P11510(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.led.stopAnimation();
    setupResume(s, 1);
    pxsim.basic.showAnimation(new pxsim.Image(30, [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,]), 250);
    checkResumeConsumed();
    return;
  case 1:
    r0 = s.retval;
    r0 = pxsim_ImageMethods.plotFrame(s.caps[0], 0);
    globals.identifyAnimationRunning___2829 = (false);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
identifyAnimation_inline__P11510.info = {"start":779,"length":401,"line":33,"column":26,"endLine":45,"endColumn":5,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"inline","argumentNames":[]}

function identifyAnimation_inline__P11510_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: identifyAnimation_inline__P11510, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function proxyAnimation__P2831(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = control_runInParallel__P2295_mk(s);
    s.tmp_0.arg0 = proxyAnimation_inline__P11520;
    s.callLocIdx = 94; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
proxyAnimation__P2831.info = {"start":1184,"length":199,"line":47,"column":0,"endLine":54,"endColumn":1,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"proxyAnimation","argumentNames":[]}

function proxyAnimation__P2831_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: proxyAnimation__P2831, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function proxyAnimation_inline__P11520(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim.led.stopAnimation();
  case 1:
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 2; continue; }
    setupResume(s, 3);
    pxsim.basic.showString("JACDAC DONGLE PRESS A TO RESET", 120);
    checkResumeConsumed();
    return;
  case 3:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
proxyAnimation_inline__P11520.info = {"start":1238,"length":142,"line":48,"column":26,"endLine":53,"endColumn":5,"fileName":"pxt_modules/jacdac/mbcompat.ts","functionName":"inline","argumentNames":[]}

function proxyAnimation_inline__P11520_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: proxyAnimation_inline__P11520, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function settings_initScopes__P4097(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.rn___11526 = undefined;
    s.tmp_1 = settings_runNumber__P2789_mk(s);
    s.callLocIdx = 71; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
    s.rn___11526 = (r0);
    s.tmp_0 = settings_writeNumber__P2794_mk(s);
    s.tmp_0.arg0 = globals.RUN_KEY___4085;
    s.tmp_0.arg1 = s.rn___11526;
    s.callLocIdx = 72; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = pxsim.control.deviceSerialNumber();
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2147483647);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.seedAddRandom(s.tmp_0);
    r0 = pxsim_pxtcore.seedAddRandom(s.rn___11526);
    s.tmp_0 = settings_setScope__P4096_mk(s);
    r0 = pxsim_pxtcore.programName();
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 73; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_initScopes__P4097.info = {"start":1104,"length":230,"line":41,"column":4,"endLine":49,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"initScopes","argumentNames":[]}

function settings_initScopes__P4097_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_initScopes__P4097, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  rn___11526: undefined,
} }





function settings_setScope__P4096(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.currScope___11555 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 100);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_pxtrt.panic(922);
  case 3:
  case 4:
    s.tmp_0 = settings_readString__P2797_mk(s);
    s.tmp_0.arg0 = globals.SCOPE_KEY___4086;
    s.callLocIdx = 69; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.currScope___11555 = (r0);
    r0 = (s.currScope___11555 != s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = pxsim.settings._userClean();
    s.tmp_0 = settings_writeString__P2792_mk(s);
    s.tmp_0.arg0 = globals.SCOPE_KEY___4086;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 70; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_setScope__P4096.info = {"start":826,"length":272,"line":31,"column":4,"endLine":39,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"setScope","argumentNames":["scope"]}

function settings_setScope__P4096_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_setScope__P4096, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  currScope___11555: undefined,
  arg0: undefined,
} }





function settings_runNumber__P2789(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_1 = settings_readNumber__P2799_mk(s);
    s.tmp_1.arg0 = globals.RUN_KEY___4085;
    s.callLocIdx = 68; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
settings_runNumber__P2789.info = {"start":745,"length":75,"line":27,"column":4,"endLine":29,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"runNumber","argumentNames":[]}

function settings_runNumber__P2789_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_runNumber__P2789, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function settings_readNumber__P2799(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___11573 = undefined;
    s.nums___11580 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.settings._get(s.arg0);
    s.buf___11573 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.buf___11573);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 7; continue; }
    { step = 6; continue; }
  case 1:
    s.tmp_2 = msgpack_unpackNumberArray__P2615_mk(s);
    s.tmp_2.arg0 = s.buf___11573;
    s.tmp_2.arg1 = 0;
    s.callLocIdx = 80; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.nums___11580 = (r0);
    s.tmp_0 = r0 = s.nums___11580;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim_Array__length(s.nums___11580);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 1);
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.nums___11580, 0);
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = undefined;
    { step = 7; continue; }
  case 6:
    r0 = undefined;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
settings_readNumber__P2799.info = {"start":3283,"length":313,"line":131,"column":4,"endLine":141,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"readNumber","argumentNames":["key"]}

function settings_readNumber__P2799_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readNumber__P2799, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  buf___11573: undefined,
  nums___11580: undefined,
  arg0: undefined,
} }





function msgpack_unpackNumberArray__P2615(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___11593 = undefined;
    s.fmt___11600 = undefined;
    s.v___11609 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.res___11593 = (r0);
  case 1:
    s.tmp_1 = r0 = s.arg1;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    s.tmp_3 = r0 = s.arg1;
    r0 = (s.tmp_3 + 1);
    s.arg1 = (r0);
    s.tmp_4 = msgpack_tagFormat__P4029_mk(s);
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.tmp_3);
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 51; s.pc = 12; return s.tmp_4;
  case 12:
    r0 = s.retval;
    s.fmt___11600 = (r0);
    r0 = (s.fmt___11600 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_1 = r0 = s.arg0;
    r0 = (s.arg1 - 1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 6, s.tmp_2);
    s.v___11609 = (r0);
    r0 = (-31 <= s.v___11609);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.v___11609 <= 127);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__push(s.res___11593, s.v___11609);
    { step = 5; continue; }
  case 4:
    r0 = null;
    { step = 11; continue; }
  case 5:
    { step = 7; continue; }
  case 6:
    s.tmp_0 = r0 = s.res___11593;
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.fmt___11600, s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    s.tmp_0 = r0 = s.arg1;
    s.tmp_2 = pins_sizeOf__P2607_mk(s);
    s.tmp_2.arg0 = s.fmt___11600;
    s.callLocIdx = 52; s.pc = 13; return s.tmp_2;
  case 13:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.arg1 = (r0);
  case 7:
  case 8:
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === 193);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = (s.arg1 + 1);
    s.arg1 = (r0);
    { step = 8; continue; }
  case 9:
    { step = 1; continue; }
  case 10:
    r0 = s.res___11593;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
msgpack_unpackNumberArray__P2615.info = {"start":2650,"length":669,"line":91,"column":4,"endLine":111,"endColumn":5,"fileName":"pxt_modules/core/buffer.ts","functionName":"unpackNumberArray","argumentNames":["buf","offset"]}

function msgpack_unpackNumberArray__P2615_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_unpackNumberArray__P2615, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  res___11593: undefined,
  fmt___11600: undefined,
  v___11609: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ControlServer_handlePacketOuter__P3553(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C3550_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_isRegGet__P2907_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 650; s.pc = 24; return s.tmp_1;
  case 24:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    s.tmp_3 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 651; s.pc = 25; return s.tmp_3;
  case 25:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtcore.switch_eq(385, s.tmp_2);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(390, s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(389, s.tmp_2);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(384, s.tmp_2);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_2;
    { step = 11; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(globals.productIdentifier___3387);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_4, globals.productIdentifier___3387);
    s.tmp_5 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.tmp_6 = jacdac_JDPacket_from__P2883_mk(s);
    r0 = s.arg1.fields["_header"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_7, 4, 14);
    s.tmp_6.arg0 = r0;
    s.tmp_8 = jacdac_jdpack__P2934_mk(s);
    s.tmp_8.arg0 = globals.ProductIdentifier___3132;
    s.tmp_8.arg1 = s.tmp_4;
    s.callLocIdx = 653; s.pc = 28; return s.tmp_8;
  case 28:
    r0 = s.retval;
    s.tmp_6.arg1 = r0;
    s.callLocIdx = 654; s.pc = 27; return s.tmp_6;
  case 27:
    r0 = s.retval;
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 655; s.pc = 26; return s.tmp_5;
  case 26:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 656; s.pc = 29; return s.tmp_0;
  case 29:
    r0 = s.retval;
  case 2:
  case 3:
    { step = 12; continue; }
  case 4:
    s.tmp_0 = jacdac_ControlServer_sendUptime__P3552_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 657; s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 658; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
    { step = 12; continue; }
  case 5:
    r0 = pxsim_numops_toBoolDecr(globals.firmwareVersion___3388);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, globals.firmwareVersion___3388);
    s.tmp_1 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_2 = jacdac_JDPacket_from__P2883_mk(s);
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2.arg0 = r0;
    s.tmp_4 = jacdac_jdpack__P2934_mk(s);
    s.tmp_4.arg0 = globals.FirmwareVersion___3134;
    s.tmp_4.arg1 = s.tmp_0;
    s.callLocIdx = 660; s.pc = 34; return s.tmp_4;
  case 34:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 661; s.pc = 33; return s.tmp_2;
  case 33:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 662; s.pc = 32; return s.tmp_1;
  case 32:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 663; s.pc = 35; return s.tmp_0;
  case 35:
    r0 = s.retval;
  case 6:
  case 7:
    { step = 12; continue; }
  case 8:
    s.tmp_0 = r0 = globals.deviceDescription___3389;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = s.tmp_0;
    { step = 10; continue; }
  case 9:
    r0 = pxsim_pxtcore.programName();
  case 10:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.tmp_1);
    s.tmp_3 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_4 = jacdac_JDPacket_from__P2883_mk(s);
    r0 = s.arg1.fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_5, 4, 14);
    s.tmp_4.arg0 = r0;
    s.tmp_6 = jacdac_jdpack__P2934_mk(s);
    s.tmp_6.arg0 = globals.DeviceDescription___3131;
    s.tmp_6.arg1 = s.tmp_2;
    s.callLocIdx = 665; s.pc = 38; return s.tmp_6;
  case 38:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 666; s.pc = 37; return s.tmp_4;
  case 37:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 667; s.pc = 36; return s.tmp_3;
  case 36:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 668; s.pc = 39; return s.tmp_0;
  case 39:
    r0 = s.retval;
    { step = 12; continue; }
  case 11:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 669; s.pc = 40; return s.tmp_0;
  case 40:
    r0 = s.retval;
  case 12:
    { step = 23; continue; }
  case 13:
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = pxsim_pxtcore.switch_eq(131, s.tmp_0);
    if (r0) { step = 17; continue; }
    r0 = pxsim_pxtcore.switch_eq(133, s.tmp_0);
    if (r0) { step = 18; continue; }
    r0 = s.tmp_0;
    { step = 21; continue; }
  case 14:
    s.tmp_2 = jacdac_Bus_queueAnnounce__P3422_mk(s);
    s.tmp_2.arg0 = globals.bus___3430;
    s.callLocIdx = 671; s.pc = 41; return s.tmp_2;
  case 41:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 672; s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
    { step = 22; continue; }
  case 15:
    s.tmp_0 = jacdac_Server__C3447_v4_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "identify";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 43; return s.tmp_0;
  case 43:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.IDENTIFY___3405;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 673; s.pc = 44; return s.tmp_0;
  case 44:
    r0 = s.retval;
    s.tmp_0 = jacdac_EventSource_emit__P3578_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.tmp_0.arg1 = globals.STATUS_EVENT___3404;
    s.tmp_0.arg2 = 202;
    s.callLocIdx = 674; s.pc = 45; return s.tmp_0;
  case 45:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 675; s.pc = 46; return s.tmp_0;
  case 46:
    r0 = s.retval;
    { step = 22; continue; }
  case 16:
    s.tmp_0 = jacdac_Server__C3447_v4_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "reset requested";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 47; return s.tmp_0;
  case 47:
    r0 = s.retval;
    setupResume(s, 48);
    pxsim.control.reset();
    checkResumeConsumed();
    return;
  case 48:
    r0 = s.retval;
    { step = 22; continue; }
  case 17:
    s.tmp_0 = jacdac_Server__C3447_v4_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "flood";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 49; return s.tmp_0;
  case 49:
    r0 = s.retval;
    s.tmp_0 = jacdac_ControlServer_handleFloodPing__P4309_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 676; s.pc = 50; return s.tmp_0;
  case 50:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 677; s.pc = 51; return s.tmp_0;
  case 51:
    r0 = s.retval;
    { step = 22; continue; }
  case 18:
    r0 = globals.bus___3430.fields["proxyMode"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
    s.tmp_3 = jacdac_resetToProxy__P4331_mk(s);
    s.callLocIdx = 678; s.pc = 52; return s.tmp_3;
  case 52:
    r0 = s.retval;
  case 19:
  case 20:
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 679; s.pc = 53; return s.tmp_0;
  case 53:
    r0 = s.retval;
    { step = 22; continue; }
  case 21:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 680; s.pc = 54; return s.tmp_0;
  case 54:
    r0 = s.retval;
  case 22:
  case 23:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_handlePacketOuter__P3553.info = {"start":54020,"length":3655,"line":1625,"column":8,"endLine":1712,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_ControlServer_handlePacketOuter__P3553_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_handlePacketOuter__P3553, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ControlServer_handleFloodPing__P4309(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numResponses___11748 = undefined;
    s.counter___11749 = undefined;
    s.size___11750 = undefined;
    s.payload___11751 = undefined;
    s.i___11757 = undefined;
    s.queuePing___11771 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C3550_VT)) failedCast(r0);
    r0 = pxsim_pxtrt.mklocRef();
    s.numResponses___11748 = (r0);
    s.tmp_0 = r0 = s.numResponses___11748;
    s.tmp_3 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = "u32 u32 u8";
    s.callLocIdx = 644; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_Array__getAt(s.tmp_2, 0);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    r0 = pxsim_pxtrt.mklocRef();
    s.counter___11749 = (r0);
    s.tmp_4 = r0 = s.counter___11749;
    r0 = pxsim_Array__getAt(s.tmp_2, 1);
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_4, s.tmp_5);
    r0 = pxsim_Array__getAt(s.tmp_2, 2);
    s.size___11750 = (r0);
    r0 = (4 + s.size___11750);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.payload___11751 = (r0);
    s.i___11757 = (0);
  case 1:
    r0 = (s.i___11757 < s.size___11750);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_1 = r0 = s.payload___11751;
    r0 = (4 + s.i___11757);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.i___11757);
    r0 = (s.i___11757 + 1);
    s.i___11757 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = pxsim_pxtcore_mkAction(4, queuePing_inline__P11772);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.numResponses___11748);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.payload___11751);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.counter___11749);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 3, s.arg0);
    s.queuePing___11771 = (s.tmp_0);
    r0 = 30;
    s.tmp_0 = r0;
    r0 = pxsim.control.onEvent(s.tmp_0, 101, s.queuePing___11771, 0);
    s.tmp_0 = lambda_1_mk(s);
    s.tmp_0.argL = s.queuePing___11771;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 649; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_handleFloodPing__P4309.info = {"start":53041,"length":969,"line":1600,"column":8,"endLine":1623,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleFloodPing","argumentNames":["this","pkt"]}

function jacdac_ControlServer_handleFloodPing__P4309_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_handleFloodPing__P4309, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  numResponses___11748: undefined,
  counter___11749: undefined,
  size___11750: undefined,
  payload___11751: undefined,
  i___11757: undefined,
  queuePing___11771: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function queuePing_inline__P11772(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 30;
    s.tmp_2 = r0;
    r0 = pxsim.control.onEvent(s.tmp_2, 101, jacdac_doNothing__P4301, 0);
    { step = 2; continue; }
  case 1:
    s.tmp_0 = r0 = s.caps[1];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[2]);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 0, s.tmp_1);
    s.tmp_0 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_0.arg0 = s.caps[3];
    s.tmp_1 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_1.arg0 = 131;
    s.tmp_1.arg1 = s.caps[1];
    s.callLocIdx = 646; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 647; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0 = s.caps[0];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 1);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    s.tmp_0 = r0 = s.caps[2];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[2]);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
queuePing_inline__P11772.info = {"start":53343,"length":553,"line":1605,"column":30,"endLine":1620,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function queuePing_inline__P11772_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: queuePing_inline__P11772, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function jacdac_doNothing__P4301(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_doNothing__P4301.info = {"start":52436,"length":23,"line":1575,"column":4,"endLine":1575,"endColumn":27,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"doNothing","argumentNames":[]}

function jacdac_doNothing__P4301_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_doNothing__P4301, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_ControlServer_sendUptime__P3552(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___11802 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C3550_VT)) failedCast(r0);
    r0 = pxsim.control.createBuffer(4);
    s.buf___11802 = (r0);
    s.tmp_0 = r0 = s.buf___11802;
    r0 = pxsim.control.micros();
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 0, s.tmp_1);
    s.tmp_0 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_1.arg0 = 4486;
    s.tmp_1.arg1 = s.buf___11802;
    s.callLocIdx = 642; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 643; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_sendUptime__P3552.info = {"start":52815,"length":216,"line":1594,"column":8,"endLine":1598,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendUptime","argumentNames":["this"]}

function jacdac_ControlServer_sendUptime__P3552_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_sendUptime__P3552, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  buf___11802: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_handlePacket__P3290(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C3287_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegBool__P4195_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 128;
    r0 = s.arg0.fields["autoBind"];
    s.tmp_2.arg3 = r0;
    s.callLocIdx = 295; s.pc = 11; return s.tmp_2;
  case 11:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["autoBind"] = (s.tmp_1);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(4481, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(131, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(132, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 1:
    s.tmp_3 = helpers_arrayEvery__P1999_mk(s);
    r0 = globals.bus___3430.fields["allClients"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P11847;
    s.callLocIdx = 298; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = 1;
    { step = 3; continue; }
  case 2:
    r0 = 0;
  case 3:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_Array__mk();
    s.tmp_5 = r0;
    r0 = pxsim_Array__push(s.tmp_5, s.tmp_4);
    s.tmp_6 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.tmp_7 = jacdac_JDPacket_jdpacked__P2886_mk(s);
    s.tmp_7.arg0 = 4481;
    s.tmp_7.arg1 = globals.AllRolesAllocated___3270;
    s.tmp_7.arg2 = s.tmp_5;
    s.callLocIdx = 299; s.pc = 14; return s.tmp_7;
  case 14:
    r0 = s.retval;
    s.tmp_6.arg1 = r0;
    s.callLocIdx = 300; s.pc = 13; return s.tmp_6;
  case 13:
    r0 = s.retval;
    { step = 10; continue; }
  case 4:
    r0 = s.arg1.fields["_data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 9);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_3 = jacdac__rolemgr_setRole__P3286_mk(s);
    r0 = s.arg1.fields["_data"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_5, 0, 8);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_4);
    s.tmp_3.arg0 = r0;
    r0 = s.arg1.fields["_data"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_6, 8);
    s.tmp_3.arg1 = r0;
    r0 = s.arg1.fields["_data"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_8, 9, -1);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_7);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 305; s.pc = 15; return s.tmp_3;
  case 15:
    r0 = s.retval;
  case 5:
  case 6:
    { step = 10; continue; }
  case 7:
    s.tmp_0 = jacdac_OutPipe_respondForEach__P2957_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = globals.bus___3430.fields["allClients"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = packName__P11881;
    s.callLocIdx = 306; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    { step = 10; continue; }
  case 8:
    s.tmp_0 = jacdac__rolemgr_clearRoles__P3284_mk(s);
    s.callLocIdx = 307; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
    { step = 10; continue; }
  case 9:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 308; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
  case 10:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_handlePacket__P3290.info = {"start":5211,"length":2261,"line":142,"column":8,"endLine":201,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac__rolemgr_RoleManagerServer_handlePacket__P3290_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_handlePacket__P3290, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P11847(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["broadcast"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["_device"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P11847.info = {"start":5928,"length":30,"line":158,"column":36,"endLine":158,"endColumn":66,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["c"]}

function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P11847_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P11847, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function packName__P11881(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.devid___11886 = undefined;
    s.servidx___11896 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["_device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = Buffer_fromHex__P2638_mk(s);
    r0 = s.arg0.fields["_device"];
    r0 = r0.fields["deviceId"];
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 311; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.control.createBuffer(8);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.devid___11886 = (s.tmp_2);
    r0 = s.arg0.fields["_device"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["serviceIndex"];
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.servidx___11896 = (s.tmp_1);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.devid___11886);
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = pxsim_Array__push(s.tmp_0, s.servidx___11896);
    r0 = s.arg0.fields["_role"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_2);
    s.tmp_3 = jacdac_jdpack__P2934_mk(s);
    s.tmp_3.arg0 = "b[8] u32 u8 s";
    s.tmp_3.arg1 = s.tmp_0;
    s.callLocIdx = 314; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
packName__P11881.info = {"start":7034,"length":428,"line":189,"column":12,"endLine":200,"endColumn":13,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"packName","argumentNames":["c"]}

function packName__P11881_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: packName__P11881, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  devid___11886: undefined,
  servidx___11896: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_clearRoles__P3284(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = helpers_arrayForEach__P2000_mk(s);
    s.tmp_1 = settings_list__P2801_mk(s);
    s.tmp_1.arg0 = globals.roleSettingPrefix___4255;
    s.callLocIdx = 274; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = settings_remove__P2802;
    s.callLocIdx = 275; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = jacdac_Bus_clearAttachCache__P3420_mk(s);
    s.tmp_0.arg0 = globals.bus___3430;
    s.callLocIdx = 276; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_clearRoles__P3284.info = {"start":71,"length":140,"line":3,"column":4,"endLine":6,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"clearRoles","argumentNames":[]}

function jacdac__rolemgr_clearRoles__P3284_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_clearRoles__P3284, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function settings_list__P2801(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_String_.mkEmpty();
    s.arg0 = (r0);
  case 1:
  case 2:
    r0 = pxsim.settings._list(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_list__P2801.info = {"start":3940,"length":107,"line":157,"column":4,"endLine":160,"endColumn":5,"fileName":"pxt_modules/settings/settings.ts","functionName":"list","argumentNames":["prefix"]}

function settings_list__P2801_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_list__P2801, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_respondForEach__P2957(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkAction(3, jacdac_OutPipe_respondForEach_inline__P11927);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.arg2);
    s.tmp_1 = control_runInParallel__P2295_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 217; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_respondForEach__P2957.info = {"start":3120,"length":388,"line":113,"column":8,"endLine":123,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"respondForEach","argumentNames":["pkt","inp","f"]}

function jacdac_OutPipe_respondForEach__P2957_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_respondForEach__P2957, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_OutPipe_respondForEach_inline__P11927(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.outp___11929 = undefined;
    s.e___11934 = undefined;
    s.unnamed62___U2 = undefined;
    s.unnamed63___U3 = undefined;
    s.e___11942 = undefined;
    r0 = pxsim_pxtcore.beginTry(3);
    s.tmp_0 = jacdac_OutPipe_from__P4211_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 212; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.outp___11929 = (r0);
    s.e___11934 = (undefined);
    s.unnamed62___U2 = (s.caps[1]);
    s.unnamed63___U3 = (0);
  case 1:
    s.tmp_0 = r0 = s.unnamed63___U3;
    r0 = pxsim_Array__length(s.unnamed62___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed62___U2, s.unnamed63___U3);
    s.e___11934 = (r0);
    s.tmp_2 = jacdac_OutPipe_write__P2959_mk(s);
    s.tmp_2.arg0 = s.outp___11929;
    s.tmp_3 = lambda_2_mk(s);
    s.tmp_3.argL = s.caps[2];
    s.tmp_3.arg0 = s.e___11934;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 213; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 214; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    r0 = (s.unnamed63___U3 + 1);
    s.unnamed63___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed62___U2 = (undefined);
    s.tmp_0 = jacdac_OutPipe_close__P2961_mk(s);
    s.tmp_0.arg0 = s.outp___11929;
    s.callLocIdx = 215; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___11942 = (r0);
    s.tmp_0 = console_error__P2380_mk(s);
    s.tmp_0.arg0 = s.e___11942;
    s.callLocIdx = 216; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_respondForEach_inline__P11927.info = {"start":3227,"length":270,"line":114,"column":34,"endLine":122,"endColumn":13,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"inline","argumentNames":[]}

function jacdac_OutPipe_respondForEach_inline__P11927_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_respondForEach_inline__P11927, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  outp___11929: undefined,
  e___11934: undefined,
  unnamed62___U2: undefined,
  unnamed63___U3: undefined,
  e___11942: undefined,
} }





function jacdac_OutPipe_close__P2961(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C2955_VT)) failedCast(r0);
    s.tmp_0 = jacdac_OutPipe_writeAndClose__P2960_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 223; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_close__P2961.info = {"start":4321,"length":68,"line":154,"column":8,"endLine":156,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"close","argumentNames":["this"]}

function jacdac_OutPipe_close__P2961_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_close__P2961, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_writeAndClose__P2960(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C2955_VT)) failedCast(r0);
    s.tmp_0 = jacdac_OutPipe_writeEx__P4212_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 32;
    s.callLocIdx = 222; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_writeAndClose__P2960.info = {"start":4231,"length":80,"line":150,"column":8,"endLine":152,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"writeAndClose","argumentNames":["this","buf"]}

function jacdac_OutPipe_writeAndClose__P2960_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_writeAndClose__P2960, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_OutPipe_writeEx__P4212(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pkt___11961 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C2955_VT)) failedCast(r0);
    r0 = s.arg0.fields["port"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 7; continue; }
  case 1:
  case 2:
    s.tmp_3 = jacdac_JDPacket_from__P2883_mk(s);
    r0 = s.arg0.fields["nextCnt"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 31);
    s.tmp_5 = r0;
    r0 = s.arg0.fields["port"];
    s.tmp_8 = r0;
    r0 = (s.tmp_8 << 7);
    s.tmp_7 = r0;
    r0 = (s.tmp_5 | s.tmp_7);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | s.arg2);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.arg1;
    s.callLocIdx = 218; s.pc = 8; return s.tmp_3;
  case 8:
    r0 = s.retval;
    s.pkt___11961 = (r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["nextCnt"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextCnt"] = (s.tmp_1);
    r0 = (s.arg2 & 32);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = (s.arg0).fields["port"] = (null);
  case 3:
  case 4:
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P2899_mk(s);
    s.tmp_0.arg0 = s.pkt___11961;
    s.tmp_0.arg1 = 62;
    s.callLocIdx = 219; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.tmp_3 = jacdac_JDPacket__sendWithAck__P2928_mk(s);
    s.tmp_3.arg0 = s.pkt___11961;
    r0 = s.arg0.fields["deviceId"];
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 220; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = (s.arg0).fields["port"] = (null);
    r0 = pxsim_pxtcore.throwValue("out pipe error: no ack");
  case 5:
  case 6:
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_writeEx__P4212.info = {"start":3583,"length":565,"line":129,"column":8,"endLine":144,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"writeEx","argumentNames":["this","buf","flags"]}

function jacdac_OutPipe_writeEx__P4212_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_writeEx__P4212, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  pkt___11961: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket__sendWithAck__P2928(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.aw___12018 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = false;
    { step = 7; continue; }
  case 1:
  case 2:
    s.tmp_2 = jacdac_JDPacket_requiresAck__P2897_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = true;
    s.callLocIdx = 159; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.tmp_0 = jacdac_JDPacket__sendCmdId__P2926_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 160; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(globals.ackAwaiters___4135);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_Array__mk();
    globals.ackAwaiters___4135 = (r0);
    s.tmp_0 = control_runInParallel__P2295_mk(s);
    s.tmp_0.arg0 = jacdac_JDPacket__sendWithAck_inline__P12012;
    s.callLocIdx = 163; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_AckAwaiter__C4137_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_AckAwaiter_constructor__P4138_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.callLocIdx = 164; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.aw___12018 = (s.tmp_0);
    r0 = pxsim_Array__push(globals.ackAwaiters___4135, s.aw___12018);
  case 5:
    r0 = s.aw___12018.fields["nextRetry"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = s.aw___12018.fields["eventId"];
    s.tmp_2 = r0;
    setupResume(s, 12);
    pxsim.control.waitForEvent(1023, s.tmp_2);
    checkResumeConsumed();
    return;
  case 12:
    r0 = s.retval;
    { step = 5; continue; }
  case 6:
    r0 = s.aw___12018.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 0);
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendWithAck__P2928.info = {"start":10731,"length":675,"line":332,"column":8,"endLine":352,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendWithAck","argumentNames":["this","devId"]}

function jacdac_JDPacket__sendWithAck__P2928_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendWithAck__P2928, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  aw___12018: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendWithAck_inline__P12012(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

  case 1:
    r0 = pxsim_numops_toBoolDecr(1);
    if (!r0) { step = 2; continue; }
    s.tmp_0 = pause__P2226_mk(s);
    r0 = pxsim.Math_.randomRange(20, 50);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 161; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.tmp_0 = jacdac_checkAckAwaiters__P4139_mk(s);
    s.callLocIdx = 162; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendWithAck_inline__P12012.info = {"start":10973,"length":178,"line":339,"column":38,"endLine":344,"endColumn":17,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":[]}

function jacdac_JDPacket__sendWithAck_inline__P12012_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendWithAck_inline__P12012, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_AckAwaiter_constructor__P4138(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_AckAwaiter__C4137_VT)) failedCast(r0);
    r0 = (s.arg0).fields["pkt"] = (s.arg1);
    r0 = (s.arg0).fields["srcId"] = (s.arg2);
    r0 = (s.arg0).fields["numTries"] = (1);
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg1.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["crc"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 40);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextRetry"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["eventId"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_AckAwaiter_constructor__P4138.info = {"start":11554,"length":265,"line":360,"column":8,"endLine":367,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["this","pkt","srcId"]}

function jacdac_AckAwaiter_constructor__P4138_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_AckAwaiter_constructor__P4138, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_checkAckAwaiters__P4139(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___12055 = undefined;
    s.toRetry___12058 = undefined;
    s.a___12072 = undefined;
    s.unnamed54___U3 = undefined;
    s.unnamed55___U4 = undefined;
    r0 = pxsim.control.millis();
    s.now___12055 = (r0);
    r0 = pxsim_pxtcore_mkAction(1, toRetry_inline__P12060);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.now___12055);
    s.tmp_1 = helpers_arrayFilter__P2001_mk(s);
    s.tmp_1.arg0 = globals.ackAwaiters___4135;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 166; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.toRetry___12058 = (r0);
    r0 = pxsim_Array__length(s.toRetry___12058);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    { step = 10; continue; }
  case 1:
  case 2:
    s.a___12072 = (undefined);
    s.unnamed54___U3 = (s.toRetry___12058);
    s.unnamed55___U4 = (0);
  case 3:
    s.tmp_0 = r0 = s.unnamed55___U4;
    r0 = pxsim_Array__length(s.unnamed54___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed54___U3, s.unnamed55___U4);
    s.a___12072 = (r0);
    r0 = s.a___12072.fields["nextRetry"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    { step = 8; continue; }
  case 4:
  case 5:
    r0 = s.a___12072.fields["numTries"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 >= 4);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 6; continue; }
    r0 = (s.a___12072).fields["nextRetry"] = (-1);
    r0 = s.a___12072.fields["eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(1023, s.tmp_0, 1);
    { step = 7; continue; }
  case 6:
    s.tmp_0 = r0 = s.a___12072;
    r0 = s.tmp_0.fields["numTries"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["numTries"] = (s.tmp_1);
    s.tmp_0 = r0 = s.a___12072;
    s.tmp_2 = r0 = s.now___12055;
    r0 = s.a___12072.fields["numTries"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 * 40);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextRetry"] = (s.tmp_1);
    s.tmp_0 = jacdac_JDPacket__sendCore__P2923_mk(s);
    r0 = s.a___12072.fields["pkt"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 167; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.unnamed55___U4 + 1);
    s.unnamed55___U4 = (r0);
    { step = 3; continue; }
  case 9:
    s.unnamed54___U3 = (undefined);
    s.tmp_0 = helpers_arrayFilter__P2001_mk(s);
    s.tmp_0.arg0 = globals.ackAwaiters___4135;
    s.tmp_0.arg1 = jacdac_checkAckAwaiters_inline__P12108;
    s.callLocIdx = 168; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    globals.ackAwaiters___4135 = (r0);
  case 10:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_checkAckAwaiters__P4139.info = {"start":11831,"length":646,"line":370,"column":4,"endLine":386,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"checkAckAwaiters","argumentNames":[]}

function jacdac_checkAckAwaiters__P4139_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_checkAckAwaiters__P4139, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  now___12055: undefined,
  toRetry___12058: undefined,
  a___12072: undefined,
  unnamed54___U3: undefined,
  unnamed55___U4: undefined,
} }





function toRetry_inline__P12060(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.caps[0] > s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
toRetry_inline__P12060.info = {"start":11941,"length":22,"line":372,"column":43,"endLine":372,"endColumn":65,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function toRetry_inline__P12060_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: toRetry_inline__P12060, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_checkAckAwaiters_inline__P12108(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_checkAckAwaiters_inline__P12108.info = {"start":12450,"length":20,"line":385,"column":41,"endLine":385,"endColumn":61,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function jacdac_checkAckAwaiters_inline__P12108_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_checkAckAwaiters_inline__P12108, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_write__P2959(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C2955_VT)) failedCast(r0);
    s.tmp_0 = jacdac_OutPipe_writeEx__P4212_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 221; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_write__P2959.info = {"start":4158,"length":63,"line":146,"column":8,"endLine":148,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"write","argumentNames":["this","buf"]}

function jacdac_OutPipe_write__P2959_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_write__P2959, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_OutPipe_from__P4211(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idbuf___12122 = undefined;
    s.port___12123 = undefined;
    s.id___12124 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = jacdac_jdunpack__P2933_mk(s);
    r0 = s.arg0.fields["_data"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = "b[8] u16";
    s.callLocIdx = 210; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.idbuf___12122 = (r0);
    r0 = pxsim_Array__getAt(s.tmp_0, 1);
    s.port___12123 = (r0);
    r0 = pxsim.BufferMethods.toHex(s.idbuf___12122);
    s.id___12124 = (r0);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_OutPipe__C2955_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_OutPipe_constructor__P2956_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.id___12124;
    s.tmp_1.arg2 = s.port___12123;
    s.callLocIdx = 211; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_from__P4211.info = {"start":2857,"length":253,"line":104,"column":8,"endLine":111,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"from","argumentNames":["pkt"]}

function jacdac_OutPipe_from__P4211_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_from__P4211, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  idbuf___12122: undefined,
  port___12123: undefined,
  id___12124: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_constructor__P2956(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C2955_VT)) failedCast(r0);
    r0 = (s.arg0).fields["deviceId"] = (s.arg1);
    r0 = (s.arg0).fields["port"] = (s.arg2);
    r0 = (s.arg0).fields["nextCnt"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_constructor__P2956.info = {"start":2778,"length":69,"line":102,"column":8,"endLine":102,"endColumn":77,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"inline","argumentNames":["this","deviceId","port"]}

function jacdac_OutPipe_constructor__P2956_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_constructor__P2956, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Server_handleRegBool__P4195(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___12137 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg3);
    if (!r0) { step = 1; continue; }
    r0 = 1;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.tmp_1.arg3 = "u8";
    s.tmp_1.arg4 = s.tmp_0;
    s.callLocIdx = 519; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.res___12137 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.res___12137);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegBool__P4195.info = {"start":24143,"length":326,"line":715,"column":8,"endLine":727,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegBool","argumentNames":["this","pkt","register","current"]}

function jacdac_Server_handleRegBool__P4195_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegBool__P4195, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  res___12137: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_LoggerServer_log__P3172(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C3167_VT)) failedCast(r0);
    s.tmp_0 = jacdac_LoggerServer_add__P3175_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 234; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_log__P3172.info = {"start":1768,"length":95,"line":47,"column":8,"endLine":49,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"log","argumentNames":["this","message"]}

function jacdac_LoggerServer_log__P3172_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_log__P3172, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_LoggerServer_handlePacket__P3170(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___12168 = undefined;
    s.d___12171 = undefined;
    s.elapsed___12176 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C3167_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 128;
    s.tmp_2.arg3 = "u8";
    r0 = s.arg0.fields["minPriority"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 230; s.pc = 10; return s.tmp_2;
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["minPriority"] = (s.tmp_1);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(8320, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 1:
    r0 = pxsim.control.millis();
    s.now___12168 = (r0);
    s.tmp_1 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = "u8";
    s.callLocIdx = 232; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.d___12171 = (r0);
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_0 = r0;
    r0 = (s.now___12168 - s.tmp_0);
    s.elapsed___12176 = (r0);
    r0 = s.arg0.fields["minPriority"];
    s.tmp_1 = r0;
    r0 = (s.d___12171 <= s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.elapsed___12176 > 1500);
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = (s.arg0).fields["minPriority"] = (s.d___12171);
    r0 = (s.arg0).fields["_lastListenerTime"] = (s.now___12168);
  case 4:
  case 5:
    r0 = s.arg0.fields["minPriority"];
    s.tmp_1 = r0;
    r0 = (globals.minPriority___2376 > s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = s.arg0.fields["minPriority"];
    globals.minPriority___2376 = (r0);
  case 6:
  case 7:
    { step = 9; continue; }
  case 8:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 233; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_handlePacket__P3170.info = {"start":275,"length":1375,"line":10,"column":8,"endLine":42,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_LoggerServer_handlePacket__P3170_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_handlePacket__P3170, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  now___12168: undefined,
  d___12171: undefined,
  elapsed___12176: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_MButton_isPressed__P4399(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pressed___12205 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_MButton__C3851_VT)) failedCast(r0);
    r0 = s.arg0.fields["button"];
    s.tmp_0 = r0;
    r0 = pxsim.input.buttonIsPressed(s.tmp_0);
    s.pressed___12205 = (r0);
    r0 = s.pressed___12205;
    return leave(s, r0)
  default: oops()
} } }
servers_MButton_isPressed__P4399.info = {"start":2894,"length":123,"line":81,"column":8,"endLine":84,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"isPressed","argumentNames":["this"]}

function servers_MButton_isPressed__P4399_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_MButton_isPressed__P4399, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  pressed___12205: undefined,
  arg0: undefined,
} }





function servers_LogoButton_isPressed__P4403(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_LogoButton__C3853_VT)) failedCast(r0);
    r0 = pxsim.input.logoIsPressed();
    return leave(s, r0)
  default: oops()
} } }
servers_LogoButton_isPressed__P4403.info = {"start":3275,"length":74,"line":96,"column":8,"endLine":98,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"isPressed","argumentNames":["this"]}

function servers_LogoButton_isPressed__P4403_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_LogoButton_isPressed__P4403, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function servers_TouchButton_isPressed__P4401(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_TouchButton__C3852_VT)) failedCast(r0);
    r0 = s.arg0.fields["button"];
    s.tmp_0 = r0;
    r0 = pxsim.input.pinIsPressed(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
servers_TouchButton_isPressed__P4401.info = {"start":3104,"length":84,"line":89,"column":8,"endLine":91,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"isPressed","argumentNames":["this"]}

function servers_TouchButton_isPressed__P4401_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_TouchButton_isPressed__P4401, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_SoundLevelServer_handlePacket__P3868(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.oldEnabled___12221 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundLevelServer__C3861_VT)) failedCast(r0);
    r0 = s.arg0.fields["enabled"];
    s.oldEnabled___12221 = (r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegBool__P4195_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 1;
    r0 = s.arg0.fields["enabled"];
    s.tmp_2.arg3 = r0;
    s.callLocIdx = 863; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["enabled"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 6;
    s.tmp_2.arg3 = globals.LoudThreshold___3806;
    r0 = s.arg0.fields["loudThreshold"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 864; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["loudThreshold"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 5;
    s.tmp_2.arg3 = globals.QuietThreshold___3807;
    r0 = s.arg0.fields["quietThreshold"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 865; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["quietThreshold"] = (s.tmp_1);
    s.tmp_0 = jacdac_SensorServer_handlePacket__P3240_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 866; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["enabled"];
    s.tmp_1 = r0;
    r0 = (s.oldEnabled___12221 !== s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
    s.tmp_3 = servers_SoundLevelServer_registerEvents__P4412_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 867; s.pc = 11; return s.tmp_3;
  case 11:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_1 = servers_SoundLevelServer_setThresholds__P4411_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 868; s.pc = 12; return s.tmp_1;
  case 12:
    r0 = s.retval;
  case 5:
  case 6:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 869; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_handlePacket__P3868.info = {"start":728,"length":950,"line":25,"column":8,"endLine":50,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function servers_SoundLevelServer_handlePacket__P3868_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_handlePacket__P3868, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  oldEnabled___12221: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_SoundLevelServer_setThresholds__P4411(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundLevelServer__C3861_VT)) failedCast(r0);
    r0 = s.arg0.fields["loudThreshold"];
    s.tmp_1 = r0;
    r0 = (255 * s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim.input.setSoundThreshold(2, s.tmp_0);
    r0 = s.arg0.fields["quietThreshold"];
    s.tmp_1 = r0;
    r0 = (255 * s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim.input.setSoundThreshold(1, s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_setThresholds__P4411.info = {"start":423,"length":295,"line":14,"column":8,"endLine":23,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"setThresholds","argumentNames":["this"]}

function servers_SoundLevelServer_setThresholds__P4411_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_setThresholds__P4411, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function servers_SoundLevelServer_registerEvents__P4412(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundLevelServer__C3861_VT)) failedCast(r0);
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["registered"] = (true);
    r0 = pxsim_pxtcore_mkAction(1, servers_SoundLevelServer_registerEvents_inline__P12287);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onSound(2, s.tmp_0);
    r0 = pxsim_pxtcore_mkAction(1, servers_SoundLevelServer_registerEvents_inline__P12294);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.input.onSound(1, s.tmp_0);
    { step = 4; continue; }
  case 1:
    r0 = s.arg0.fields["registered"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim.input.onSound(2, servers_SoundLevelServer_registerEvents_inline__P12303);
    r0 = pxsim.input.onSound(1, servers_SoundLevelServer_registerEvents_inline__P12307);
    r0 = (s.arg0).fields["registered"] = (false);
  case 2:
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_registerEvents__P4412.info = {"start":1688,"length":632,"line":52,"column":8,"endLine":66,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"registerEvents","argumentNames":["this"]}

function servers_SoundLevelServer_registerEvents__P4412_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_registerEvents__P4412, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_SoundLevelServer_registerEvents_inline__P12287(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 1;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 870; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 870; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 870; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 870; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_registerEvents_inline__P12287.info = {"start":1836,"length":95,"line":55,"column":50,"endLine":57,"endColumn":17,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"inline","argumentNames":[]}

function servers_SoundLevelServer_registerEvents_inline__P12287_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_registerEvents_inline__P12287, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_SoundLevelServer_registerEvents_inline__P12294(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = if_sendEvent_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 2;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "sendEvent"), 2);
      s.callLocIdx = 871; s.pc = 1; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["sendEvent"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["sendEvent"], 2); s.callLocIdx = 871; s.pc = 1; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 871; s.pc = 1; return s.tmp_0;; }
     else { s.callLocIdx = 871; s.pc = 1; return s.tmp_0; }
    }
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_registerEvents_inline__P12294.info = {"start":1984,"length":96,"line":58,"column":51,"endLine":60,"endColumn":17,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"inline","argumentNames":[]}

function servers_SoundLevelServer_registerEvents_inline__P12294_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_registerEvents_inline__P12294, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_SoundLevelServer_registerEvents_inline__P12303(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_registerEvents_inline__P12303.info = {"start":2174,"length":14,"line":62,"column":50,"endLine":62,"endColumn":64,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"inline","argumentNames":[]}

function servers_SoundLevelServer_registerEvents_inline__P12303_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_registerEvents_inline__P12303, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function servers_SoundLevelServer_registerEvents_inline__P12307(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_registerEvents_inline__P12307.info = {"start":2241,"length":14,"line":63,"column":51,"endLine":63,"endColumn":65,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"inline","argumentNames":[]}

function servers_SoundLevelServer_registerEvents_inline__P12307_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_registerEvents_inline__P12307, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_ClientPacketQueue_constructor__P4290(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C4285_VT)) failedCast(r0);
    r0 = (s.arg0).fields["parent"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["pkts"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_constructor__P4290.info = {"start":27121,"length":46,"line":818,"column":8,"endLine":818,"endColumn":54,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","parent"]}

function jacdac_ClientPacketQueue_constructor__P4290_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_constructor__P4290, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_RegisterClient_constructor__P3476(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.arg5 = (s.lambdaArgs[5]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegisterClient__C3474_VT)) failedCast(r0);
    r0 = (s.arg0).fields["service"] = (s.arg1);
    r0 = (s.arg0).fields["code"] = (s.arg2);
    r0 = (s.arg0).fields["packFormat"] = (s.arg3);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    s.tmp_2 = jacdac_EventSource_constructor__P3575_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 537; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0 = s.arg4;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["flags"] = (s.tmp_1);
    r0 = pxsim_numops_toBoolDecr(s.arg5);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = jacdac_jdpack__P2934_mk(s);
    r0 = s.arg0.fields["packFormat"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg5;
    s.callLocIdx = 538; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    r0 = undefined;
  case 4:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["_data"] = (s.tmp_1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegisterClient_constructor__P3476.info = {"start":28786,"length":493,"line":874,"column":8,"endLine":887,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","service","code","packFormat","flags","defaultValue"]}

function jacdac_RegisterClient_constructor__P3476_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegisterClient_constructor__P3476, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
  arg5: undefined,
} }





function jacdac_Client_constructor__P3502(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C3496_VT)) failedCast(r0);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["systemActive"] = (false);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["registers"] = (s.tmp_3);
    s.tmp_4 = jacdac_EventSource_constructor__P3575_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 551; s.pc = 3; return s.tmp_4;
  case 3:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_panic__P3432_mk(s);
    s.tmp_2.arg0 = "no role";
    s.callLocIdx = 552; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = control_allocateEventSource__P2341_mk(s);
    s.callLocIdx = 553; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["eventSource"] = (s.tmp_1);
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ClientPacketQueue__C4285_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_ClientPacketQueue_constructor__P4290_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.callLocIdx = 554; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    r0 = (s.arg0).fields["config"] = (s.tmp_0);
    r0 = (s.arg0).fields["_role"] = (s.arg2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_constructor__P3502.info = {"start":33699,"length":281,"line":1026,"column":8,"endLine":1033,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","serviceClass","role"]}

function jacdac_Client_constructor__P3502_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_constructor__P3502, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function control_allocateEventSource__P2341(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (globals._evSource___3968 + 1);
    s.tmp_0 = r0;
    globals._evSource___3968 = (r0);
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
control_allocateEventSource__P2341.info = {"start":2984,"length":72,"line":111,"column":4,"endLine":113,"endColumn":5,"fileName":"pxt_modules/core/control.ts","functionName":"allocateEventSource","argumentNames":[]}

function control_allocateEventSource__P2341_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_allocateEventSource__P2341, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_JDPacket_toString__P2921(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.msg___12356 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_1);
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.mkEmpty();
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_15 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat(s.tmp_15, s.tmp_16);
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_14, " ");
    s.tmp_13 = r0;
    s.tmp_19 = jacdac_shortDeviceId__P3524_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_21 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_21, 4, 8);
    s.tmp_20 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_20);
    s.tmp_19.arg0 = r0;
    s.callLocIdx = 137; s.pc = 6; return s.tmp_19;
  case 6:
    r0 = s.retval;
    s.tmp_18 = r0;
    if ((s.tmp_18) && (s.tmp_18).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_18);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_18) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_17 = r0;
    r0 = pxsim_String__concat(s.tmp_13, s.tmp_17);
    s.tmp_12 = r0;
    r0 = pxsim_String__concat(s.tmp_12, "[");
    s.tmp_11 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_25 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_25, 13);
    s.tmp_24 = r0;
    r0 = (s.tmp_24 & 63);
    s.tmp_23 = r0;
    if ((s.tmp_23) && (s.tmp_23).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_23);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_23) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_22 = r0;
    r0 = pxsim_String__concat(s.tmp_11, s.tmp_22);
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_10, "]: ");
    s.tmp_9 = r0;
    s.tmp_28 = jacdac_hexNum__P2876_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_29 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_29, 4, 14);
    s.tmp_28.arg0 = r0;
    s.tmp_28.arg1 = 4;
    s.callLocIdx = 140; s.pc = 9; return s.tmp_28;
  case 9:
    r0 = s.retval;
    s.tmp_27 = r0;
    if ((s.tmp_27) && (s.tmp_27).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_27);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_27) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_26 = r0;
    r0 = pxsim_String__concat(s.tmp_9, s.tmp_26);
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_8, " crc=");
    s.tmp_7 = r0;
    s.tmp_32 = jacdac_hexNum__P2876_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_33 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_33, 4, 0);
    s.tmp_32.arg0 = r0;
    s.tmp_32.arg1 = 2;
    s.callLocIdx = 142; s.pc = 11; return s.tmp_32;
  case 11:
    r0 = s.retval;
    s.tmp_31 = r0;
    if ((s.tmp_31) && (s.tmp_31).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_31);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_31) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_30 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_30);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, ", flags=");
    s.tmp_5 = r0;
    s.tmp_36 = jacdac_hexNum__P2876_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_37 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_37, 3);
    s.tmp_36.arg0 = r0;
    s.tmp_36.arg1 = 1;
    s.callLocIdx = 144; s.pc = 13; return s.tmp_36;
  case 13:
    r0 = s.retval;
    s.tmp_35 = r0;
    if ((s.tmp_35) && (s.tmp_35).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_35);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_35) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_34 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_34);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ", sz=");
    s.tmp_3 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_40 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_40, 12);
    s.tmp_39 = r0;
    if ((s.tmp_39) && (s.tmp_39).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_39);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_39) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_38 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_38);
    s.msg___12356 = (r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 12);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 20);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    if ((s.msg___12356) && (s.msg___12356).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.msg___12356);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.msg___12356) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_8);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(": ", s.tmp_6);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.msg___12356 = (r0);
    { step = 4; continue; }
  case 3:
    if ((s.msg___12356) && (s.msg___12356).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.msg___12356);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.msg___12356) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_8, 0, 20);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_7);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(": ", s.tmp_5);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "...");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.msg___12356 = (r0);
  case 4:
    r0 = s.msg___12356;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_toString__P2921.info = {"start":8654,"length":547,"line":271,"column":8,"endLine":283,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_JDPacket_toString__P2921_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_toString__P2921, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  tmp_23: undefined,
  tmp_24: undefined,
  tmp_25: undefined,
  tmp_26: undefined,
  tmp_27: undefined,
  tmp_28: undefined,
  tmp_29: undefined,
  tmp_30: undefined,
  tmp_31: undefined,
  tmp_32: undefined,
  tmp_33: undefined,
  tmp_34: undefined,
  tmp_35: undefined,
  tmp_36: undefined,
  tmp_37: undefined,
  tmp_38: undefined,
  tmp_39: undefined,
  tmp_40: undefined,
  msg___12356: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_size__P2895(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 12);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_size__P2895.info = {"start":4442,"length":66,"line":131,"column":8,"endLine":133,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"size","argumentNames":["this"]}
jacdac_JDPacket_size__P2895.isGetter = true;

function jacdac_JDPacket_size__P2895_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_size__P2895, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_hexNum__P2876(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.hex___12438 = undefined;
    s.r___12440 = undefined;
    s.i___12441 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.hex___12438 = ("0123456789abcdef");
    s.r___12440 = ("0x");
    s.i___12441 = (0);
  case 1:
    r0 = (s.i___12441 < s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    if ((s.r___12440) && (s.r___12440).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.r___12440);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___12440) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    s.tmp_4 = r0 = s.hex___12438;
    s.tmp_7 = r0 = s.arg0;
    r0 = (s.arg1 - 1);
    s.tmp_10 = r0;
    r0 = (s.tmp_10 - s.i___12441);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 * 4);
    s.tmp_8 = r0;
    r0 = (s.tmp_7 >>> s.tmp_8);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 15);
    s.tmp_5 = r0;
    r0 = pxsim_String_.charAt(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_2);
    s.r___12440 = (r0);
    r0 = (s.i___12441 + 1);
    s.i___12441 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.r___12440;
    return leave(s, r0)
  default: oops()
} } }
jacdac_hexNum__P2876.info = {"start":1333,"length":233,"line":30,"column":4,"endLine":37,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"hexNum","argumentNames":["n","len"]}

function jacdac_hexNum__P2876_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_hexNum__P2876, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  hex___12438: undefined,
  r___12440: undefined,
  i___12441: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_ScreenServer_handlePacket__P3874(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.regCode___12469 = undefined;
    s.x___12477 = undefined;
    s.y___12478 = undefined;
    s.i___12479 = undefined;
    s.byte___12483 = undefined;
    s.bit___12488 = undefined;
    s.x___12519 = undefined;
    s.y___12520 = undefined;
    s.buf___12521 = undefined;
    s.i___12525 = undefined;
    s.byte___12532 = undefined;
    s.bit___12537 = undefined;
    s.b___12580 = undefined;
    s.b___12609 = undefined;
    s.nb___12613 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_ScreenServer__C3872_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 875; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
    s.regCode___12469 = (r0);
    r0 = (s.regCode___12469 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
    s.tmp_2 = jacdac_JDPacket_isRegSet__P2906_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 876; s.pc = 32; return s.tmp_2;
  case 32:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
    s.x___12477 = (0);
    s.y___12478 = (0);
    s.i___12479 = (0);
  case 1:
    r0 = (s.i___12479 < 25);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = (s.i___12479 / 5);
    s.tmp_1 = r0;
    r0 = pxsim.Math_.floor(s.tmp_1);
    s.byte___12483 = (r0);
    s.tmp_1 = r0 = s.i___12479;
    r0 = (s.byte___12483 * 5);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
    s.tmp_0 = r0;
    r0 = (1 << s.tmp_0);
    s.bit___12488 = (r0);
    r0 = s.arg1.fields["_data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, s.byte___12483);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & s.bit___12488);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = pxsim.led.plot(s.y___12478, s.x___12477);
    { step = 3; continue; }
  case 2:
    r0 = pxsim.led.unplot(s.y___12478, s.x___12477);
  case 3:
    r0 = (s.x___12477 + 1);
    s.x___12477 = (r0);
    r0 = (s.x___12477 == 5);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    s.x___12477 = (0);
    r0 = (s.y___12478 + 1);
    s.y___12478 = (r0);
  case 4:
  case 5:
    r0 = (s.i___12479 + 1);
    s.i___12479 = (r0);
    { step = 1; continue; }
  case 6:
    { step = 14; continue; }
  case 7:
    s.x___12519 = (0);
    s.y___12520 = (0);
    r0 = pxsim.control.createBuffer(5);
    s.buf___12521 = (r0);
    s.i___12525 = (0);
  case 8:
    r0 = (s.i___12525 < 25);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = pxsim.led.pointBrightness(s.y___12520, s.x___12519);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = (s.i___12525 / 5);
    s.tmp_3 = r0;
    r0 = pxsim.Math_.floor(s.tmp_3);
    s.byte___12532 = (r0);
    s.tmp_1 = r0 = s.i___12525;
    r0 = (s.byte___12532 * 5);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
    s.tmp_0 = r0;
    r0 = (1 << s.tmp_0);
    s.bit___12537 = (r0);
    s.tmp_0 = r0 = s.buf___12521;
    s.tmp_1 = r0 = s.byte___12532;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, s.byte___12532);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 | s.bit___12537);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, s.tmp_1, s.tmp_2);
  case 9:
  case 10:
    r0 = (s.x___12519 + 1);
    s.x___12519 = (r0);
    r0 = (s.x___12519 == 5);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    s.x___12519 = (0);
    r0 = (s.y___12520 + 1);
    s.y___12520 = (r0);
  case 11:
  case 12:
    r0 = (s.i___12525 + 1);
    s.i___12525 = (r0);
    { step = 8; continue; }
  case 13:
    s.tmp_0 = jacdac_Server_handleRegBuffer__P4198_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_1 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 879; s.pc = 34; return s.tmp_1;
  case 34:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    s.tmp_0.arg3 = s.buf___12521;
    s.callLocIdx = 880; s.pc = 33; return s.tmp_0;
  case 33:
    r0 = s.retval;
  case 14:
    { step = 30; continue; }
  case 15:
    r0 = (s.regCode___12469 == 386);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 16:
    r0 = (s.regCode___12469 == 385);
  case 17:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 18; continue; }
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = s.regCode___12469;
    s.tmp_2.arg3 = globals.Columns___3781;
    s.tmp_2.arg4 = 5;
    s.callLocIdx = 881; s.pc = 35; return s.tmp_2;
  case 35:
    r0 = s.retval;
    { step = 29; continue; }
  case 18:
    r0 = (s.regCode___12469 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
    s.tmp_1 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.regCode___12469;
    s.tmp_1.arg3 = globals.Brightness___3779;
    r0 = pxsim.led.brightness();
    s.tmp_2 = r0;
    r0 = (s.tmp_2 / 255);
    s.tmp_1.arg4 = r0;
    s.callLocIdx = 882; s.pc = 36; return s.tmp_1;
  case 36:
    r0 = s.retval;
    s.b___12580 = (r0);
    s.tmp_1 = jacdac_JDPacket_isRegSet__P2906_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 883; s.pc = 37; return s.tmp_1;
  case 37:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
    r0 = (s.b___12580 * 255);
    s.tmp_2 = r0;
    r0 = pxsim.led.setBrightness(s.tmp_2);
  case 19:
  case 20:
    { step = 28; continue; }
  case 21:
    r0 = (s.regCode___12469 === 263);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
    s.tmp_1 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.regCode___12469;
    s.tmp_1.arg3 = globals.Variant___3782;
    s.tmp_1.arg4 = 1;
    s.callLocIdx = 884; s.pc = 38; return s.tmp_1;
  case 38:
    r0 = s.retval;
    { step = 27; continue; }
  case 22:
    s.tmp_2 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 885; s.pc = 39; return s.tmp_2;
  case 39:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 25; continue; }
    r0 = pxsim.led.brightness();
    s.tmp_3 = r0;
    r0 = (s.tmp_3 / 255);
    s.b___12609 = (r0);
    s.tmp_0 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_1 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 886; s.pc = 41; return s.tmp_1;
  case 41:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    s.tmp_0.arg3 = globals.Brightness___3779;
    s.tmp_0.arg4 = s.b___12609;
    s.callLocIdx = 887; s.pc = 40; return s.tmp_0;
  case 40:
    r0 = s.retval;
    s.nb___12613 = (r0);
    r0 = (s.b___12609 !== s.nb___12613);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 23; continue; }
    r0 = (s.nb___12613 << 8);
    s.tmp_1 = r0;
    r0 = pxsim.led.setBrightness(s.tmp_1);
  case 23:
  case 24:
    { step = 26; continue; }
  case 25:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 888; s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
  case 26:
  case 27:
  case 28:
  case 29:
  case 30:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_ScreenServer_handlePacket__P3874.info = {"start":158,"length":2744,"line":6,"column":8,"endLine":74,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitScreen.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function servers_ScreenServer_handlePacket__P3874_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_ScreenServer_handlePacket__P3874, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  regCode___12469: undefined,
  x___12477: undefined,
  y___12478: undefined,
  i___12479: undefined,
  byte___12483: undefined,
  bit___12488: undefined,
  x___12519: undefined,
  y___12520: undefined,
  buf___12521: undefined,
  i___12525: undefined,
  byte___12532: undefined,
  bit___12537: undefined,
  b___12580: undefined,
  b___12609: undefined,
  nb___12613: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleRegBuffer__P4198(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.getset___12634 = undefined;
    s.reg___12644 = undefined;
    s.data___12665 = undefined;
    s.diff___12668 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 12);
    s.getset___12634 = (r0);
    r0 = (s.getset___12634 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.getset___12634 > 2);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
    r0 = s.arg3;
    { step = 17; continue; }
  case 3:
  case 4:
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 4095);
    s.reg___12644 = (r0);
    r0 = (s.reg___12644 != s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg3;
    { step = 17; continue; }
  case 5:
  case 6:
    s.tmp_1 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 522; s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    r0 = (s.getset___12634 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_1 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_2 = jacdac_JDPacket_from__P2883_mk(s);
    r0 = s.arg1.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 4, 14);
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.arg3;
    s.callLocIdx = 524; s.pc = 20; return s.tmp_2;
  case 20:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 525; s.pc = 19; return s.tmp_1;
  case 19:
    r0 = s.retval;
    { step = 16; continue; }
  case 7:
    r0 = (s.arg2 >> 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = s.arg3;
    { step = 17; continue; }
  case 8:
  case 9:
    r0 = s.arg1.fields["_data"];
    s.data___12665 = (r0);
    r0 = pxsim.BufferMethods.length(s.arg3);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.length(s.data___12665);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    s.diff___12668 = (r0);
    r0 = (s.diff___12668 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
    { step = 13; continue; }
  case 10:
    r0 = (s.diff___12668 < 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 11; continue; }
    s.tmp_2 = r0 = s.data___12665;
    r0 = pxsim.BufferMethods.length(s.arg3);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 0, s.tmp_3);
    s.data___12665 = (r0);
    { step = 12; continue; }
  case 11:
    s.tmp_0 = helpers_bufferConcat__P2618_mk(s);
    s.tmp_0.arg0 = s.data___12665;
    r0 = pxsim.control.createBuffer(s.diff___12668);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 527; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.data___12665 = (r0);
  case 12:
  case 13:
    s.tmp_3 = helpers_bufferEquals__P2619_mk(s);
    s.tmp_3.arg0 = s.data___12665;
    s.tmp_3.arg1 = s.arg3;
    s.callLocIdx = 528; s.pc = 22; return s.tmp_3;
  case 22:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
    r0 = pxsim.BufferMethods.write(s.arg3, 0, s.data___12665);
    r0 = (s.arg0).fields["stateUpdated"] = (true);
  case 14:
  case 15:
  case 16:
    r0 = s.arg3;
  case 17:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegBuffer__P4198.info = {"start":24987,"length":1057,"line":747,"column":8,"endLine":775,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegBuffer","argumentNames":["this","pkt","register","current"]}

function jacdac_Server_handleRegBuffer__P4198_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegBuffer__P4198, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  getset___12634: undefined,
  reg___12644: undefined,
  data___12665: undefined,
  diff___12668: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function led_point__P2451(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.led.pointBrightness(s.arg0, s.arg1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > 0);
    return leave(s, r0)
  default: oops()
} } }
led_point__P2451.info = {"start":529,"length":106,"line":15,"column":4,"endLine":17,"endColumn":5,"fileName":"pxt_modules/core/led.ts","functionName":"point","argumentNames":["x","y"]}

function led_point__P2451_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: led_point__P2451, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_isRegSet__P2906(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C2877_VT)) failedCast(r0);
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 4, 14);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 12);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 2);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isRegSet__P2906.info = {"start":6061,"length":92,"line":184,"column":8,"endLine":186,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isRegSet","argumentNames":["this"]}
jacdac_JDPacket_isRegSet__P2906.isGetter = true;

function jacdac_JDPacket_isRegSet__P2906_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isRegSet__P2906, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_SimpleSensorServer_handlePacket__P3250(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SimpleSensorServer__C3246_VT)) failedCast(r0);
    r0 = s.arg0.fields["minReading"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 260;
    r0 = s.arg0.fields["packFormat"];
    s.tmp_2.arg3 = r0;
    r0 = s.arg0.fields["minReading"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 266; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = s.arg0.fields["maxReading"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 261;
    r0 = s.arg0.fields["packFormat"];
    s.tmp_2.arg3 = r0;
    r0 = s.arg0.fields["maxReading"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 267; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = s.arg0.fields["readingError"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 262;
    r0 = s.arg0.fields["packFormat"];
    s.tmp_2.arg3 = r0;
    s.tmp_3 = if_readingError_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      setupLambda(s.tmp_3, pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "readingError"), 1);
      s.callLocIdx = 268; s.pc = 10; return s.tmp_3;
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["readingError"];
      if (s.tmp_3.fn == null) { setupLambda(s.tmp_3, s.tmp_3.arg0.fields["readingError"], 1); s.callLocIdx = 268; s.pc = 10; return s.tmp_3; }
      else if (s.tmp_3.fn.isGetter) { s.tmp_3.stage2Call = true; s.callLocIdx = 268; s.pc = 10; return s.tmp_3;; }
     else { s.callLocIdx = 268; s.pc = 10; return s.tmp_3; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 269; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
  case 5:
  case 6:
    s.tmp_0 = jacdac_SensorServer_handlePacket__P3240_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 270; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SimpleSensorServer_handlePacket__P3250.info = {"start":5133,"length":844,"line":151,"column":8,"endLine":174,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_SimpleSensorServer_handlePacket__P3250_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SimpleSensorServer_handlePacket__P3250, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_SoundPlayerServer_handlePacket__P3881(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.oldVol___12754 = undefined;
    s.vol___12757 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundPlayerServer__C3879_VT)) failedCast(r0);
    r0 = pxsim.music.volume();
    s.oldVol___12754 = (r0);
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 1;
    s.tmp_2.arg3 = globals.Volume___3816;
    r0 = (s.oldVol___12754 / 255);
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 892; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 * 255);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 | 0);
    s.vol___12757 = (r0);
    r0 = (s.vol___12757 !== s.oldVol___12754);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.music.setVolume(s.vol___12757);
  case 1:
  case 2:
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(128, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 3:
    s.tmp_2 = servers_SoundPlayerServer_handlePlayCommand__P4418_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 894; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    { step = 6; continue; }
  case 4:
    s.tmp_0 = servers_SoundPlayerServer_handleListSoundsCommand__P4419_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 895; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    { step = 6; continue; }
  case 5:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 896; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundPlayerServer_handlePacket__P3881.info = {"start":165,"length":901,"line":6,"column":8,"endLine":32,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitPlay.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function servers_SoundPlayerServer_handlePacket__P3881_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundPlayerServer_handlePacket__P3881, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  oldVol___12754: undefined,
  vol___12757: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_SoundPlayerServer_handleListSoundsCommand__P4419(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sounds___12788 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundPlayerServer__C3879_VT)) failedCast(r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, "giggle");
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_0);
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, 0);
    r0 = pxsim_Array__push(s.tmp_2, "happy");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, 0);
    r0 = pxsim_Array__push(s.tmp_3, "hello");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_3);
    r0 = pxsim_Array__mk();
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_4, 0);
    r0 = pxsim_Array__push(s.tmp_4, "mysterious");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_4);
    r0 = pxsim_Array__mk();
    s.tmp_5 = r0;
    r0 = pxsim_Array__push(s.tmp_5, 0);
    r0 = pxsim_Array__push(s.tmp_5, "sad");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_5);
    r0 = pxsim_Array__mk();
    s.tmp_6 = r0;
    r0 = pxsim_Array__push(s.tmp_6, 0);
    r0 = pxsim_Array__push(s.tmp_6, "slide");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_6);
    r0 = pxsim_Array__mk();
    s.tmp_7 = r0;
    r0 = pxsim_Array__push(s.tmp_7, 0);
    r0 = pxsim_Array__push(s.tmp_7, "soaring");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_7);
    r0 = pxsim_Array__mk();
    s.tmp_8 = r0;
    r0 = pxsim_Array__push(s.tmp_8, 0);
    r0 = pxsim_Array__push(s.tmp_8, "spring");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_8);
    r0 = pxsim_Array__mk();
    s.tmp_9 = r0;
    r0 = pxsim_Array__push(s.tmp_9, 0);
    r0 = pxsim_Array__push(s.tmp_9, "twinkle");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_9);
    r0 = pxsim_Array__mk();
    s.tmp_10 = r0;
    r0 = pxsim_Array__push(s.tmp_10, 0);
    r0 = pxsim_Array__push(s.tmp_10, "yawn");
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_10);
    s.sounds___12788 = (s.tmp_1);
    s.tmp_0 = jacdac_OutPipe_respondForEach__P2957_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = s.sounds___12788;
    s.tmp_0.arg2 = servers_SoundPlayerServer_handleListSoundsCommand_inline__P12803;
    s.callLocIdx = 902; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundPlayerServer_handleListSoundsCommand__P4419.info = {"start":1384,"length":580,"line":43,"column":8,"endLine":59,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitPlay.ts","functionName":"handleListSoundsCommand","argumentNames":["this","pkt"]}

function servers_SoundPlayerServer_handleListSoundsCommand__P4419_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundPlayerServer_handleListSoundsCommand__P4419, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  sounds___12788: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_SoundPlayerServer_handleListSoundsCommand_inline__P12803(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_jdpack__P2934_mk(s);
    s.tmp_0.arg0 = "u32 s";
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 901; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundPlayerServer_handleListSoundsCommand_inline__P12803.info = {"start":1866,"length":87,"line":56,"column":55,"endLine":58,"endColumn":13,"fileName":"pxt_modules/jacdac-microbit/microbitPlay.ts","functionName":"inline","argumentNames":["k"]}

function servers_SoundPlayerServer_handleListSoundsCommand_inline__P12803_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundPlayerServer_handleListSoundsCommand_inline__P12803, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_SoundPlayerServer_handlePlayCommand__P4418(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.name___12814 = undefined;
    s.exp___12817 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundPlayerServer__C3879_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = globals.Play___3822;
    s.callLocIdx = 897; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.name___12814 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.name___12814);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = music_stopAllSounds__P2552_mk(s);
    s.callLocIdx = 898; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = pxsim_pxtcore_mkClassInstance(SoundExpression__C2692_VT);
    s.tmp_0 = r0;
    s.tmp_1 = SoundExpression_constructor__P2693_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.name___12814;
    s.callLocIdx = 899; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.exp___12817 = (s.tmp_0);
    s.tmp_0 = SoundExpression_play__P2694_mk(s);
    s.tmp_0.arg0 = s.exp___12817;
    s.callLocIdx = 900; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundPlayerServer_handlePlayCommand__P4418.info = {"start":1076,"length":298,"line":34,"column":8,"endLine":41,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitPlay.ts","functionName":"handlePlayCommand","argumentNames":["this","pkt"]}

function servers_SoundPlayerServer_handlePlayCommand__P4418_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundPlayerServer_handlePlayCommand__P4418, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  name___12814: undefined,
  exp___12817: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function SoundExpression_play__P2694(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, SoundExpression__C2692_VT)) failedCast(r0);
    r0 = s.arg0.fields["notes"];
    s.tmp_0 = r0;
    setupResume(s, 1);
    pxsim.music.__playSoundExpression(s.tmp_0, false);
    checkResumeConsumed();
    return;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
SoundExpression_play__P2694.info = {"start":411,"length":69,"line":20,"column":4,"endLine":22,"endColumn":5,"fileName":"pxt_modules/core/soundexpressions.ts","functionName":"play","argumentNames":["this"]}

function SoundExpression_play__P2694_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: SoundExpression_play__P2694, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function SoundExpression_constructor__P2693(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, SoundExpression__C2692_VT)) failedCast(r0);
    r0 = (s.arg0).fields["notes"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
SoundExpression_constructor__P2693.info = {"start":130,"length":42,"line":7,"column":4,"endLine":8,"endColumn":5,"fileName":"pxt_modules/core/soundexpressions.ts","functionName":"inline","argumentNames":["this","notes"]}

function SoundExpression_constructor__P2693_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: SoundExpression_constructor__P2693, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function music_stopAllSounds__P2552(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = music_rest__P2539_mk(s);
    s.tmp_0.arg0 = 0;
    s.callLocIdx = 39; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.tmp_0 = music_stopMelody__P2551_mk(s);
    s.tmp_0.arg0 = 5;
    s.callLocIdx = 40; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = pxsim.music.__stopSoundExpressions();
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_stopAllSounds__P2552.info = {"start":16272,"length":139,"line":471,"column":4,"endLine":475,"endColumn":5,"fileName":"pxt_modules/core/music.ts","functionName":"stopAllSounds","argumentNames":[]}

function music_stopAllSounds__P2552_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_stopAllSounds__P2552, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function music_stopMelody__P2551(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 & 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = music_startMelody__P2548_mk(s);
    r0 = pxsim_Array__mk();
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 4;
    s.callLocIdx = 37; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = (s.arg0 & 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = music_startMelody__P2548_mk(s);
    r0 = pxsim_Array__mk();
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 1;
    s.callLocIdx = 38; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_stopMelody__P2551.info = {"start":15781,"length":276,"line":457,"column":4,"endLine":462,"endColumn":5,"fileName":"pxt_modules/core/music.ts","functionName":"stopMelody","argumentNames":["options"]}

function music_stopMelody__P2551_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_stopMelody__P2551, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function music_startMelody__P2548(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.isBackground___12851 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = music_init__P4018_mk(s);
    s.callLocIdx = 31; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = (s.arg1 & 12);
    s.isBackground___12851 = (r0);
    r0 = (globals.currentMelody___4019 != undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = pxsim_numops_toBoolDecr(s.isBackground___12851);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_1;
    { step = 2; continue; }
  case 1:
    r0 = globals.currentMelody___4019.fields["background"];
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    globals.currentBackgroundMelody___4020 = (globals.currentMelody___4019);
    globals.currentMelody___4019 = (null);
    r0 = pxsim.control.raiseEvent(2000, 245, 1);
  case 3:
  case 4:
    r0 = pxsim_numops_toBoolDecr(globals.currentMelody___4019);
    if (!r0) { step = 5; continue; }
    r0 = globals.currentMelody___4019.fields["background"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | 3);
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(2000, s.tmp_0, 1);
  case 5:
  case 6:
    r0 = pxsim_pxtcore_mkClassInstance(music_Melody__C4022_VT);
    s.tmp_0 = r0;
    s.tmp_1 = music_Melody_constructor__P4025_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.callLocIdx = 32; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
    globals.currentMelody___4019 = (s.tmp_0);
    r0 = globals.currentMelody___4019.fields["background"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | 2);
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(2000, s.tmp_0, 1);
    { step = 8; continue; }
  case 7:
    r0 = pxsim_pxtcore_mkClassInstance(music_Melody__C4022_VT);
    s.tmp_0 = r0;
    s.tmp_1 = music_Melody_constructor__P4025_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.callLocIdx = 33; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    globals.currentMelody___4019 = (s.tmp_0);
    r0 = globals.currentMelody___4019.fields["background"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | 2);
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(2000, s.tmp_0, 1);
    r0 = pxsim.control.inBackground(music_startMelody_inline__P12912);
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_startMelody__P2548.info = {"start":11475,"length":2066,"line":358,"column":4,"endLine":393,"endColumn":5,"fileName":"pxt_modules/core/music.ts","functionName":"startMelody","argumentNames":["melodyArray","options"]}

function music_startMelody__P2548_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_startMelody__P2548, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  isBackground___12851: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function music_startMelody_inline__P12912(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

  case 1:
    s.tmp_1 = music_Melody_hasNextNote__P4023_mk(s);
    s.tmp_1.arg0 = globals.currentMelody___4019;
    s.callLocIdx = 34; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
    s.tmp_2 = music_playNextNote__P4021_mk(s);
    s.tmp_2.arg0 = globals.currentMelody___4019;
    s.callLocIdx = 35; s.pc = 10; return s.tmp_2;
  case 10:
    r0 = s.retval;
    s.tmp_3 = music_Melody_hasNextNote__P4023_mk(s);
    s.tmp_3.arg0 = globals.currentMelody___4019;
    s.callLocIdx = 36; s.pc = 11; return s.tmp_3;
  case 11:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = globals.currentBackgroundMelody___4020;
  case 3:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 4; continue; }
    globals.currentMelody___4019 = (globals.currentBackgroundMelody___4020);
    globals.currentBackgroundMelody___4020 = (null);
    r0 = pxsim.control.raiseEvent(2000, 3, 1);
    r0 = pxsim.control.raiseEvent(2000, 246, 1);
    r0 = pxsim.control.raiseEvent(2000, 5, 1);
  case 4:
  case 5:
    { step = 1; continue; }
  case 6:
    r0 = globals.currentMelody___4019.fields["background"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | 3);
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(2000, s.tmp_0, 1);
    r0 = globals.currentMelody___4019.fields["background"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = pxsim.control.raiseEvent(2000, 5, 1);
  case 7:
  case 8:
    globals.currentMelody___4019 = (null);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_startMelody_inline__P12912.info = {"start":12547,"length":977,"line":375,"column":33,"endLine":391,"endColumn":13,"fileName":"pxt_modules/core/music.ts","functionName":"inline","argumentNames":[]}

function music_startMelody_inline__P12912_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_startMelody_inline__P12912, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
} }





function music_playNextNote__P4021(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.currNote___12962 = undefined;
    s.currentPos___12965 = undefined;
    s.currentDuration___12969 = undefined;
    s.currentOctave___12973 = undefined;
    s.note___12977 = undefined;
    s.isrest___12978 = undefined;
    s.beatPos___12979 = undefined;
    s.parsingOctave___12980 = undefined;
    s.prevNote___12981 = undefined;
    s.pos___12982 = undefined;
    s.noteChar___12988 = undefined;
    s.beat___13045 = undefined;
    s.repeating___13068 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = music_Melody_nextNote__P4024_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 41; s.pc = 37; return s.tmp_0;
  case 37:
    r0 = s.retval;
    s.currNote___12962 = (r0);
    r0 = s.arg0.fields["currentPos"];
    s.currentPos___12965 = (r0);
    r0 = s.arg0.fields["currentDuration"];
    s.currentDuration___12969 = (r0);
    r0 = s.arg0.fields["currentOctave"];
    s.currentOctave___12973 = (r0);
    s.isrest___12978 = (false);
    s.parsingOctave___12980 = (true);
    s.prevNote___12981 = (false);
    s.pos___12982 = (0);
  case 1:
    s.tmp_1 = r0 = s.pos___12982;
    r0 = pxsim_String_.length(s.currNote___12962);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 26; continue; }
    r0 = pxsim_String_.charAt(s.currNote___12962, s.pos___12982);
    s.noteChar___12988 = (r0);
    s.tmp_0 = r0 = s.noteChar___12988;
    r0 = pxsim_pxtcore.switch_eq("c", s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq("C", s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq("d", s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq("D", s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq("e", s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq("E", s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq("f", s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq("F", s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq("g", s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq("G", s.tmp_0);
    if (r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.switch_eq("a", s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq("A", s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq("B", s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq("r", s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq("R", s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = pxsim_pxtcore.switch_eq("#", s.tmp_0);
    if (r0) { step = 17; continue; }
    r0 = pxsim_pxtcore.switch_eq("b", s.tmp_0);
    if (r0) { step = 18; continue; }
    r0 = pxsim_pxtcore.switch_eq(":", s.tmp_0);
    if (r0) { step = 21; continue; }
    r0 = s.tmp_0;
    { step = 22; continue; }
  case 2:
  case 3:
    s.note___12977 = (1);
    s.prevNote___12981 = (true);
    { step = 25; continue; }
  case 4:
  case 5:
    s.note___12977 = (3);
    s.prevNote___12981 = (true);
    { step = 25; continue; }
  case 6:
  case 7:
    s.note___12977 = (5);
    s.prevNote___12981 = (true);
    { step = 25; continue; }
  case 8:
  case 9:
    s.note___12977 = (6);
    s.prevNote___12981 = (true);
    { step = 25; continue; }
  case 10:
  case 11:
    s.note___12977 = (8);
    s.prevNote___12981 = (true);
    { step = 25; continue; }
  case 12:
  case 13:
    s.note___12977 = (10);
    s.prevNote___12981 = (true);
    { step = 25; continue; }
  case 14:
    s.note___12977 = (12);
    s.prevNote___12981 = (true);
    { step = 25; continue; }
  case 15:
  case 16:
    s.isrest___12978 = (true);
    s.prevNote___12981 = (false);
    { step = 25; continue; }
  case 17:
    r0 = (s.note___12977 + 1);
    s.note___12977 = (r0);
    s.prevNote___12981 = (false);
    { step = 25; continue; }
  case 18:
    r0 = pxsim_numops_toBoolDecr(s.prevNote___12981);
    if (!r0) { step = 19; continue; }
    r0 = (s.note___12977 - 1);
    s.note___12977 = (r0);
    { step = 20; continue; }
  case 19:
    s.note___12977 = (12);
    s.prevNote___12981 = (true);
  case 20:
    { step = 25; continue; }
  case 21:
    s.parsingOctave___12980 = (false);
    s.beatPos___12979 = (s.pos___12982);
    s.prevNote___12981 = (false);
    { step = 25; continue; }
  case 22:
    s.prevNote___12981 = (false);
    r0 = pxsim_numops_toBoolDecr(s.parsingOctave___12980);
    if (!r0) { step = 23; continue; }
    s.tmp_0 = parseInt__P1988_mk(s);
    s.tmp_0.arg0 = s.noteChar___12988;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 42; s.pc = 38; return s.tmp_0;
  case 38:
    r0 = s.retval;
    s.currentOctave___12973 = (r0);
  case 23:
  case 24:
  case 25:
    r0 = (s.pos___12982 + 1);
    s.pos___12982 = (r0);
    { step = 1; continue; }
  case 26:
    r0 = pxsim_numops_toBoolDecr(s.parsingOctave___12980);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
    s.tmp_2 = parseInt__P1988_mk(s);
    s.tmp_3 = helpers_stringSubstr__P2009_mk(s);
    s.tmp_3.arg0 = s.currNote___12962;
    r0 = (s.beatPos___12979 + 1);
    s.tmp_3.arg1 = r0;
    r0 = pxsim_String_.length(s.currNote___12962);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.beatPos___12979);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 43; s.pc = 40; return s.tmp_3;
  case 40:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = undefined;
    s.callLocIdx = 44; s.pc = 39; return s.tmp_2;
  case 39:
    r0 = s.retval;
    s.currentDuration___12969 = (r0);
  case 27:
  case 28:
    r0 = pxsim.Math_.idiv(60000, globals.beatsPerMinute___4012);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 2);
    s.beat___13045 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.isrest___12978);
    if (!r0) { step = 29; continue; }
    s.tmp_0 = music_rest__P2539_mk(s);
    r0 = (s.currentDuration___12969 * s.beat___13045);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 45; s.pc = 41; return s.tmp_0;
  case 41:
    r0 = s.retval;
    { step = 30; continue; }
  case 29:
    s.tmp_0 = music_playTone__P2537_mk(s);
    s.tmp_1 = music_getFrequencyForNote__P2554_mk(s);
    s.tmp_1.arg0 = s.currentOctave___12973;
    s.tmp_1.arg1 = s.note___12977;
    s.callLocIdx = 46; s.pc = 43; return s.tmp_1;
  case 43:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    r0 = (s.currentDuration___12969 * s.beat___13045);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 47; s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
  case 30:
    r0 = (s.arg0).fields["currentDuration"] = (s.currentDuration___12969);
    r0 = (s.arg0).fields["currentOctave"] = (s.currentOctave___12973);
    r0 = s.arg0.fields["repeating"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 31; continue; }
    r0 = s.tmp_0;
    { step = 32; continue; }
  case 31:
    s.tmp_1 = r0 = s.currentPos___12965;
    r0 = s.arg0.fields["melodyArray"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__length(s.tmp_4);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
  case 32:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    s.repeating___13068 = (s.tmp_5);
    r0 = pxsim_numops_toBoolDecr(s.repeating___13068);
    if (!r0) { step = 33; continue; }
    r0 = 0;
    { step = 34; continue; }
  case 33:
    r0 = (s.currentPos___12965 + 1);
  case 34:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = (s.arg0).fields["currentPos"] = (s.tmp_0);
    r0 = s.arg0.fields["background"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | 1);
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(2000, s.tmp_0, 1);
    r0 = pxsim_numops_toBoolDecr(s.repeating___13068);
    if (!r0) { step = 35; continue; }
    r0 = s.arg0.fields["background"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | 4);
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(2000, s.tmp_0, 1);
  case 35:
  case 36:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_playNextNote__P4021.info = {"start":17178,"length":2354,"line":500,"column":4,"endLine":547,"endColumn":5,"fileName":"pxt_modules/core/music.ts","functionName":"playNextNote","argumentNames":["melody"]}

function music_playNextNote__P4021_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_playNextNote__P4021, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  currNote___12962: undefined,
  currentPos___12965: undefined,
  currentDuration___12969: undefined,
  currentOctave___12973: undefined,
  note___12977: undefined,
  isrest___12978: undefined,
  beatPos___12979: undefined,
  parsingOctave___12980: undefined,
  prevNote___12981: undefined,
  pos___12982: undefined,
  noteChar___12988: undefined,
  beat___13045: undefined,
  repeating___13068: undefined,
  arg0: undefined,
} }





function music_getFrequencyForNote__P2554(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = r0 = globals.freqs___4014;
    s.tmp_4 = r0 = s.arg1;
    r0 = (s.arg0 - 1);
    s.tmp_6 = r0;
    r0 = (12 * s.tmp_6);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 + s.tmp_5);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 * 2);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
    return leave(s, r0)
  default: oops()
} } }
music_getFrequencyForNote__P2554.info = {"start":17005,"length":167,"line":496,"column":4,"endLine":498,"endColumn":5,"fileName":"pxt_modules/core/music.ts","functionName":"getFrequencyForNote","argumentNames":["octave","note"]}

function music_getFrequencyForNote__P2554_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_getFrequencyForNote__P2554, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function music_playTone__P2537(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(globals._playTone___4015);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = lambda_3_mk(s);
    s.tmp_0.argL = globals._playTone___4015;
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 29; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    setupResume(s, 4);
    pxsim.pins.analogPitch(s.arg0, s.arg1);
    checkResumeConsumed();
    return;
  case 4:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_playTone__P2537.info = {"start":6330,"length":164,"line":200,"column":4,"endLine":203,"endColumn":5,"fileName":"pxt_modules/core/music.ts","functionName":"playTone","argumentNames":["frequency","ms"]}

function music_playTone__P2537_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_playTone__P2537, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function music_Melody_nextNote__P4024(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.currentNote___13132 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, music_Melody__C4022_VT)) failedCast(r0);
    r0 = s.arg0.fields["melodyArray"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["currentPos"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, s.tmp_1);
    s.currentNote___13132 = (r0);
    r0 = s.currentNote___13132;
    return leave(s, r0)
  default: oops()
} } }
music_Melody_nextNote__P4024.info = {"start":20498,"length":129,"line":572,"column":8,"endLine":575,"endColumn":9,"fileName":"pxt_modules/core/music.ts","functionName":"nextNote","argumentNames":["this"]}

function music_Melody_nextNote__P4024_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_Melody_nextNote__P4024, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  currentNote___13132: undefined,
  arg0: undefined,
} }





function music_Melody_hasNextNote__P4023(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, music_Melody__C4022_VT)) failedCast(r0);
    r0 = s.arg0.fields["repeating"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["currentPos"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["melodyArray"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    return leave(s, r0)
  default: oops()
} } }
music_Melody_hasNextNote__P4023.info = {"start":20383,"length":105,"line":568,"column":8,"endLine":570,"endColumn":9,"fileName":"pxt_modules/core/music.ts","functionName":"hasNextNote","argumentNames":["this"]}

function music_Melody_hasNextNote__P4023_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_Melody_hasNextNote__P4023, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function music_Melody_constructor__P4025(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, music_Melody__C4022_VT)) failedCast(r0);
    r0 = (s.arg0).fields["melodyArray"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.arg2 & 10);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["repeating"] = (s.tmp_1);
    r0 = (s.arg2 & 12);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 240;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["background"] = (s.tmp_1);
    r0 = (s.arg0).fields["currentDuration"] = (4);
    r0 = (s.arg0).fields["currentOctave"] = (4);
    r0 = (s.arg0).fields["currentPos"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_Melody_constructor__P4025.info = {"start":19879,"length":494,"line":559,"column":8,"endLine":566,"endColumn":9,"fileName":"pxt_modules/core/music.ts","functionName":"inline","argumentNames":["this","melodyArray","options"]}

function music_Melody_constructor__P4025_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_Melody_constructor__P4025, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function music_init__P4018(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = (globals.beatsPerMinute___4012 <= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    globals.beatsPerMinute___4012 = (120);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_init__P4018.info = {"start":7752,"length":78,"line":247,"column":4,"endLine":249,"endColumn":5,"fileName":"pxt_modules/core/music.ts","functionName":"init","argumentNames":[]}

function music_init__P4018_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_init__P4018, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function music_rest__P2539(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = music_playTone__P2537_mk(s);
    s.tmp_0.arg0 = 0;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 30; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
music_rest__P2539.info = {"start":7200,"length":71,"line":226,"column":4,"endLine":228,"endColumn":5,"fileName":"pxt_modules/core/music.ts","functionName":"rest","argumentNames":["ms"]}

function music_rest__P2539_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: music_rest__P2539, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_BuzzerServer_handlePacket__P3904(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.oldVol___13186 = undefined;
    s.vol___13189 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_BuzzerServer__C3902_VT)) failedCast(r0);
    r0 = pxsim.music.volume();
    s.oldVol___13186 = (r0);
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 1;
    s.tmp_2.arg3 = globals.Volume___3747;
    r0 = (s.oldVol___13186 / 255);
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 952; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 * 255);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 | 0);
    s.vol___13189 = (r0);
    r0 = (s.vol___13189 !== s.oldVol___13186);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.music.setVolume(s.vol___13189);
  case 1:
  case 2:
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(128, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    s.tmp_2 = servers_BuzzerServer_handlePlayToneCommand__P4436_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 954; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
    { step = 5; continue; }
  case 4:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 955; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BuzzerServer_handlePacket__P3904.info = {"start":154,"length":761,"line":6,"column":8,"endLine":29,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitBuzzer.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function servers_BuzzerServer_handlePacket__P3904_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BuzzerServer_handlePacket__P3904, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  oldVol___13186: undefined,
  vol___13189: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_BuzzerServer_handlePlayToneCommand__P4436(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.period___13222 = undefined;
    s.duty___13223 = undefined;
    s.duration___13224 = undefined;
    s.frequency___13225 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_BuzzerServer__C3902_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = globals.PlayTone___3752;
    s.callLocIdx = 956; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.period___13222 = (r0);
    r0 = pxsim_Array__getAt(s.tmp_0, 1);
    s.duty___13223 = (r0);
    r0 = pxsim_Array__getAt(s.tmp_0, 2);
    s.duration___13224 = (r0);
    r0 = (1000000 / s.period___13222);
    s.frequency___13225 = (r0);
    s.tmp_0 = music_stopAllSounds__P2552_mk(s);
    s.callLocIdx = 957; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = music_playTone__P2537_mk(s);
    s.tmp_0.arg0 = s.frequency___13225;
    s.tmp_0.arg1 = s.duration___13224;
    s.callLocIdx = 958; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_BuzzerServer_handlePlayToneCommand__P4436.info = {"start":925,"length":323,"line":31,"column":8,"endLine":37,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitBuzzer.ts","functionName":"handlePlayToneCommand","argumentNames":["this","pkt"]}

function servers_BuzzerServer_handlePlayToneCommand__P4436_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BuzzerServer_handlePlayToneCommand__P4436, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  period___13222: undefined,
  duty___13223: undefined,
  duration___13224: undefined,
  frequency___13225: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_RadioServer_handlePacket__P3899(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.oldEnabled___13235 = undefined;
    s.oldGroup___13256 = undefined;
    s.oldTransmissionPower___13276 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    r0 = s.arg0.fields["enabled"];
    s.oldEnabled___13235 = (r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegBool__P4195_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 1;
    r0 = s.arg0.fields["enabled"];
    s.tmp_2.arg3 = r0;
    s.callLocIdx = 915; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["enabled"] = (s.tmp_1);
    r0 = s.arg0.fields["enabled"];
    s.tmp_1 = r0;
    r0 = (s.oldEnabled___13235 != s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["enabled"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.radio.off();
    { step = 2; continue; }
  case 1:
    r0 = pxsim.radio.on();
  case 2:
  case 3:
  case 4:
    r0 = s.arg0.fields["group"];
    s.oldGroup___13256 = (r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 128;
    s.tmp_2.arg3 = globals.Group___3706;
    r0 = s.arg0.fields["group"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 916; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["group"] = (s.tmp_1);
    r0 = s.arg0.fields["group"];
    s.tmp_1 = r0;
    r0 = (s.oldGroup___13256 !== s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg0.fields["group"];
    s.tmp_2 = r0;
    r0 = pxsim.radio.setGroup(s.tmp_2);
  case 5:
  case 6:
    r0 = s.arg0.fields["transmissionPower"];
    s.oldTransmissionPower___13276 = (r0);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 129;
    s.tmp_2.arg3 = globals.TransmissionPower___3707;
    r0 = s.arg0.fields["transmissionPower"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 917; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["transmissionPower"] = (s.tmp_1);
    r0 = s.arg0.fields["transmissionPower"];
    s.tmp_1 = r0;
    r0 = (s.oldTransmissionPower___13276 !== s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.arg0.fields["transmissionPower"];
    s.tmp_2 = r0;
    r0 = pxsim.radio.setTransmitPower(s.tmp_2);
  case 7:
  case 8:
    r0 = s.arg1.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 4, 14);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(131, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq(128, s.tmp_0);
    if (r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = s.tmp_0;
    { step = 13; continue; }
  case 9:
    s.tmp_2 = servers_RadioServer_handleSendBuffer__P4430_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 919; s.pc = 18; return s.tmp_2;
  case 18:
    r0 = s.retval;
    { step = 14; continue; }
  case 10:
    s.tmp_0 = servers_RadioServer_handleSendNumber__P4431_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 920; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    { step = 14; continue; }
  case 11:
    s.tmp_0 = servers_RadioServer_handleSendString__P4432_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 921; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    { step = 14; continue; }
  case 12:
    s.tmp_0 = servers_RadioServer_handleSendValue__P4433_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 922; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    { step = 14; continue; }
  case 13:
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 923; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
  case 14:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_handlePacket__P3899.info = {"start":761,"length":1836,"line":24,"column":8,"endLine":73,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function servers_RadioServer_handlePacket__P3899_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_handlePacket__P3899, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  oldEnabled___13235: undefined,
  oldGroup___13256: undefined,
  oldTransmissionPower___13276: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_RadioServer_handleSendValue__P4433(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.value___13320 = undefined;
    s.name___13321 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = globals.SendValue___3720;
    s.callLocIdx = 948; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.value___13320 = (r0);
    r0 = pxsim_Array__getAt(s.tmp_0, 1);
    s.name___13321 = (r0);
    s.tmp_0 = radio_sendValue__P3645_mk(s);
    s.tmp_0.arg0 = s.name___13321;
    s.tmp_0.arg1 = s.value___13320;
    s.callLocIdx = 949; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_handleSendValue__P4433.info = {"start":4911,"length":197,"line":134,"column":8,"endLine":137,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"handleSendValue","argumentNames":["this","pkt"]}

function servers_RadioServer_handleSendValue__P4433_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_handleSendValue__P4433, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  value___13320: undefined,
  name___13321: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_sendValue__P3645(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.packet___13327 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.arg1 | 0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 === s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = radio_RadioPacket_mkPacket__P3629_mk(s);
    s.tmp_3.arg0 = 1;
    s.callLocIdx = 811; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.packet___13327 = (r0);
    { step = 2; continue; }
  case 1:
    s.tmp_0 = radio_RadioPacket_mkPacket__P3629_mk(s);
    s.tmp_0.arg0 = 5;
    s.callLocIdx = 812; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.packet___13327 = (r0);
  case 2:
    s.tmp_0 = radio_RadioPacket_numberPayload__P3639_mk(s);
    s.tmp_0.arg0 = s.packet___13327;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 813; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = radio_RadioPacket_stringPayload__P3637_mk(s);
    s.tmp_0.arg0 = s.packet___13327;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 814; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.tmp_0 = radio_sendPacket__P4374_mk(s);
    s.tmp_0.arg0 = s.packet___13327;
    s.callLocIdx = 815; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_sendValue__P3645.info = {"start":10801,"length":403,"line":308,"column":4,"endLine":321,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"sendValue","argumentNames":["name","value"]}

function radio_sendValue__P3645_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_sendValue__P3645, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  packet___13327: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_sendPacket__P4374(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = radio_RadioPacket_time__P3633_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 822; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = pxsim_numops_toBoolDecr(globals.transmittingSerial___4364);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.deviceSerialNumber();
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.tmp_1 = radio_RadioPacket_serial__P3635_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 823; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    setupResume(s, 5);
    pxsim.radio.sendRawPacket(s.tmp_0);
    checkResumeConsumed();
    return;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_sendPacket__P4374.info = {"start":12617,"length":209,"line":363,"column":4,"endLine":367,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"sendPacket","argumentNames":["packet"]}

function radio_sendPacket__P4374_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_sendPacket__P4374, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function radio_RadioPacket_serial__P3635(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 5, 5, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_RadioPacket_serial__P3635.info = {"start":7156,"length":98,"line":208,"column":8,"endLine":210,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"serial","argumentNames":["this","val"]}

function radio_RadioPacket_serial__P3635_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_serial__P3635, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_RadioPacket_time__P3633(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 5, 1, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_RadioPacket_time__P3633.info = {"start":6951,"length":96,"line":200,"column":8,"endLine":202,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"time","argumentNames":["this","val"]}

function radio_RadioPacket_time__P3633_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_time__P3633, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_RadioPacket_stringPayload__P3637(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.offset___13378 = undefined;
    s.buf___13384 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    s.tmp_0 = radio_getStringOffset__P4376_mk(s);
    r0 = s.arg0.fields["data"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 0);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 800; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.offset___13378 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.offset___13378);
    if (!r0) { step = 1; continue; }
    s.tmp_1 = radio_truncateString__P4375_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_2 = radio_getMaxStringLength__P4377_mk(s);
    r0 = s.arg0.fields["data"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_3, 0);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 802; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 803; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_0);
    s.buf___13384 = (r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    s.tmp_1 = r0 = s.offset___13378;
    r0 = pxsim.BufferMethods.length(s.buf___13384);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, s.tmp_1, s.tmp_2);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = (s.offset___13378 + 1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, s.tmp_1, s.buf___13384);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_RadioPacket_stringPayload__P3637.info = {"start":7475,"length":367,"line":217,"column":8,"endLine":224,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"stringPayload","argumentNames":["this","val"]}

function radio_RadioPacket_stringPayload__P3637_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_stringPayload__P3637, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  offset___13378: undefined,
  buf___13384: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_getMaxStringLength__P4377(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 1:
    r0 = 18;
    { step = 5; continue; }
  case 2:
  case 3:
    r0 = 8;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
    { step = 5; continue; }
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
radio_getMaxStringLength__P4377.info = {"start":13587,"length":366,"line":394,"column":4,"endLine":404,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"getMaxStringLength","argumentNames":["packetType"]}

function radio_getMaxStringLength__P4377_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_getMaxStringLength__P4377, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function radio_truncateString__P4375(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buff___13423 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = helpers_stringSubstr__P2009_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 824; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.arg0 = (r0);
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    s.buff___13423 = (r0);
  case 1:
    r0 = pxsim.BufferMethods.length(s.buff___13423);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
    s.tmp_2 = helpers_stringSubstr__P2009_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 0;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - 1);
    s.tmp_2.arg2 = r0;
    s.callLocIdx = 825; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.arg0 = (r0);
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    s.buff___13423 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = s.arg0;
    return leave(s, r0)
  default: oops()
} } }
radio_truncateString__P4375.info = {"start":12832,"length":322,"line":369,"column":4,"endLine":379,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"truncateString","argumentNames":["str","bytes"]}

function radio_truncateString__P4375_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_truncateString__P4375, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buff___13423: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_RadioPacket_numberPayload__P3639(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    r0 = s.arg0.fields["data"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 0);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 1:
  case 2:
    r0 = s.arg0.fields["data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_2, 5, 9, s.arg1);
    { step = 5; continue; }
  case 3:
  case 4:
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 14, 9, s.arg1);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_RadioPacket_numberPayload__P3639.info = {"start":8331,"length":500,"line":238,"column":8,"endLine":249,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"numberPayload","argumentNames":["this","val"]}

function radio_RadioPacket_numberPayload__P3639_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_numberPayload__P3639, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_RadioPacket_mkPacket__P3629(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___13466 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(radio_RadioPacket__C3627_VT);
    s.tmp_0 = r0;
    s.tmp_1 = radio_RadioPacket_constructor__P4373_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.callLocIdx = 796; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.res___13466 = (s.tmp_0);
    r0 = s.res___13466.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 0, s.arg0);
    r0 = s.res___13466;
    return leave(s, r0)
  default: oops()
} } }
radio_RadioPacket_mkPacket__P3629.info = {"start":6340,"length":159,"line":178,"column":8,"endLine":182,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"mkPacket","argumentNames":["packetType"]}

function radio_RadioPacket_mkPacket__P3629_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_mkPacket__P3629, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  res___13466: undefined,
  arg0: undefined,
} }





function servers_RadioServer_handleSendString__P4432(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.s___13482 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = globals.SendString___3718;
    s.callLocIdx = 946; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.s___13482 = (r0);
    s.tmp_0 = radio_sendString__P3646_mk(s);
    s.tmp_0.arg0 = s.s___13482;
    s.callLocIdx = 947; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_handleSendString__P4432.info = {"start":4730,"length":172,"line":130,"column":8,"endLine":133,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"handleSendString","argumentNames":["this","pkt"]}

function servers_RadioServer_handleSendString__P4432_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_handleSendString__P4432, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  s___13482: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_sendString__P3646(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.packet___13486 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = radio_RadioPacket_mkPacket__P3629_mk(s);
    s.tmp_0.arg0 = 2;
    s.callLocIdx = 816; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.packet___13486 = (r0);
    s.tmp_0 = radio_RadioPacket_stringPayload__P3637_mk(s);
    s.tmp_0.arg0 = s.packet___13486;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 817; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = radio_sendPacket__P4374_mk(s);
    s.tmp_0.arg0 = s.packet___13486;
    s.callLocIdx = 818; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_sendString__P3646.info = {"start":11538,"length":180,"line":332,"column":4,"endLine":336,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"sendString","argumentNames":["value"]}

function radio_sendString__P3646_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_sendString__P3646, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  packet___13486: undefined,
  arg0: undefined,
} }





function servers_RadioServer_handleSendNumber__P4431(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.n___13502 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = globals.SendNumber___3719;
    s.callLocIdx = 944; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.n___13502 = (r0);
    s.tmp_0 = radio_sendNumber__P3644_mk(s);
    s.tmp_0.arg0 = s.n___13502;
    s.callLocIdx = 945; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_handleSendNumber__P4431.info = {"start":4549,"length":172,"line":126,"column":8,"endLine":129,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"handleSendNumber","argumentNames":["this","pkt"]}

function servers_RadioServer_handleSendNumber__P4431_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_handleSendNumber__P4431, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  n___13502: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_sendNumber__P3644(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.packet___13506 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = r0 = s.arg0;
    r0 = (s.arg0 | 0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 === s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = radio_RadioPacket_mkPacket__P3629_mk(s);
    s.tmp_3.arg0 = 0;
    s.callLocIdx = 807; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.packet___13506 = (r0);
    { step = 2; continue; }
  case 1:
    s.tmp_0 = radio_RadioPacket_mkPacket__P3629_mk(s);
    s.tmp_0.arg0 = 4;
    s.callLocIdx = 808; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.packet___13506 = (r0);
  case 2:
    s.tmp_0 = radio_RadioPacket_numberPayload__P3639_mk(s);
    s.tmp_0.arg0 = s.packet___13506;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 809; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.tmp_0 = radio_sendPacket__P4374_mk(s);
    s.tmp_0.arg0 = s.packet___13506;
    s.callLocIdx = 810; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_sendNumber__P3644.info = {"start":9978,"length":348,"line":283,"column":4,"endLine":295,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"sendNumber","argumentNames":["value"]}

function radio_sendNumber__P3644_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_sendNumber__P3644, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  packet___13506: undefined,
  arg0: undefined,
} }





function servers_RadioServer_handleSendBuffer__P4430(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.data___13529 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_RadioServer__C3893_VT)) failedCast(r0);
    s.tmp_1 = jacdac_JDPacket_jdunpack__P2914_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = globals.SendBuffer___3721;
    s.callLocIdx = 942; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.data___13529 = (r0);
    s.tmp_0 = radio_sendBuffer__P3647_mk(s);
    s.tmp_0.arg0 = s.data___13529;
    s.callLocIdx = 943; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_RadioServer_handleSendBuffer__P4430.info = {"start":4362,"length":178,"line":122,"column":8,"endLine":125,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitRadio.ts","functionName":"handleSendBuffer","argumentNames":["this","pkt"]}

function servers_RadioServer_handleSendBuffer__P4430_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_RadioServer_handleSendBuffer__P4430, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  data___13529: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function radio_sendBuffer__P3647(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.packet___13533 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = radio_RadioPacket_mkPacket__P3629_mk(s);
    s.tmp_0.arg0 = 3;
    s.callLocIdx = 819; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.packet___13533 = (r0);
    s.tmp_0 = radio_RadioPacket_bufferPayload__P3641_mk(s);
    s.tmp_0.arg0 = s.packet___13533;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 820; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.tmp_0 = radio_sendPacket__P4374_mk(s);
    s.tmp_0.arg0 = s.packet___13533;
    s.callLocIdx = 821; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_sendBuffer__P3647.info = {"start":11961,"length":176,"line":345,"column":4,"endLine":349,"endColumn":5,"fileName":"pxt_modules/radio/radio.ts","functionName":"sendBuffer","argumentNames":["msg"]}

function radio_sendBuffer__P3647_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_sendBuffer__P3647, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  packet___13533: undefined,
  arg0: undefined,
} }





function radio_RadioPacket_bufferPayload__P3641(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___13544 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, radio_RadioPacket__C3627_VT)) failedCast(r0);
    s.tmp_0 = Math_min__P2022_mk(s);
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = 19;
    s.callLocIdx = 806; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.len___13544 = (r0);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 9, s.len___13544);
    r0 = s.arg0.fields["data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.arg1, 0, s.len___13544);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 10, s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
radio_RadioPacket_bufferPayload__P3641.info = {"start":9006,"length":231,"line":256,"column":8,"endLine":260,"endColumn":9,"fileName":"pxt_modules/radio/radio.ts","functionName":"bufferPayload","argumentNames":["this","b"]}

function radio_RadioPacket_bufferPayload__P3641_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: radio_RadioPacket_bufferPayload__P3641, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___13544: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Math_min__P2022(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 <= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = s.arg1;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
Math_min__P2022.info = {"start":16779,"length":105,"line":565,"column":4,"endLine":568,"endColumn":5,"fileName":"pxt_modules/core/pxt-helpers.ts","functionName":"min","argumentNames":["a","b"]}

function Math_min__P2022_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_min__P2022, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_SensorServer_handlePacket__P3240(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.samples___13588 = undefined;
    s.state___13606 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorServer__C3236_VT)) failedCast(r0);
    r0 = (s.arg0).fields["stateUpdated"] = (false);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 4;
    s.tmp_2.arg3 = globals.StreamingInterval___3027;
    r0 = s.arg0.fields["streamingInterval"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 242; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["streamingInterval"] = (s.tmp_1);
    s.tmp_0 = jacdac_Server_handleRegValue__P4194_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 3;
    s.tmp_0.arg3 = globals.StreamingSamples___3026;
    r0 = s.arg0.fields["streamingSamples"];
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 243; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.samples___13588 = (r0);
    s.tmp_0 = jacdac_SensorServer_setStreaming__P3241_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.samples___13588;
    s.callLocIdx = 244; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.tmp_1 = jacdac_JDPacket_isRegGet__P2907_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 245; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = jacdac_JDPacket_regCode__P2908_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 246; s.pc = 11; return s.tmp_3;
  case 11:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == 257);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    s.tmp_5 = jacdac_SensorServer_readState__P4244_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 247; s.pc = 12; return s.tmp_5;
  case 12:
    r0 = s.retval;
    s.state___13606 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.state___13606);
    if (!r0) { step = 3; continue; }
    s.tmp_0 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_1.arg0 = 4353;
    s.tmp_1.arg1 = s.state___13606;
    s.callLocIdx = 248; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 249; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
  case 3:
  case 4:
    s.tmp_0 = jacdac_JDPacket_markHandled__P2889_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 250; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    { step = 6; continue; }
  case 5:
    s.tmp_0 = jacdac_SensorServer_handleCustomCommand__P4246_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 251; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_handlePacket__P3240.info = {"start":628,"length":1112,"line":20,"column":8,"endLine":48,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_SensorServer_handlePacket__P3240_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_handlePacket__P3240, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  samples___13588: undefined,
  state___13606: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_SensorServer_handleCustomCommand__P4246(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorServer__C3236_VT)) failedCast(r0);
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P2890_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 253; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_handleCustomCommand__P4246.info = {"start":1970,"length":97,"line":59,"column":8,"endLine":61,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"handleCustomCommand","argumentNames":["this","pkt"]}

function jacdac_SensorServer_handleCustomCommand__P4246_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_handleCustomCommand__P4246, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_SensorServer_readState__P4244(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorServer__C3236_VT)) failedCast(r0);
    s.tmp_1 = jacdac_Server_ready__P3455_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 252; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_SensorServer__C3236_v5_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_SensorServer__C3236_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.serializeState;
    s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_readState__P4244.info = {"start":1750,"length":105,"line":50,"column":8,"endLine":52,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"readState","argumentNames":["this"]}

function jacdac_SensorServer_readState__P4244_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_readState__P4244, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_SensorServer_serializeState__P4245(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorServer__C3236_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_serializeState__P4245.info = {"start":1885,"length":75,"line":55,"column":8,"endLine":57,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"serializeState","argumentNames":["this"]}

function jacdac_SensorServer_serializeState__P4245_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_serializeState__P4245, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Server_ready__P3455(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = jacdac_Server_disabled__P3454_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 456; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_4;
    { step = 4; continue; }
  case 3:
    r0 = s.arg0.fields["_statusCode"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = s.tmp_6;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Server_ready__P3455.info = {"start":15811,"length":183,"line":459,"column":8,"endLine":465,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"ready","argumentNames":["this"]}
jacdac_Server_ready__P3455.isGetter = true;

function jacdac_Server_ready__P3455_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_ready__P3455, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
} }





function jacdac_Server_disabled__P3454(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["intensityPackFormat"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["_intensity"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Server_disabled__P3454.info = {"start":15599,"length":90,"line":452,"column":8,"endLine":454,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"disabled","argumentNames":["this"]}
jacdac_Server_disabled__P3454.isGetter = true;

function jacdac_Server_disabled__P3454_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_disabled__P3454, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_SensorServer_setStreaming__P3241(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorServer__C3236_VT)) failedCast(r0);
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = jacdac_SensorServer_startStreaming__P4248_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 254; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    s.tmp_0 = jacdac_SensorServer_stopStreaming__P4249_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 255; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_setStreaming__P3241.info = {"start":2174,"length":140,"line":67,"column":8,"endLine":70,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"setStreaming","argumentNames":["this","samples"]}

function jacdac_SensorServer_setStreaming__P3241_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_setStreaming__P3241, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_SensorServer_stopStreaming__P4249(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorServer__C3236_VT)) failedCast(r0);
    r0 = s.arg0.fields["streamingSamples"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = jacdac_Server__C3447_v4_2_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "stopping";
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.log;
    s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    r0 = (s.arg0).fields["streamingSamples"] = (undefined);
    r0 = pxsim_pxtcore_mkAction(1, jacdac_SensorServer_stopStreaming_inline__P13663);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = pauseUntil__P2654_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = undefined;
    s.callLocIdx = 261; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_stopStreaming__P4249.info = {"start":3903,"length":243,"line":114,"column":8,"endLine":120,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"stopStreaming","argumentNames":["this"]}

function jacdac_SensorServer_stopStreaming__P4249_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_stopStreaming__P4249, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_SensorServer_stopStreaming_inline__P13663(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = s.caps[0].fields["streamingSamples"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 === 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_stopStreaming_inline__P13663.info = {"start":4088,"length":33,"line":118,"column":27,"endLine":118,"endColumn":60,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"inline","argumentNames":[]}

function jacdac_SensorServer_stopStreaming_inline__P13663_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_stopStreaming_inline__P13663, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function pauseUntil__P2654(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_2 = lambda_1_mk(s);
    s.tmp_2.argL = s.arg0;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.callLocIdx = 65; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
    { step = 7; continue; }
  case 3:
  case 4:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
    s.arg1 = (0);
  case 5:
  case 6:
    s.tmp_0 = control___queuePollEvent__P2653_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 66; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
pauseUntil__P2654.info = {"start":2224,"length":227,"line":73,"column":0,"endLine":77,"endColumn":1,"fileName":"pxt_modules/core/poll.ts","functionName":"pauseUntil","argumentNames":["condition","timeOut"]}

function pauseUntil__P2654_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pauseUntil__P2654, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control___queuePollEvent__P2653(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ev___13683 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(control_PollEvent__C4049_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_PollEvent_constructor__P4050_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = 1023;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1.arg2 = r0;
    r0 = pxsim.control.millis();
    s.tmp_1.arg3 = r0;
    s.tmp_1.arg4 = s.arg0;
    s.tmp_1.arg5 = s.arg1;
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1.arg6 = r0;
    s.callLocIdx = 63; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.ev___13683 = (s.tmp_0);
    r0 = pxsim_numops_toBoolDecr(globals._pollEventQueue___4052);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.ev___13683);
    globals._pollEventQueue___4052 = (s.tmp_2);
    s.tmp_0 = control_runInParallel__P2295_mk(s);
    s.tmp_0.arg0 = control_pollEvents__P4053;
    s.callLocIdx = 64; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array__push(globals._pollEventQueue___4052, s.ev___13683);
  case 2:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 3; continue; }
    r0 = s.ev___13683.fields["eid"];
    s.tmp_0 = r0;
    r0 = s.ev___13683.fields["vid"];
    s.tmp_1 = r0;
    r0 = pxsim.control.onEvent(s.tmp_0, s.tmp_1, s.arg2, 0);
    { step = 4; continue; }
  case 3:
    r0 = s.ev___13683.fields["eid"];
    s.tmp_0 = r0;
    r0 = s.ev___13683.fields["vid"];
    s.tmp_1 = r0;
    setupResume(s, 7);
    pxsim.control.waitForEvent(s.tmp_0, s.tmp_1);
    checkResumeConsumed();
    return;
  case 7:
    r0 = s.retval;
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control___queuePollEvent__P2653.info = {"start":1262,"length":758,"line":39,"column":4,"endLine":64,"endColumn":5,"fileName":"pxt_modules/core/poll.ts","functionName":"__queuePollEvent","argumentNames":["timeOut","condition","handler"]}

function control___queuePollEvent__P2653_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control___queuePollEvent__P2653, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  ev___13683: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function control_pollEvents__P4053(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___13727 = undefined;
    s.i___13730 = undefined;
    s.ev___13736 = undefined;
  case 1:
    r0 = pxsim_Array__length(globals._pollEventQueue___4052);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = pxsim.control.millis();
    s.now___13727 = (r0);
    s.i___13730 = (0);
  case 2:
    s.tmp_1 = r0 = s.i___13730;
    r0 = pxsim_Array__length(globals._pollEventQueue___4052);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__getAt(globals._pollEventQueue___4052, s.i___13730);
    s.ev___13736 = (r0);
    s.tmp_1 = if_condition_1_mk(s);
    s.tmp_1.arg0 = s.ev___13736;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "condition"), 1);
      s.callLocIdx = 60; s.pc = 13; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["condition"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["condition"], 1); s.callLocIdx = 60; s.pc = 13; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 60; s.pc = 13; return s.tmp_1;; }
     else { s.callLocIdx = 60; s.pc = 13; return s.tmp_1; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 3:
    r0 = s.ev___13736.fields["timeOut"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 > 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.ev___13736.fields["start"];
    s.tmp_5 = r0;
    r0 = (s.now___13727 - s.tmp_5);
    s.tmp_4 = r0;
    r0 = s.ev___13736.fields["timeOut"];
    s.tmp_6 = r0;
    r0 = (s.tmp_4 > s.tmp_6);
  case 5:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 6:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 9; continue; }
    r0 = s.ev___13736.fields["eid"];
    s.tmp_9 = r0;
    r0 = s.ev___13736.fields["vid"];
    s.tmp_10 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_9, s.tmp_10, 1);
    r0 = s.ev___13736.fields["once"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_1 = helpers_arraySplice__P1991_mk(s);
    s.tmp_1.arg0 = globals._pollEventQueue___4052;
    s.tmp_1.arg1 = s.i___13730;
    s.tmp_1.arg2 = 1;
    s.callLocIdx = 61; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    r0 = (s.i___13730 - 1);
    s.i___13730 = (r0);
  case 7:
  case 8:
  case 9:
  case 10:
    r0 = (s.i___13730 + 1);
    s.i___13730 = (r0);
    { step = 2; continue; }
  case 11:
    s.tmp_0 = pause__P2226_mk(s);
    s.tmp_0.arg0 = 50;
    s.callLocIdx = 62; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    { step = 1; continue; }
  case 12:
    globals._pollEventQueue___4052 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_pollEvents__P4053.info = {"start":618,"length":638,"line":20,"column":4,"endLine":37,"endColumn":5,"fileName":"pxt_modules/core/poll.ts","functionName":"pollEvents","argumentNames":[]}

function control_pollEvents__P4053_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_pollEvents__P4053, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  now___13727: undefined,
  i___13730: undefined,
  ev___13736: undefined,
} }





function control_PollEvent_constructor__P4050(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.arg5 = (s.lambdaArgs[5]);
      s.arg6 = (s.lambdaArgs[6]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_PollEvent__C4049_VT)) failedCast(r0);
    r0 = (s.arg0).fields["eid"] = (s.arg1);
    r0 = (s.arg0).fields["vid"] = (s.arg2);
    r0 = (s.arg0).fields["start"] = (s.arg3);
    r0 = (s.arg0).fields["timeOut"] = (s.arg4);
    r0 = (s.arg0).fields["condition"] = (s.arg5);
    r0 = (s.arg0).fields["once"] = (s.arg6);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_PollEvent_constructor__P4050.info = {"start":239,"length":316,"line":8,"column":8,"endLine":15,"endColumn":9,"fileName":"pxt_modules/core/poll.ts","functionName":"inline","argumentNames":["this","eid","vid","start","timeOut","condition","once"]}

function control_PollEvent_constructor__P4050_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_PollEvent_constructor__P4050, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
  arg5: undefined,
  arg6: undefined,
} }





function jacdac_SensorServer_startStreaming__P4248(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SensorServer__C3236_VT)) failedCast(r0);
    r0 = s.arg0.fields["streamingSamples"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (s.arg0).fields["streamingSamples"] = (s.arg1);
    { step = 3; continue; }
  case 1:
  case 2:
    s.tmp_0 = jacdac_Server__C3447_v4_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "start";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = (s.arg0).fields["streamingSamples"] = (s.arg1);
    r0 = pxsim_pxtcore_mkAction(1, jacdac_SensorServer_startStreaming_inline__P13817);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = control_runInParallel__P2295_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 260; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_startStreaming__P4248.info = {"start":2324,"length":1569,"line":72,"column":8,"endLine":112,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"startStreaming","argumentNames":["this","samples"]}

function jacdac_SensorServer_startStreaming__P4248_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_startStreaming__P4248, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_SensorServer_startStreaming_inline__P13817(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.state___13830 = undefined;
  case 1:
    r0 = s.caps[0].fields["streamingSamples"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = s.caps[0].fields["streamingSamples"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
  case 3:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_3;
    { step = 5; continue; }
  case 4:
    r0 = s.caps[0].fields["running"];
  case 5:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 14; continue; }
    s.tmp_5 = jacdac_SensorServer_readState__P4244_mk(s);
    s.tmp_5.arg0 = s.caps[0];
    s.callLocIdx = 256; s.pc = 15; return s.tmp_5;
  case 15:
    r0 = s.retval;
    s.state___13830 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.state___13830);
    if (!r0) { step = 6; continue; }
    s.tmp_0 = jacdac_Server_sendReport__P4185_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_1 = jacdac_JDPacket_from__P2883_mk(s);
    s.tmp_1.arg0 = 4353;
    s.tmp_1.arg1 = s.state___13830;
    s.callLocIdx = 257; s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 258; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
  case 6:
  case 7:
    r0 = s.caps[0].fields["streamingInterval"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 8:
    r0 = s.caps[0].fields["streamingSamples"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === undefined);
  case 9:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 10; continue; }
    { step = 14; continue; }
  case 10:
  case 11:
    s.tmp_4 = pause__P2226_mk(s);
    r0 = s.caps[0].fields["streamingInterval"];
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 259; s.pc = 18; return s.tmp_4;
  case 18:
    r0 = s.retval;
    r0 = s.caps[0].fields["streamingSamples"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
    s.tmp_2 = r0 = s.caps[0];
    r0 = s.tmp_2.fields["streamingSamples"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["streamingSamples"] = (s.tmp_3);
  case 12:
  case 13:
    { step = 1; continue; }
  case 14:
    r0 = (s.caps[0]).fields["streamingSamples"] = (0);
    s.tmp_0 = jacdac_Server__C3447_v4_2_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "stopped";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C3447_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_SensorServer_startStreaming_inline__P13817.info = {"start":2635,"length":1247,"line":80,"column":34,"endLine":111,"endColumn":13,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"inline","argumentNames":[]}

function jacdac_SensorServer_startStreaming_inline__P13817_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SensorServer_startStreaming_inline__P13817, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  state___13830: undefined,
} }





function jacdac_Server_toString__P3467(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C3447_VT)) failedCast(r0);
    r0 = s.arg0.fields["instanceName"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_1 = jacdac_hexNum__P2876_mk(s);
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 8;
    s.callLocIdx = 518; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("server:", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ".");
    s.tmp_3 = r0;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_6);
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_toString__P3467.info = {"start":23967,"length":166,"line":709,"column":8,"endLine":713,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_Server_toString__P3467_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_toString__P3467, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
} }





function servers_SoundLevelServer_serializeState__P3869(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.soundLevel___13878 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_SoundLevelServer__C3861_VT)) failedCast(r0);
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.input.soundLevel();
    s.tmp_1 = r0;
    r0 = (s.tmp_1 / 255);
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.soundLevel___13878 = (s.tmp_2);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.soundLevel___13878);
    s.tmp_1 = jacdac_jdpack__P2934_mk(s);
    s.tmp_1.arg0 = globals.SoundLevel___3804;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 872; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
servers_SoundLevelServer_serializeState__P3869.info = {"start":2330,"length":206,"line":68,"column":8,"endLine":71,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitSound.ts","functionName":"serializeState","argumentNames":["this"]}

function servers_SoundLevelServer_serializeState__P3869_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_SoundLevelServer_serializeState__P3869, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  soundLevel___13878: undefined,
  arg0: undefined,
} }





function jacdac_SimpleSensorServer_serializeState__P3251(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.v___13891 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_SimpleSensorServer__C3246_VT)) failedCast(r0);
    s.tmp_0 = if_stateReader_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "stateReader"), 1);
      s.callLocIdx = 271; s.pc = 4; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["stateReader"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["stateReader"], 1); s.callLocIdx = 271; s.pc = 4; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 271; s.pc = 4; return s.tmp_0;; }
     else { s.callLocIdx = 271; s.pc = 4; return s.tmp_0; }
    }
  case 4:
    r0 = s.retval;
    s.v___13891 = (r0);
    r0 = (s.v___13891 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = undefined;
    { step = 3; continue; }
  case 1:
  case 2:
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.v___13891);
    s.tmp_2 = jacdac_jdpack__P2934_mk(s);
    r0 = s.arg0.fields["packFormat"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_1;
    s.callLocIdx = 272; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac_SimpleSensorServer_serializeState__P3251.info = {"start":5987,"length":174,"line":176,"column":8,"endLine":180,"endColumn":9,"fileName":"pxt_modules/jacdac/sensor/server.ts","functionName":"serializeState","argumentNames":["this"]}

function jacdac_SimpleSensorServer_serializeState__P3251_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_SimpleSensorServer_serializeState__P3251, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  v___13891: undefined,
  arg0: undefined,
} }





function servers_AccelerometerServer_serializeState__P3848(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ax___13904 = undefined;
    s.ay___13909 = undefined;
    s.az___13914 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AccelerometerServer__C3845_VT)) failedCast(r0);
    r0 = pxsim.input.acceleration(0);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 / 1000);
    s.ax___13904 = (r0);
    r0 = pxsim.input.acceleration(1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 / 1000);
    s.ay___13909 = (r0);
    r0 = pxsim.input.acceleration(2);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 / 1000);
    s.az___13914 = (r0);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.ax___13904);
    r0 = pxsim_Array__push(s.tmp_0, s.ay___13909);
    r0 = pxsim_Array__push(s.tmp_0, s.az___13914);
    s.tmp_1 = jacdac_jdpack__P2934_mk(s);
    s.tmp_1.arg0 = globals.Forces___3680;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 839; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
servers_AccelerometerServer_serializeState__P3848.info = {"start":1396,"length":306,"line":35,"column":8,"endLine":40,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitAccel.ts","functionName":"serializeState","argumentNames":["this"]}

function servers_AccelerometerServer_serializeState__P3848_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AccelerometerServer_serializeState__P3848, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  ax___13904: undefined,
  ay___13909: undefined,
  az___13914: undefined,
  arg0: undefined,
} }





function servers_BaseButton_serializeState__P4396(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pressed___13927 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_BaseButton__C4391_VT)) failedCast(r0);
    s.tmp_0 = servers_BaseButton__C4391_v6_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, servers_BaseButton__C4391_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.isPressed;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.pressed___13927 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.pressed___13927);
    if (!r0) { step = 1; continue; }
    r0 = 65535;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_0);
    s.tmp_2 = jacdac_jdpack__P2934_mk(s);
    s.tmp_2.arg0 = globals.Pressure___3732;
    s.tmp_2.arg1 = s.tmp_1;
    s.callLocIdx = 855; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
servers_BaseButton_serializeState__P4396.info = {"start":2601,"length":207,"line":71,"column":8,"endLine":76,"endColumn":9,"fileName":"pxt_modules/jacdac-microbit/microbitButtons.ts","functionName":"serializeState","argumentNames":["this"]}

function servers_BaseButton_serializeState__P4396_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_BaseButton_serializeState__P4396, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  pressed___13927: undefined,
  arg0: undefined,
} }




function lambda_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_forceSimulators_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_buttonA_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function servers_BaseButton__C4391_v3_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_buttonB_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_buttonLogo_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_touchP0_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_touchP1_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_touchP2_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_temperature_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Server__C3447_v3_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_accelerometer_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function servers_AccelerometerServer__C3845_v3_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_soundLevel_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_radio_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function servers_RadioServer__C3893_v3_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_screen_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_lightLevel_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_soundPlayer_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_buzzer_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function lambda_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function lambda_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function lambda_4_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }


function if_instanceName_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_variant_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_statusCode_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_intensityPackFormat_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_valuePackFormat_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_intensity_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_value_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_calibrate_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_constants_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_minReading_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_maxReading_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_readingError_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_streamingInterval_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Server__C3447_v0_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_Client__C3496_v0_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_Server__C3447_v2_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_packFormat_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Server__C3447_v1_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_code_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_sendEvent_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_Server__C3447_v4_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function servers_BaseButton__C4391_v6_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_logger_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_disableBrain_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_disableBrain_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_disableRoleManager_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_proxyMode_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_disableLogger_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_noWait_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Client__C3496_v1_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_digitalWrite_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_setPull_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_digitalRead_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_SensorServer__C3236_v5_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_condition_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_stateReader_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }

const jacdac_EventSource__C3574_VT = mkVTable({
  name: "EventSource",
  numFields: 1,
  classNo: 16,
  lastSubtypeNo: 38,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_Bus__C3408_VT = mkVTable({
  name: "Bus",
  numFields: 13,
  classNo: 17,
  lastSubtypeNo: 17,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "servers": null,
    "set/servers": null,
    "devices": null,
    "set/devices": null,
    "_myDevice": null,
    "set/_myDevice": null,
    "restartCounter": null,
    "set/restartCounter": null,
    "resetIn": null,
    "set/resetIn": null,
    "autoBindCnt": null,
    "set/autoBindCnt": null,
    "_eventCounter": null,
    "set/_eventCounter": null,
    "controlServer": null,
    "set/controlServer": null,
    "proxyMode": null,
    "set/proxyMode": null,
    "unattachedClients": null,
    "set/unattachedClients": null,
    "allClients": null,
    "set/allClients": null,
    "_refreshing": null,
    "set/_refreshing": null,
    "running": jacdac_Bus_running__P3415,
    "start": jacdac_Bus_start__P3416,
    "addServer": jacdac_Bus_addServer__P3417,
    "gcDevices": jacdac_Bus_gcDevices__P4278,
    "selfDevice": jacdac_Bus_selfDevice__P3418,
    "mkEventCmd": jacdac_Bus_mkEventCmd__P3419,
    "clearAttachCache": jacdac_Bus_clearAttachCache__P3420,
    "isClient": jacdac_Bus_isClient__P3421,
    "queueAnnounce": jacdac_Bus_queueAnnounce__P3422,
    "detachClient": jacdac_Bus_detachClient__P3423,
    "attachClient": jacdac_Bus_attachClient__P3424,
    "startClient": jacdac_Bus_startClient__P3425,
    "reattach": jacdac_Bus_reattach__P3427,
    "processPacket": jacdac_Bus_processPacket__P3428,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_Server__C3447_VT = mkVTable({
  name: "Server",
  numFields: 16,
  classNo: 18,
  lastSubtypeNo: 35,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_Server_handlePacket__P3463,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_Server_handlePacket__P3463,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
  toStringMethod: jacdac_Server_toString__P3467,
});
const jacdac_SensorServer__C3236_VT = mkVTable({
  name: "SensorServer",
  numFields: 18,
  classNo: 19,
  lastSubtypeNo: 26,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "serializeState": jacdac_SensorServer_serializeState__P4245,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "streamingInterval": null,
    "set/streamingInterval": null,
    "streamingSamples": null,
    "set/streamingSamples": null,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "readState": jacdac_SensorServer_readState__P4244,
    "serializeState": jacdac_SensorServer_serializeState__P4245,
    "handleCustomCommand": jacdac_SensorServer_handleCustomCommand__P4246,
    "setStreaming": jacdac_SensorServer_setStreaming__P3241,
    "startStreaming": jacdac_SensorServer_startStreaming__P4248,
    "stopStreaming": jacdac_SensorServer_stopStreaming__P4249,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const servers_BaseButton__C4391_VT = mkVTable({
  name: "BaseButton",
  numFields: 24,
  classNo: 20,
  lastSubtypeNo: 23,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": servers_BaseButton_start__P4393,
    "log": jacdac_Server_log__P4199,
    "serializeState": servers_BaseButton_serializeState__P4396,
    "isPressed": servers_BaseButton_isPressed__P4394,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "streamingInterval": null,
    "set/streamingInterval": null,
    "streamingSamples": null,
    "set/streamingSamples": null,
    "pressed": null,
    "set/pressed": null,
    "prevPressed": null,
    "set/prevPressed": null,
    "nextHold": null,
    "set/nextHold": null,
    "pressTime": null,
    "set/pressTime": null,
    "nextSample": null,
    "set/nextSample": null,
    "button": null,
    "set/button": null,
    "start": servers_BaseButton_start__P4393,
    "isPressed": servers_BaseButton_isPressed__P4394,
    "update": servers_BaseButton_update__P4395,
    "serializeState": servers_BaseButton_serializeState__P4396,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "readState": jacdac_SensorServer_readState__P4244,
    "handleCustomCommand": jacdac_SensorServer_handleCustomCommand__P4246,
    "setStreaming": jacdac_SensorServer_setStreaming__P3241,
    "startStreaming": jacdac_SensorServer_startStreaming__P4248,
    "stopStreaming": jacdac_SensorServer_stopStreaming__P4249,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const servers_AccelerometerServer__C3845_VT = mkVTable({
  name: "AccelerometerServer",
  numFields: 19,
  classNo: 24,
  lastSubtypeNo: 24,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": servers_AccelerometerServer_start__P3847,
    "log": jacdac_Server_log__P4199,
    "serializeState": servers_AccelerometerServer_serializeState__P3848,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "streamingInterval": null,
    "set/streamingInterval": null,
    "streamingSamples": null,
    "set/streamingSamples": null,
    "lastEvent": null,
    "set/lastEvent": null,
    "start": servers_AccelerometerServer_start__P3847,
    "serializeState": servers_AccelerometerServer_serializeState__P3848,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "readState": jacdac_SensorServer_readState__P4244,
    "handleCustomCommand": jacdac_SensorServer_handleCustomCommand__P4246,
    "setStreaming": jacdac_SensorServer_setStreaming__P3241,
    "startStreaming": jacdac_SensorServer_startStreaming__P4248,
    "stopStreaming": jacdac_SensorServer_stopStreaming__P4249,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const servers_RadioServer__C3893_VT = mkVTable({
  name: "RadioServer",
  numFields: 19,
  classNo: 27,
  lastSubtypeNo: 27,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": servers_RadioServer_handlePacket__P3899,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": servers_RadioServer_start__P3898,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "enabled": null,
    "set/enabled": null,
    "group": null,
    "set/group": null,
    "transmissionPower": null,
    "set/transmissionPower": null,
    "start": servers_RadioServer_start__P3898,
    "handlePacket": servers_RadioServer_handlePacket__P3899,
    "handleReceivedBuffer": servers_RadioServer_handleReceivedBuffer__P4427,
    "handleReceivedString": servers_RadioServer_handleReceivedString__P4428,
    "handleReceivedNumber": servers_RadioServer_handleReceivedNumber__P4429,
    "handleSendBuffer": servers_RadioServer_handleSendBuffer__P4430,
    "handleSendNumber": servers_RadioServer_handleSendNumber__P4431,
    "handleSendString": servers_RadioServer_handleSendString__P4432,
    "handleSendValue": servers_RadioServer_handleSendValue__P4433,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_EventListener__C3571_VT = mkVTable({
  name: "EventListener",
  numFields: 2,
  classNo: 39,
  lastSubtypeNo: 39,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "key": null,
    "set/key": null,
    "handler": null,
    "set/handler": null,
  },
});
const servers_BuzzerServer__C3902_VT = mkVTable({
  name: "BuzzerServer",
  numFields: 16,
  classNo: 28,
  lastSubtypeNo: 28,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": servers_BuzzerServer_handlePacket__P3904,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "handlePacket": servers_BuzzerServer_handlePacket__P3904,
    "handlePlayToneCommand": servers_BuzzerServer_handlePlayToneCommand__P4436,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const servers_SoundPlayerServer__C3879_VT = mkVTable({
  name: "SoundPlayerServer",
  numFields: 16,
  classNo: 29,
  lastSubtypeNo: 29,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": servers_SoundPlayerServer_handlePacket__P3881,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "handlePacket": servers_SoundPlayerServer_handlePacket__P3881,
    "handlePlayCommand": servers_SoundPlayerServer_handlePlayCommand__P4418,
    "handleListSoundsCommand": servers_SoundPlayerServer_handleListSoundsCommand__P4419,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_SimpleSensorServer__C3246_VT = mkVTable({
  name: "SimpleSensorServer",
  numFields: 23,
  classNo: 25,
  lastSubtypeNo: 25,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_SimpleSensorServer_handlePacket__P3250,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "serializeState": jacdac_SimpleSensorServer_serializeState__P3251,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "streamingInterval": null,
    "set/streamingInterval": null,
    "streamingSamples": null,
    "set/streamingSamples": null,
    "packFormat": null,
    "set/packFormat": null,
    "stateReader": null,
    "set/stateReader": null,
    "minReading": null,
    "set/minReading": null,
    "maxReading": null,
    "set/maxReading": null,
    "readingError": null,
    "set/readingError": null,
    "handlePacket": jacdac_SimpleSensorServer_handlePacket__P3250,
    "serializeState": jacdac_SimpleSensorServer_serializeState__P3251,
    "readState": jacdac_SensorServer_readState__P4244,
    "handleCustomCommand": jacdac_SensorServer_handleCustomCommand__P4246,
    "setStreaming": jacdac_SensorServer_setStreaming__P3241,
    "startStreaming": jacdac_SensorServer_startStreaming__P4248,
    "stopStreaming": jacdac_SensorServer_stopStreaming__P4249,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const servers_ScreenServer__C3872_VT = mkVTable({
  name: "ScreenServer",
  numFields: 16,
  classNo: 30,
  lastSubtypeNo: 30,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": servers_ScreenServer_handlePacket__P3874,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "handlePacket": servers_ScreenServer_handlePacket__P3874,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const radio_RadioPacket__C3627_VT = mkVTable({
  name: "RadioPacket",
  numFields: 1,
  classNo: 40,
  lastSubtypeNo: 40,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "data": null,
    "set/data": null,
    "getPacket": radio_RadioPacket_getPacket__P3628,
    "mkPacket": radio_RadioPacket_mkPacket__P3629,
    "signal": radio_RadioPacket_signal__P3630,
    "packetType": radio_RadioPacket_packetType__P3631,
    "time": radio_RadioPacket_time__P3632,
    "set/time": radio_RadioPacket_time__P3633,
    "serial": radio_RadioPacket_serial__P3634,
    "set/serial": radio_RadioPacket_serial__P3635,
    "stringPayload": radio_RadioPacket_stringPayload__P3636,
    "set/stringPayload": radio_RadioPacket_stringPayload__P3637,
    "numberPayload": radio_RadioPacket_numberPayload__P3638,
    "set/numberPayload": radio_RadioPacket_numberPayload__P3639,
    "bufferPayload": radio_RadioPacket_bufferPayload__P3640,
    "set/bufferPayload": radio_RadioPacket_bufferPayload__P3641,
  },
});
const jacdac_JDPacket__C2877_VT = mkVTable({
  name: "JDPacket",
  numFields: 4,
  classNo: 41,
  lastSubtypeNo: 41,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_header": null,
    "set/_header": null,
    "_data": null,
    "set/_data": null,
    "timestamp": null,
    "set/timestamp": null,
    "_handled": null,
    "set/_handled": null,
    "fromBinary": jacdac_JDPacket_fromBinary__P2882,
    "from": jacdac_JDPacket_from__P2883,
    "onlyHeader": jacdac_JDPacket_onlyHeader__P2884,
    "fromFrameless": jacdac_JDPacket_fromFrameless__P2885,
    "jdpacked": jacdac_JDPacket_jdpacked__P2886,
    "handled": jacdac_JDPacket_handled__P2888,
    "markHandled": jacdac_JDPacket_markHandled__P2889,
    "possiblyNotImplemented": jacdac_JDPacket_possiblyNotImplemented__P2890,
    "deviceIdentifier": jacdac_JDPacket_deviceIdentifier__P2891,
    "set/deviceIdentifier": jacdac_JDPacket_deviceIdentifier__P2892,
    "packetFlags": jacdac_JDPacket_packetFlags__P2893,
    "multicommandClass": jacdac_JDPacket_multicommandClass__P2894,
    "size": jacdac_JDPacket_size__P2895,
    "requiresAck": jacdac_JDPacket_requiresAck__P2896,
    "set/requiresAck": jacdac_JDPacket_requiresAck__P2897,
    "serviceIndex": jacdac_JDPacket_serviceIndex__P2898,
    "set/serviceIndex": jacdac_JDPacket_serviceIndex__P2899,
    "crc": jacdac_JDPacket_crc__P2900,
    "serviceCommand": jacdac_JDPacket_serviceCommand__P2901,
    "set/serviceCommand": jacdac_JDPacket_serviceCommand__P2902,
    "isEvent": jacdac_JDPacket_isEvent__P2903,
    "eventCode": jacdac_JDPacket_eventCode__P2904,
    "eventCounter": jacdac_JDPacket_eventCounter__P2905,
    "isRegSet": jacdac_JDPacket_isRegSet__P2906,
    "isRegGet": jacdac_JDPacket_isRegGet__P2907,
    "regCode": jacdac_JDPacket_regCode__P2908,
    "data": jacdac_JDPacket_data__P2909,
    "set/data": jacdac_JDPacket_data__P2910,
    "jdunpack": jacdac_JDPacket_jdunpack__P2914,
    "getNumber": jacdac_JDPacket_getNumber__P2917,
    "isCommand": jacdac_JDPacket_isCommand__P2919,
    "isReport": jacdac_JDPacket_isReport__P2920,
    "toString": jacdac_JDPacket_toString__P2921,
    "_sendCore": jacdac_JDPacket__sendCore__P2923,
    "_sendReport": jacdac_JDPacket__sendReport__P2924,
    "_sendCmd": jacdac_JDPacket__sendCmd__P2925,
    "_sendCmdId": jacdac_JDPacket__sendCmdId__P2926,
    "sendAsMultiCommand": jacdac_JDPacket_sendAsMultiCommand__P2927,
    "_sendWithAck": jacdac_JDPacket__sendWithAck__P2928,
  },
  toStringMethod: jacdac_JDPacket_toString__P2921,
});
const jacdac_Device__C3525_VT = mkVTable({
  name: "Device",
  numFields: 9,
  classNo: 36,
  lastSubtypeNo: 36,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "lastSeen": null,
    "set/lastSeen": null,
    "clients": null,
    "set/clients": null,
    "_eventCounter": null,
    "set/_eventCounter": null,
    "_shortId": null,
    "set/_shortId": null,
    "queries": null,
    "set/queries": null,
    "_score": null,
    "set/_score": null,
    "deviceId": null,
    "set/deviceId": null,
    "services": null,
    "set/services": null,
    "isBrain": jacdac_Device_isBrain__P3530,
    "announceflags": jacdac_Device_announceflags__P3531,
    "restartCounter": jacdac_Device_restartCounter__P3532,
    "shortId": jacdac_Device_shortId__P3536,
    "toString": jacdac_Device_toString__P3537,
    "matchesRoleAt": jacdac_Device_matchesRoleAt__P3538,
    "lookupQuery": jacdac_Device_lookupQuery__P4299,
    "serviceClassLength": jacdac_Device_serviceClassLength__P3539,
    "serviceOffsetAt": jacdac_Device_serviceOffsetAt__P4300,
    "serviceClassAt": jacdac_Device_serviceClassAt__P3540,
    "processPacket": jacdac_Device_processPacket__P3545,
    "hasService": jacdac_Device_hasService__P3546,
    "_destroy": jacdac_Device__destroy__P3549,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
  toStringMethod: jacdac_Device_toString__P3537,
});
const jacdac_Client__C3496_VT = mkVTable({
  name: "Client",
  numFields: 14,
  classNo: 37,
  lastSubtypeNo: 37,
  maxBgInstances: null,
  methods: {
    "handlePacket": jacdac_Client_handlePacket__P3514,
    "announceCallback": jacdac_Client_announceCallback__P3523,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "_device": null,
    "set/_device": null,
    "eventSource": null,
    "set/eventSource": null,
    "broadcast": null,
    "set/broadcast": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "supressLog": null,
    "set/supressLog": null,
    "started": null,
    "set/started": null,
    "advertisementData": null,
    "set/advertisementData": null,
    "systemActive": null,
    "set/systemActive": null,
    "_registeredEvents": null,
    "set/_registeredEvents": null,
    "config": null,
    "set/config": null,
    "registers": null,
    "set/registers": null,
    "_role": null,
    "set/_role": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "role": jacdac_Client_role__P3503,
    "roleName": jacdac_Client_roleName__P3504,
    "roleQuery": jacdac_Client_roleQuery__P3505,
    "device": jacdac_Client_device__P3506,
    "set/device": jacdac_Client_device__P3507,
    "handlePacketOuter": jacdac_Client_handlePacketOuter__P3513,
    "handlePacket": jacdac_Client_handlePacket__P3514,
    "_attach": jacdac_Client__attach__P3515,
    "handleConnected": jacdac_Client_handleConnected__P4179,
    "_detach": jacdac_Client__detach__P3516,
    "sendCommand": jacdac_Client_sendCommand__P3517,
    "raiseEvent": jacdac_Client_raiseEvent__P4180,
    "start": jacdac_Client_start__P3521,
    "announceCallback": jacdac_Client_announceCallback__P3523,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_RegisterClient__C3474_VT = mkVTable({
  name: "RegisterClient",
  numFields: 7,
  classNo: 38,
  lastSubtypeNo: 38,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "_data": null,
    "set/_data": null,
    "_localTime": null,
    "set/_localTime": null,
    "flags": null,
    "set/flags": null,
    "service": null,
    "set/service": null,
    "code": null,
    "set/code": null,
    "packFormat": null,
    "set/packFormat": null,
    "reset": jacdac_RegisterClient_reset__P3477,
    "handlePacket": jacdac_RegisterClient_handlePacket__P3487,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_ClientPacketQueue__C4285_VT = mkVTable({
  name: "ClientPacketQueue",
  numFields: 2,
  classNo: 42,
  lastSubtypeNo: 42,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "pkts": null,
    "set/pkts": null,
    "parent": null,
    "set/parent": null,
    "resend": jacdac_ClientPacketQueue_resend__P4289,
  },
});
const jacdac_ClientRoleQuery__C3488_VT = mkVTable({
  name: "ClientRoleQuery",
  numFields: 4,
  classNo: 43,
  lastSubtypeNo: 43,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "role": null,
    "set/role": null,
    "device": null,
    "set/device": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "serviceOffset": null,
    "set/serviceOffset": null,
  },
});
const jacdac_TokenParser__C4168_VT = mkVTable({
  name: "TokenParser",
  numFields: 9,
  classNo: 44,
  lastSubtypeNo: 44,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "c0": null,
    "set/c0": null,
    "size": null,
    "set/size": null,
    "div": null,
    "set/div": null,
    "fp": null,
    "set/fp": null,
    "nfmt": null,
    "set/nfmt": null,
    "nfmt2": null,
    "set/nfmt2": null,
    "word": null,
    "set/word": null,
    "isArray": null,
    "set/isArray": null,
    "fmt": null,
    "set/fmt": null,
    "parse": jacdac_TokenParser_parse__P4169,
  },
});
const jacdac_DelayedPacket__C4214_VT = mkVTable({
  name: "DelayedPacket",
  numFields: 2,
  classNo: 45,
  lastSubtypeNo: 45,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "timestamp": null,
    "set/timestamp": null,
    "pkt": null,
    "set/pkt": null,
  },
});
const servers_SoundLevelServer__C3861_VT = mkVTable({
  name: "SoundLevelServer",
  numFields: 24,
  classNo: 26,
  lastSubtypeNo: 26,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": servers_SoundLevelServer_handlePacket__P3868,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "serializeState": servers_SoundLevelServer_serializeState__P3869,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "streamingInterval": null,
    "set/streamingInterval": null,
    "streamingSamples": null,
    "set/streamingSamples": null,
    "enabled": null,
    "set/enabled": null,
    "registered": null,
    "set/registered": null,
    "minDecibels": null,
    "set/minDecibels": null,
    "maxDecibels": null,
    "set/maxDecibels": null,
    "loudThreshold": null,
    "set/loudThreshold": null,
    "quietThreshold": null,
    "set/quietThreshold": null,
    "setThresholds": servers_SoundLevelServer_setThresholds__P4411,
    "handlePacket": servers_SoundLevelServer_handlePacket__P3868,
    "registerEvents": servers_SoundLevelServer_registerEvents__P4412,
    "serializeState": servers_SoundLevelServer_serializeState__P3869,
    "readState": jacdac_SensorServer_readState__P4244,
    "handleCustomCommand": jacdac_SensorServer_handleCustomCommand__P4246,
    "setStreaming": jacdac_SensorServer_setStreaming__P3241,
    "startStreaming": jacdac_SensorServer_startStreaming__P4248,
    "stopStreaming": jacdac_SensorServer_stopStreaming__P4249,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const servers_TouchButton__C3852_VT = mkVTable({
  name: "TouchButton",
  numFields: 24,
  classNo: 21,
  lastSubtypeNo: 21,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": servers_BaseButton_start__P4393,
    "log": jacdac_Server_log__P4199,
    "serializeState": servers_BaseButton_serializeState__P4396,
    "isPressed": servers_TouchButton_isPressed__P4401,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "streamingInterval": null,
    "set/streamingInterval": null,
    "streamingSamples": null,
    "set/streamingSamples": null,
    "pressed": null,
    "set/pressed": null,
    "prevPressed": null,
    "set/prevPressed": null,
    "nextHold": null,
    "set/nextHold": null,
    "pressTime": null,
    "set/pressTime": null,
    "nextSample": null,
    "set/nextSample": null,
    "button": null,
    "set/button": null,
    "isPressed": servers_TouchButton_isPressed__P4401,
    "start": servers_BaseButton_start__P4393,
    "update": servers_BaseButton_update__P4395,
    "serializeState": servers_BaseButton_serializeState__P4396,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "readState": jacdac_SensorServer_readState__P4244,
    "handleCustomCommand": jacdac_SensorServer_handleCustomCommand__P4246,
    "setStreaming": jacdac_SensorServer_setStreaming__P3241,
    "startStreaming": jacdac_SensorServer_startStreaming__P4248,
    "stopStreaming": jacdac_SensorServer_stopStreaming__P4249,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const servers_LogoButton__C3853_VT = mkVTable({
  name: "LogoButton",
  numFields: 24,
  classNo: 22,
  lastSubtypeNo: 22,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": servers_BaseButton_start__P4393,
    "log": jacdac_Server_log__P4199,
    "serializeState": servers_BaseButton_serializeState__P4396,
    "isPressed": servers_LogoButton_isPressed__P4403,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "streamingInterval": null,
    "set/streamingInterval": null,
    "streamingSamples": null,
    "set/streamingSamples": null,
    "pressed": null,
    "set/pressed": null,
    "prevPressed": null,
    "set/prevPressed": null,
    "nextHold": null,
    "set/nextHold": null,
    "pressTime": null,
    "set/pressTime": null,
    "nextSample": null,
    "set/nextSample": null,
    "button": null,
    "set/button": null,
    "isPressed": servers_LogoButton_isPressed__P4403,
    "start": servers_BaseButton_start__P4393,
    "update": servers_BaseButton_update__P4395,
    "serializeState": servers_BaseButton_serializeState__P4396,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "readState": jacdac_SensorServer_readState__P4244,
    "handleCustomCommand": jacdac_SensorServer_handleCustomCommand__P4246,
    "setStreaming": jacdac_SensorServer_setStreaming__P3241,
    "startStreaming": jacdac_SensorServer_startStreaming__P4248,
    "stopStreaming": jacdac_SensorServer_stopStreaming__P4249,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const servers_MButton__C3851_VT = mkVTable({
  name: "MButton",
  numFields: 24,
  classNo: 23,
  lastSubtypeNo: 23,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": servers_BaseButton_start__P4393,
    "log": jacdac_Server_log__P4199,
    "serializeState": servers_BaseButton_serializeState__P4396,
    "isPressed": servers_MButton_isPressed__P4399,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "streamingInterval": null,
    "set/streamingInterval": null,
    "streamingSamples": null,
    "set/streamingSamples": null,
    "pressed": null,
    "set/pressed": null,
    "prevPressed": null,
    "set/prevPressed": null,
    "nextHold": null,
    "set/nextHold": null,
    "pressTime": null,
    "set/pressTime": null,
    "nextSample": null,
    "set/nextSample": null,
    "button": null,
    "set/button": null,
    "isPressed": servers_MButton_isPressed__P4399,
    "start": servers_BaseButton_start__P4393,
    "update": servers_BaseButton_update__P4395,
    "serializeState": servers_BaseButton_serializeState__P4396,
    "handlePacket": jacdac_SensorServer_handlePacket__P3240,
    "readState": jacdac_SensorServer_readState__P4244,
    "handleCustomCommand": jacdac_SensorServer_handleCustomCommand__P4246,
    "setStreaming": jacdac_SensorServer_setStreaming__P3241,
    "startStreaming": jacdac_SensorServer_startStreaming__P4248,
    "stopStreaming": jacdac_SensorServer_stopStreaming__P4249,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_BrainServer__C4305_VT = mkVTable({
  name: "BrainServer",
  numFields: 16,
  classNo: 31,
  lastSubtypeNo: 31,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_Server_handlePacket__P3463,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_Server_handlePacket__P3463,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_ProxyServer__C4302_VT = mkVTable({
  name: "ProxyServer",
  numFields: 16,
  classNo: 32,
  lastSubtypeNo: 32,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_Server_handlePacket__P3463,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_Server_handlePacket__P3463,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_LoggerServer__C3167_VT = mkVTable({
  name: "LoggerServer",
  numFields: 18,
  classNo: 33,
  lastSubtypeNo: 33,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac_LoggerServer_handlePacket__P3170,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_LoggerServer_log__P3172,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "_lastListenerTime": null,
    "set/_lastListenerTime": null,
    "minPriority": null,
    "set/minPriority": null,
    "handlePacket": jacdac_LoggerServer_handlePacket__P3170,
    "log": jacdac_LoggerServer_log__P3172,
    "add": jacdac_LoggerServer_add__P3175,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac__rolemgr_RoleManagerServer__C3287_VT = mkVTable({
  name: "RoleManagerServer",
  numFields: 18,
  classNo: 34,
  lastSubtypeNo: 34,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "handlePacket": jacdac__rolemgr_RoleManagerServer_handlePacket__P3290,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "_oldBindingsHash": null,
    "set/_oldBindingsHash": null,
    "autoBind": null,
    "set/autoBind": null,
    "handlePacket": jacdac__rolemgr_RoleManagerServer_handlePacket__P3290,
    "bindingHash": jacdac__rolemgr_RoleManagerServer_bindingHash__P4268,
    "bindRoles": jacdac__rolemgr_RoleManagerServer_bindRoles__P3291,
    "checkChanges": jacdac__rolemgr_RoleManagerServer_checkChanges__P4269,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P3462,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac__rolemgr_DeviceWrapper__C4256_VT = mkVTable({
  name: "DeviceWrapper",
  numFields: 3,
  classNo: 46,
  lastSubtypeNo: 46,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "bindings": null,
    "set/bindings": null,
    "score": null,
    "set/score": null,
    "device": null,
    "set/device": null,
  },
});
const jacdac__rolemgr_RoleBinding__C4258_VT = mkVTable({
  name: "RoleBinding",
  numFields: 5,
  classNo: 47,
  lastSubtypeNo: 47,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "boundToDev": null,
    "set/boundToDev": null,
    "boundToServiceIdx": null,
    "set/boundToServiceIdx": null,
    "role": null,
    "set/role": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "roleQuery": null,
    "set/roleQuery": null,
    "host": jacdac__rolemgr_RoleBinding_host__P4259,
    "select": jacdac__rolemgr_RoleBinding_select__P4260,
  },
});
const jacdac__rolemgr_ServerBindings__C4262_VT = mkVTable({
  name: "ServerBindings",
  numFields: 2,
  classNo: 48,
  lastSubtypeNo: 48,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "bindings": null,
    "set/bindings": null,
    "host": null,
    "set/host": null,
    "fullyBound": jacdac__rolemgr_ServerBindings_fullyBound__P4263,
    "scoreFor": jacdac__rolemgr_ServerBindings_scoreFor__P4264,
  },
});
const jacdac_ControlServer__C3550_VT = mkVTable({
  name: "ControlServer",
  numFields: 16,
  classNo: 35,
  lastSubtypeNo: 35,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_ControlServer_handlePacketOuter__P3553,
    "handlePacket": jacdac_Server_handlePacket__P3463,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "instanceName": null,
    "set/instanceName": null,
    "calibrate": null,
    "set/calibrate": null,
    "valuePackFormat": null,
    "set/valuePackFormat": null,
    "intensityPackFormat": null,
    "set/intensityPackFormat": null,
    "constants": null,
    "set/constants": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "_statusVendorCode": null,
    "set/_statusVendorCode": null,
    "_value": null,
    "set/_value": null,
    "_intensity": null,
    "set/_intensity": null,
    "variant": null,
    "set/variant": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "sendUptime": jacdac_ControlServer_sendUptime__P3552,
    "handleFloodPing": jacdac_ControlServer_handleFloodPing__P4309,
    "handlePacketOuter": jacdac_ControlServer_handlePacketOuter__P3553,
    "statusCode": jacdac_Server_statusCode__P3452,
    "disabled": jacdac_Server_disabled__P3454,
    "ready": jacdac_Server_ready__P3455,
    "intensity": jacdac_Server_intensity__P3456,
    "set/intensity": jacdac_Server_intensity__P3457,
    "value": jacdac_Server_value__P3458,
    "set/value": jacdac_Server_value__P3459,
    "setStatusCode": jacdac_Server_setStatusCode__P3460,
    "handlePacket": jacdac_Server_handlePacket__P3463,
    "sendReport": jacdac_Server_sendReport__P4185,
    "sendEvent": jacdac_Server_sendEvent__P3465,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P3466,
    "handleStatusCode": jacdac_Server_handleStatusCode__P4186,
    "handleInstanceName": jacdac_Server_handleInstanceName__P4187,
    "handleVariant": jacdac_Server_handleVariant__P4188,
    "handleValue": jacdac_Server_handleValue__P4189,
    "handleIntensity": jacdac_Server_handleIntensity__P4190,
    "handleCalibrateCommand": jacdac_Server_handleCalibrateCommand__P4191,
    "doCalibrate": jacdac_Server_doCalibrate__P4192,
    "handleRegFormat": jacdac_Server_handleRegFormat__P4193,
    "handleRegValue": jacdac_Server_handleRegValue__P4194,
    "toString": jacdac_Server_toString__P3467,
    "handleRegBool": jacdac_Server_handleRegBool__P4195,
    "handleRegBuffer": jacdac_Server_handleRegBuffer__P4198,
    "start": jacdac_Server_start__P3468,
    "log": jacdac_Server_log__P4199,
    "on": jacdac_EventSource_on__P3576,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P4176,
    "emit": jacdac_EventSource_emit__P3578,
  },
});
const jacdac_OutPipe__C2955_VT = mkVTable({
  name: "OutPipe",
  numFields: 3,
  classNo: 49,
  lastSubtypeNo: 49,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "nextCnt": null,
    "set/nextCnt": null,
    "deviceId": null,
    "set/deviceId": null,
    "port": null,
    "set/port": null,
    "from": jacdac_OutPipe_from__P4211,
    "respondForEach": jacdac_OutPipe_respondForEach__P2957,
    "writeEx": jacdac_OutPipe_writeEx__P4212,
    "write": jacdac_OutPipe_write__P2959,
    "writeAndClose": jacdac_OutPipe_writeAndClose__P2960,
    "close": jacdac_OutPipe_close__P2961,
  },
});
const jacdac_AckAwaiter__C4137_VT = mkVTable({
  name: "AckAwaiter",
  numFields: 6,
  classNo: 50,
  lastSubtypeNo: 50,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "nextRetry": null,
    "set/nextRetry": null,
    "numTries": null,
    "set/numTries": null,
    "crc": null,
    "set/crc": null,
    "eventId": null,
    "set/eventId": null,
    "pkt": null,
    "set/pkt": null,
    "srcId": null,
    "set/srcId": null,
  },
});
const SoundExpression__C2692_VT = mkVTable({
  name: "SoundExpression",
  numFields: 1,
  classNo: 51,
  lastSubtypeNo: 51,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "notes": null,
    "set/notes": null,
    "play": SoundExpression_play__P2694,
  },
});
const music_Melody__C4022_VT = mkVTable({
  name: "Melody",
  numFields: 6,
  classNo: 52,
  lastSubtypeNo: 52,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "melodyArray": null,
    "set/melodyArray": null,
    "currentDuration": null,
    "set/currentDuration": null,
    "currentOctave": null,
    "set/currentOctave": null,
    "currentPos": null,
    "set/currentPos": null,
    "repeating": null,
    "set/repeating": null,
    "background": null,
    "set/background": null,
    "hasNextNote": music_Melody_hasNextNote__P4023,
    "nextNote": music_Melody_nextNote__P4024,
  },
});
const control_PollEvent__C4049_VT = mkVTable({
  name: "PollEvent",
  numFields: 6,
  classNo: 53,
  lastSubtypeNo: 53,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "eid": null,
    "set/eid": null,
    "vid": null,
    "set/vid": null,
    "start": null,
    "set/start": null,
    "timeOut": null,
    "set/timeOut": null,
    "condition": null,
    "set/condition": null,
    "once": null,
    "set/once": null,
  },
});

const breakpoints = setupDebugger(1, [])

return _main___P3908
})
