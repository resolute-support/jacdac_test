// meta={"simUrl":"https://trg-maker.userpxt.io/---simulator","cdnUrl":"https://pxt.azureedge.net","version":"v0","target":"maker","targetVersion":"0.15.50"}
// boardDefinition={"driveDisplayName":"IOT-BOOT","visual":{"image":"data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%20281%20182%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpath%20d%3D%22M39.042%20154.463c.016-3.072%202.538-5.595%205.61-5.606h7.283c3.07.014%205.593%202.536%205.609%205.606v22.712c.011%202.453%202.024%204.468%204.477%204.48H89.73c2.453-.012%204.468-2.027%204.48-4.48v-22.712c.016-3.07%202.538-5.59%205.608-5.606%203.077%200%205.61%202.534%205.61%205.608v15.975c0%206.15%205.063%2011.213%2011.215%2011.217h115.824c6.15%200%2011.212-5.062%2011.212-11.217V11.564c0-6.152-5.062-11.214-11.212-11.214H116.642c-6.152.002-11.212%205.065-11.214%2011.214V27.54c0%203.075-2.534%205.604-5.611%205.604-3.07-.016-5.59-2.533-5.608-5.604V4.825C94.197%202.372%2092.184.357%2089.73.345h-27.71c-2.457%200-4.477%202.023-4.477%204.48V27.54c0%203.075-2.534%205.604-5.609%205.604h-7.282c-3.07-.011-5.595-2.533-5.611-5.604V4.825c-.012-2.453-2.027-4.468-4.48-4.48H6.854c-2.457%200-4.48%202.023-4.48%204.48v172.35c.012%202.453%202.027%204.468%204.48%204.48h27.708c2.453-.012%204.468-2.027%204.48-4.48v-22.712zm-32.88%2015.005h-.34c-.964%200-1.75-.967-1.75-2.16v-4.583c0-1.191.786-2.158%201.75-2.158h.34c.964%200%201.75.967%201.75%202.158v4.583c0%201.193-.786%202.16-1.75%202.16zm.57-155.476h.339c.965%200%201.75.967%201.75%202.158v4.583c0%201.191-.785%202.159-1.75%202.159h-.339c-.967%200-1.75-.968-1.75-2.159V16.15c0-1.19.783-2.158%201.75-2.158zm8.154%20139.027l.002-.065a1.858%201.858%200%2000-1.85-1.847%201.857%201.857%200%2000-1.847%201.847l.003.065a1.855%201.855%200%20001.845%201.783c.99%200%201.812-.795%201.847-1.783zM11.938%2030.442l-.003.064c0%201.013.836%201.847%201.85%201.847a1.857%201.857%200%20001.847-1.847l-.002-.064a1.855%201.855%200%2000-1.845-1.783c-.99%200-1.813.794-1.847%201.783zm10.067%20122.577a1.855%201.855%200%2000-1.847-1.845%201.856%201.856%200%2000-1.847%201.847v.002a1.855%201.855%200%20001.847%201.845%201.856%201.856%200%20001.847-1.847v-.002zM19.057%2030.442a1.86%201.86%200%20001.85%201.847%201.858%201.858%200%20001.847-1.85v-.002a1.855%201.855%200%2000-1.848-1.845%201.856%201.856%200%2000-1.847%201.847v.003h-.002zm10.07%20122.577v-.065a1.856%201.856%200%2000-1.848-1.847%201.857%201.857%200%2000-1.847%201.847l.002.065a1.855%201.855%200%20001.845%201.783c.99%200%201.813-.795%201.848-1.783zM26.178%2030.442l-.002.064c0%201.013.836%201.847%201.847%201.847%201.014%200%201.85-.834%201.85-1.847l-.003-.064a1.856%201.856%200%2000-1.847-1.783c-.988%200-1.81.794-1.845%201.783zm8.154%20139.026h-.339c-.967%200-1.75-.967-1.75-2.16v-4.583c0-1.191.783-2.158%201.75-2.158h.339c.967%200%201.75.967%201.75%202.158v4.583c0%201.193-.783%202.16-1.75%202.16zm.571-155.476h.339c.965%200%201.75.967%201.75%202.158v4.583c0%201.191-.785%202.159-1.75%202.159h-.339c-.967%200-1.75-.968-1.75-2.159V16.15c0-1.19.783-2.158%201.75-2.158zM62.166%20169.47h-.338c-.968%200-1.75-.968-1.75-2.16v-4.584c0-1.19.782-2.158%201.75-2.158h.338c.965%200%201.75.967%201.75%202.158v4.583c0%201.193-.785%202.16-1.75%202.16zm-.338-155.81h.338c.965%200%201.75.967%201.75%202.16v4.583c0%201.189-.785%202.156-1.75%202.156h-.338c-.968%200-1.75-.967-1.75-2.158v-4.584c0-1.19.782-2.158%201.75-2.158zm5.205%2016.449c0%201.013.834%201.847%201.85%201.847a1.856%201.856%200%20001.847-1.847%201.856%201.856%200%2000-1.848-1.847c-1.015%200-1.85.833-1.85%201.847zM70.89%20153.02a1.855%201.855%200%2000-1.847-1.845%201.856%201.856%200%2000-1.848%201.847v.003a1.855%201.855%200%20001.848%201.845%201.856%201.856%200%20001.847-1.848v-.002zM74.155%2030.11c0%201.013.833%201.847%201.847%201.847%201.015%200%201.85-.834%201.85-1.847%200-1.014-.835-1.85-1.85-1.85a1.858%201.858%200%2000-1.847%201.85zM78.01%20153.02l.002-.064a1.857%201.857%200%2000-1.847-1.847%201.856%201.856%200%2000-1.847%201.847v.064a1.856%201.856%200%20001.847%201.783c.988%200%201.81-.795%201.845-1.783zM81.274%2030.11c0%201.013.834%201.847%201.847%201.847%201.016%200%201.85-.834%201.85-1.847%200-1.014-.834-1.85-1.85-1.85a1.858%201.858%200%2000-1.847%201.85zm3.858%20122.911a1.855%201.855%200%2000-1.848-1.845%201.856%201.856%200%2000-1.847%201.847v.003a1.855%201.855%200%20001.847%201.845%201.856%201.856%200%20001.848-1.848v-.002zm5.205%2016.45H90c-.968%200-1.75-.968-1.75-2.16v-4.584c0-1.19.782-2.158%201.75-2.158h.336c.967%200%201.75.967%201.75%202.158v4.583c0%201.193-.783%202.16-1.75%202.16zM90%2013.66h.336c.967%200%201.75.967%201.75%202.16v4.583c0%201.189-.783%202.156-1.75%202.156H90c-.968%200-1.75-.967-1.75-2.158v-4.584c0-1.19.782-2.158%201.75-2.158zm21.475-1.908c.085%202.868%202.467%205.18%205.334%205.18%202.868%200%205.25-2.312%205.334-5.18%200-2.927-2.406-5.334-5.334-5.334-2.927%200-5.334%202.407-5.334%205.334zm.087%20158.895c.086%202.867%202.467%205.18%205.335%205.18%202.867%200%205.249-2.313%205.334-5.18-.085-2.868-2.467-5.18-5.334-5.18-2.868%200-5.25%202.312-5.335%205.18zm26.36-6.57v.075a2.387%202.387%200%2001-2.376%202.377%202.387%202.387%200%2001-2.375-2.377v-.074a2.386%202.386%200%20012.375-2.303%202.386%202.386%200%20012.377%202.303zm0%209.398v.074a2.387%202.387%200%2001-2.376%202.377%202.387%202.387%200%2001-2.375-2.377v-.074a2.386%202.386%200%20012.375-2.303%202.386%202.386%200%20012.377%202.303zm7.122-9.397a2.389%202.389%200%2001-2.377%202.377%202.389%202.389%200%2001-2.377-2.377%202.389%202.389%200%20012.377-2.377%202.389%202.389%200%20012.377%202.377zm0%209.397a2.389%202.389%200%2001-2.377%202.377%202.389%202.389%200%2001-2.377-2.377%202.389%202.389%200%20012.377-2.377%202.389%202.389%200%20012.377%202.377zm7.12%200l.002.074a2.39%202.39%200%2001-2.38%202.377%202.389%202.389%200%2001-2.376-2.377l.002-.074a2.386%202.386%200%20012.375-2.303%202.386%202.386%200%20012.377%202.303zm0-9.53a2.39%202.39%200%2001-2.377%202.379%202.391%202.391%200%2001-2.38-2.38%202.39%202.39%200%20012.38-2.377%202.389%202.389%200%20012.377%202.377zm7.197%209.53a2.389%202.389%200%2001-2.377%202.377%202.389%202.389%200%2001-2.377-2.377%202.389%202.389%200%20012.377-2.377%202.389%202.389%200%20012.377%202.377zm10.558-9.397a2.39%202.39%200%2001-2.38%202.377%202.39%202.39%200%2001-2.376-2.38v-.002a2.39%202.39%200%20012.377-2.377%202.391%202.391%200%20012.38%202.38v.002zm0%209.397a2.39%202.39%200%2001-2.38%202.377%202.39%202.39%200%2001-2.376-2.38v-.002a2.39%202.39%200%20012.377-2.376%202.391%202.391%200%20012.38%202.379v.002zm7.12-9.4v.077a2.391%202.391%200%2001-2.38%202.379%202.393%202.393%200%2001-2.38-2.38l.003-.075a2.39%202.39%200%20012.38-2.306%202.39%202.39%200%20012.376%202.306zm0%209.4a2.388%202.388%200%2001-2.378%202.375%202.389%202.389%200%2001-2.377-2.377v-.003a2.388%202.388%200%20012.377-2.374%202.389%202.389%200%20012.377%202.377v.002zm7.12%200a2.39%202.39%200%2001-2.378%202.377%202.39%202.39%200%2001-2.377-2.38v-.002a2.39%202.39%200%20012.377-2.376%202.391%202.391%200%20012.379%202.379v.002zm43.23-161.822c.002%202.925%202.407%205.332%205.332%205.334%202.867-.085%205.18-2.466%205.18-5.334%200-2.867-2.313-5.249-5.18-5.334-2.925.002-5.33%202.41-5.332%205.334zm0%20158.991c0%202.926%202.41%205.335%205.334%205.335%202.928%200%205.335-2.41%205.335-5.335v-.002c-.003-2.925-2.41-5.332-5.335-5.332-2.927%200-5.334%202.407-5.334%205.334v.003-.003z%22%20fill%3D%22%23007001%22%2F%3E%3Cpath%20d%3D%22M11.09%2046.147a.28.28%200%2000.002-.56.283.283%200%2000-.283.281.282.282%200%2000.281.28.28.28%200%2000.002-.56.283.283%200%2000-.283.28.282.282%200%2000.281.28m180.107-42.89v4.485m-28.21%20144.516v4.003l.268.804.534.53.8.269h.533l.802-.267.534-.532.268-.804v-4.003m5.817%205.606l-2.137-5.606-2.133%205.606m.8-1.868h2.671m2.105-3.738v5.606m0-5.606h2.405l.8.267.269.267.265.535v.534l-.265.532-.27.267-.8.267h-2.404m1.87%200l1.866%202.937m3.126-5.606v5.606m-1.868-5.606h3.736m-45.45%200v4.272l-.267.8-.267.267-.535.267h-.534l-.534-.267-.267-.267-.268-.8v-.534m5.98-3.738v5.606m-1.868-5.606h3.738m4.938%205.606l-2.138-5.606-2.135%205.606m.802-1.868h2.672m6.11-2.402l-.265-.535-.534-.534-.534-.267h-1.07l-.533.267-.535.534-.267.535-.265.799v1.336l.265.801.267.535.535.53.534.269h1.069l.534-.267.534-.532.265-.535v-.804m-1.336%200h1.336m53.011-8.137h-5.606m5.606%200v2.402l-.267.8-.267.27-.535.264h-.534l-.532-.265-.267-.27-.267-.799v-2.402m0%201.868l-2.937%201.866m4.802%204.995l.535-.534.267-.801v-1.067l-.267-.801-.535-.535h-.534l-.532.267-.267.268-.268.534-.534%201.6-.267.535-.267.267-.535.267h-.799l-.534-.534-.267-.801v-1.067l.267-.801.534-.535m4.805%206.862h-5.606m5.606-1.868v3.735M223.85%207.97h-5.325m5.325%200v2.282l-.253.763-.254.253-.506.254h-.507l-.51-.254-.253-.253-.253-.76m0-2.285v2.282l-.253.763-.254.253-.506.254h-.76l-.507-.254-.253-.253-.254-.76V7.969m5.323%206.265l-.253-.507-.507-.507-.507-.253-.762-.256h-1.267l-.76.254-.507.253-.506.509-.254.507v1.013l.254.507.506.507.507.255.76.254h1.267l.76-.254.509-.253.507-.507.253-.507v-1.015m0%205.3l-.253-.507-.507-.507-.507-.253-.762-.254h-1.267l-.76.254-.507.253-.506.507-.254.506v1.014l.254.507.506.506.507.254.76.253h1.267l.76-.253.509-.254.507-.506.253-.507v-1.014m0%205.551h-5.325m5.325-1.773v3.551%22%20fill%3D%22none%22%20stroke%3D%22%23fff%22%20stroke-width%3D%22.5527728%22%2F%3E%3Cpath%20d%3D%22M220.72%20166.831s.145-.467.23-.695a12.638%2012.638%200%20012.188-3.794%2012.703%2012.703%200%20018.564-4.459c1.02-.087%202.895-.384%203.526.719a1.419%201.419%200%2001-.85%202.06c-.882.239-1.932-.059-2.854.063a9.878%209.878%200%2000-5.659%202.79%209.866%209.866%200%2000-2.826%205.979c-.115%201.165.707%203.832-1.207%204-1.92.169-1.69-2.634-1.623-3.777.06-.979.23-1.946.51-2.886%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M162.554%202.893v10.93h7.569V2.894h-7.569zm-31.397%200v10.93h7.573V2.894h-7.573z%22%20fill%3D%22gray%22%2F%3E%3Cpath%20d%3D%22M131.157%202.893v10.93h7.573V2.894h-7.573zm31.397%200v10.93h7.569V2.894h-7.569zm-5.606%2022.426v9.53h4.204v-9.53h-4.204zm-5.608%200v9.53h4.206v-9.53h-4.206zm-5.608%200v9.53h4.205v-9.53h-4.205zm-5.604%200v9.53h4.203v-9.53h-4.203z%22%20fill%3D%22gray%22%2F%3E%3Cpath%20d%3D%22M145.732%2025.32v9.53h4.205v-9.53h-4.205zm5.608%200v9.53h4.206v-9.53h-4.206zm5.608%200v9.53h4.204v-9.53h-4.204zM41.456%2071.01v2.244h8.687V71.01h-8.687zm0%204.487v2.243h8.687v-2.243h-8.687zm0%207.568v2.244h8.687v-2.244h-8.687zm0%2016.82v2.242h8.687v-2.241h-8.687zm0%204.764v2.243h8.687v-2.243h-8.687zm0-7.568v2.243h8.687V97.08h-8.687zm0-8.407v2.24h8.687v-2.242l-8.687.002zm0-8.412v2.242h8.687v-2.242h-8.687zm.032%205.607v2.243h8.688v-2.243h-8.688zm-.032%205.606v2.243h8.687v-2.243h-8.687zm0%202.803v2.243h8.687v-2.243h-8.687z%22%20fill%3D%22gray%22%2F%3E%3Cpath%20d%3D%22M41.456%20102.968v2.243h8.687v-2.243h-8.687zm0-30.276v2.243h8.687v-2.243h-8.687zm0%204.486v2.244h8.687v-2.244h-8.687zm0%2030.276v2.244h8.687v-2.244h-8.687z%22%20fill%3D%22gray%22%2F%3E%3Cpath%20fill%3D%22gray%22%20d%3D%22M50.143%20109.136v2.243h-8.687v-2.243zM22.417%2066.664v.62a3.19%203.19%200%2001-3.192%203.192h-3.982a3.193%203.193%200%2001-3.195-3.192v-.622a3.214%203.214%200%20013.195-3.192h3.982a3.196%203.196%200%20013.195%203.194h-.003zM22.417%20115.106v.617a3.193%203.193%200%2001-3.192%203.194h-3.982a3.195%203.195%200%2001-3.195-3.194v-.617a3.213%203.213%200%20013.195-3.197h3.982a3.197%203.197%200%20013.195%203.197h-.003zM47.257%2066.664v.62a3.195%203.195%200%2001-3.196%203.192h-6.783a3.194%203.194%200%2001-3.195-3.192v-.622a3.214%203.214%200%20013.195-3.192h6.785a3.198%203.198%200%20013.194%203.194zM47.257%20115.106v.617a3.197%203.197%200%2001-3.196%203.194h-6.783a3.196%203.196%200%2001-3.195-3.194v-.617a3.213%203.213%200%20013.195-3.197h6.785a3.198%203.198%200%20013.194%203.197zM38.12%2074.571v.843h-.842v-.843z%22%2F%3E%3Cpath%20fill%3D%22gray%22%20d%3D%22M38.12%2074.571v.843h-.842v-.843z%22%2F%3E%3Ccircle%20cx%3D%2246.119%22%20cy%3D%22.283%22%20r%3D%22.213%22%20fill%3D%22gray%22%20transform%3D%22matrix(0%201.97784%201.97784%200%2037.138%2016.182)%22%2F%3E%3Cpath%20d%3D%22M213.57%20150.34v3.925h3.644v-3.925h-3.643zm-5.605%200v3.925h3.643v-3.925h-3.643zm-105.737-23.68v5.888h9.255v-5.887h-9.255zm0-8.408v5.885h9.255v-5.885h-9.255zm0-8.412v5.887h9.255v-5.884l-9.255-.003zm0-8.406v5.884h9.255v-5.887l-9.255.003zm0-8.412v5.887h9.255v-5.887h-9.255zm0-8.409v5.885h9.255v-5.885h-9.255zm0-8.411v5.887h9.255v-5.887h-9.255zm0-8.41v5.888h9.255v-5.887h-9.255zm0-8.408v5.887h9.255v-5.887h-9.255zm0-8.41v5.885h9.255v-5.884h-9.255zm5.887%2085.22v9.25h5.888v-9.25h-5.888zm8.41%200v9.25h5.884v-9.25h-5.884zm8.409%200v9.25h5.887v-9.25h-5.887zm8.409%200v9.25h5.887v-9.25h-5.887zm8.411%200v9.25h5.89v-9.25h-5.89zm8.41%200v9.25h5.886v-9.25h-5.887zm8.41%200v9.25h5.883v-9.25h-5.883zm8.41%200v9.25h5.887v-9.25h-5.888zm8.409%200v9.25h5.887v-9.25h-5.887zm8.41%200v9.25h5.886v-9.25h-5.885zm8.408%200v9.25h5.887v-9.25h-5.887zm8.411%200v9.25h5.887v-9.25h-5.887zm8.411%200v9.25h5.885v-9.25h-5.885zm8.41%200v9.25h5.884v-9.25h-5.885zm8.408%200v9.25h5.888v-9.25h-5.888zm8.41%200v9.25h5.887v-9.25h-5.887zM108.115%2038.079v9.252h5.888v-9.252h-5.888zm8.41%200v9.252h5.884v-9.252h-5.884zm8.409%200v9.252h5.887v-9.252h-5.887zm8.409%200v9.252h5.887v-9.252h-5.887zm8.411%200v9.252h5.89v-9.252h-5.89zm8.41%200v9.252h5.886v-9.252h-5.887zm8.41%200v9.252h5.883v-9.252h-5.883zm8.41%200v9.252h5.887v-9.252h-5.888zm8.409%200v9.252h5.887v-9.252h-5.887zm8.41%200v9.252h5.886v-9.252h-5.885zm8.408%200v9.252h5.887v-9.252h-5.887zm8.411%200v9.252h5.887v-9.252h-5.887zm8.411%200v9.252h5.885v-9.252h-5.885zm8.41%200v9.252h5.884v-9.252h-5.885zm8.408%200v9.252h5.888v-9.252h-5.888zm8.41%200v9.252h5.887v-9.252h-5.887zm-132.735%2049.91h-.002a.43.43%200%2001-.429-.428.43.43%200%2001.429-.428.43.43%200%2001.428.428.427.427%200%2001-.426.429zM200.958%2026.02v6.725h4.487v-6.726h-4.487zm0-23.268v6.726h4.487V2.752h-4.487zm12.053%2023.267v6.726h4.489v-6.726h-4.489zm0-23.267v6.726h4.489V2.752h-4.489zM212.31%20173.47v4.484h6.726v-4.485h-6.725zm-23.264%200v4.484h6.725v-4.485h-6.725zm23.265-12.054v4.485h6.725v-4.485h-6.725zm-23.265%200v4.485h6.725v-4.485h-6.725z%22%20fill%3D%22gray%22%2F%3E%3Cpath%20d%3D%22M10.546%20155.034v19.198c0%201.077.89%201.966%201.967%201.966h1.11c1.08%200%201.968-.886%201.97-1.966v-19.198c.384-.532.592-1.17.592-1.826a3.128%203.128%200%2000-3.114-3.114%203.128%203.128%200%2000-3.114%203.114c0%20.656.207%201.294.592%201.826h-.003zm5.788-126.608V6.481l.003-.055a1.975%201.975%200%2000-1.963-1.967h-1.117c-1.084%200-1.967.88-1.967%201.967v22a3.115%203.115%200%2000-.592%201.827%203.128%203.128%200%20003.114%203.114%203.128%203.128%200%20003.114-3.114c0-.657-.207-1.295-.592-1.827zM14.916%20153.02l.002-.065a1.857%201.857%200%2000-1.847-1.847c-1.014%200-1.85.834-1.85%201.847l.003.065a1.856%201.856%200%20001.847%201.783c.988%200%201.81-.795%201.845-1.783zM11.968%2030.442a1.855%201.855%200%20001.847%201.844%201.856%201.856%200%20001.847-1.847v-.002a1.859%201.859%200%2000-1.847-1.847c-1.016%200-1.85.836-1.85%201.85v.002h.003zm5.695%20124.592v21.998a1.97%201.97%200%20001.963%201.97h1.12a1.978%201.978%200%20001.966-1.967l-.002-.056v-21.945c.384-.532.592-1.17.592-1.826a3.128%203.128%200%2000-3.114-3.114%203.128%203.128%200%2000-3.114%203.114c0%20.656.207%201.294.592%201.826h-.003zm5.795-126.608v-22a1.978%201.978%200%2000-1.96-1.967h-1.12c-1.084%200-1.966.88-1.966%201.967v22a3.115%203.115%200%2000-.592%201.827%203.128%203.128%200%20003.114%203.114%203.128%203.128%200%20003.114-3.114c0-.657-.207-1.295-.592-1.827h.002zM22.033%20153.02l.002-.065a1.857%201.857%200%2000-1.847-1.847%201.856%201.856%200%2000-1.847%201.912%201.856%201.856%200%20001.847%201.783c.988%200%201.81-.795%201.845-1.783zM19.089%2030.442l-.002.064c0%201.013.836%201.847%201.847%201.847%201.013%200%201.85-.834%201.85-1.847l-.003-.064a1.856%201.856%200%2000-1.847-1.783c-.988%200-1.81.794-1.845%201.783zm5.698%20124.592v21.998c0%201.085.876%201.967%201.96%201.97h1.117c1.08%200%201.97-.89%201.97-1.97v-21.998c.384-.532.592-1.17.592-1.826a3.128%203.128%200%2000-3.114-3.114%203.128%203.128%200%2000-3.114%203.114c0%20.656.207%201.294.592%201.826h-.003zm5.788-126.608V9.282l.003-.053a1.978%201.978%200%2000-1.967-1.967h-1.113c-1.087%200-1.97.88-1.97%201.967v19.197a3.115%203.115%200%2000-.591%201.827%203.128%203.128%200%20003.114%203.114%203.128%203.128%200%20003.114-3.114c0-.657-.207-1.295-.592-1.827h.002zM29.156%20153.02l.003-.065a1.858%201.858%200%2000-1.85-1.847%201.857%201.857%200%2000-1.847%201.847l.002.065a1.855%201.855%200%20001.845%201.783c.99%200%201.813-.795%201.847-1.783zM26.208%2030.442a1.855%201.855%200%20001.848%201.844%201.856%201.856%200%20001.847-1.847v-.002a1.859%201.859%200%2000-1.847-1.847c-1.016%200-1.85.836-1.85%201.85v.002h.002zm45.224-2.35v-22a1.978%201.978%200%2000-1.962-1.967h-1.115a1.97%201.97%200%2000-1.972%201.967l.003.055v21.945a3.115%203.115%200%2000-.592%201.827%203.128%203.128%200%20003.114%203.114%203.128%203.128%200%20003.114-3.114c0-.657-.208-1.295-.592-1.827h.002zm-4.88%20126.942v19.198c0%201.077.889%201.966%201.967%201.966h1.112a1.978%201.978%200%20001.967-1.966v-19.198c.385-.532.592-1.17.592-1.826a3.128%203.128%200%2000-3.114-3.114%203.128%203.128%200%2000-3.114%203.114c0%20.656.207%201.294.592%201.826h-.002zm.51-124.926c0%201.013.835%201.847%201.848%201.847a1.856%201.856%200%20001.847-1.847%201.856%201.856%200%2000-1.847-1.848%201.856%201.856%200%2000-1.847%201.848zm3.856%20122.91l.003-.064a1.857%201.857%200%2000-1.847-1.847c-1.014%200-1.85.834-1.85%201.847l.002.065a1.856%201.856%200%20001.848%201.783c.988%200%201.81-.795%201.844-1.783zm7.636-124.926v-22a1.978%201.978%200%2000-1.963-1.967h-1.117a1.969%201.969%200%2000-1.967%201.967v22a3.115%203.115%200%2000-.592%201.827%203.128%203.128%200%20003.114%203.114%203.128%203.128%200%20003.114-3.114c0-.657-.207-1.295-.592-1.827h.003zM73.67%20155.034v21.998c0%201.085.877%201.967%201.958%201.97h1.121a1.978%201.978%200%20001.967-1.967v-22.001c.385-.532.592-1.17.592-1.826a3.128%203.128%200%2000-3.114-3.114%203.128%203.128%200%2000-3.114%203.114c0%20.656.207%201.294.592%201.826h-.002zm.513-124.926c0%201.013.834%201.847%201.848%201.847%201.015%200%201.85-.834%201.85-1.847%200-1.014-.835-1.85-1.85-1.85a1.858%201.858%200%2000-1.848%201.85zm3.856%20122.91a1.856%201.856%200%2000-1.847-1.846%201.856%201.856%200%2000-1.847%201.847c0%201.013.833%201.847%201.847%201.847a1.856%201.856%200%20001.847-1.847zm7.633-124.926V8.895a1.978%201.978%200%2000-1.97-1.967h-1.11a1.97%201.97%200%2000-1.969%201.967l.003.053v19.144a3.115%203.115%200%2000-.592%201.827%203.128%203.128%200%20003.114%203.114%203.128%203.128%200%20003.114-3.114c0-.657-.208-1.295-.592-1.827h.002zm-4.88%20126.942v21.998c0%201.085.875%201.967%201.96%201.97h1.119a1.978%201.978%200%20001.967-1.967v-22.001c.384-.532.592-1.17.592-1.826a3.128%203.128%200%2000-3.114-3.114%203.128%203.128%200%2000-3.114%203.114c0%20.656.207%201.294.592%201.826h-.003zm.51-124.926c0%201.013.834%201.847%201.848%201.847a1.856%201.856%200%20001.847-1.847%201.856%201.856%200%2000-1.847-1.848%201.856%201.856%200%2000-1.847%201.848zm3.856%20122.91l.003-.064a1.857%201.857%200%2000-1.848-1.847%201.856%201.856%200%2000-1.847%201.912%201.856%201.856%200%20001.847%201.783c.988%200%201.81-.795%201.845-1.783zM108.235%2011.75c.003%204.769%203.925%208.689%208.693%208.69%204.765-.001%208.687-3.924%208.69-8.69-.109-4.69-3.996-8.491-8.69-8.491-4.694%200-8.582%203.8-8.69%208.492h-.003zm0%20158.895c.076%204.715%203.976%208.552%208.69%208.552%204.717%200%208.617-3.837%208.693-8.552-.003-4.767-3.923-8.69-8.69-8.692-4.768.002-8.688%203.925-8.69%208.692h-.003zm3.27-158.894c.104%202.854%202.48%205.145%205.333%205.145%202.856%200%205.23-2.291%205.334-5.145-.085-2.868-2.467-5.18-5.334-5.18-2.868%200-5.25%202.312-5.334%205.18h.002zm.088%20158.894c.086%202.868%202.467%205.18%205.335%205.18%202.867%200%205.249-2.312%205.334-5.18-.085-2.867-2.467-5.18-5.334-5.18-2.868%200-5.25%202.313-5.335%205.18zM224.06%2011.751c.002%204.768%203.924%208.688%208.692%208.69%204.765-.002%208.688-3.925%208.69-8.69-.108-4.692-3.996-8.492-8.69-8.492-4.694%200-8.582%203.8-8.69%208.492h-.002zm0%20158.894c.076%204.715%203.975%208.552%208.69%208.552%204.717%200%208.616-3.837%208.692-8.552-.002-4.767-3.922-8.69-8.69-8.692-4.768.002-8.688%203.925-8.69%208.692h-.002zm3.358-158.993v.004c0%202.928%202.409%205.337%205.336%205.337%202.928%200%205.337-2.41%205.337-5.337%200-2.927-2.41-5.336-5.337-5.336h-.002c-2.925.002-5.33%202.407-5.334%205.332zm0%20158.993c.085%202.868%202.466%205.18%205.334%205.18%202.867%200%205.249-2.312%205.334-5.18-.085-2.867-2.467-5.18-5.334-5.18-2.868%200-5.25%202.313-5.334%205.18zM164.01%20177.01v-7.065h7.064v7.064h-7.064zm0-12.931a3.55%203.55%200%20003.533%203.379%203.55%203.55%200%20003.531-3.38%203.55%203.55%200%2000-3.53-3.442%203.55%203.55%200%2000-3.534%203.443zm5.91%200a2.39%202.39%200%2001-2.38%202.377%202.39%202.39%200%2001-2.376-2.38v-.002a2.39%202.39%200%20012.377-2.377%202.391%202.391%200%20012.38%202.38v.002zm0%209.397a2.39%202.39%200%2001-2.38%202.377%202.39%202.39%200%2001-2.376-2.38v-.002a2.39%202.39%200%20012.377-2.376%202.391%202.391%200%20012.38%202.379v.002zm1.212%200a3.55%203.55%200%20003.533%203.379%203.55%203.55%200%20003.53-3.379%203.55%203.55%200%2000-3.53-3.443%203.55%203.55%200%2000-3.533%203.443zm0-9.397a3.55%203.55%200%20003.533%203.379%203.55%203.55%200%20003.53-3.38%203.55%203.55%200%2000-3.53-3.442%203.55%203.55%200%2000-3.533%203.443zm5.907-.002v.076a2.391%202.391%200%2001-2.379%202.379%202.393%202.393%200%2001-2.38-2.38l.003-.075a2.39%202.39%200%20012.38-2.306%202.39%202.39%200%20012.376%202.306zm0%209.4a2.388%202.388%200%2001-2.377%202.374%202.389%202.389%200%2001-2.377-2.377v-.003a2.388%202.388%200%20012.377-2.374%202.389%202.389%200%20012.377%202.377v.002zm1.212%200a3.55%203.55%200%20003.533%203.378%203.55%203.55%200%20003.53-3.379%203.55%203.55%200%2000-3.53-3.443%203.55%203.55%200%2000-3.533%203.443zm5.91%200a2.39%202.39%200%2001-2.38%202.376%202.39%202.39%200%2001-2.376-2.38v-.002a2.39%202.39%200%20012.377-2.376%202.391%202.391%200%20012.379%202.379v.002zM132.016%20177.01v-7.065h7.066v7.064h-7.066zm0-12.931a3.552%203.552%200%20003.533%203.409%203.552%203.552%200%20003.533-3.41%203.552%203.552%200%2000-3.533-3.408%203.552%203.552%200%2000-3.533%203.409zm5.908%200v.074a2.387%202.387%200%2001-2.377%202.377%202.387%202.387%200%2001-2.375-2.377v-.074a2.386%202.386%200%20012.375-2.303%202.386%202.386%200%20012.377%202.303zm0%209.397v.074a2.387%202.387%200%2001-2.377%202.377%202.387%202.387%200%2001-2.375-2.377v-.074a2.386%202.386%200%20012.375-2.303%202.386%202.386%200%20012.377%202.303zm1.214%200a3.55%203.55%200%20003.53%203.379%203.55%203.55%200%20003.534-3.379%203.55%203.55%200%2000-3.534-3.379%203.55%203.55%200%2000-3.53%203.38zm0-9.397a3.55%203.55%200%20003.53%203.379%203.55%203.55%200%20003.534-3.38%203.55%203.55%200%2000-3.534-3.378%203.55%203.55%200%2000-3.53%203.379zm5.907%200a2.389%202.389%200%2001-2.377%202.377%202.389%202.389%200%2001-2.377-2.377%202.389%202.389%200%20012.377-2.377%202.389%202.389%200%20012.377%202.377zm0%209.397a2.389%202.389%200%2001-2.377%202.377%202.389%202.389%200%2001-2.377-2.377%202.389%202.389%200%20012.377-2.377%202.389%202.389%200%20012.377%202.377zm1.212-9.397a3.552%203.552%200%20003.533%203.533%203.55%203.55%200%20003.533-3.533v-.002a3.549%203.549%200%2000-3.533-3.533%203.549%203.549%200%2000-3.533%203.533v.002zm0%209.397a3.552%203.552%200%20003.533%203.409%203.552%203.552%200%20003.533-3.409%203.552%203.552%200%2000-3.533-3.409%203.552%203.552%200%2000-3.533%203.41zm5.908%200v.074a2.387%202.387%200%2001-2.377%202.377%202.389%202.389%200%2001-2.377-2.377l.002-.074a2.386%202.386%200%20012.375-2.303%202.386%202.386%200%20012.377%202.303zm0-9.53a2.391%202.391%200%2001-2.38%202.379%202.39%202.39%200%2001-2.377-2.38%202.389%202.389%200%20012.377-2.377%202.39%202.39%200%20012.38%202.377zm1.213%209.53a3.55%203.55%200%20003.531%203.379%203.55%203.55%200%20003.533-3.379%203.55%203.55%200%2000-3.533-3.379%203.55%203.55%200%2000-3.53%203.38zm5.984%200a2.389%202.389%200%2001-2.377%202.377%202.389%202.389%200%2001-2.377-2.377%202.389%202.389%200%20012.377-2.377%202.389%202.389%200%20012.377%202.377z%22%20fill%3D%22%23ffca1d%22%2F%3E%3Cpath%20d%3D%22M281%2042.727v99.462H106.623V42.727z%22%2F%3E%3Cpath%20d%3D%22M259.727%2087.914h16.816v-7.566H259.73v-18.79h16.813v-7.932h-21.618v-4.434h26.052v16.797h-16.814v9.927h16.814v16.431h-16.814v9.925h16.814v28.408h-33.79v-4.431h29.356v-7.928h-29.36v-4.434h29.36v-7.184H259.73v-18.79h-.003z%22%20fill%3D%22%23d09600%22%2F%3E%3Cpath%20d%3D%22M110.239%2048.731h133.195v58.71h-21.166v29.607H110.239V48.731z%22%20fill%3D%22%23c7c7c7%22%2F%3E%3Cpath%20d%3D%22M207.334%2052.548h5.361v2.66h-.633v-2.172h-1.642v2.034h-.629v-2.034h-1.826v2.257h-.631v-2.745zm1.722%203.252l.058.458a1.984%201.984%200%2000-.661.152c-.355.175-.58.54-.576.935%200%20.185.042.346.122.489a.745.745%200%2000.33.318%201.031%201.031%200%2000.898.004.789.789%200%2000.318-.332c.103-.211.19-.43.262-.654.118-.336.23-.575.334-.709.13-.17.302-.306.5-.392a1.84%201.84%200%20011.428.028c.221.095.408.256.534.46.122.203.187.438.185.676%200%20.274-.067.513-.194.72a1.247%201.247%200%2001-.566.482%202.172%202.172%200%2001-.843.18l-.053-.466a1.32%201.32%200%2000.769-.253c.173-.148.26-.36.26-.645%200-.293-.08-.507-.237-.64a.846.846%200%2000-.569-.203.75.75%200%2000-.474.143c-.125.092-.254.338-.383.735-.131.393-.244.667-.34.813-.137.207-.325.37-.549.474-.24.106-.5.157-.762.152-.286%200-.553-.055-.806-.168a1.345%201.345%200%2001-.59-.484%201.247%201.247%200%2001-.21-.707%201.526%201.526%200%2001.212-.836c.155-.237.378-.421.638-.53.304-.13.634-.2.965-.2zm-1.722%203.59h5.361v1.387c0%20.244-.018.43-.052.56a.933.933%200%2001-.252.454%201.329%201.329%200%2001-.515.294%202.325%202.325%200%2001-.733.111%202.144%202.144%200%2001-1.156-.3c-.316-.197-.475-.557-.475-1.075v-.944h-2.178v-.486zm2.81.487v.95c0%20.314.087.538.257.669.212.145.466.214.721.198.198.007.397-.035.576-.115.14-.06.254-.17.316-.309.039-.147.055-.302.046-.454v-.94h-1.916zm-1.396%202.759l.087.451c-.373.051-.64.139-.806.265-.163.125-.246.277-.246.454%200%20.214.106.392.322.539.237.152.516.23.797.219.302%200%20.553-.07.749-.203.195-.138.294-.309.294-.516a.902.902%200%2000-.073-.32l.576.05a.744.744%200%2000.211.593c.148.154.374.23.678.23.211.01.421-.05.598-.168a.512.512%200%2000-.002-.87%201.492%201.492%200%2000-.723-.227l.115-.453c.37.03.726.159%201.027.377a.904.904%200%2001.175%201.286%201.185%201.185%200%2001-.513.384%201.82%201.82%200%2001-.691.136c-.23%200-.442-.044-.634-.129a1.046%201.046%200%2001-.451-.378.882.882%200%2001-.456.507c-.23.12-.518.18-.866.18-.468%200-.864-.115-1.19-.35a1.055%201.055%200%2001-.49-.89c0-.32.157-.621.422-.803a1.99%201.99%200%20011.09-.364zm-.783%205.226h-.631v-2.428c.154-.004.306.014.456.053.25.065.49.166.714.297.232.136.504.332.81.59.48.4.857.668%201.136.81.244.132.516.203.792.21.235.01.468-.06.661-.19.168-.111.27-.3.267-.5a.603.603%200%2000-.283-.523%201.407%201.407%200%2000-.792-.198l.069-.463c.507.032.891.152%201.156.359.258.198.408.509.396.834a.98.98%200%2001-.428.838c-.286.207-.638.309-1.06.309-.214%200-.428-.033-.633-.092a2.588%202.588%200%2001-.654-.3%209.015%209.015%200%2001-.944-.693%209.255%209.255%200%2000-.675-.523%202.31%202.31%200%2000-.357-.191v1.803-.002zm.976.435h.664v1.387h-.664v-1.387zm-1.607%202.584l5.361-.974v.498l-3.517.56c-.368.06-.732.112-1.096.154l.99.166%203.623.7v.587l-2.715.525c-.673.134-1.304.23-1.898.288.339.046.728.108%201.168.184l3.445.576v.488l-5.361-1.008v-.468l4.083-.776c.21-.042.42-.08.631-.115-.212-.033-.421-.07-.63-.109l-4.084-.778v-.498zm0%204.213h5.361v1.63c0%20.33-.048.577-.145.75a.994.994%200%2001-.51.407%202.1%202.1%200%2001-.807.154%201.731%201.731%200%2001-.963-.253%201.152%201.152%200%2001-.497-.783c-.092.129-.18.226-.267.292a3.7%203.7%200%2001-.714.403l-1.458.64v-.612l1.114-.484c.251-.108.496-.225.737-.352.132-.065.254-.147.36-.246a.673.673%200%2000.142-.224c.021-.087.03-.18.028-.27v-.564h-2.381v-.488zm2.994.488v1.046c-.01.18.025.357.101.52a.65.65%200%2000.323.286c.152.067.313.1.479.1.253%200%20.463-.063.626-.19.161-.126.244-.327.244-.599v-1.163h-1.773zm-.383%203.066c.89%200%201.585.166%202.09.493.504.327.755.75.755%201.267%200%20.34-.12.647-.355.92a2.22%202.22%200%2001-.99.623%204.483%204.483%200%2001-1.44.214c-.543%200-1.03-.076-1.458-.226a2.103%202.103%200%2001-.974-.64%201.36%201.36%200%2001.035-1.82c.271-.292.615-.506.997-.621.433-.141.884-.212%201.34-.208v-.002zm-.011.502c-.647%200-1.156.12-1.527.357-.373.24-.557.537-.557.898%200%20.366.186.668.561.903.376.237.908.355%201.599.355.438%200%20.818-.05%201.142-.152a1.69%201.69%200%2000.758-.445.952.952%200%2000.27-.654c0-.345-.173-.64-.519-.889-.345-.249-.92-.373-1.727-.373zm-2.6%204.694l5.361-1.426v.528l-3.897.956c-.31.076-.603.14-.875.19.293.058.585.125.875.199l3.897.992v.498l-5.361-1.44v-.497zm0%202.384h5.361v2.658h-.633v-2.172h-1.642v2.034h-.629v-2.034h-1.826v2.257h-.631v-2.743zm0%203.422h5.361v1.631c0%20.33-.048.576-.145.749a.994.994%200%2001-.51.407c-.257.104-.53.157-.807.152a1.731%201.731%200%2001-.963-.253%201.152%201.152%200%2001-.497-.783c-.092.131-.18.23-.267.295a3.825%203.825%200%2001-.714.405l-1.458.638v-.613l1.114-.483c.251-.109.496-.226.737-.353.132-.064.254-.147.36-.246a.673.673%200%2000.142-.224c.021-.087.03-.18.028-.269v-.564h-2.381v-.489zm2.994.489v1.045c-.01.18.025.357.101.52a.65.65%200%2000.323.286c.152.067.313.1.479.1a.995.995%200%2000.626-.192c.161-.124.244-.322.244-.599v-1.16h-1.773zm-1.387%202.98h.664v1.387h-.664v-1.387zm-1.607%201.953h5.361v2.66h-.633V95.56h-1.642v2.034h-.629V95.56h-1.826v2.258h-.631v-2.746zm20.79-31.08h6.825v3.386h-.806v-2.766h-2.089v2.589h-.8v-2.589h-2.323v2.872h-.806v-3.491zm2.193%204.137l.076.585c-.34.028-.621.092-.84.194a1.231%201.231%200%2000-.53.47%201.32%201.32%200%2000-.203.718%201.26%201.26%200%2000.152.627.963.963%200%2000.422.403c.182.087.382.133.585.13.193.005.387-.038.56-.126.172-.099.313-.244.403-.421.13-.27.241-.548.334-.834.096-.32.24-.624.423-.903a1.58%201.58%200%2001.638-.5%202.34%202.34%200%20011.815.037c.284.12.52.325.682.587.157.26.237.558.233.86a1.586%201.586%200%2001-.963%201.529c-.318.14-.675.219-1.076.23l-.064-.594c.43-.032.755-.14.976-.325.221-.184.33-.456.33-.815%200-.376-.1-.647-.3-.82a1.079%201.079%200%2000-.723-.256c-.246%200-.447.06-.606.182-.159.12-.32.43-.486.933-.165.504-.31.85-.437%201.036-.17.263-.41.47-.693.604a2.28%202.28%200%2001-.972.196c-.364%200-.705-.074-1.028-.214a1.698%201.698%200%2001-.748-.615%201.595%201.595%200%2001-.267-.903c-.014-.373.08-.742.27-1.064.197-.3.48-.535.812-.673a3.117%203.117%200%20011.225-.258zm-2.192%204.572h6.824v1.764c0%20.311-.023.548-.064.714-.056.23-.162.422-.318.576a1.71%201.71%200%2001-.659.375%202.935%202.935%200%2001-.933.143c-.58%200-1.07-.126-1.474-.38-.4-.253-.599-.711-.599-1.372v-1.2h-2.777v-.622.002zm3.581.62v1.209c0%20.4.109.684.325.852.217.168.523.253.917.253.253.007.502-.043.732-.15a.753.753%200%2000.403-.391c.05-.187.072-.382.062-.576v-1.197h-2.441.002zm-3.581%203.75h6.824v2.074c0%20.417-.06.735-.184.952-.122.216-.339.391-.647.52-.311.13-.654.196-1.03.196-.483%200-.891-.108-1.225-.323a1.47%201.47%200%2001-.634-.997c-.115.164-.225.29-.338.376-.242.18-.546.35-.908.513l-1.858.813v-.778l1.42-.622c.319-.136.632-.286.94-.445.166-.083.32-.188.457-.315a.844.844%200%2000.182-.281c.025-.113.036-.23.032-.346v-.718h-3.031v-.62zm3.814.619v1.331c-.012.228.032.456.127.666a.831.831%200%2000.41.364c.193.082.403.124.612.122.283.011.564-.074.795-.24.21-.161.313-.414.313-.76V77.69h-2.257zm-3.814%204.104h6.824v3.386h-.806v-2.764h-2.089v2.589h-.8v-2.589h-2.323v2.872h-.806v-3.494zm2.192%204.139l.076.583c-.34.027-.621.092-.84.193a1.236%201.236%200%2000-.53.472%201.32%201.32%200%2000-.203.719c-.004.219.049.433.152.624a.956.956%200%2000.422.405c.182.088.382.134.585.132.193.004.387-.04.56-.127.172-.099.313-.244.403-.421.13-.27.241-.549.334-.834.096-.32.24-.624.423-.903a1.58%201.58%200%2001.638-.5%202.33%202.33%200%20011.815.037c.284.12.52.325.682.587.157.26.237.558.233.86a1.572%201.572%200%2001-.963%201.529c-.318.14-.675.219-1.076.23l-.064-.596c.43-.03.755-.139.976-.323.221-.184.33-.456.33-.815%200-.376-.1-.65-.3-.82a1.077%201.077%200%2000-.723-.258.963.963%200%2000-.606.184c-.159.118-.32.429-.486.933-.165.504-.31.848-.437%201.036-.17.263-.41.47-.693.604-.307.133-.638.2-.972.193-.364%200-.705-.069-1.028-.214a1.693%201.693%200%2001-.748-.613%201.577%201.577%200%2001-.267-.902c-.014-.374.08-.742.27-1.065.197-.301.48-.536.812-.674a3.075%203.075%200%20011.225-.256zm0%204.36l.076.585a2.56%202.56%200%2000-.84.191%201.251%201.251%200%2000-.53.472%201.32%201.32%200%2000-.203.719c-.004.219.049.433.152.624a.956.956%200%2000.422.405c.182.09.382.134.585.132.193.004.387-.04.56-.127.172-.099.313-.244.403-.421.13-.27.241-.549.334-.834.096-.32.24-.624.423-.903a1.58%201.58%200%2001.638-.5c.27-.113.558-.168.848-.163.345%200%20.668.066.967.2.284.12.52.325.682.587.157.26.237.558.233.86a1.572%201.572%200%2001-.963%201.529%202.791%202.791%200%2001-1.076.23l-.064-.594c.43-.032.755-.138.976-.325.221-.184.33-.456.33-.815%200-.373-.1-.647-.3-.818a1.065%201.065%200%2000-.723-.258c-.246%200-.447.06-.606.182-.159.118-.32.43-.486.933-.165.504-.31.85-.437%201.036-.17.263-.41.47-.693.604a2.28%202.28%200%2001-.972.196c-.364%200-.705-.072-1.028-.215a1.698%201.698%200%2001-.748-.615%201.577%201.577%200%2001-.267-.902c-.014-.374.08-.742.27-1.065.197-.299.48-.534.812-.672a3.117%203.117%200%20011.225-.258zm-2.192%204.678h6.824v.617h-6.824v-.617zm0%201.741h6.824v3.158h-.806v-2.536h-2.112v2.197h-.806v-2.197h-3.1v-.622zm-50.66-35.622l-.53%201.447c-1.729-.304-3.049-.85-3.959-1.635-.907-.788-1.36-1.75-1.36-2.886%200-1.175.347-2.133%201.047-2.868.698-.737%201.71-1.299%203.034-1.683a15.171%2015.171%200%20014.265-.576c1.658%200%203.105.214%204.34.65%201.232.435%202.169%201.052%202.81%201.853.619.744.96%201.682.962%202.649%200%201.09-.405%202.008-1.216%202.752-.81.744-1.95%201.265-3.42%201.557l-.489-1.423c1.157-.253%202.002-.62%202.53-1.101a2.354%202.354%200%2000.792-1.817c0-.839-.293-1.539-.88-2.103-.585-.564-1.373-.958-2.361-1.186a13.414%2013.414%200%2000-3.056-.346c-1.355%200-2.534.138-3.545.408-1.009.27-1.764.69-2.262%201.262-.5.569-.75%201.189-.75%201.854%200%20.809.34%201.493%201.02%202.055.681.56%201.69.94%203.028%201.137zm-5.578%203.255h15.915v7.89h-1.88V65.79h-4.873v6.04h-1.868v-6.04h-5.417v6.702h-1.877v-8.146z%22%20fill-rule%3D%22nonzero%22%2F%3E%3Cpath%20fill%3D%22%23c7c7c7%22%20d%3D%22M45.8%2065.045v51.431H1v-51.43zM216.65%204.73v25.712h-14.28V4.73z%22%2F%3E%3Cpath%20d%3D%22M209.508%2024.962a4.156%204.156%200%20004.157-4.155v-6.442a4.175%204.175%200%2000-4.155-4.02%204.175%204.175%200%2000-4.155%204.02v6.442a4.156%204.156%200%20004.155%204.155h-.002z%22%20fill%3D%22%23607bff%22%2F%3E%3Cpath%20d%3D%22M191.492%20162.522h25.709v14.28H191.49l.002-14.28z%22%20fill%3D%22%23c7c7c7%22%2F%3E%3Cpath%20d%3D%22M211.724%20169.662a4.156%204.156%200%2000-4.155-4.155h-6.445a4.175%204.175%200%2000-4.019%204.155%204.175%204.175%200%20004.02%204.155h6.444a4.156%204.156%200%20004.155-4.155z%22%20fill%3D%22%23607bff%22%2F%3E%3Cpath%20d%3D%22M166.286.345v27.13h-31.647V.343l31.647.002z%22%20fill%3D%22%23fff7c9%22%2F%3E%3C%2Fsvg%3E","useCrocClips":false,"width":281,"height":182,"pinDist":15,"pinBlocks":[],"leds":[{"x":70,"y":90,"w":5,"h":5,"color":"neopixel","label":"NEOPIXEL"}],"touchPads":[],"buttons":[],"reset":{"x":197,"y":163,"w":15,"h":15}},"gpioPinMap":{},"groundPins":[],"threeVoltPins":[],"i2cPins":{},"onboardComponents":["pixel"],"marginWhenBreadboarding":[0,0,80,0],"spiPins":{},"id":"jacdac-iot-s2"}
// total=1718106 new=95.31% cached=0.00% other=4.69%
(function (ectx) {
'use strict';
const runtime = ectx.runtime;
const oops = ectx.oops;
const doNothing = ectx.doNothing;
const pxsim = ectx.pxsim;
const globals = ectx.globals;
const maybeYield = ectx.maybeYield;
const setupDebugger = ectx.setupDebugger;
const isBreakFrame = ectx.isBreakFrame;
const breakpoint = ectx.breakpoint;
const trace = ectx.trace;
const checkStack = ectx.checkStack;
const leave = ectx.leave;
const checkResumeConsumed = ectx.checkResumeConsumed;
const setupResume = ectx.setupResume;
const setupLambda = ectx.setupLambda;
const checkSubtype = ectx.checkSubtype;
const failedCast = ectx.failedCast;
const buildResume = ectx.buildResume;
const mkVTable = ectx.mkVTable;
const bind = ectx.bind;
const leaveAccessor = ectx.leaveAccessor;
const __this = runtime;
const pxtrt = pxsim.pxtrt;
let yieldSteps = 1;
ectx.setupYield(function() { yieldSteps = 100; })
pxsim.setTitle("jacdac-uploader");
pxsim.setConfigData({
 "13": 65543,
 "52": 65544,
 "53": 65543,
 "54": 65542,
 "60": 17,
 "208": 983264687,
 "400": 0,
 "401": 1,
 "402": 2,
 "403": 3,
 "404": 4,
 "405": 5,
 "412": 12,
 "413": 13,
 "414": 14,
 "415": 15,
 "416": 16,
 "417": 17,
 "418": 18,
 "419": 19,
 "421": 21,
 "422": 22,
 "423": 23,
 "425": 25,
 "426": 26,
 "427": 27,
 "1103": 65544,
 "1104": 65538,
 "1105": 13
}, {
 "PIN_LED": 13,
 "PIN_LED_R": 52,
 "PIN_LED_G": 53,
 "PIN_LED_B": 54,
 "PIN_JACK_TX": 60,
 "BOOTLOADER_BOARD_ID": 208,
 "PIN_P0": 400,
 "PIN_P1": 401,
 "PIN_P2": 402,
 "PIN_P3": 403,
 "PIN_P4": 404,
 "PIN_P5": 405,
 "PIN_P12": 412,
 "PIN_P13": 413,
 "PIN_P14": 414,
 "PIN_P15": 415,
 "PIN_P16": 416,
 "PIN_P17": 417,
 "PIN_P18": 418,
 "PIN_P19": 419,
 "PIN_P21": 421,
 "PIN_P22": 422,
 "PIN_P23": 423,
 "PIN_P25": 425,
 "PIN_P26": 426,
 "PIN_P27": 427,
 "PIN_JDPWR_OVERLOAD_LED": 1103,
 "PIN_JDPWR_ENABLE": 1104,
 "PIN_JDPWR_FAULT": 1105
});
pxtrt.mapKeyNames = [
 "",
 "IPaddress",
 "MACaddress",
 "_attach",
 "_buffer",
 "_cached",
 "_closeHandler",
 "_closed",
 "_connectionStatus",
 "_controller",
 "_data",
 "_destroy",
 "_detach",
 "_device",
 "_errorHandler",
 "_eventCounter",
 "_handled",
 "_header",
 "_isConnected",
 "_lastListenerTime",
 "_localTime",
 "_messageHandler",
 "_myDevice",
 "_oldBindingsHash",
 "_openHandler",
 "_read_so_far",
 "_score",
 "_sendCmd",
 "_sendCmdId",
 "_sendCore",
 "_sendReport",
 "_sendWithAck",
 "_shortId",
 "_socknum",
 "_ssid",
 "_statusCode",
 "_timeout",
 "add",
 "addListenerInternal",
 "advertisementData",
 "allClients",
 "announceCallback",
 "announceflags",
 "applyTwinUpdate",
 "attachClient",
 "autoBind",
 "autoBindCnt",
 "autoconnect",
 "bindRoles",
 "bindingHash",
 "bindings",
 "boundToDev",
 "boundToServiceIdx",
 "broadcast",
 "bssid",
 "buf",
 "c0",
 "canSend",
 "cancel",
 "channel",
 "checkChanges",
 "checkKw",
 "clearAttachCache",
 "clientId",
 "clients",
 "close",
 "code",
 "compress",
 "computeTwin",
 "condition",
 "config",
 "connect",
 "connectAP",
 "connectCore",
 "connected",
 "connectionStatus",
 "conntype",
 "content",
 "continuePublish",
 "controlServer",
 "controller",
 "crc",
 "createSocket",
 "currIndent",
 "data",
 "dataAvailableSrc",
 "dataAvailableValue",
 "delay",
 "deltaTimeMillis",
 "describe",
 "detachClient",
 "device",
 "deviceId",
 "deviceIdentifier",
 "devices",
 "disableBrain",
 "disableLogger",
 "disableRoleManager",
 "disconnect",
 "disconnectAP",
 "div",
 "doArray",
 "doNumber",
 "doObject",
 "doString",
 "doneSending",
 "eid",
 "emit",
 "emitEvent",
 "enabled",
 "error",
 "errorMsg",
 "eventCode",
 "eventCounter",
 "eventID",
 "eventId",
 "evid",
 "factory",
 "fields",
 "finishPublish",
 "flags",
 "flushReadBuffer",
 "fmt",
 "fp",
 "frameCallbacks",
 "frameWorker",
 "framesInSample",
 "from",
 "fromBinary",
 "fromBuffer",
 "fullyBound",
 "func",
 "gcDevices",
 "getNumber",
 "go",
 "handleConnected",
 "handleFloodPing",
 "handleInstanceName",
 "handleMessage",
 "handlePacket",
 "handlePacketOuter",
 "handleRegBool",
 "handleRegUInt32",
 "handleRegValue",
 "handleSetConnectionString",
 "handleStatusCode",
 "handled",
 "handler",
 "handlers",
 "hasService",
 "header",
 "headers",
 "host",
 "hostServices",
 "hubDeviceId",
 "hubName",
 "id",
 "idleCallbacks",
 "inScan",
 "indent",
 "indentStep",
 "instanceName",
 "intData",
 "isArray",
 "isBrain",
 "isClient",
 "isCommand",
 "isConnected",
 "isEvent",
 "isRegGet",
 "isRegSet",
 "isReport",
 "jdpacked",
 "jdunpack",
 "json",
 "key",
 "lastQuery",
 "lastReport",
 "lastScanResults",
 "lastSeen",
 "listeners",
 "log",
 "logError",
 "logPriority",
 "lookupQuery",
 "markHandled",
 "matchesRoleAt",
 "message",
 "minPriority",
 "mkEventCmd",
 "mode",
 "mqttHandlers",
 "multicommandClass",
 "name",
 "net",
 "networks",
 "nextChar",
 "nextCnt",
 "nextRetry",
 "nfmt",
 "nfmt2",
 "noWait",
 "notImplemented",
 "numTries",
 "on",
 "onClose",
 "onConnectSSIDFailed",
 "onError",
 "onEvent",
 "onMessage",
 "onOpen",
 "once",
 "onlyHeader",
 "opt",
 "packFormat",
 "packetFlags",
 "packf",
 "parent",
 "parse",
 "password",
 "piId",
 "pid",
 "ping",
 "pkt",
 "pkts",
 "port",
 "possiblyNotImplemented",
 "prevTimeMillis",
 "process",
 "processPacket",
 "proxyMode",
 "ptr",
 "publish",
 "qos",
 "queries",
 "query",
 "queueAnnounce",
 "raiseEvent",
 "read",
 "readLine",
 "readSecret",
 "readSecrets",
 "readingBuffer",
 "readingPtr",
 "reason",
 "reattach",
 "reconnectRunning",
 "reg",
 "regCode",
 "register",
 "registerHandler",
 "registers",
 "requiresAck",
 "resend",
 "reset",
 "resetIn",
 "respond",
 "respondForEach",
 "restartCounter",
 "retain",
 "role",
 "rssi",
 "running",
 "runningCallbacks",
 "s",
 "scanDone",
 "scanNetworks",
 "scanNetworksCore",
 "score",
 "scoreFor",
 "sct",
 "select",
 "selfDevice",
 "send",
 "send1",
 "sendAsMultiCommand",
 "sendChangeEvent",
 "sendCommand",
 "sendEvent",
 "sendReport",
 "sendUptime",
 "serialize",
 "service",
 "serviceClass",
 "serviceClassAt",
 "serviceClassLength",
 "serviceCommand",
 "serviceIdx",
 "serviceIndex",
 "services",
 "setConnected",
 "setConnectionStatus",
 "setSecret",
 "setTimeout",
 "setValue",
 "shortId",
 "size",
 "skipWS",
 "socket",
 "socketAvailable",
 "socketClose",
 "socketConnect",
 "socketRead",
 "socketWrite",
 "spec",
 "src",
 "srcId",
 "ssid",
 "start",
 "startClient",
 "startPublish",
 "started",
 "stateUpdated",
 "status",
 "status_code",
 "stringData",
 "subs",
 "subscribe",
 "subscribeCore",
 "supressLog",
 "systemActive",
 "text",
 "tick",
 "timeInSample",
 "timeOut",
 "timeout",
 "timestamp",
 "toBuffer",
 "toString",
 "topic",
 "trace",
 "tracePriority",
 "unattachedClients",
 "updateQueue",
 "updateSecret",
 "username",
 "value",
 "vid",
 "wait",
 "wdId",
 "will",
 "withFrameStripped",
 "word",
 "work",
 "write",
 "writeAndClose",
 "writeEx"
];
__this.setupPerfCounters([]);
const pxsim_Array__getAt = pxsim.Array_.getAt;
const pxsim_Array__length = pxsim.Array_.length;
const pxsim_Array__mk = pxsim.Array_.mk;
const pxsim_Array__push = pxsim.Array_.push;
const pxsim_Boolean__bang = pxsim.Boolean_.bang;
const pxsim_String__concat = pxsim.String_.concat;
const pxsim_String__stringConv = pxsim.String_.stringConv;
const pxsim_numops_toBool = pxsim.numops.toBool;
const pxsim_numops_toBoolDecr = pxsim.numops.toBoolDecr;
const pxsim_pxtcore_mkAction = pxsim.pxtcore.mkAction;
const pxsim_pxtcore_mkClassInstance = pxsim.pxtcore.mkClassInstance;
const pxsim_pxtrt_ldlocRef = pxsim.pxtrt.ldlocRef;
const pxsim_pxtrt_mapGetByString = pxsim.pxtrt.mapGetByString;
const pxsim_pxtrt_stclo = pxsim.pxtrt.stclo;
const pxsim_pxtrt_stlocRef = pxsim.pxtrt.stlocRef;
const pxsim_Boolean_ = pxsim.Boolean_;
const pxsim_pxtcore = pxsim.pxtcore;
const pxsim_String_ = pxsim.String_;
const pxsim_ImageMethods = pxsim.ImageMethods;
const pxsim_Array_ = pxsim.Array_;
const pxsim_pxtrt = pxsim.pxtrt;
const pxsim_numops = pxsim.numops;


function _main___P2120(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// base/buffer.ts(196,18): _b64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
    globals._b64___191 = ("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");
// base/control.ts(85,9): _evSource = 0x8000
    globals._evSource___2169 = (32768);
// base/interval.ts(8,9): _intervals: Interval[] = undefined
    globals._intervals___2172 = (undefined);
// base/poll.ts(19,9): _pollEventQueue: PollEvent[] = undefined
    globals._pollEventQueue___2181 = (undefined);
// base/console.ts(22,16): minPriority = ConsolePriority.Log
    globals.minPriority___373 = (1);
// base/console.ts(25,11): listeners: Listener[] = [...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, listeners_inline__P2184);
    globals.listeners___2185 = (s.tmp_0);
// settings---esp32/settings.ts(2,11): RUN_KEY = "#run"
    globals.RUN_KEY___2228 = ("#run");
// settings---esp32/settings.ts(3,11): SCOPE_KEY = "#scope"
    globals.SCOPE_KEY___2229 = ("#scope");
// settings---esp32/settings.ts(4,11): DEVICE_SECRETS_KEY = "#secrets"
    globals.DEVICE_SECRETS_KEY___2230 = ("#secrets");
// settings---esp32/settings.ts(5,11): SECRETS_KEY = "__secrets"
    globals.SECRETS_KEY___2231 = ("__secrets");
// settings---esp32/settings.ts(52,5): initScopes()
    s.tmp_0 = settings_initScopes__P2240_mk(s);
    s.callLocIdx = 133; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// settings---esp32/settings.ts(243,18): deviceSecrets = new SecretStore(DEVICE_SECRETS_KEY)
    r0 = pxsim_pxtcore_mkClassInstance(settings_SecretStore__C1094_VT);
    s.tmp_0 = r0;
    s.tmp_1 = settings_SecretStore_constructor__P1095_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = globals.DEVICE_SECRETS_KEY___2230;
    s.callLocIdx = 158; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    globals.deviceSecrets___1101 = (s.tmp_0);
// settings---esp32/settings.ts(249,18): programSecrets = new SecretStore(SECRETS_KEY)
    r0 = pxsim_pxtcore_mkClassInstance(settings_SecretStore__C1094_VT);
    s.tmp_0 = r0;
    s.tmp_1 = settings_SecretStore_constructor__P1095_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = globals.SECRETS_KEY___2231;
    s.callLocIdx = 159; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    globals.programSecrets___1102 = (s.tmp_0);
// net/net.ts(11,16): logPriority: ConsolePriority = -1
    globals.logPriority___1168 = (-1);
// net/net.ts(150,11): AP_SECRETS_KEY = "wifi"
    globals.AP_SECRETS_KEY___2261 = ("wifi");
// net/net.ts(151,11): AP_PRI_KEY = "#wifipriority"
    globals.AP_PRI_KEY___2262 = ("#wifipriority");
// azureiot/azureiot.ts(9,18): SECRETS_KEY = "azureiot"
    globals.SECRETS_KEY___1341 = ("azureiot");
// azureiot/azureiot.ts(11,16): logPriority = ConsolePriority.Debug
    globals.logPriority___1342 = (0);
// jacdac/logger-server/server.ts(81,18): loggerServer = new LoggerServer()
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_LoggerServer__C1644_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_LoggerServer_constructor__P1646_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 722; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    globals.loggerServer___1653 = (s.tmp_0);
// jacdac/rolemgr.ts(2,11): roleSettingPrefix = "#jdr:"
    globals.roleSettingPrefix___2448 = ("#jdr:");
// jacdac/rolemgr.ts(347,18): roleManagerServer = new _rolemgr.RoleManagerServer()
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_RoleManagerServer__C1726_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac__rolemgr_RoleManagerServer_constructor__P1728_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 800; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    globals.roleManagerServer___1732 = (s.tmp_0);
// jacdac/routing.ts(22,18): CHANGE = "change"
    globals.CHANGE___1786 = ("change");
// jacdac/routing.ts(23,18): CONNECT = "connect"
    globals.CONNECT___1787 = ("connect");
// jacdac/routing.ts(24,18): DISCONNECT = "disconnect"
    globals.DISCONNECT___1788 = ("disconnect");
// jacdac/routing.ts(25,18): DEVICE_CONNECT = "deviceConnect"
    globals.DEVICE_CONNECT___1789 = ("deviceConnect");
// jacdac/routing.ts(26,18): DEVICE_DISCONNECT = "deviceDisconnect"
    globals.DEVICE_DISCONNECT___1790 = ("deviceDisconnect");
// jacdac/routing.ts(27,18): DEVICE_CHANGE = "deviceChange"
    globals.DEVICE_CHANGE___1791 = ("deviceChange");
// jacdac/routing.ts(28,18): DEVICE_ANNOUNCE = "deviceAnnounce"
    globals.DEVICE_ANNOUNCE___1792 = ("deviceAnnounce");
// jacdac/routing.ts(29,18): SELF_ANNOUNCE = "selfAnnounce"
    globals.SELF_ANNOUNCE___1793 = ("selfAnnounce");
// jacdac/routing.ts(30,18): PACKET_PROCESS = "packetProcess"
    globals.PACKET_PROCESS___1794 = ("packetProcess");
// jacdac/routing.ts(31,18): REPORT_RECEIVE = "reportReceive"
    globals.REPORT_RECEIVE___1795 = ("reportReceive");
// jacdac/routing.ts(32,18): REPORT_UPDATE = "reportUpdate"
    globals.REPORT_UPDATE___1796 = ("reportUpdate");
// jacdac/routing.ts(33,18): RESTART = "restart"
    globals.RESTART___1797 = ("restart");
// jacdac/routing.ts(34,18): PACKET_RECEIVE = "packetReceive"
    globals.PACKET_RECEIVE___1798 = ("packetReceive");
// jacdac/routing.ts(35,18): EVENT = "packetEvent"
    globals.EVENT___1799 = ("packetEvent");
// jacdac/routing.ts(36,18): STATUS_EVENT = "statusEvent"
    globals.STATUS_EVENT___1800 = ("statusEvent");
// jacdac/routing.ts(37,18): IDENTIFY = "identify"
    globals.IDENTIFY___1801 = ("identify");
// jacdac/routing.ts(326,18): bus: Bus = new Bus()
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Bus__C1802_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_Bus_constructor__P1808_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 881; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    globals.bus___1822 = (s.tmp_0);
// jacdac/routing.ts(329,16): logPriority = ConsolePriority.Debug
    globals.logPriority___1823 = (0);
// jacdac/routing.ts(1419,18): JACDAC_PROXY_SETTING = "__jacdac_proxy"
    globals.JACDAC_PROXY_SETTING___1899 = ("__jacdac_proxy");
// jacdac/routing.ts(1597,1): // on micro:bit it allocates a buffer that should stay in the same place in
    s.tmp_0 = jacdac___physStart__P1371_mk(s);
    s.callLocIdx = 1099; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// jacdac/routing.ts(1600,5): setLed(0, 0, 0)
    s.tmp_0 = jacdac_setLed__P1906_mk(s);
    s.tmp_0.arg0 = 0;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 1100; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
// jacdac/routing.ts(1603,1): if (onPlatformStart) onPlatformStart()
    r0 = pxsim_numops_toBoolDecr(globals.onPlatformStart___1783);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1603,26): onPlatformStart()
    s.tmp_0 = lambda_1_mk(s);
    s.tmp_0.argL = globals.onPlatformStart___1783;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 1101; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
  case 1:
  case 2:
// jacdac/routing.ts(1606,1): startProxy()
    s.tmp_0 = jacdac_startProxy__P2513_mk(s);
    s.callLocIdx = 1102; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
// jacdac/routing.ts(1609,1): control.runInParallel(() => start())
    r0 = pxsim.control.runInParallel(jacdac_inline__P2523);
// jacdac/eventsource.ts(14,18): ERROR = "error"
    globals.ERROR___1911 = ("error");
// jacdac/version.ts(7,18): VERSION = "v0.7.36"
    globals.VERSION___1921 = ("v0.7.36");
// jacdac-azure-iot-hub-health-server/server.ts(148,18): azureIotHubHealth = new AzureIotHubHealthServer("iothub")
    r0 = pxsim_pxtcore_mkClassInstance(servers_AzureIotHubHealthServer__C1941_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_AzureIotHubHealthServer_constructor__P1942_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "iothub";
    s.callLocIdx = 1147; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    globals.azureIotHubHealth___1947 = (s.tmp_0);
// wifi---esp32/controller.ts(120,1): new net.Net(() => new WifiController())
    r0 = pxsim_pxtcore_mkClassInstance(net_Net__C1204_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_Net_constructor__P1205_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = net_inline__P2540;
    s.callLocIdx = 1159; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(120,18): wifi = new WiFiServer("wifi")
    r0 = pxsim_pxtcore_mkClassInstance(servers_WiFiServer__C2111_VT);
    s.tmp_0 = r0;
    s.tmp_1 = servers_WiFiServer_constructor__P2113_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = "wifi";
    s.callLocIdx = 1205; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    globals.wifi___2115 = (s.tmp_0);
// twins.ts(10,9): pendingReadings = 0
    globals.pendingReadings___2613 = (0);
// twins.ts(11,9): pendingMessageSize = 0
    globals.pendingMessageSize___2615 = (0);
// twins.ts(14,9): messagePtr = 0
    globals.messagePtr___2619 = (0);
// twins.ts(15,9): numMsg = 0
    globals.numMsg___2621 = (0);
// twins.ts(22,11): streamingIntervalSpec: ServiceTwinRegisterSpec = {...
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "name", "streaming_interval");
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "code", 4);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "flags", 0);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "packf", "u32");
    globals.streamingIntervalSpec___2624 = (s.tmp_0);
// twins.ts(212,11): ignoredServices = [...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = pxsim_Array__push(s.tmp_0, 508264038);
    r0 = pxsim_Array__push(s.tmp_0, 316415946);
    r0 = pxsim_Array__push(s.tmp_0, 285727818);
    r0 = pxsim_Array__push(s.tmp_0, 536516936);
    r0 = pxsim_Array__push(s.tmp_0, 382158442);
    r0 = pxsim_Array__push(s.tmp_0, 504728043);
    r0 = pxsim_Array__push(s.tmp_0, 384932169);
    r0 = pxsim_Array__push(s.tmp_0, 272387813);
    r0 = pxsim_Array__push(s.tmp_0, 413852154);
    r0 = pxsim_Array__push(s.tmp_0, 342028028);
    globals.ignoredServices___2647 = (s.tmp_0);
// twins.ts(434,9): statusPhase = 0
    globals.statusPhase___2662 = (0);
// twins.ts(435,9): sendTick = 0
    globals.sendTick___2664 = (0);
// twins.ts(436,11): sim = control.deviceDalVersion() == "sim"
    r0 = pxsim.control.deviceDalVersion();
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == "sim");
    globals.sim___2667 = (r0);
// uploader.ts(3,1): jacdac.firmwareVersion = jacdac.VERSION
    globals.firmwareVersion___1785 = (globals.VERSION___1921);
// uploader.ts(4,1): jacdac.productIdentifier = 0x3fa1aea9
    globals.productIdentifier___1784 = (1067560617);
// uploader.ts(5,1): jacdac.logPriority = ConsolePriority.Log
    globals.logPriority___1823 = (1);
// uploader.ts(6,1): jacdac.start()
    s.tmp_0 = jacdac_start__P1900_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 1340; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
// uploader.ts(8,1): /*...
    s.tmp_0 = jacdac_Server_start__P1833_mk(s);
    s.tmp_0.arg0 = globals.wifi___2115;
    s.callLocIdx = 1341; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
// uploader.ts(16,1): servers.azureIotHubHealth.start()
    s.tmp_0 = jacdac_Server_start__P1833_mk(s);
    s.tmp_0.arg0 = globals.azureIotHubHealth___1947;
    s.callLocIdx = 1342; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
// uploader.ts(18,1): jacdac.twins.init()
    s.tmp_0 = jacdac_twins_init__P2118_mk(s);
    s.callLocIdx = 1343; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
_main___P2120.info = {"start":0,"length":0,"line":0,"column":0,"endLine":0,"endColumn":0,"fileName":"uploader.ts","functionName":"<main>","argumentNames":[]}
_main___P2120.continuations = [  ]

function _main___P2120_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: _main___P2120, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_inline__P2523(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_start__P1900_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 1103; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_inline__P2523.info = {"start":53350,"length":13,"line":1608,"column":26,"endLine":1608,"endColumn":39,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_inline__P2523_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_inline__P2523, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_inline__P2540(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = pxsim_pxtcore_mkClassInstance(net_WifiController__C1969_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_WifiController_constructor__P1970_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 1158; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
net_inline__P2540.info = {"start":4284,"length":26,"line":119,"column":16,"endLine":119,"endColumn":42,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_inline__P2540_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_inline__P2540, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_twins_init__P2118(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___2714 = undefined;
    s.unnamed202___U1 = undefined;
    s.unnamed203___U2 = undefined;
    s.servIdx___2717 = undefined;
    s.cl___2723 = undefined;
// twins.ts(476,9): if (twins) return
    r0 = pxsim_numops_toBoolDecr(globals.twins___2609);
    if (!r0) { step = 1; continue; }
// twins.ts(476,20): return
    { step = 7; continue; }
  case 1:
  case 2:
// twins.ts(477,9): twins = []
    r0 = pxsim_Array__mk();
    globals.twins___2609 = (r0);
// twins.ts(479,9): exclusions = []
    r0 = pxsim_Array__mk();
    globals.exclusions___2610 = (r0);
// twins.ts(480,9): exclusions.push("control.uptime")
    r0 = pxsim_Array__push(globals.exclusions___2610, "control.uptime");
// twins.ts(481,9): exclusions.push("control.mcu_temperature")
    r0 = pxsim_Array__push(globals.exclusions___2610, "control.mcu_temperature");
// twins.ts(483,9): messageBuffer = Buffer.create(MAX_PACKET_SIZE)
    r0 = pxsim.control.createBuffer(1000);
    globals.messageBuffer___2617 = (r0);
// twins.ts(485,9): lastReadingsSent = control.millis()
    r0 = pxsim.control.millis();
    globals.lastReadingsSent___2616 = (r0);
// twins.ts(487,9): setInterval(statusLight, 100)
    s.tmp_0 = setInterval__P422_mk(s);
    s.tmp_0.arg0 = jacdac_twins_statusLight__P2669;
    s.tmp_0.arg1 = 100;
    s.callLocIdx = 1328; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// twins.ts(489,9): console.log("waiting for enumeration...")
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_0.arg0 = "waiting for enumeration...";
    s.callLocIdx = 1329; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// twins.ts(490,9): pause(1000)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 1000;
    s.callLocIdx = 1330; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
// twins.ts(491,9): console.log("waiting until connected...")
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_0.arg0 = "waiting until connected...";
    s.callLocIdx = 1331; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
// twins.ts(492,9): pauseUntil(() => net.Net.instance.controller.isConnected)
    s.tmp_0 = pauseUntil__P365_mk(s);
    s.tmp_0.arg0 = jacdac_twins_init_inline__P2708;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 1333; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
// twins.ts(493,9): console.log("getting specs...")
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_0.arg0 = "getting specs...";
    s.callLocIdx = 1334; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
// twins.ts(494,20): d
    s.d___2714 = (undefined);
    r0 = globals.bus___1822.fields["devices"];
    s.unnamed202___U1 = (r0);
    s.unnamed203___U2 = (0);
// twins.ts(494,9): for (const d of jacdac.bus.devices) {...
  case 3:
    s.tmp_0 = r0 = s.unnamed203___U2;
    r0 = pxsim_Array__length(s.unnamed202___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed202___U1, s.unnamed203___U2);
    s.d___2714 = (r0);
// twins.ts(495,22): servIdx = 0
    s.servIdx___2717 = (0);
// twins.ts(495,13): for (let servIdx = 0; servIdx < d.serviceClassLength; ++servIdx) {
  case 4:
// twins.ts(495,35): servIdx < d.serviceClassLength
    s.tmp_1 = r0 = s.servIdx___2717;
    s.tmp_3 = jacdac_Device_serviceClassLength__P1884_mk(s);
    s.tmp_3.arg0 = s.d___2714;
    s.callLocIdx = 1335; s.pc = 14; return s.tmp_3;
  case 14:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// twins.ts(496,23): cl = d.serviceClassAt(servIdx)
    s.tmp_4 = jacdac_Device_serviceClassAt__P1885_mk(s);
    s.tmp_4.arg0 = s.d___2714;
    s.tmp_4.arg1 = s.servIdx___2717;
    s.callLocIdx = 1336; s.pc = 15; return s.tmp_4;
  case 15:
    r0 = s.retval;
    s.cl___2723 = (r0);
// twins.ts(497,17): getServiceTwinSpec(cl)
    s.tmp_0 = jacdac_twins_getServiceTwinSpec__P2648_mk(s);
    s.tmp_0.arg0 = s.cl___2723;
    s.callLocIdx = 1337; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
// twins.ts(495,67): ++servIdx
    r0 = (s.servIdx___2717 + 1);
    s.servIdx___2717 = (r0);
    { step = 4; continue; }
  case 5:
    r0 = (s.unnamed203___U2 + 1);
    s.unnamed203___U2 = (r0);
    { step = 3; continue; }
  case 6:
    s.unnamed202___U1 = (undefined);
// twins.ts(501,9): console.log("starting scan...")
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_0.arg0 = "starting scan...";
    s.callLocIdx = 1338; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
// twins.ts(502,9): setInterval(rescanDevices, 1000)
    s.tmp_0 = setInterval__P422_mk(s);
    s.tmp_0.arg0 = jacdac_twins_rescanDevices__P2655;
    s.tmp_0.arg1 = 1000;
    s.callLocIdx = 1339; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_init__P2118.info = {"start":15029,"length":883,"line":474,"column":4,"endLine":502,"endColumn":5,"fileName":"twins.ts","functionName":"init","argumentNames":[]}

function jacdac_twins_init__P2118_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_init__P2118, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  d___2714: undefined,
  unnamed202___U1: undefined,
  unnamed203___U2: undefined,
  servIdx___2717: undefined,
  cl___2723: undefined,
} }





function jacdac_twins_init_inline__P2708(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_1 = net_Net_controller__P1207_mk(s);
    s.tmp_1.arg0 = globals.net_Net_instance___1206;
    s.callLocIdx = 1332; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.isConnected;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_init_inline__P2708.info = {"start":15497,"length":45,"line":491,"column":19,"endLine":491,"endColumn":64,"fileName":"twins.ts","functionName":"inline","argumentNames":[]}

function jacdac_twins_init_inline__P2708_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_init_inline__P2708, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_twins_rescanDevices__P2655(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.e___2741 = undefined;
// twins.ts(325,9): if (!connect()) return
    s.tmp_3 = jacdac_twins_connect__P2660_mk(s);
    s.callLocIdx = 1284; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// twins.ts(325,25): return
    { step = 5; continue; }
  case 1:
  case 2:
// twins.ts(326,9): try {...
    r0 = pxsim_pxtcore.beginTry(3);
// twins.ts(327,13): scan()
    s.tmp_0 = jacdac_twins_scan__P2656_mk(s);
    s.callLocIdx = 1285; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___2741 = (r0);
// twins.ts(329,13): console.error("unhandled scan exception:")
    s.tmp_0 = console_error__P377_mk(s);
    s.tmp_0.arg0 = "unhandled scan exception:";
    s.callLocIdx = 1286; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// twins.ts(330,13): console.error(e)
    s.tmp_0 = console_error__P377_mk(s);
    s.tmp_0.arg0 = s.e___2741;
    s.callLocIdx = 1287; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_rescanDevices__P2655.info = {"start":10576,"length":212,"line":323,"column":4,"endLine":331,"endColumn":5,"fileName":"twins.ts","functionName":"rescanDevices","argumentNames":[]}

function jacdac_twins_rescanDevices__P2655_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_rescanDevices__P2655, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  e___2741: undefined,
} }





function console_error__P377(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/console.ts(48,9): add(ConsolePriority.Error, text)
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = 3;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 71; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_error__P377.info = {"start":1132,"length":82,"line":46,"column":4,"endLine":48,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"error","argumentNames":["text"]}

function console_error__P377_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_error__P377, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function console_add__P374(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.text___2754 = undefined;
    s.i___2763 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/console.ts(30,9): if (priority < minPriority) return;
    r0 = (s.arg0 < globals.minPriority___373);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/console.ts(30,37): return;
    { step = 5; continue; }
  case 1:
  case 2:
// base/console.ts(31,13): text = inspect(message)
    s.tmp_1 = console_inspect__P380_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = 20;
    s.callLocIdx = 67; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.text___2754 = (r0);
// base/console.ts(33,1): text += "\n"
    if ((s.text___2754) && (s.text___2754).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.text___2754);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.text___2754) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\n");
    s.text___2754 = (r0);
// base/console.ts(35,18): i = 0
    s.i___2763 = (0);
// base/console.ts(35,1): for (let i = 0; i < listeners.length; ++i)...
  case 3:
// base/console.ts(35,25): i < listeners.length
    s.tmp_1 = r0 = s.i___2763;
    r0 = pxsim_Array__length(globals.listeners___2185);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/console.ts(36,13): listeners[i](priority, text)
    s.tmp_3 = lambda_3_mk(s);
    r0 = pxsim_Array__getAt(globals.listeners___2185, s.i___2763);
    s.tmp_3.argL = r0;
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.text___2754;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 68; s.pc = 8; return s.tmp_3;
  case 8:
    r0 = s.retval;
// base/console.ts(35,47): ++i
    r0 = (s.i___2763 + 1);
    s.i___2763 = (r0);
    { step = 3; continue; }
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_add__P374.info = {"start":632,"length":317,"line":28,"column":4,"endLine":36,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"add","argumentNames":["priority","message"]}

function console_add__P374_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_add__P374, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  text___2754: undefined,
  i___2763: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function listeners_inline__P2184(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/console.ts(26,62): control.__log(priority, text)
    r0 = pxsim.control.__log(s.arg0, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
listeners_inline__P2184.info = {"start":534,"length":85,"line":25,"column":8,"endLine":25,"endColumn":93,"fileName":"pxt_modules/base/console.ts","functionName":"inline","argumentNames":["priority","text"]}

function listeners_inline__P2184_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: listeners_inline__P2184, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function console_inspect__P380(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.asArr___2801 = undefined;
    s.asString___2819 = undefined;
    s.keys___2831 = undefined;
    s.snipped___2835 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/console.ts(83,9): if (typeof obj == "string") {...
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/console.ts(84,13): return obj;
    r0 = s.arg0;
    { step = 17; continue; }
    { step = 16; continue; }
  case 1:
// base/console.ts(85,16): if (typeof obj == "number") {...
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == "number");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
// base/console.ts(86,13): return "" + obj;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    { step = 17; continue; }
    { step = 15; continue; }
  case 2:
// base/console.ts(87,16): if (Array.isArray(obj)) {...
    r0 = pxsim_Array_.isArray(s.arg0);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 5; continue; }
// base/console.ts(88,19): asArr = (obj as Array<string>)
    s.asArr___2801 = (s.arg0);
// base/console.ts(89,13): if (asArr.length <= maxElements) {...
    r0 = pxsim_Array__length(s.asArr___2801);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// base/console.ts(90,17): return asArr.join(",");
    s.tmp_2 = helpers_arrayJoin__P103_mk(s);
    s.tmp_2.arg0 = s.asArr___2801;
    s.tmp_2.arg1 = ",";
    s.callLocIdx = 73; s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    { step = 17; continue; }
    { step = 4; continue; }
  case 3:
// base/console.ts(92,17): return `${asArr.slice(0, maxElements).join(",")}...`;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    s.tmp_7 = helpers_arrayJoin__P103_mk(s);
    s.tmp_8 = helpers_arraySlice__P115_mk(s);
    s.tmp_8.arg0 = s.asArr___2801;
    s.tmp_8.arg1 = 0;
    s.tmp_8.arg2 = s.arg1;
    s.callLocIdx = 74; s.pc = 21; return s.tmp_8;
  case 21:
    r0 = s.retval;
    s.tmp_7.arg0 = r0;
    s.tmp_7.arg1 = ",";
    s.callLocIdx = 75; s.pc = 20; return s.tmp_7;
  case 20:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "...");
    { step = 17; continue; }
  case 4:
    { step = 14; continue; }
  case 5:
// base/console.ts(95,19): asString = obj + ""
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_9, s.tmp_10);
    s.asString___2819 = (r0);
// base/console.ts(96,13): if (asString != "[object Object]"...
    r0 = (s.asString___2819 != "[object Object]");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 6:
    r0 = (s.asString___2819 != "[Object]");
  case 7:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 8; continue; }
// base/console.ts(98,1): return asString;
    r0 = s.asString___2819;
    { step = 17; continue; }
  case 8:
  case 9:
// base/console.ts(101,17): keys = Object.keys(obj)
    r0 = pxsim_pxtrt.keysOf(s.arg0);
    s.keys___2831 = (r0);
// base/console.ts(102,19): snipped = keys.length > maxElements
    r0 = pxsim_Array__length(s.keys___2831);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > s.arg1);
    s.snipped___2835 = (r0);
// base/console.ts(103,13): if (snipped) {...
    r0 = pxsim_numops_toBoolDecr(s.snipped___2835);
    if (!r0) { step = 10; continue; }
// base/console.ts(104,17): keys = keys.slice(0, maxElements)
    s.tmp_0 = helpers_arraySlice__P115_mk(s);
    s.tmp_0.arg0 = s.keys___2831;
    s.tmp_0.arg1 = 0;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 76; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.keys___2831 = (r0);
  case 10:
  case 11:
// base/console.ts(107,13): return `{${...
    r0 = pxsim_pxtcore_mkAction(1, console_inspect_inline__P2852);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_numops_toBoolDecr(s.snipped___2835);
    if (!r0) { step = 12; continue; }
    r0 = "\n    ...";
    { step = 13; continue; }
  case 12:
    r0 = pxsim_String_.mkEmpty();
  case 13:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_7 = helpers_arrayReduce__P112_mk(s);
    s.tmp_7.arg0 = s.keys___2831;
    s.tmp_7.arg1 = s.tmp_0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7.arg2 = r0;
    s.callLocIdx = 77; s.pc = 25; return s.tmp_7;
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("{", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "\n}");
    { step = 17; continue; }
  case 14:
  case 15:
  case 16:
    r0 = undefined;
  case 17:
    return leave(s, r0)
  default: oops()
} } }
console_inspect__P380.info = {"start":2271,"length":1190,"line":81,"column":4,"endLine":114,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"inspect","argumentNames":["obj","maxElements"]}

function console_inspect__P380_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_inspect__P380, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  asArr___2801: undefined,
  asString___2819: undefined,
  keys___2831: undefined,
  snipped___2835: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_inspect_inline__P2852(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 1);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("\n    ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ": ");
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.arg1);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_6);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
console_inspect_inline__P2852.info = {"start":3293,"length":61,"line":108,"column":20,"endLine":108,"endColumn":81,"fileName":"pxt_modules/base/console.ts","functionName":"inline","argumentNames":["prev","currKey"]}

function console_inspect_inline__P2852_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_inspect_inline__P2852, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayReduce__P112(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___2879 = undefined;
    s.i___2882 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(282,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___2879 = (r0);
// base/pxt-helpers.ts(283,18): i = 0
    s.i___2882 = (0);
// base/pxt-helpers.ts(283,9): for (let i = 0; i < len; ++i) {...
  case 1:
// base/pxt-helpers.ts(283,25): i < len
    r0 = (s.i___2882 < s.len___2879);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(284,13): initialValue = callbackfn(initialValue, arr[i], i)
    s.tmp_1 = lambda_4_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.arg2;
    r0 = pxsim_Array__getAt(s.arg0, s.i___2882);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.i___2882;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 10; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.arg2 = (r0);
// base/pxt-helpers.ts(283,34): ++i
    r0 = (s.i___2882 + 1);
    s.i___2882 = (r0);
    { step = 1; continue; }
  case 2:
// base/pxt-helpers.ts(286,9): return initialValue
    r0 = s.arg2;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayReduce__P112.info = {"start":8316,"length":317,"line":280,"column":4,"endLine":286,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayReduce","argumentNames":["arr","callbackfn","initialValue"]}

function helpers_arrayReduce__P112_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayReduce__P112, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___2879: undefined,
  i___2882: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arraySlice__P115(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___2900 = undefined;
    s.len___2902 = undefined;
    s.i___2936 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(306,15): res: T[] = []
    r0 = pxsim_Array__mk();
    s.res___2900 = (r0);
// base/pxt-helpers.ts(307,15): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___2902 = (r0);
// base/pxt-helpers.ts(309,9): if (start === undefined)...
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/pxt-helpers.ts(310,13): start = 0
    s.arg1 = (0);
    { step = 4; continue; }
  case 1:
// base/pxt-helpers.ts(311,14): if (start < 0)...
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(312,13): start = Math.max(len + start, 0)
    s.tmp_1 = Math_max__P130_mk(s);
    r0 = (s.len___2902 + s.arg1);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.callLocIdx = 11; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.arg1 = (r0);
  case 2:
  case 3:
  case 4:
// base/pxt-helpers.ts(314,9): if (start > len)...
    r0 = (s.arg1 > s.len___2902);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// base/pxt-helpers.ts(315,13): return res;
    r0 = s.res___2900;
    { step = 15; continue; }
  case 5:
  case 6:
// base/pxt-helpers.ts(317,9): if (end === undefined)...
    r0 = (s.arg2 === undefined);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
// base/pxt-helpers.ts(318,13): end = len
    s.arg2 = (s.len___2902);
    { step = 10; continue; }
  case 7:
// base/pxt-helpers.ts(319,14): if (end < 0)...
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// base/pxt-helpers.ts(320,13): end = len + end
    r0 = (s.len___2902 + s.arg2);
    s.arg2 = (r0);
  case 8:
  case 9:
  case 10:
// base/pxt-helpers.ts(322,9): if (end > len)...
    r0 = (s.arg2 > s.len___2902);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// base/pxt-helpers.ts(323,13): end = len
    s.arg2 = (s.len___2902);
  case 11:
  case 12:
// base/pxt-helpers.ts(325,18): i = start
    s.i___2936 = (s.arg1);
// base/pxt-helpers.ts(325,9): for (let i = start; i < end; ++i) {...
  case 13:
// base/pxt-helpers.ts(325,29): i < end
    r0 = (s.i___2936 < s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// base/pxt-helpers.ts(326,13): res.push(arr[i])
    s.tmp_1 = r0 = s.res___2900;
    r0 = pxsim_Array__getAt(s.arg0, s.i___2936);
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
// base/pxt-helpers.ts(325,38): ++i
    r0 = (s.i___2936 + 1);
    s.i___2936 = (r0);
    { step = 13; continue; }
  case 14:
// base/pxt-helpers.ts(328,9): return res;
    r0 = s.res___2900;
  case 15:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySlice__P115.info = {"start":9027,"length":690,"line":303,"column":4,"endLine":328,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySlice","argumentNames":["arr","start","end"]}

function helpers_arraySlice__P115_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySlice__P115, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  res___2900: undefined,
  len___2902: undefined,
  i___2936: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function Math_max__P130(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(558,9): if (a >= b) return a;
    r0 = (s.arg0 >= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/pxt-helpers.ts(558,21): return a;
    r0 = s.arg0;
    { step = 3; continue; }
  case 1:
  case 2:
// base/pxt-helpers.ts(559,9): return b;
    r0 = s.arg1;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
Math_max__P130.info = {"start":16564,"length":105,"line":556,"column":4,"endLine":559,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"max","argumentNames":["a","b"]}

function Math_max__P130_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_max__P130, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayJoin__P103(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___2968 = undefined;
    s.len___2969 = undefined;
    s.i___2972 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(159,9): if (sep === undefined || sep === null) {...
    r0 = (s.arg1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 === null);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// base/pxt-helpers.ts(160,13): sep = ","
    s.arg1 = (",");
  case 3:
  case 4:
// base/pxt-helpers.ts(163,13): r = ""
    r0 = pxsim_String_.mkEmpty();
    s.r___2968 = (r0);
// base/pxt-helpers.ts(164,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___2969 = (r0);
// base/pxt-helpers.ts(165,18): i = 0
    s.i___2972 = (0);
// base/pxt-helpers.ts(165,1): for (let i = 0; i < len; ++i) {...
  case 5:
// base/pxt-helpers.ts(165,25): i < len
    r0 = (s.i___2972 < s.len___2969);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// base/pxt-helpers.ts(166,13): if (i > 0 && sep)...
    r0 = (s.i___2972 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_1;
    { step = 7; continue; }
  case 6:
    r0 = s.arg1;
  case 7:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 8; continue; }
// base/pxt-helpers.ts(167,17): r += sep
    if ((s.r___2968) && (s.r___2968).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.r___2968);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___2968) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_3 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.r___2968 = (r0);
  case 8:
  case 9:
// base/pxt-helpers.ts(168,13): r += (arr[i] === undefined || arr[i] === null) ? "" : arr[i]
    r0 = pxsim_Array__getAt(s.arg0, s.i___2972);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 10:
    r0 = pxsim_Array__getAt(s.arg0, s.i___2972);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === null);
  case 11:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_String_.mkEmpty();
    { step = 13; continue; }
  case 12:
    r0 = pxsim_Array__getAt(s.arg0, s.i___2972);
  case 13:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    if ((s.r___2968) && (s.r___2968).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.r___2968);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___2968) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.r___2968 = (r0);
// base/pxt-helpers.ts(165,34): ++i
    r0 = (s.i___2972 + 1);
    s.i___2972 = (r0);
    { step = 5; continue; }
  case 14:
// base/pxt-helpers.ts(170,9): return r;
    r0 = s.r___2968;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayJoin__P103.info = {"start":4133,"length":432,"line":157,"column":4,"endLine":170,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayJoin","argumentNames":["arr","sep"]}

function helpers_arrayJoin__P103_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayJoin__P103, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  r___2968: undefined,
  len___2969: undefined,
  i___2972: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_scan__P2656(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___3011 = undefined;
    s.unnamed190___U1 = undefined;
    s.unnamed191___U2 = undefined;
    s.t___3029 = undefined;
    s.unnamed192___U4 = undefined;
    s.unnamed193___U5 = undefined;
    s.i___3036 = undefined;
    s.t___3041 = undefined;
    s.unnamed194___U8 = undefined;
    s.unnamed195___U9 = undefined;
    s.fullTwin___3049 = undefined;
    s.t___3052 = undefined;
    s.unnamed196___U12 = undefined;
    s.unnamed197___U13 = undefined;
    s.cloudTwin___3069 = undefined;
    s.patch___3072 = undefined;
    s.patch___3080 = undefined;
// twins.ts(336,20): d
    s.d___3011 = (undefined);
    r0 = globals.bus___1822.fields["devices"];
    s.unnamed190___U1 = (r0);
    s.unnamed191___U2 = (0);
// twins.ts(336,1): for (const d of jacdac.bus.devices) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed191___U2;
    r0 = pxsim_Array__length(s.unnamed190___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed190___U1, s.unnamed191___U2);
    s.d___3011 = (r0);
// twins.ts(337,13): if (!twins.some(t => t.device == d)) new DeviceTwin(d)
    r0 = pxsim_pxtcore_mkAction(1, jacdac_twins_scan_inline__P3016);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.d___3011);
    s.tmp_6 = helpers_arraySome__P107_mk(s);
    s.tmp_6.arg0 = globals.twins___2609;
    s.tmp_6.arg1 = s.tmp_2;
    s.callLocIdx = 1288; s.pc = 20; return s.tmp_6;
  case 20:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 2; continue; }
// twins.ts(337,50): new DeviceTwin(d)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_twins_DeviceTwin__C2649_VT);
    s.tmp_7 = r0;
    s.tmp_8 = jacdac_twins_DeviceTwin_constructor__P2654_mk(s);
    s.tmp_8.arg0 = s.tmp_7;
    s.tmp_8.arg1 = s.d___3011;
    s.callLocIdx = 1289; s.pc = 21; return s.tmp_8;
  case 21:
    r0 = s.retval;
  case 2:
  case 3:
    r0 = (s.unnamed191___U2 + 1);
    s.unnamed191___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed190___U1 = (undefined);
// twins.ts(339,20): t
    s.t___3029 = (undefined);
    s.unnamed192___U4 = (globals.twins___2609);
    s.unnamed193___U5 = (0);
// twins.ts(339,9): for (const t of twins) t.tick()
  case 5:
    s.tmp_0 = r0 = s.unnamed193___U5;
    r0 = pxsim_Array__length(s.unnamed192___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed192___U4, s.unnamed193___U5);
    s.t___3029 = (r0);
// twins.ts(339,32): t.tick()
    s.tmp_2 = jacdac_twins_DeviceTwin_tick__P2651_mk(s);
    s.tmp_2.arg0 = s.t___3029;
    s.callLocIdx = 1290; s.pc = 22; return s.tmp_2;
  case 22:
    r0 = s.retval;
    r0 = (s.unnamed193___U5 + 1);
    s.unnamed193___U5 = (r0);
    { step = 5; continue; }
  case 6:
    s.unnamed192___U4 = (undefined);
// twins.ts(340,9): if (!azureiot.isConnected()) return
    s.tmp_3 = azureiot_isConnected__P1350_mk(s);
    s.callLocIdx = 1291; s.pc = 23; return s.tmp_3;
  case 23:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// twins.ts(340,38): return
    { step = 19; continue; }
  case 7:
  case 8:
// twins.ts(341,18): i = 0
    s.i___3036 = (0);
// twins.ts(341,9): for (let i = 0; i < 2; ++i) {...
  case 9:
// twins.ts(341,25): i < 2
    r0 = (s.i___3036 < 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
// twins.ts(342,24): t
    s.t___3041 = (undefined);
    s.unnamed194___U8 = (globals.twins___2609);
    s.unnamed195___U9 = (0);
// twins.ts(342,13): for (const t of twins) {...
  case 10:
    s.tmp_0 = r0 = s.unnamed195___U9;
    r0 = pxsim_Array__length(s.unnamed194___U8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__getAt(s.unnamed194___U8, s.unnamed195___U9);
    s.t___3041 = (r0);
// twins.ts(343,17): t.computeTwin(false)
    s.tmp_2 = jacdac_twins_DeviceTwin_computeTwin__P2653_mk(s);
    s.tmp_2.arg0 = s.t___3041;
    s.tmp_2.arg1 = false;
    s.callLocIdx = 1292; s.pc = 24; return s.tmp_2;
  case 24:
    r0 = s.retval;
    r0 = (s.unnamed195___U9 + 1);
    s.unnamed195___U9 = (r0);
    { step = 10; continue; }
  case 11:
    s.unnamed194___U8 = (undefined);
// twins.ts(345,13): pause(100)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 100;
    s.callLocIdx = 1293; s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
// twins.ts(341,32): ++i
    r0 = (s.i___3036 + 1);
    s.i___3036 = (r0);
    { step = 9; continue; }
  case 12:
// twins.ts(347,15): fullTwin: Json = {}
    r0 = pxsim_pxtrt.mkMap();
    s.fullTwin___3049 = (r0);
// twins.ts(348,20): t
    s.t___3052 = (undefined);
    s.unnamed196___U12 = (globals.twins___2609);
    s.unnamed197___U13 = (0);
// twins.ts(348,9): for (const t of twins) {...
  case 13:
    s.tmp_0 = r0 = s.unnamed197___U13;
    r0 = pxsim_Array__length(s.unnamed196___U12);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 14; continue; }
    r0 = pxsim_Array__getAt(s.unnamed196___U12, s.unnamed197___U13);
    s.t___3052 = (r0);
// twins.ts(349,13): fullTwin[t.id] = t.computeTwin()
    s.tmp_2 = r0 = s.fullTwin___3049;
    r0 = s.t___3052.fields["id"];
    s.tmp_3 = r0;
    s.tmp_5 = jacdac_twins_DeviceTwin_computeTwin__P2653_mk(s);
    s.tmp_5.arg0 = s.t___3052;
    s.tmp_5.arg1 = true;
    s.callLocIdx = 1294; s.pc = 26; return s.tmp_5;
  case 26:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_2, s.tmp_3, s.tmp_4);
    r0 = (s.unnamed197___U13 + 1);
    s.unnamed197___U13 = (r0);
    { step = 13; continue; }
  case 14:
    s.unnamed196___U12 = (undefined);
// twins.ts(351,9): if (!currTwin) {...
    r0 = pxsim_numops_toBoolDecr(globals.currTwin___2611);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
// twins.ts(352,13): console.debug(JSON.stringify(fullTwin, null, 1))
    s.tmp_2 = console_debug__P375_mk(s);
    s.tmp_3 = JSON_stringify__P385_mk(s);
    s.tmp_3.arg0 = s.fullTwin___3049;
    s.tmp_3.arg1 = null;
    s.tmp_3.arg2 = 1;
    s.callLocIdx = 1295; s.pc = 28; return s.tmp_3;
  case 28:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 1296; s.pc = 27; return s.tmp_2;
  case 27:
    r0 = s.retval;
// twins.ts(353,13): currTwin = fullTwin
    globals.currTwin___2611 = (s.fullTwin___3049);
// twins.ts(354,19): cloudTwin = azureiot.getTwin()
    s.tmp_0 = azureiot_getTwin__P1359_mk(s);
    s.callLocIdx = 1297; s.pc = 29; return s.tmp_0;
  case 29:
    r0 = s.retval;
    s.cloudTwin___3069 = (r0);
// twins.ts(355,19): patch = azureiot.computePatch(cloudTwin["reported"], currTwin)
    s.tmp_0 = azureiot_computePatch__P1361_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.cloudTwin___3069, "reported");
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = globals.currTwin___2611;
    s.callLocIdx = 1298; s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
    s.patch___3072 = (r0);
// twins.ts(356,13): azureiot.patchTwin(patch)
    s.tmp_0 = azureiot_patchTwin__P1360_mk(s);
    s.tmp_0.arg0 = s.patch___3072;
    s.callLocIdx = 1299; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
// twins.ts(357,13): connectTwinUpdate()
    s.tmp_0 = jacdac_twins_connectTwinUpdate__P2659_mk(s);
    s.callLocIdx = 1300; s.pc = 32; return s.tmp_0;
  case 32:
    r0 = s.retval;
    { step = 18; continue; }
  case 15:
// twins.ts(359,19): patch = azureiot.computePatch(currTwin, fullTwin)
    s.tmp_0 = azureiot_computePatch__P1361_mk(s);
    s.tmp_0.arg0 = globals.currTwin___2611;
    s.tmp_0.arg1 = s.fullTwin___3049;
    s.callLocIdx = 1301; s.pc = 33; return s.tmp_0;
  case 33:
    r0 = s.retval;
    s.patch___3080 = (r0);
// twins.ts(360,13): if (Object.keys(patch).length > 0) {...
    r0 = pxsim_pxtrt.keysOf(s.patch___3080);
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
// twins.ts(361,17): console.debug(JSON.stringify(patch, null, 1))
    s.tmp_3 = console_debug__P375_mk(s);
    s.tmp_4 = JSON_stringify__P385_mk(s);
    s.tmp_4.arg0 = s.patch___3080;
    s.tmp_4.arg1 = null;
    s.tmp_4.arg2 = 1;
    s.callLocIdx = 1302; s.pc = 35; return s.tmp_4;
  case 35:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 1303; s.pc = 34; return s.tmp_3;
  case 34:
    r0 = s.retval;
// twins.ts(362,17): azureiot.patchTwin(patch)
    s.tmp_0 = azureiot_patchTwin__P1360_mk(s);
    s.tmp_0.arg0 = s.patch___3080;
    s.callLocIdx = 1304; s.pc = 36; return s.tmp_0;
  case 36:
    r0 = s.retval;
  case 16:
  case 17:
// twins.ts(364,13): currTwin = fullTwin
    globals.currTwin___2611 = (s.fullTwin___3049);
  case 18:
// twins.ts(366,9): checkPendingReadings(true)
    s.tmp_0 = jacdac_twins_checkPendingReadings__P2657_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 1305; s.pc = 37; return s.tmp_0;
  case 37:
    r0 = s.retval;
  case 19:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_scan__P2656.info = {"start":10794,"length":1237,"line":333,"column":4,"endLine":366,"endColumn":5,"fileName":"twins.ts","functionName":"scan","argumentNames":[]}

function jacdac_twins_scan__P2656_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_scan__P2656, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  d___3011: undefined,
  unnamed190___U1: undefined,
  unnamed191___U2: undefined,
  t___3029: undefined,
  unnamed192___U4: undefined,
  unnamed193___U5: undefined,
  i___3036: undefined,
  t___3041: undefined,
  unnamed194___U8: undefined,
  unnamed195___U9: undefined,
  fullTwin___3049: undefined,
  t___3052: undefined,
  unnamed196___U12: undefined,
  unnamed197___U13: undefined,
  cloudTwin___3069: undefined,
  patch___3072: undefined,
  patch___3080: undefined,
} }





function jacdac_twins_scan_inline__P3016(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["device"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_scan_inline__P3016.info = {"start":10965,"length":18,"line":336,"column":28,"endLine":336,"endColumn":46,"fileName":"twins.ts","functionName":"inline","argumentNames":["t"]}

function jacdac_twins_scan_inline__P3016_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_scan_inline__P3016, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_twins_checkPendingReadings__P2657(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.prev___3161 = undefined;
    s.t___3164 = undefined;
    s.unnamed198___U2 = undefined;
    s.unnamed199___U3 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// twins.ts(370,9): if (...
    s.tmp_1 = r0 = globals.pendingMessageSize___2615;
    r0 = pxsim.BufferMethods.length(globals.messageBuffer___2617);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - 200);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 > s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (globals.pendingReadings___2613 > 100);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_4;
    { step = 8; continue; }
  case 3:
    s.tmp_5 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_5;
    { step = 5; continue; }
  case 4:
    r0 = (globals.pendingReadings___2613 > 0);
  case 5:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_6;
    { step = 7; continue; }
  case 6:
    r0 = pxsim.control.millis();
    s.tmp_8 = r0;
    r0 = (s.tmp_8 - globals.lastReadingsSent___2616);
    s.tmp_7 = r0;
    r0 = (s.tmp_7 > 5000);
  case 7:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = s.tmp_9;
  case 8:
    // jmp value (already in r0)
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_10);
    if (!r0) { step = 15; continue; }
// twins.ts(377,13): console.log(...
    s.tmp_11 = r0 = globals.numMsg___2621;
    r0 = (s.tmp_11 + 1);
    globals.numMsg___2621 = (r0);
    s.tmp_12 = console_log__P378_mk(s);
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_20 = r0;
    r0 = pxsim_String__concat("sending readings: #", s.tmp_20);
    s.tmp_19 = r0;
    r0 = pxsim_String__concat(s.tmp_19, " ");
    s.tmp_18 = r0;
    if ((globals.pendingReadings___2613) && (globals.pendingReadings___2613).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(globals.pendingReadings___2613);
    checkResumeConsumed();
    return;
    } else { s.retval = (globals.pendingReadings___2613) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_21 = r0;
    r0 = pxsim_String__concat(s.tmp_18, s.tmp_21);
    s.tmp_17 = r0;
    r0 = pxsim_String__concat(s.tmp_17, " readings, ");
    s.tmp_16 = r0;
    if ((globals.pendingMessageSize___2615) && (globals.pendingMessageSize___2615).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(globals.pendingMessageSize___2615);
    checkResumeConsumed();
    return;
    } else { s.retval = (globals.pendingMessageSize___2615) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_22 = r0;
    r0 = pxsim_String__concat(s.tmp_16, s.tmp_22);
    s.tmp_15 = r0;
    r0 = pxsim_String__concat(s.tmp_15, " bytes, delta ");
    s.tmp_14 = r0;
    r0 = pxsim.control.millis();
    s.tmp_25 = r0;
    r0 = (s.tmp_25 - globals.lastReadingsSent___2616);
    s.tmp_24 = r0;
    if ((s.tmp_24) && (s.tmp_24).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.tmp_24);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_24) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_23 = r0;
    r0 = pxsim_String__concat(s.tmp_14, s.tmp_23);
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_13, "ms");
    s.tmp_12.arg0 = r0;
    s.callLocIdx = 1306; s.pc = 17; return s.tmp_12;
  case 17:
    r0 = s.retval;
// twins.ts(383,13): lastReadingsSent = control.millis()
    r0 = pxsim.control.millis();
    globals.lastReadingsSent___2616 = (r0);
// twins.ts(384,13): pendingReadings = 0
    globals.pendingReadings___2613 = (0);
// twins.ts(385,13): pendingMessageSize = 0
    globals.pendingMessageSize___2615 = (0);
// twins.ts(386,13): messagePtr = 0
    globals.messagePtr___2619 = (0);
// twins.ts(387,13): writeBuffer(jdpack("s[4] u32", ["JDBR", lastReadingsSent]))
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, "JDBR");
    r0 = pxsim_Array__push(s.tmp_0, globals.lastReadingsSent___2616);
    s.tmp_1 = jacdac_twins_writeBuffer__P2622_mk(s);
    s.tmp_2 = jacdac_jdpack__P1468_mk(s);
    s.tmp_2.arg0 = "s[4] u32";
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 1307; s.pc = 23; return s.tmp_2;
  case 23:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 1308; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
// twins.ts(388,13): writeBuffer(Buffer.create(32))
    s.tmp_0 = jacdac_twins_writeBuffer__P2622_mk(s);
    r0 = pxsim.control.createBuffer(32);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1309; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
// twins.ts(389,19): prev = messagePtr
    s.prev___3161 = (globals.messagePtr___2619);
// twins.ts(390,24): t
    s.t___3164 = (undefined);
    s.unnamed198___U2 = (globals.twins___2609);
    s.unnamed199___U3 = (0);
// twins.ts(390,13): for (const t of twins) t.serialize(lastReadingsSent)
  case 9:
    s.tmp_0 = r0 = s.unnamed199___U3;
    r0 = pxsim_Array__length(s.unnamed198___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 10; continue; }
    r0 = pxsim_Array__getAt(s.unnamed198___U2, s.unnamed199___U3);
    s.t___3164 = (r0);
// twins.ts(390,36): t.serialize(lastReadingsSent)
    s.tmp_2 = jacdac_twins_DeviceTwin_serialize__P2652_mk(s);
    s.tmp_2.arg0 = s.t___3164;
    s.tmp_2.arg1 = globals.lastReadingsSent___2616;
    s.callLocIdx = 1310; s.pc = 25; return s.tmp_2;
  case 25:
    r0 = s.retval;
    r0 = (s.unnamed199___U3 + 1);
    s.unnamed199___U3 = (r0);
    { step = 9; continue; }
  case 10:
    s.unnamed198___U2 = (undefined);
// twins.ts(391,13): if (messagePtr != prev) {...
    r0 = (globals.messagePtr___2619 != s.prev___3161);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// twins.ts(392,17): if (azureiot.isConnected()) {...
    s.tmp_2 = azureiot_isConnected__P1350_mk(s);
    s.callLocIdx = 1311; s.pc = 26; return s.tmp_2;
  case 26:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 11; continue; }
// twins.ts(393,21): azureiot.publishMessageHex(messageBuffer, messagePtr, {
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_3, "jdbr", "1");
    s.tmp_4 = azureiot_publishMessageHex__P1353_mk(s);
    s.tmp_4.arg0 = globals.messageBuffer___2617;
    s.tmp_4.arg1 = globals.messagePtr___2619;
    s.tmp_4.arg2 = s.tmp_3;
    s.callLocIdx = 1312; s.pc = 27; return s.tmp_4;
  case 27:
    r0 = s.retval;
// twins.ts(396,21): sendTick = 2
    globals.sendTick___2664 = (2);
  case 11:
  case 12:
  case 13:
  case 14:
  case 15:
  case 16:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_checkPendingReadings__P2657.info = {"start":12037,"length":1239,"line":368,"column":4,"endLine":399,"endColumn":5,"fileName":"twins.ts","functionName":"checkPendingReadings","argumentNames":["checkTime"]}

function jacdac_twins_checkPendingReadings__P2657_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_checkPendingReadings__P2657, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  tmp_23: undefined,
  tmp_24: undefined,
  tmp_25: undefined,
  prev___3161: undefined,
  t___3164: undefined,
  unnamed198___U2: undefined,
  unnamed199___U3: undefined,
  arg0: undefined,
} }





function azureiot_publishMessageHex__P1353(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___3180 = undefined;
    s.topic___3184 = undefined;
    s.ptr___3234 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(247,15): c = mqttClient()
    s.tmp_0 = azureiot_mqttClient__P1343_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 531; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.c___3180 = (r0);
// azureiot/azureiot.ts(248,13): topic = `devices/${c.opt.clientId}/messages/events/`
    s.tmp_3 = if_clientId_1_mk(s);
    r0 = s.c___3180.fields["opt"];
    s.tmp_3.arg0 = r0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "clientId");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["clientId"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["clientId"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 532; s.pc = 12; return s.tmp_3; }
    }
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("devices/", s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "/messages/events/");
    s.topic___3184 = (r0);
// azureiot/azureiot.ts(249,9): if (sysProps)...
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(250,13): topic += encodeQuery(sysProps)
    if ((s.topic___3184) && (s.topic___3184).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.topic___3184);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.topic___3184) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = azureiot_encodeQuery__P2300_mk(s);
    s.tmp_3.arg0 = s.arg2;
    s.callLocIdx = 533; s.pc = 15; return s.tmp_3;
  case 15:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.topic___3184 = (r0);
  case 1:
  case 2:
// azureiot/azureiot.ts(251,9): if (len == null)...
    r0 = (s.arg1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(252,13): len = msg.length
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.arg1 = (r0);
  case 3:
  case 4:
// azureiot/azureiot.ts(253,9): if (len > msg.length) {...
    s.tmp_1 = r0 = s.arg1;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 > s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// azureiot/azureiot.ts(254,13): log(`len too long: ${len}/${msg.length}`)
    s.tmp_3 = azureiot_log__P2292_mk(s);
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat("len too long: ", s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, "/");
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_7);
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 534; s.pc = 17; return s.tmp_3;
  case 17:
    r0 = s.retval;
// azureiot/azureiot.ts(255,13): len = msg.length
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.arg1 = (r0);
  case 5:
  case 6:
// azureiot/azureiot.ts(258,1): if (c.startPublish(topic, len * 2)) {...
    s.tmp_1 = mqtt_Client_startPublish__P1330_mk(s);
    s.tmp_1.arg0 = s.c___3180;
    s.tmp_1.arg1 = s.topic___3184;
    r0 = (s.arg1 * 2);
    s.tmp_1.arg2 = r0;
    s.tmp_1.arg3 = 0;
    s.tmp_1.arg4 = false;
    s.callLocIdx = 535; s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// azureiot/azureiot.ts(260,22): ptr = 0
    s.ptr___3234 = (0);
// azureiot/azureiot.ts(260,13): for (let ptr = 0; ptr < len; ptr += chunk)...
  case 7:
// azureiot/azureiot.ts(260,31): ptr < len
    r0 = (s.ptr___3234 < s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// azureiot/azureiot.ts(261,17): c.continuePublish(Buffer.fromUTF8(msg.slice(ptr, Math.min(chunk, len - ptr)).toH
    s.tmp_1 = mqtt_Client_continuePublish__P1331_mk(s);
    s.tmp_1.arg0 = s.c___3180;
    s.tmp_4 = r0 = s.arg0;
    s.tmp_5 = r0 = s.ptr___3234;
    s.tmp_7 = Math_min__P131_mk(s);
    s.tmp_7.arg0 = 128;
    r0 = (s.arg1 - s.ptr___3234);
    s.tmp_7.arg1 = r0;
    s.callLocIdx = 536; s.pc = 22; return s.tmp_7;
  case 22:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_4, s.tmp_5, s.tmp_6);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 537; s.pc = 21; return s.tmp_1;
  case 21:
    r0 = s.retval;
// azureiot/azureiot.ts(260,42): ptr += chunk
    r0 = (s.ptr___3234 + 128);
    s.ptr___3234 = (r0);
    { step = 7; continue; }
  case 8:
// azureiot/azureiot.ts(262,13): c.finishPublish()
    s.tmp_0 = mqtt_Client_finishPublish__P1332_mk(s);
    s.tmp_0.arg0 = s.c___3180;
    s.callLocIdx = 538; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
  case 9:
  case 10:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_publishMessageHex__P1353.info = {"start":7518,"length":753,"line":245,"column":4,"endLine":263,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"publishMessageHex","argumentNames":["msg","len","sysProps"]}

function azureiot_publishMessageHex__P1353_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_publishMessageHex__P1353, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  c___3180: undefined,
  topic___3184: undefined,
  ptr___3234: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Client_finishPublish__P1332(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(505,13): this.doneSending()
    s.tmp_0 = mqtt_Client_doneSending__P2280_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 425; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// mqtt/mqtt.ts(506,13): this.emit("published")
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "published";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 426; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_finishPublish__P1332.info = {"start":16195,"length":100,"line":503,"column":8,"endLine":506,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"finishPublish","argumentNames":["this"]}

function mqtt_Client_finishPublish__P1332_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_finishPublish__P1332, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function mqtt_EventEmitter_emit__P2272(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.listeners___3267 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_EventEmitter__C1312_VT)) failedCast(r0);
// mqtt/mqtt.ts(295,17): listeners = this.handlers[event]
    r0 = s.arg0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_0, s.arg1);
    s.listeners___3267 = (r0);
// mqtt/mqtt.ts(296,13): if (listeners) {...
    r0 = pxsim_numops_toBoolDecr(s.listeners___3267);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(297,17): listeners.forEach(listener => listener(arg))
    r0 = pxsim_pxtcore_mkAction(1, mqtt_EventEmitter_emit_inline__P3275);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg2);
    s.tmp_1 = helpers_arrayForEach__P109_mk(s);
    s.tmp_1.arg0 = s.listeners___3267;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 365; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
// mqtt/mqtt.ts(299,13): return true;
    r0 = true;
    return leave(s, r0)
  default: oops()
} } }
mqtt_EventEmitter_emit__P2272.info = {"start":9447,"length":255,"line":293,"column":8,"endLine":299,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"emit","argumentNames":["this","event","arg"]}

function mqtt_EventEmitter_emit__P2272_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_EventEmitter_emit__P2272, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  listeners___3267: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_EventEmitter_emit_inline__P3275(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.arg0;
    s.tmp_0.arg0 = s.caps[0];
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 364; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_EventEmitter_emit_inline__P3275.info = {"start":9626,"length":25,"line":296,"column":34,"endLine":296,"endColumn":59,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["listener"]}

function mqtt_EventEmitter_emit_inline__P3275_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_EventEmitter_emit_inline__P3275, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function helpers_arrayForEach__P109(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___3281 = undefined;
    s.i___3284 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(256,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___3281 = (r0);
// base/pxt-helpers.ts(257,18): i = 0
    s.i___3284 = (0);
// base/pxt-helpers.ts(257,1): for (let i = 0; i < len; ++i) {...
  case 1:
// base/pxt-helpers.ts(257,25): i < len
    r0 = (s.i___3284 < s.len___3281);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(258,13): callbackfn(arr[i], i)
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___3284);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.i___3284;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 7; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
// base/pxt-helpers.ts(257,34): ++i
    r0 = (s.i___3284 + 1);
    s.i___3284 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayForEach__P109.info = {"start":7439,"length":250,"line":254,"column":4,"endLine":259,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayForEach","argumentNames":["arr","callbackfn"]}

function helpers_arrayForEach__P109_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayForEach__P109, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___3281: undefined,
  i___3284: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_doneSending__P2280(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(477,13): this.trace("done send")
    s.tmp_0 = mqtt_Client_trace__P2277_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "done send";
    s.callLocIdx = 416; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// mqtt/mqtt.ts(478,13): if (this.status == Status.Sending)...
    r0 = s.arg0.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(479,17): this.status = Status.Connected
    r0 = (s.arg0).fields["status"] = (2);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_doneSending__P2280.info = {"start":15084,"length":163,"line":475,"column":8,"endLine":479,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"doneSending","argumentNames":["this"]}

function mqtt_Client_doneSending__P2280_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_doneSending__P2280, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function mqtt_Client_trace__P2277(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(335,13): console.add(this.tracePriority, `mqtt: ${msg}`)
    s.tmp_0 = console_add__P374_mk(s);
    r0 = s.arg0.fields["tracePriority"];
    s.tmp_0.arg0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("mqtt: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 367; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_trace__P2277.info = {"start":10436,"length":99,"line":333,"column":8,"endLine":335,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"trace","argumentNames":["this","msg"]}

function mqtt_Client_trace__P2277_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_trace__P2277, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Math_min__P131(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(567,9): if (a <= b) return a;
    r0 = (s.arg0 <= s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/pxt-helpers.ts(567,21): return a;
    r0 = s.arg0;
    { step = 3; continue; }
  case 1:
  case 2:
// base/pxt-helpers.ts(568,9): return b;
    r0 = s.arg1;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
Math_min__P131.info = {"start":16779,"length":105,"line":565,"column":4,"endLine":568,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"min","argumentNames":["a","b"]}

function Math_min__P131_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_min__P131, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_continuePublish__P1331(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(501,13): this.send(data)
    s.tmp_0 = mqtt_Client_send__P2282_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 424; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_continuePublish__P1331.info = {"start":16109,"length":76,"line":499,"column":8,"endLine":501,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"continuePublish","argumentNames":["this","data"]}

function mqtt_Client_continuePublish__P1331_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_continuePublish__P1331, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_send__P2282(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(549,13): if (this.sct) {...
    r0 = s.arg0.fields["sct"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(550,17): this.trace("send: " + data[0] + " / " + data.length + " bytes")
    s.tmp_1 = mqtt_Client_trace__P2277_mk(s);
    s.tmp_1.arg0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, 0);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat("send: ", s.tmp_8);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, " / ");
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_10);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, " bytes");
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 433; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
// mqtt/mqtt.ts(552,1): this.sct.send(data)
    s.tmp_0 = if_send_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 434; s.pc = 9; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 434; s.pc = 9; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 434; s.pc = 9; return s.tmp_0;; }
     else { s.callLocIdx = 434; s.pc = 9; return s.tmp_0; }
    }
  case 9:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_send__P2282.info = {"start":17921,"length":301,"line":547,"column":8,"endLine":553,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"send","argumentNames":["this","data"]}

function mqtt_Client_send__P2282_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_send__P2282, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_startPublish__P1330(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(494,13): if (!this.canSend()) return false
    s.tmp_3 = mqtt_Client_canSend__P2279_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 420; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(494,34): return false
    r0 = false;
    { step = 3; continue; }
  case 1:
  case 2:
// mqtt/mqtt.ts(495,13): this.trace(`publish: ${topic} ${messageLen}b`)
    s.tmp_4 = mqtt_Client_trace__P2277_mk(s);
    s.tmp_4.arg0 = s.arg0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat("publish: ", s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " ");
    s.tmp_6 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_9);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, "b");
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 421; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
// mqtt/mqtt.ts(496,13): this.send(Protocol.createPublishHeader(topic, messageLen, qos, retained))
    s.tmp_0 = mqtt_Client_send__P2282_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = mqtt_Protocol_createPublishHeader__P1308_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = s.arg2;
    s.tmp_1.arg2 = s.arg3;
    s.tmp_1.arg3 = s.arg4;
    s.callLocIdx = 422; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 423; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// mqtt/mqtt.ts(497,13): return true
    r0 = true;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_startPublish__P1330.info = {"start":15754,"length":345,"line":492,"column":8,"endLine":497,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"startPublish","argumentNames":["this","topic","messageLen","qos","retained"]}

function mqtt_Client_startPublish__P1330_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_startPublish__P1330, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function mqtt_Protocol_createPublishHeader__P1308(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.byte1___3384 = undefined;
    s.pid___3396 = undefined;
    s.variable___3402 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(222,17): byte1: number = ControlPacketType.Publish << 4 | (qos << 1)
    r0 = (s.arg2 << 1);
    s.tmp_0 = r0;
    r0 = (48 | s.tmp_0);
    s.byte1___3384 = (r0);
// mqtt/mqtt.ts(223,13): byte1 |= (retained) ? 1 : 0
    r0 = pxsim_numops_toBoolDecr(s.arg3);
    if (!r0) { step = 1; continue; }
    r0 = 1;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = (s.byte1___3384 | s.tmp_0);
    s.byte1___3384 = (r0);
// mqtt/mqtt.ts(225,19): pid = strChr(getBytes(Constants.FixedPackedId))
    s.tmp_0 = mqtt_Protocol_strChr__P2265_mk(s);
    s.tmp_1 = mqtt_Protocol_getBytes__P2268_mk(s);
    s.tmp_1.arg0 = 1;
    s.callLocIdx = 348; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 349; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.pid___3396 = (r0);
// mqtt/mqtt.ts(226,19): variable = (qos === 0) ? pack(topic) : pack(topic).concat(pid)
    r0 = (s.arg2 === 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    s.tmp_1 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 350; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_3 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 351; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.pid___3396;
    s.callLocIdx = 352; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    s.variable___3402 = (s.tmp_4);
// mqtt/mqtt.ts(228,13): return createPacketHeader(byte1, variable, payloadSize);
    s.tmp_0 = mqtt_Protocol_createPacketHeader__P2270_mk(s);
    s.tmp_0.arg0 = s.byte1___3384;
    s.tmp_0.arg1 = s.variable___3402;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 353; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPublishHeader__P1308.info = {"start":6862,"length":453,"line":220,"column":8,"endLine":228,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPublishHeader","argumentNames":["topic","payloadSize","qos","retained"]}

function mqtt_Protocol_createPublishHeader__P1308_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPublishHeader__P1308, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  byte1___3384: undefined,
  pid___3396: undefined,
  variable___3402: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function mqtt_Protocol_createPacketHeader__P2270(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.byte2___3419 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(159,19): byte2: number[] = encodeRemainingLength(variable.length + payloadSize)
    s.tmp_0 = mqtt_Protocol_encodeRemainingLength__P2266_mk(s);
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 + s.arg2);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 317; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.byte2___3419 = (r0);
// mqtt/mqtt.ts(160,13): return strChr([byte1])...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    s.tmp_1 = helpers_bufferConcat__P184_mk(s);
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_3 = mqtt_Protocol_strChr__P2265_mk(s);
    s.tmp_3.arg0 = s.tmp_0;
    s.callLocIdx = 318; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_4 = mqtt_Protocol_strChr__P2265_mk(s);
    s.tmp_4.arg0 = s.byte2___3419;
    s.callLocIdx = 319; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 320; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 321; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPacketHeader__P2270.info = {"start":4470,"length":299,"line":157,"column":8,"endLine":162,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPacketHeader","argumentNames":["byte1","variable","payloadSize"]}

function mqtt_Protocol_createPacketHeader__P2270_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPacketHeader__P2270, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  byte2___3419: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Protocol_encodeRemainingLength__P2266(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.length___3435 = undefined;
    s.encBytes___3437 = undefined;
    s.encByte___3440 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(106,17): length: number = remainingLength
    s.length___3435 = (s.arg0);
// mqtt/mqtt.ts(107,19): encBytes: number[] = []
    r0 = pxsim_Array__mk();
    s.encBytes___3437 = (r0);
// mqtt/mqtt.ts(108,13): do {...
  case 1:
// mqtt/mqtt.ts(109,21): encByte: number = length & 127
    r0 = (s.length___3435 & 127);
    s.encByte___3440 = (r0);
// mqtt/mqtt.ts(110,17): length = length >> 7
    r0 = (s.length___3435 >> 7);
    s.length___3435 = (r0);
// mqtt/mqtt.ts(112,1): if (length > 0) {...
    r0 = (s.length___3435 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// mqtt/mqtt.ts(113,21): encByte += 128
    r0 = (s.encByte___3440 + 128);
    s.encByte___3440 = (r0);
  case 2:
  case 3:
// mqtt/mqtt.ts(115,17): encBytes.push(encByte)
    r0 = pxsim_Array__push(s.encBytes___3437, s.encByte___3440);
// mqtt/mqtt.ts(116,22): length > 0
    r0 = (s.length___3435 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
    { step = 1; continue; }
  case 4:
// mqtt/mqtt.ts(118,13): return encBytes;
    r0 = s.encBytes___3437;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_encodeRemainingLength__P2266.info = {"start":2539,"length":551,"line":104,"column":8,"endLine":118,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"encodeRemainingLength","argumentNames":["remainingLength"]}

function mqtt_Protocol_encodeRemainingLength__P2266_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_encodeRemainingLength__P2266, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  length___3435: undefined,
  encBytes___3437: undefined,
  encByte___3440: undefined,
  arg0: undefined,
} }





function helpers_bufferConcat__P184(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___3461 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(134,15): r = Buffer.create(a.length + b.length)
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.r___3461 = (r0);
// base/buffer.ts(135,9): r.write(0, a)
    r0 = pxsim.BufferMethods.write(s.r___3461, 0, s.arg0);
// base/buffer.ts(136,9): r.write(a.length, b)
    s.tmp_0 = r0 = s.r___3461;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, s.tmp_1, s.arg1);
// base/buffer.ts(137,9): return r
    r0 = s.r___3461;
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferConcat__P184.info = {"start":3785,"length":179,"line":132,"column":4,"endLine":137,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferConcat","argumentNames":["a","b"]}

function helpers_bufferConcat__P184_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferConcat__P184, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  r___3461: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Protocol_pack__P2269(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___3481 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(150,19): buf = control.createBufferFromUTF8(s)
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    s.buf___3481 = (r0);
// mqtt/mqtt.ts(151,13): return strChr(getBytes(buf.length)).concat(buf);
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    s.tmp_1 = mqtt_Protocol_strChr__P2265_mk(s);
    s.tmp_2 = mqtt_Protocol_getBytes__P2268_mk(s);
    r0 = pxsim.BufferMethods.length(s.buf___3481);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 314; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 315; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.buf___3481;
    s.callLocIdx = 316; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_pack__P2269.info = {"start":4135,"length":162,"line":148,"column":8,"endLine":151,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"pack","argumentNames":["s"]}

function mqtt_Protocol_pack__P2269_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_pack__P2269, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  buf___3481: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_getBytes__P2268(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(142,13): return [int16 >> 8, int16 & 255];
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = (s.arg0 >> 8);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = (s.arg0 & 255);
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_2);
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_getBytes__P2268.info = {"start":3855,"length":100,"line":140,"column":8,"endLine":142,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"getBytes","argumentNames":["int16"]}

function mqtt_Protocol_getBytes__P2268_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_getBytes__P2268, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_strChr__P2265(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(98,13): return pins.createBufferFromArray(codes)
    s.tmp_0 = pins_createBufferFromArray__P174_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 305; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_strChr__P2265.info = {"start":2273,"length":105,"line":96,"column":8,"endLine":98,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"strChr","argumentNames":["codes"]}

function mqtt_Protocol_strChr__P2265_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_strChr__P2265, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function pins_createBufferFromArray__P174(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(9,9): return Buffer.fromArray(bytes)
    s.tmp_0 = Buffer_fromArray__P208_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 20; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
pins_createBufferFromArray__P174.info = {"start":170,"length":101,"line":7,"column":4,"endLine":9,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"createBufferFromArray","argumentNames":["bytes"]}

function pins_createBufferFromArray__P174_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pins_createBufferFromArray__P174, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function Buffer_fromArray__P208(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___3504 = undefined;
    s.i___3509 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(398,13): buf = Buffer.create(bytes.length)
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___3504 = (r0);
// base/buffer.ts(399,18): i = 0
    s.i___3509 = (0);
// base/buffer.ts(399,9): for (let i = 0; i < bytes.length; ++i)...
  case 1:
// base/buffer.ts(399,25): i < bytes.length
    s.tmp_1 = r0 = s.i___3509;
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/buffer.ts(400,13): buf[i] = bytes[i]
    s.tmp_3 = r0 = s.buf___3504;
    s.tmp_4 = r0 = s.i___3509;
    r0 = pxsim_Array__getAt(s.arg0, s.i___3509);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_3, s.tmp_4, s.tmp_5);
// base/buffer.ts(399,43): ++i
    r0 = (s.i___3509 + 1);
    s.i___3509 = (r0);
    { step = 1; continue; }
  case 2:
// base/buffer.ts(401,9): return buf
    r0 = s.buf___3504;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromArray__P208.info = {"start":11216,"length":192,"line":396,"column":4,"endLine":401,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"fromArray","argumentNames":["bytes"]}

function Buffer_fromArray__P208_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromArray__P208, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  buf___3504: undefined,
  i___3509: undefined,
  arg0: undefined,
} }





function mqtt_Client_canSend__P2279(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.cnt___3525 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(461,17): cnt = 0
    s.cnt___3525 = (0);
// mqtt/mqtt.ts(462,13): while (true) {...
  case 1:
// mqtt/mqtt.ts(462,20): true
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 8; continue; }
// mqtt/mqtt.ts(463,17): if (this.status == Status.Connected) {...
    r0 = s.arg0.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// mqtt/mqtt.ts(464,21): this.status = Status.Sending
    r0 = (s.arg0).fields["status"] = (3);
// mqtt/mqtt.ts(465,21): return true
    r0 = true;
    { step = 9; continue; }
  case 2:
  case 3:
// mqtt/mqtt.ts(467,17): if (cnt++ < 100 && this.status == Status.Sending)...
    s.tmp_0 = r0 = s.cnt___3525;
    r0 = (s.tmp_0 + 1);
    s.cnt___3525 = (r0);
    r0 = (s.tmp_0 < 100);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 5; continue; }
  case 4:
    r0 = s.arg0.fields["status"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == 3);
  case 5:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
// mqtt/mqtt.ts(468,21): pause(20)
    s.tmp_4 = pause__P411_mk(s);
    s.tmp_4.arg0 = 20;
    s.callLocIdx = 414; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    { step = 7; continue; }
  case 6:
// mqtt/mqtt.ts(470,21): this.log("drop pkt")
    s.tmp_0 = mqtt_Client_log__P2276_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "drop pkt";
    s.callLocIdx = 415; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
// mqtt/mqtt.ts(471,21): return false
    r0 = false;
    { step = 9; continue; }
  case 7:
    { step = 1; continue; }
  case 8:
    r0 = undefined;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_canSend__P2279.info = {"start":14615,"length":459,"line":459,"column":8,"endLine":473,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"canSend","argumentNames":["this"]}

function mqtt_Client_canSend__P2279_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_canSend__P2279, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  cnt___3525: undefined,
  arg0: undefined,
} }





function mqtt_Client_log__P2276(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(331,13): console.add(this.logPriority, `mqtt: ${msg}`)
    s.tmp_0 = console_add__P374_mk(s);
    r0 = s.arg0.fields["logPriority"];
    s.tmp_0.arg0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("mqtt: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 366; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_log__P2276.info = {"start":10331,"length":95,"line":329,"column":8,"endLine":331,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"log","argumentNames":["this","msg"]}

function mqtt_Client_log__P2276_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_log__P2276, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_log__P2292(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(23,9): console.add(logPriority, "azureiot: " + msg)
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = globals.logPriority___1342;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("azureiot: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 467; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_log__P2292.info = {"start":558,"length":87,"line":21,"column":4,"endLine":23,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"log","argumentNames":["msg"]}

function azureiot_log__P2292_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_log__P2292, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function azureiot_encodeQuery__P2300(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.keys___3563 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(135,15): keys = Object.keys(props)
    r0 = pxsim_pxtrt.keysOf(s.arg0);
    s.keys___3563 = (r0);
// azureiot/azureiot.ts(136,9): if (keys.length == 0)...
    r0 = pxsim_Array__length(s.keys___3563);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(137,13): return ""
    r0 = pxsim_String_.mkEmpty();
    { step = 3; continue; }
  case 1:
  case 2:
// azureiot/azureiot.ts(138,9): return "?" + keys...
    r0 = pxsim_pxtcore_mkAction(1, join_inline__P3577);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.arg0);
    s.tmp_5 = helpers_arrayJoin__P103_mk(s);
    s.tmp_6 = helpers_arrayMap__P106_mk(s);
    s.tmp_6.arg0 = s.keys___3563;
    s.tmp_6.arg1 = s.tmp_2;
    s.callLocIdx = 512; s.pc = 5; return s.tmp_6;
  case 5:
    r0 = s.retval;
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = "&";
    s.callLocIdx = 513; s.pc = 4; return s.tmp_5;
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("?", s.tmp_3);
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_encodeQuery__P2300.info = {"start":4503,"length":271,"line":133,"column":4,"endLine":140,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"encodeQuery","argumentNames":["props"]}

function azureiot_encodeQuery__P2300_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_encodeQuery__P2300, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  keys___3563: undefined,
  arg0: undefined,
} }





function join_inline__P3577(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    s.tmp_5 = net_urlencode__P1219_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 510; s.pc = 1; return s.tmp_5;
  case 1:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "=");
    s.tmp_0 = r0;
    s.tmp_8 = net_urlencode__P1219_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.arg0);
    s.tmp_8.arg0 = r0;
    s.callLocIdx = 511; s.pc = 3; return s.tmp_8;
  case 3:
    r0 = s.retval;
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_6);
    return leave(s, r0)
  default: oops()
} } }
join_inline__P3577.info = {"start":4690,"length":53,"line":138,"column":17,"endLine":138,"endColumn":70,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["k"]}

function join_inline__P3577_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: join_inline__P3577, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
} }





function net_urlencode__P1219(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___3593 = undefined;
    s.r___3597 = undefined;
    s.i___3598 = undefined;
    s.c___3604 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// net/netutil.ts(3,15): buf = Buffer.fromUTF8(s)
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    s.buf___3593 = (r0);
// net/netutil.ts(4,13): r = ""
    r0 = pxsim_String_.mkEmpty();
    s.r___3597 = (r0);
// net/netutil.ts(5,18): i = 0
    s.i___3598 = (0);
// net/netutil.ts(5,9): for (let i = 0; i < buf.length; ++i) {...
  case 1:
// net/netutil.ts(5,25): i < buf.length
    s.tmp_1 = r0 = s.i___3598;
    r0 = pxsim.BufferMethods.length(s.buf___3593);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
// net/netutil.ts(6,19): c = buf[i]
    r0 = pxsim.BufferMethods.getByte(s.buf___3593, s.i___3598);
    s.c___3604 = (r0);
// net/netutil.ts(7,13): if ((48 <= c && c <= 57) ||...
    r0 = (48 <= s.c___3604);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___3604 <= 57);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 7; continue; }
  case 4:
    r0 = (s.c___3604 | 32);
    s.tmp_3 = r0;
    r0 = (97 <= s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_2;
    { step = 6; continue; }
  case 5:
    r0 = (s.c___3604 | 32);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 <= 122);
  case 6:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
  case 7:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_6;
    { step = 15; continue; }
  case 8:
    r0 = (s.c___3604 == 45);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (!r0) { step = 9; continue; }
    r0 = s.tmp_7;
    { step = 10; continue; }
  case 9:
    r0 = (s.c___3604 == 46);
  case 10:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBool(s.tmp_8);
    if (!r0) { step = 11; continue; }
    r0 = s.tmp_8;
    { step = 12; continue; }
  case 11:
    r0 = (s.c___3604 == 95);
  case 12:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBool(s.tmp_9);
    if (!r0) { step = 13; continue; }
    r0 = s.tmp_9;
    { step = 14; continue; }
  case 13:
    r0 = (s.c___3604 == 126);
  case 14:
    // jmp value (already in r0)
    s.tmp_10 = r0;
    r0 = s.tmp_10;
  case 15:
    // jmp value (already in r0)
    s.tmp_11 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_11);
    if (!r0) { step = 16; continue; }
// net/netutil.ts(10,17): r += String.fromCharCode(c)
    if ((s.r___3597) && (s.r___3597).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.r___3597);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___3597) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_12 = r0;
    r0 = pxsim_String_.fromCharCode(s.c___3604);
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_12, s.tmp_13);
    s.r___3597 = (r0);
    { step = 17; continue; }
  case 16:
// net/netutil.ts(12,17): r += "%" + buf.slice(i, 1).toHex()
    if ((s.r___3597) && (s.r___3597).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.r___3597);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___3597) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.buf___3593, s.i___3598, 1);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_5);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("%", s.tmp_3);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___3597 = (r0);
  case 17:
// net/netutil.ts(5,41): ++i
    r0 = (s.i___3598 + 1);
    s.i___3598 = (r0);
    { step = 1; continue; }
  case 18:
// net/netutil.ts(14,9): return r
    r0 = s.r___3597;
    return leave(s, r0)
  default: oops()
} } }
net_urlencode__P1219.info = {"start":20,"length":477,"line":1,"column":4,"endLine":14,"endColumn":5,"fileName":"pxt_modules/net/netutil.ts","functionName":"urlencode","argumentNames":["s"]}

function net_urlencode__P1219_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_urlencode__P1219, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  buf___3593: undefined,
  r___3597: undefined,
  i___3598: undefined,
  c___3604: undefined,
  arg0: undefined,
} }





function helpers_arrayMap__P106(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___3667 = undefined;
    s.len___3669 = undefined;
    s.i___3672 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(231,13): res: U[] = []
    r0 = pxsim_Array__mk();
    s.res___3667 = (r0);
// base/pxt-helpers.ts(232,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___3669 = (r0);
// base/pxt-helpers.ts(233,18): i = 0
    s.i___3672 = (0);
// base/pxt-helpers.ts(233,1): for (let i = 0; i < len; ++i) {...
  case 1:
// base/pxt-helpers.ts(233,25): i < len
    r0 = (s.i___3672 < s.len___3669);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(234,13): res.push(callbackfn(arr[i], i))
    s.tmp_1 = r0 = s.res___3667;
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___3672);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.i___3672;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 4; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
// base/pxt-helpers.ts(233,34): ++i
    r0 = (s.i___3672 + 1);
    s.i___3672 = (r0);
    { step = 1; continue; }
  case 2:
// base/pxt-helpers.ts(236,9): return res
    r0 = s.res___3667;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayMap__P106.info = {"start":6528,"length":299,"line":229,"column":4,"endLine":236,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayMap","argumentNames":["arr","callbackfn"]}

function helpers_arrayMap__P106_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayMap__P106, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  res___3667: undefined,
  len___3669: undefined,
  i___3672: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_mqttClient__P1343(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(27,9): if (!_mqttClient && !skipCreate) {...
    r0 = pxsim_numops_toBoolDecr(globals._mqttClient___2287);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(28,13): log("creating mqtt client")
    s.tmp_4 = azureiot_log__P2292_mk(s);
    s.tmp_4.arg0 = "creating mqtt client";
    s.callLocIdx = 468; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
// azureiot/azureiot.ts(29,13): _mqttClient = createMQTTClient()
    s.tmp_0 = azureiot_createMQTTClient__P2295_mk(s);
    s.callLocIdx = 469; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    globals._mqttClient___2287 = (r0);
  case 3:
  case 4:
// azureiot/azureiot.ts(31,9): return _mqttClient;
    r0 = globals._mqttClient___2287;
    return leave(s, r0)
  default: oops()
} } }
azureiot_mqttClient__P1343.info = {"start":651,"length":236,"line":25,"column":4,"endLine":31,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"mqttClient","argumentNames":["skipCreate"]}

function azureiot_mqttClient__P1343_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_mqttClient__P1343, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function azureiot_createMQTTClient__P2295(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.iotHubHostName___3699 = undefined;
    s.deviceId___3702 = undefined;
    s.connStringParts___3710 = undefined;
    s.sasToken___3713 = undefined;
    s.opts___3729 = undefined;
    s.c___3749 = undefined;
    s.evid___3753 = undefined;
// azureiot/azureiot.ts(58,9): messageBusId()
    s.tmp_0 = azureiot_messageBusId__P2294_mk(s);
    s.callLocIdx = 478; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// azureiot/azureiot.ts(59,15): iotHubHostName = hubName()
    s.tmp_0 = azureiot_hubName__P1344_mk(s);
    s.callLocIdx = 479; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.iotHubHostName___3699 = (r0);
// azureiot/azureiot.ts(60,15): deviceId = hubDeviceId()
    s.tmp_0 = azureiot_hubDeviceId__P1345_mk(s);
    s.callLocIdx = 480; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.deviceId___3702 = (r0);
// azureiot/azureiot.ts(61,9): if (!iotHubHostName || !deviceId)...
    r0 = pxsim_numops_toBoolDecr(s.iotHubHostName___3699);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.deviceId___3702);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(62,13): throw "invalid connection string"
    r0 = pxsim_pxtcore.throwValue("invalid connection string");
  case 3:
  case 4:
// azureiot/azureiot.ts(64,15): connStringParts = parseConnectionString()
    s.tmp_4 = azureiot_parseConnectionString__P2298_mk(s);
    s.callLocIdx = 481; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    s.connStringParts___3710 = (r0);
// azureiot/azureiot.ts(65,13): sasToken = connStringParts["SharedAccessSignature"]
    r0 = pxsim_pxtrt.mapGetGeneric(s.connStringParts___3710, "SharedAccessSignature");
    s.sasToken___3713 = (r0);
// azureiot/azureiot.ts(66,9): if (!sasToken)...
    r0 = pxsim_numops_toBoolDecr(s.sasToken___3713);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// azureiot/azureiot.ts(68,1): sasToken = generateSasToken(`${iotHubHostName}/devices/${deviceId}`,
    s.tmp_2 = azureiot_generateSasToken__P2293_mk(s);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_5 = r0;
    if ((s.iotHubHostName___3699) && (s.iotHubHostName___3699).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.iotHubHostName___3699);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.iotHubHostName___3699) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "/devices/");
    s.tmp_3 = r0;
    if ((s.deviceId___3702) && (s.deviceId___3702).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.deviceId___3702);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.deviceId___3702) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_7);
    s.tmp_2.arg0 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.connStringParts___3710, "SharedAccessKey");
    s.tmp_2.arg1 = r0;
    s.tmp_2.arg2 = 9000000000;
    s.callLocIdx = 482; s.pc = 11; return s.tmp_2;
  case 11:
    r0 = s.retval;
    s.sasToken___3713 = (r0);
  case 5:
  case 6:
// azureiot/azureiot.ts(70,15): opts: mqtt.IConnectionOptions = {...
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "host", s.iotHubHostName___3699);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_5 = r0;
    if ((s.iotHubHostName___3699) && (s.iotHubHostName___3699).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.iotHubHostName___3699);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.iotHubHostName___3699) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "/");
    s.tmp_3 = r0;
    if ((s.deviceId___3702) && (s.deviceId___3702).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.deviceId___3702);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.deviceId___3702) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_7);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "/?api-version=2018-06-30");
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "username", s.tmp_1);
    if ((s.sasToken___3713) && (s.sasToken___3713).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.sasToken___3713);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.sasToken___3713) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat("SharedAccessSignature ", s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "password", s.tmp_8);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "clientId", s.deviceId___3702);
    s.opts___3729 = (s.tmp_0);
// azureiot/azureiot.ts(77,15): c = new mqtt.Client(opts)
    r0 = pxsim_pxtcore_mkClassInstance(mqtt_Client__C1320_VT);
    s.tmp_0 = r0;
    s.tmp_1 = mqtt_Client_constructor__P1326_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.opts___3729;
    s.callLocIdx = 483; s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    s.c___3749 = (s.tmp_0);
// azureiot/azureiot.ts(78,15): evid = messageBusId()
    s.tmp_0 = azureiot_messageBusId__P2294_mk(s);
    s.callLocIdx = 484; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.evid___3753 = (r0);
// azureiot/azureiot.ts(79,9): c.on('connected', () => {...
    r0 = pxsim_pxtcore_mkAction(1, azureiot_createMQTTClient_inline__P3758);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.evid___3753);
    s.tmp_1 = mqtt_EventEmitter_on__P1314_mk(s);
    s.tmp_1.arg0 = s.c___3749;
    s.tmp_1.arg1 = "connected";
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 486; s.pc = 19; return s.tmp_1;
  case 19:
    r0 = s.retval;
// azureiot/azureiot.ts(83,9): c.on('disconnected', () => {...
    r0 = pxsim_pxtcore_mkAction(1, azureiot_createMQTTClient_inline__P3766);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.evid___3753);
    s.tmp_1 = mqtt_EventEmitter_on__P1314_mk(s);
    s.tmp_1.arg0 = s.c___3749;
    s.tmp_1.arg1 = "disconnected";
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 488; s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
// azureiot/azureiot.ts(87,9): c.on('error', (msg) => {...
    r0 = pxsim_pxtcore_mkAction(1, azureiot_createMQTTClient_inline__P3774);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.evid___3753);
    s.tmp_1 = mqtt_EventEmitter_on__P1314_mk(s);
    s.tmp_1.arg0 = s.c___3749;
    s.tmp_1.arg1 = "error";
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 490; s.pc = 21; return s.tmp_1;
  case 21:
    r0 = s.retval;
// azureiot/azureiot.ts(91,9): c.on('receive', (packet: mqtt.IMessage) => {...
    s.tmp_0 = mqtt_EventEmitter_on__P1314_mk(s);
    s.tmp_0.arg0 = s.c___3749;
    s.tmp_0.arg1 = "receive";
    s.tmp_0.arg2 = azureiot_createMQTTClient_inline__P3788;
    s.callLocIdx = 494; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
// azureiot/azureiot.ts(94,9): c.connect()
    s.tmp_0 = mqtt_Client_connect__P1328_mk(s);
    s.tmp_0.arg0 = s.c___3749;
    s.callLocIdx = 495; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
// azureiot/azureiot.ts(95,9): return c;
    r0 = s.c___3749;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient__P2295.info = {"start":1669,"length":1599,"line":56,"column":4,"endLine":95,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"createMQTTClient","argumentNames":[]}

function azureiot_createMQTTClient__P2295_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient__P2295, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  iotHubHostName___3699: undefined,
  deviceId___3702: undefined,
  connStringParts___3710: undefined,
  sasToken___3713: undefined,
  opts___3729: undefined,
  c___3749: undefined,
  evid___3753: undefined,
} }





function azureiot_createMQTTClient_inline__P3758(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// azureiot/azureiot.ts(80,13): log("connected")
    s.tmp_0 = azureiot_log__P2292_mk(s);
    s.tmp_0.arg0 = "connected";
    s.callLocIdx = 485; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// azureiot/azureiot.ts(81,13): control.raiseEvent(evid, AzureIotEvent.Connected)
    r0 = pxsim.control.raiseEvent(s.caps[0], 1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient_inline__P3758.info = {"start":2680,"length":108,"line":78,"column":26,"endLine":81,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":[]}

function azureiot_createMQTTClient_inline__P3758_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient_inline__P3758, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function azureiot_createMQTTClient_inline__P3766(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// azureiot/azureiot.ts(84,13): log("disconnected")
    s.tmp_0 = azureiot_log__P2292_mk(s);
    s.tmp_0.arg0 = "disconnected";
    s.callLocIdx = 487; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// azureiot/azureiot.ts(85,13): control.raiseEvent(evid, AzureIotEvent.Disconnected)
    r0 = pxsim.control.raiseEvent(s.caps[0], 2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient_inline__P3766.info = {"start":2820,"length":114,"line":82,"column":29,"endLine":85,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":[]}

function azureiot_createMQTTClient_inline__P3766_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient_inline__P3766, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function azureiot_createMQTTClient_inline__P3774(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(88,13): log("error: " + msg)
    s.tmp_0 = azureiot_log__P2292_mk(s);
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("error: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 489; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// azureiot/azureiot.ts(89,13): control.raiseEvent(evid, AzureIotEvent.Error)
    r0 = pxsim.control.raiseEvent(s.caps[0], 3);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient_inline__P3774.info = {"start":2959,"length":111,"line":86,"column":22,"endLine":89,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["msg"]}

function azureiot_createMQTTClient_inline__P3774_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient_inline__P3774, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function azureiot_createMQTTClient_inline__P3788(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(92,13): log("unhandled msg: " + packet.topic + " / " + packet.content.toString())
    s.tmp_0 = azureiot_log__P2292_mk(s);
    s.tmp_7 = if_topic_1_mk(s);
    s.tmp_7.arg0 = s.arg0;
    if (!s.tmp_7.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_7.arg0, "topic");
    } else {
      s.tmp_7.fn = s.tmp_7.arg0.vtable.iface["topic"];
      if (s.tmp_7.fn == null) { s.retval = s.tmp_7.arg0.fields["topic"]; }
      else if (!s.tmp_7.fn.isGetter) { s.retval = bind(s.tmp_7); }
     else { s.callLocIdx = 491; s.pc = 2; return s.tmp_7; }
    }
  case 2:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("unhandled msg: ", s.tmp_5);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " / ");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    s.tmp_11 = if_content_1_mk(s);
    s.tmp_11.arg0 = s.arg0;
    if (!s.tmp_11.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_11.arg0, "content");
    } else {
      s.tmp_11.fn = s.tmp_11.arg0.vtable.iface["content"];
      if (s.tmp_11.fn == null) { s.retval = s.tmp_11.arg0.fields["content"]; }
      else if (!s.tmp_11.fn.isGetter) { s.retval = bind(s.tmp_11); }
     else { s.callLocIdx = 492; s.pc = 6; return s.tmp_11; }
    }
  case 6:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_8);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 493; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_createMQTTClient_inline__P3788.info = {"start":3097,"length":124,"line":90,"column":24,"endLine":92,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["packet"]}

function azureiot_createMQTTClient_inline__P3788_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_createMQTTClient_inline__P3788, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  arg0: undefined,
} }





function mqtt_Client_connect__P1328(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(422,13): if (this.status != Status.Disconnected)...
    r0 = s.arg0.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(423,17): return
    { step = 5; continue; }
  case 1:
  case 2:
// mqtt/mqtt.ts(424,13): this.status = Status.Connecting
    r0 = (s.arg0).fields["status"] = (1);
// mqtt/mqtt.ts(425,13): this.log(`Connecting to ${this.opt.host}:${this.opt.port}`)
    s.tmp_0 = mqtt_Client_log__P2276_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_5 = if_host_1_mk(s);
    r0 = s.arg0.fields["opt"];
    s.tmp_5.arg0 = r0;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "host");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["host"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["host"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 387; s.pc = 7; return s.tmp_5; }
    }
  case 7:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("Connecting to ", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    s.tmp_8 = if_port_1_mk(s);
    r0 = s.arg0.fields["opt"];
    s.tmp_8.arg0 = r0;
    if (!s.tmp_8.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_8.arg0, "port");
    } else {
      s.tmp_8.fn = s.tmp_8.arg0.vtable.iface["port"];
      if (s.tmp_8.fn == null) { s.retval = s.tmp_8.arg0.fields["port"]; }
      else if (!s.tmp_8.fn.isGetter) { s.retval = bind(s.tmp_8); }
     else { s.callLocIdx = 388; s.pc = 9; return s.tmp_8; }
    }
  case 9:
    r0 = s.retval;
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_6);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 389; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
// mqtt/mqtt.ts(426,13): if (this.wdId === Constants.Uninitialized) {...
    r0 = s.arg0.fields["wdId"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === -123);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// mqtt/mqtt.ts(427,17): this.wdId = setInterval(() => {...
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3841);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.arg0);
    s.tmp_3 = r0 = s.arg0;
    s.tmp_5 = setInterval__P422_mk(s);
    s.tmp_5.arg0 = s.tmp_2;
    s.tmp_5.arg1 = 50000;
    s.callLocIdx = 395; s.pc = 11; return s.tmp_5;
  case 11:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["wdId"] = (s.tmp_4);
  case 3:
  case 4:
// mqtt/mqtt.ts(437,13): this.sct = this.net.createSocket(this.opt.host, this.opt.port, true)
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = net_Net_createSocket__P1209_mk(s);
    r0 = s.arg0.fields["net"];
    s.tmp_2.arg0 = r0;
    s.tmp_3 = if_host_1_mk(s);
    r0 = s.arg0.fields["opt"];
    s.tmp_3.arg0 = r0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "host");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["host"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["host"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 396; s.pc = 13; return s.tmp_3; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.tmp_4 = if_port_1_mk(s);
    r0 = s.arg0.fields["opt"];
    s.tmp_4.arg0 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "port");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["port"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["port"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 397; s.pc = 14; return s.tmp_4; }
    }
  case 14:
    r0 = s.retval;
    s.tmp_2.arg2 = r0;
    s.tmp_2.arg3 = true;
    s.callLocIdx = 398; s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["sct"] = (s.tmp_1);
// mqtt/mqtt.ts(438,13): this.sct.onOpen(() => {...
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3867);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = if_onOpen_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "onOpen"), 2);
      s.callLocIdx = 403; s.pc = 15; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["onOpen"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["onOpen"], 2); s.callLocIdx = 403; s.pc = 15; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 403; s.pc = 15; return s.tmp_1;; }
     else { s.callLocIdx = 403; s.pc = 15; return s.tmp_1; }
    }
  case 15:
    r0 = s.retval;
// mqtt/mqtt.ts(443,13): this.sct.onMessage((msg: Buffer) => {...
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3878);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = if_onMessage_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "onMessage"), 2);
      s.callLocIdx = 406; s.pc = 16; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["onMessage"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["onMessage"], 2); s.callLocIdx = 406; s.pc = 16; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 406; s.pc = 16; return s.tmp_1;; }
     else { s.callLocIdx = 406; s.pc = 16; return s.tmp_1; }
    }
  case 16:
    r0 = s.retval;
// mqtt/mqtt.ts(447,13): this.sct.onError(() => {...
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3896);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = if_onError_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "onError"), 2);
      s.callLocIdx = 409; s.pc = 17; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["onError"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["onError"], 2); s.callLocIdx = 409; s.pc = 17; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 409; s.pc = 17; return s.tmp_1;; }
     else { s.callLocIdx = 409; s.pc = 17; return s.tmp_1; }
    }
  case 17:
    r0 = s.retval;
// mqtt/mqtt.ts(451,13): this.sct.onClose(() => {...
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_connect_inline__P3903);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = if_onClose_2_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "onClose"), 2);
      s.callLocIdx = 412; s.pc = 18; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["onClose"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["onClose"], 2); s.callLocIdx = 412; s.pc = 18; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 412; s.pc = 18; return s.tmp_1;; }
     else { s.callLocIdx = 412; s.pc = 18; return s.tmp_1; }
    }
  case 18:
    r0 = s.retval;
// mqtt/mqtt.ts(457,13): this.sct.connect()
    s.tmp_0 = if_connect_1_mk(s);
    r0 = s.arg0.fields["sct"];
    s.tmp_0.arg0 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "connect"), 1);
      s.callLocIdx = 413; s.pc = 19; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["connect"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["connect"], 1); s.callLocIdx = 413; s.pc = 19; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 413; s.pc = 19; return s.tmp_0;; }
     else { s.callLocIdx = 413; s.pc = 19; return s.tmp_0; }
    }
  case 19:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect__P1328.info = {"start":13096,"length":1509,"line":420,"column":8,"endLine":457,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"connect","argumentNames":["this"]}

function mqtt_Client_connect__P1328_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect__P1328, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
} }





function mqtt_Client_connect_inline__P3841(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// mqtt/mqtt.ts(428,21): if (!this.connected) {...
    s.tmp_3 = mqtt_Client_connected__P1325_mk(s);
    s.tmp_3.arg0 = s.caps[0];
    s.callLocIdx = 390; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(429,25): this.emit('disconnected')
    s.tmp_4 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_4.arg0 = s.caps[0];
    s.tmp_4.arg1 = "disconnected";
    s.tmp_4.arg2 = undefined;
    s.callLocIdx = 391; s.pc = 4; return s.tmp_4;
  case 4:
    r0 = s.retval;
// mqtt/mqtt.ts(430,25): this.emit('error', 'No connection. Retrying.')
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "error";
    s.tmp_0.arg2 = "No connection. Retrying.";
    s.callLocIdx = 392; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
// mqtt/mqtt.ts(431,25): this.disconnect()
    s.tmp_0 = mqtt_Client_disconnect__P1327_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 393; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
// mqtt/mqtt.ts(432,25): this.connect()
    s.tmp_0 = mqtt_Client_connect__P1328_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 394; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3841.info = {"start":13410,"length":296,"line":426,"column":40,"endLine":433,"endColumn":17,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_connect_inline__P3841_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3841, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
} }





function mqtt_Client_connect_inline__P3867(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// mqtt/mqtt.ts(439,17): this.log('Network connection established.')
    s.tmp_0 = mqtt_Client_log__P2276_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "Network connection established.";
    s.callLocIdx = 399; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// mqtt/mqtt.ts(440,17): this.emit('connect')
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "connect";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 400; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// mqtt/mqtt.ts(441,17): this.send(Protocol.createConnect(this.opt))
    s.tmp_0 = mqtt_Client_send__P2282_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_1 = mqtt_Protocol_createConnect__P1306_mk(s);
    r0 = s.caps[0].fields["opt"];
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 401; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 402; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3867.info = {"start":13869,"length":181,"line":437,"column":28,"endLine":441,"endColumn":13,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_connect_inline__P3867_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3867, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function mqtt_Client_connect_inline__P3878(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(444,17): this.trace("incoming " + msg.length + " bytes")
    s.tmp_0 = mqtt_Client_trace__P2277_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("incoming ", s.tmp_3);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " bytes");
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 404; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// mqtt/mqtt.ts(445,17): this.handleMessage(msg)
    s.tmp_0 = mqtt_Client_handleMessage__P2283_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 405; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3878.info = {"start":14084,"length":137,"line":442,"column":31,"endLine":445,"endColumn":13,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["msg"]}

function mqtt_Client_connect_inline__P3878_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3878, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function mqtt_Client_connect_inline__P3896(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// mqtt/mqtt.ts(448,17): this.log('Error.')
    s.tmp_0 = mqtt_Client_log__P2276_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "Error.";
    s.callLocIdx = 407; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// mqtt/mqtt.ts(449,17): this.emit('error')
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "error";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 408; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3896.info = {"start":14253,"length":93,"line":446,"column":29,"endLine":449,"endColumn":13,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_connect_inline__P3896_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3896, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function mqtt_Client_connect_inline__P3903(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// mqtt/mqtt.ts(452,17): this.log('Close.')
    s.tmp_0 = mqtt_Client_log__P2276_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "Close.";
    s.callLocIdx = 410; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// mqtt/mqtt.ts(453,17): this.emit('disconnected')
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = "disconnected";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 411; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// mqtt/mqtt.ts(454,17): this.status = Status.Disconnected
    r0 = (s.caps[0]).fields["status"] = (0);
// mqtt/mqtt.ts(455,17): this.sct = null
    r0 = (s.caps[0]).fields["sct"] = (null);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_connect_inline__P3903.info = {"start":14378,"length":183,"line":450,"column":29,"endLine":455,"endColumn":13,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_connect_inline__P3903_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connect_inline__P3903, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function mqtt_Client_handleMessage__P2283(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___3932 = undefined;
    s.payloadOff___3934 = undefined;
    s.payloadEnd___3957 = undefined;
    s.cmd___3968 = undefined;
    s.controlPacketType___3971 = undefined;
    s.payload___3974 = undefined;
    s.returnCode___3989 = undefined;
    s.sub___4011 = undefined;
    s.unnamed120___U8 = undefined;
    s.unnamed121___U9 = undefined;
    s.connectionError___4017 = undefined;
    s.message___4030 = undefined;
    s.handled___4041 = undefined;
    s.cleanup___4042 = undefined;
    s.h___4047 = undefined;
    s.unnamed122___U15 = undefined;
    s.unnamed123___U16 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(557,13): if (this.buf)...
    r0 = s.arg0.fields["buf"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(558,17): data = this.buf.concat(data)
    s.tmp_1 = helpers_bufferConcat__P184_mk(s);
    r0 = s.arg0.fields["buf"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 435; s.pc = 41; return s.tmp_1;
  case 41:
    r0 = s.retval;
    s.arg1 = (r0);
  case 1:
  case 2:
// mqtt/mqtt.ts(559,13): this.buf = data
    r0 = (s.arg0).fields["buf"] = (s.arg1);
// mqtt/mqtt.ts(560,13): if (data.length < 2)...
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// mqtt/mqtt.ts(561,17): return
    { step = 40; continue; }
  case 3:
  case 4:
// mqtt/mqtt.ts(562,17): len = data[1]
    r0 = pxsim.BufferMethods.getByte(s.arg1, 1);
    s.len___3932 = (r0);
// mqtt/mqtt.ts(563,17): payloadOff = 2
    s.payloadOff___3934 = (2);
// mqtt/mqtt.ts(564,13): if (len & 0x80) {...
    r0 = (s.len___3932 & 128);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// mqtt/mqtt.ts(565,17): if (data.length < 3)...
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 < 3);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
// mqtt/mqtt.ts(566,21): return
    { step = 40; continue; }
  case 5:
  case 6:
// mqtt/mqtt.ts(567,17): if (data[2] & 0x80) {...
    r0 = pxsim.BufferMethods.getByte(s.arg1, 2);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 128);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 7; continue; }
// mqtt/mqtt.ts(568,21): this.emit('error', `too large packet.`)
    s.tmp_5 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.tmp_5.arg1 = "error";
    s.tmp_5.arg2 = "too large packet.";
    s.callLocIdx = 436; s.pc = 42; return s.tmp_5;
  case 42:
    r0 = s.retval;
// mqtt/mqtt.ts(569,21): this.buf = null
    r0 = (s.arg0).fields["buf"] = (null);
// mqtt/mqtt.ts(570,21): return
    { step = 40; continue; }
  case 7:
  case 8:
// mqtt/mqtt.ts(572,17): len = (data[2] << 7) | (len & 0x7f)
    r0 = pxsim.BufferMethods.getByte(s.arg1, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 << 7);
    s.tmp_0 = r0;
    r0 = (s.len___3932 & 127);
    s.tmp_2 = r0;
    r0 = (s.tmp_0 | s.tmp_2);
    s.len___3932 = (r0);
// mqtt/mqtt.ts(573,17): payloadOff++
    r0 = (s.payloadOff___3934 + 1);
    s.payloadOff___3934 = (r0);
  case 9:
  case 10:
// mqtt/mqtt.ts(576,19): payloadEnd = payloadOff + len
    r0 = (s.payloadOff___3934 + s.len___3932);
    s.payloadEnd___3957 = (r0);
// mqtt/mqtt.ts(577,13): if (data.length < payloadEnd)...
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < s.payloadEnd___3957);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// mqtt/mqtt.ts(578,17): return
    { step = 40; continue; }
  case 11:
  case 12:
// mqtt/mqtt.ts(579,1): this.buf = null
    r0 = (s.arg0).fields["buf"] = (null);
// mqtt/mqtt.ts(582,19): cmd = data[0]
    r0 = pxsim.BufferMethods.getByte(s.arg1, 0);
    s.cmd___3968 = (r0);
// mqtt/mqtt.ts(583,19): controlPacketType: ControlPacketType = cmd >> 4
    r0 = (s.cmd___3968 >> 4);
    s.controlPacketType___3971 = (r0);
// mqtt/mqtt.ts(586,19): payload = data.slice(payloadOff, payloadEnd - payloadOff)
    s.tmp_0 = r0 = s.arg1;
    s.tmp_1 = r0 = s.payloadOff___3934;
    r0 = (s.payloadEnd___3957 - s.payloadOff___3934);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, s.tmp_1, s.tmp_2);
    s.payload___3974 = (r0);
// mqtt/mqtt.ts(588,13): switch (controlPacketType) {...
    s.tmp_0 = r0 = s.controlPacketType___3971;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 18; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 33; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 34; continue; }
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 35; continue; }
    r0 = s.tmp_0;
    { step = 36; continue; }
  case 13:
// mqtt/mqtt.ts(590,27): returnCode: number = payload[1]
    r0 = pxsim.BufferMethods.getByte(s.payload___3974, 1);
    s.returnCode___3989 = (r0);
// mqtt/mqtt.ts(591,21): if (returnCode === ConnectReturnCode.Accepted) {...
    r0 = (s.returnCode___3989 === 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
// mqtt/mqtt.ts(592,25): this.log('MQTT connection accepted.')
    s.tmp_1 = mqtt_Client_log__P2276_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "MQTT connection accepted.";
    s.callLocIdx = 437; s.pc = 43; return s.tmp_1;
  case 43:
    r0 = s.retval;
// mqtt/mqtt.ts(593,25): this.emit('connected')
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "connected";
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 438; s.pc = 44; return s.tmp_0;
  case 44:
    r0 = s.retval;
// mqtt/mqtt.ts(594,25): this.status = Status.Connected
    r0 = (s.arg0).fields["status"] = (2);
// mqtt/mqtt.ts(595,25): this.piId = setInterval(() => this.ping(), Constants.PingInterval * 1000)
    r0 = pxsim_pxtcore_mkAction(1, mqtt_Client_handleMessage_inline__P4005);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = setInterval__P422_mk(s);
    s.tmp_3.arg0 = s.tmp_0;
    s.tmp_3.arg1 = 40000;
    s.callLocIdx = 440; s.pc = 45; return s.tmp_3;
  case 45:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["piId"] = (s.tmp_2);
// mqtt/mqtt.ts(596,36): sub
    s.sub___4011 = (undefined);
    r0 = s.arg0.fields["subs"];
    s.unnamed120___U8 = (r0);
    s.unnamed121___U9 = (0);
// mqtt/mqtt.ts(596,25): for (const sub of this.subs)...
  case 14:
    s.tmp_0 = r0 = s.unnamed121___U9;
    r0 = pxsim_Array__length(s.unnamed120___U8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 15; continue; }
    r0 = pxsim_Array__getAt(s.unnamed120___U8, s.unnamed121___U9);
    s.sub___4011 = (r0);
// mqtt/mqtt.ts(597,29): this.send1(sub)
    s.tmp_2 = mqtt_Client_send1__P2284_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.sub___4011;
    s.callLocIdx = 441; s.pc = 46; return s.tmp_2;
  case 46:
    r0 = s.retval;
    r0 = (s.unnamed121___U9 + 1);
    s.unnamed121___U9 = (r0);
    { step = 14; continue; }
  case 15:
    s.unnamed120___U8 = (undefined);
    { step = 17; continue; }
  case 16:
// mqtt/mqtt.ts(599,31): connectionError: string = Client.describe(returnCode)
    s.tmp_0 = mqtt_Client_describe__P2278_mk(s);
    s.tmp_0.arg0 = s.returnCode___3989;
    s.callLocIdx = 442; s.pc = 47; return s.tmp_0;
  case 47:
    r0 = s.retval;
    s.connectionError___4017 = (r0);
// mqtt/mqtt.ts(600,25): this.log('MQTT connection error: ' + connectionError)
    s.tmp_0 = mqtt_Client_log__P2276_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if ((s.connectionError___4017) && (s.connectionError___4017).vtable) {
    setupResume(s, 49);
    pxsim_String__stringConv(s.connectionError___4017);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.connectionError___4017) + ""; }
  case 49:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("MQTT connection error: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 443; s.pc = 48; return s.tmp_0;
  case 48:
    r0 = s.retval;
// mqtt/mqtt.ts(601,25): this.emit('error', connectionError)
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "error";
    s.tmp_0.arg2 = s.connectionError___4017;
    s.callLocIdx = 444; s.pc = 50; return s.tmp_0;
  case 50:
    r0 = s.retval;
// mqtt/mqtt.ts(602,25): this.disconnect()
    s.tmp_0 = mqtt_Client_disconnect__P1327_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 445; s.pc = 51; return s.tmp_0;
  case 51:
    r0 = s.retval;
  case 17:
// mqtt/mqtt.ts(604,21): break;
    { step = 37; continue; }
  case 18:
// mqtt/mqtt.ts(606,27): message: IMessage = Protocol.parsePublish(cmd, payload)
    s.tmp_0 = mqtt_Protocol_parsePublish__P1309_mk(s);
    s.tmp_0.arg0 = s.cmd___3968;
    s.tmp_0.arg1 = s.payload___3974;
    s.callLocIdx = 446; s.pc = 52; return s.tmp_0;
  case 52:
    r0 = s.retval;
    s.message___4030 = (r0);
// mqtt/mqtt.ts(607,21): this.trace(`incoming: ${message.topic}`)
    s.tmp_0 = mqtt_Client_trace__P2277_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_3 = if_topic_1_mk(s);
    s.tmp_3.arg0 = s.message___4030;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "topic");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["topic"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["topic"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 447; s.pc = 54; return s.tmp_3; }
    }
  case 54:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 55);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 55:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("incoming: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 448; s.pc = 53; return s.tmp_0;
  case 53:
    r0 = s.retval;
// mqtt/mqtt.ts(608,25): handled = false
    s.handled___4041 = (false);
// mqtt/mqtt.ts(609,25): cleanup = false
    s.cleanup___4042 = (false);
// mqtt/mqtt.ts(610,21): if (this.mqttHandlers) {...
    r0 = s.arg0.fields["mqttHandlers"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
// mqtt/mqtt.ts(611,34): h
    s.h___4047 = (undefined);
    r0 = s.arg0.fields["mqttHandlers"];
    s.unnamed122___U15 = (r0);
    s.unnamed123___U16 = (0);
// mqtt/mqtt.ts(611,25): for (let h of this.mqttHandlers)...
  case 19:
    s.tmp_0 = r0 = s.unnamed123___U16;
    r0 = pxsim_Array__length(s.unnamed122___U15);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 24; continue; }
    r0 = pxsim_Array__getAt(s.unnamed122___U15, s.unnamed123___U16);
    s.h___4047 = (r0);
// mqtt/mqtt.ts(612,29): if (message.topic.slice(0, h.topic.length) == h.topic) {
    s.tmp_4 = helpers_stringSlice__P119_mk(s);
    s.tmp_5 = if_topic_1_mk(s);
    s.tmp_5.arg0 = s.message___4030;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "topic");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["topic"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["topic"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 449; s.pc = 57; return s.tmp_5; }
    }
  case 57:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = 0;
    r0 = s.h___4047.fields["topic"];
    s.tmp_6 = r0;
    r0 = pxsim_String_.length(s.tmp_6);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 450; s.pc = 56; return s.tmp_4;
  case 56:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.h___4047.fields["topic"];
    s.tmp_7 = r0;
    r0 = (s.tmp_3 == s.tmp_7);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 22; continue; }
// mqtt/mqtt.ts(613,33): h.handler(message)
    s.tmp_8 = if_handler_2_mk(s);
    s.tmp_8.arg0 = s.h___4047;
    s.tmp_8.arg1 = s.message___4030;
    if (!s.tmp_8.arg0.vtable.iface) {
      setupLambda(s.tmp_8, pxsim_pxtrt.mapGetByString(s.tmp_8.arg0, "handler"), 2);
      s.callLocIdx = 451; s.pc = 58; return s.tmp_8;
    } else {
      s.tmp_8.fn = s.tmp_8.arg0.vtable.iface["handler"];
      if (s.tmp_8.fn == null) { setupLambda(s.tmp_8, s.tmp_8.arg0.fields["handler"], 2); s.callLocIdx = 451; s.pc = 58; return s.tmp_8; }
      else if (s.tmp_8.fn.isGetter) { s.tmp_8.stage2Call = true; s.callLocIdx = 451; s.pc = 58; return s.tmp_8;; }
     else { s.callLocIdx = 451; s.pc = 58; return s.tmp_8; }
    }
  case 58:
    r0 = s.retval;
// mqtt/mqtt.ts(614,33): handled = true
    s.handled___4041 = (true);
// mqtt/mqtt.ts(615,33): if (h.status == HandlerStatus.Once) {...
    r0 = s.h___4047.fields["status"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
// mqtt/mqtt.ts(616,37): h.status = HandlerStatus.ToRemove
    r0 = (s.h___4047).fields["status"] = (2);
// mqtt/mqtt.ts(617,37): cleanup = true
    s.cleanup___4042 = (true);
  case 20:
  case 21:
  case 22:
  case 23:
    r0 = (s.unnamed123___U16 + 1);
    s.unnamed123___U16 = (r0);
    { step = 19; continue; }
  case 24:
    s.unnamed122___U15 = (undefined);
// mqtt/mqtt.ts(620,25): if (cleanup)...
    r0 = pxsim_numops_toBoolDecr(s.cleanup___4042);
    if (!r0) { step = 25; continue; }
// mqtt/mqtt.ts(621,29): this.mqttHandlers = this.mqttHandlers.filter(h => h.status != HandlerStatus.ToRe
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = helpers_arrayFilter__P110_mk(s);
    r0 = s.arg0.fields["mqttHandlers"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = mqtt_Client_handleMessage_inline__P4083;
    s.callLocIdx = 452; s.pc = 59; return s.tmp_2;
  case 59:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["mqttHandlers"] = (s.tmp_1);
  case 25:
  case 26:
  case 27:
  case 28:
// mqtt/mqtt.ts(623,21): if (!handled)...
    r0 = pxsim_numops_toBoolDecr(s.handled___4041);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 29; continue; }
// mqtt/mqtt.ts(624,25): this.emit('receive', message)
    s.tmp_2 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "receive";
    s.tmp_2.arg2 = s.message___4030;
    s.callLocIdx = 453; s.pc = 60; return s.tmp_2;
  case 60:
    r0 = s.retval;
  case 29:
  case 30:
// mqtt/mqtt.ts(625,21): if (message.qos > 0) {...
    s.tmp_2 = if_qos_1_mk(s);
    s.tmp_2.arg0 = s.message___4030;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "qos");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["qos"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["qos"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 454; s.pc = 61; return s.tmp_2; }
    }
  case 61:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 31; continue; }
// mqtt/mqtt.ts(626,25): setTimeout(() => {...
    r0 = pxsim_pxtcore_mkAction(2, mqtt_Client_handleMessage_inline__P4097);
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_3, 0, s.arg0);
    r0 = pxsim_pxtrt_stclo(s.tmp_3, 1, s.message___4030);
    s.tmp_4 = setTimeout__P424_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    s.tmp_4.arg1 = 0;
    s.callLocIdx = 458; s.pc = 62; return s.tmp_4;
  case 62:
    r0 = s.retval;
  case 31:
  case 32:
// mqtt/mqtt.ts(630,21): break;
    { step = 37; continue; }
  case 33:
  case 34:
  case 35:
// mqtt/mqtt.ts(634,21): break;
    { step = 37; continue; }
  case 36:
// mqtt/mqtt.ts(636,21): this.emit('error', `MQTT unexpected packet type: ${controlPacketType}.`)
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "error";
    if ((s.controlPacketType___3971) && (s.controlPacketType___3971).vtable) {
    setupResume(s, 64);
    pxsim_String__stringConv(s.controlPacketType___3971);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.controlPacketType___3971) + ""; }
  case 64:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("MQTT unexpected packet type: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, ".");
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 459; s.pc = 63; return s.tmp_0;
  case 63:
    r0 = s.retval;
  case 37:
// mqtt/mqtt.ts(639,13): if (data.length > payloadEnd)...
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.payloadEnd___3957);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 38; continue; }
// mqtt/mqtt.ts(640,17): this.handleMessage(data.slice(payloadEnd))
    s.tmp_2 = mqtt_Client_handleMessage__P2283_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = pxsim.BufferMethods.slice(s.arg1, s.payloadEnd___3957, -1);
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 460; s.pc = 65; return s.tmp_2;
  case 65:
    r0 = s.retval;
  case 38:
  case 39:
  case 40:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_handleMessage__P2283.info = {"start":18232,"length":3711,"line":555,"column":8,"endLine":640,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"handleMessage","argumentNames":["this","data"]}

function mqtt_Client_handleMessage__P2283_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_handleMessage__P2283, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  len___3932: undefined,
  payloadOff___3934: undefined,
  payloadEnd___3957: undefined,
  cmd___3968: undefined,
  controlPacketType___3971: undefined,
  payload___3974: undefined,
  returnCode___3989: undefined,
  sub___4011: undefined,
  unnamed120___U8: undefined,
  unnamed121___U9: undefined,
  connectionError___4017: undefined,
  message___4030: undefined,
  handled___4041: undefined,
  cleanup___4042: undefined,
  h___4047: undefined,
  unnamed122___U15: undefined,
  unnamed123___U16: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_handleMessage_inline__P4005(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = mqtt_Client_ping__P2285_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 439; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_handleMessage_inline__P4005.info = {"start":19714,"length":17,"line":594,"column":48,"endLine":594,"endColumn":65,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_handleMessage_inline__P4005_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_handleMessage_inline__P4005, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function mqtt_Client_handleMessage_inline__P4083(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["status"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 != 2);
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_handleMessage_inline__P4083.info = {"start":21130,"length":39,"line":620,"column":73,"endLine":620,"endColumn":112,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["h"]}

function mqtt_Client_handleMessage_inline__P4083_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_handleMessage_inline__P4083, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function mqtt_Client_handleMessage_inline__P4097(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// mqtt/mqtt.ts(627,29): this.send1(Protocol.createPubAck(message.pid || 0))
    s.tmp_1 = if_pid_1_mk(s);
    s.tmp_1.arg0 = s.caps[1];
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "pid");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["pid"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["pid"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 455; s.pc = 3; return s.tmp_1; }
    }
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = mqtt_Client_send1__P2284_mk(s);
    s.tmp_3.arg0 = s.caps[0];
    s.tmp_4 = mqtt_Protocol_createPubAck__P1310_mk(s);
    s.tmp_4.arg0 = s.tmp_2;
    s.callLocIdx = 456; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 457; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_handleMessage_inline__P4097.info = {"start":21360,"length":114,"line":625,"column":35,"endLine":627,"endColumn":25,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":[]}

function mqtt_Client_handleMessage_inline__P4097_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_handleMessage_inline__P4097, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
} }





function mqtt_Protocol_createPubAck__P1310(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(260,13): return createPacket(byte1, strChr(getBytes(pid)));
    s.tmp_0 = mqtt_Protocol_createPacket__P2271_mk(s);
    s.tmp_0.arg0 = 64;
    s.tmp_1 = mqtt_Protocol_strChr__P2265_mk(s);
    s.tmp_2 = mqtt_Protocol_getBytes__P2268_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 355; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 356; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 357; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPubAck__P1310.info = {"start":8228,"length":182,"line":256,"column":8,"endLine":260,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPubAck","argumentNames":["pid"]}

function mqtt_Protocol_createPubAck__P1310_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPubAck__P1310, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_createPacket__P2271(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(170,13): if (payload == null) payload = control.createBuffer(0);
    r0 = (s.arg2 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(170,34): payload = control.createBuffer(0)
    r0 = pxsim.control.createBuffer(0);
    s.arg2 = (r0);
  case 1:
  case 2:
// mqtt/mqtt.ts(171,13): return createPacketHeader(byte1, variable, payload.length).concat(payload)
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    s.tmp_1 = mqtt_Protocol_createPacketHeader__P2270_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    r0 = pxsim.BufferMethods.length(s.arg2);
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 322; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg2;
    s.callLocIdx = 323; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPacket__P2271.info = {"start":4942,"length":247,"line":168,"column":8,"endLine":171,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPacket","argumentNames":["byte1","variable","payload"]}

function mqtt_Protocol_createPacket__P2271_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPacket__P2271, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function setTimeout__P424(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/scheduling.ts(28,5): return control.setInterval(func, delay, control.IntervalMode.Timeout);
    s.tmp_0 = control_setInterval__P352_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 1;
    s.callLocIdx = 124; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
setTimeout__P424.info = {"start":610,"length":139,"line":26,"column":0,"endLine":28,"endColumn":1,"fileName":"pxt_modules/base/scheduling.ts","functionName":"setTimeout","argumentNames":["func","delay"]}

function setTimeout__P424_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: setTimeout__P424, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_setInterval__P352(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.interval___4165 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/interval.ts(56,9): if (!func || delay < 0) return 0;
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 < 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
// base/interval.ts(56,33): return 0;
    r0 = 0;
    { step = 7; continue; }
  case 3:
  case 4:
// base/interval.ts(57,9): if (!_intervals) _intervals = [];
    r0 = pxsim_numops_toBoolDecr(globals._intervals___2172);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
// base/interval.ts(57,26): _intervals = []
    r0 = pxsim_Array__mk();
    globals._intervals___2172 = (r0);
  case 5:
  case 6:
// base/interval.ts(58,15): interval = new Interval(func, delay, mode)
    r0 = pxsim_pxtcore_mkClassInstance(control_Interval__C2173_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_Interval_constructor__P2176_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.tmp_1.arg3 = s.arg2;
    s.callLocIdx = 58; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.interval___4165 = (s.tmp_0);
// base/interval.ts(59,9): return interval.id;
    r0 = s.interval___4165.fields["id"];
  case 7:
    return leave(s, r0)
  default: oops()
} } }
control_setInterval__P352.info = {"start":1554,"length":266,"line":54,"column":4,"endLine":59,"endColumn":5,"fileName":"pxt_modules/base/interval.ts","functionName":"setInterval","argumentNames":["func","delay","mode"]}

function control_setInterval__P352_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_setInterval__P352, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  interval___4165: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function control_Interval_constructor__P2176(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_Interval__C2173_VT)) failedCast(r0);
// base/interval.ts(17,13): this.id = _intervals.length == 0...
    r0 = pxsim_Array__length(globals._intervals___2172);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 1;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = r0 = globals._intervals___2172;
    r0 = pxsim_Array__length(globals._intervals___2172);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 - 1);
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.tmp_3, s.tmp_4);
    r0 = r0.fields["id"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
  case 2:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = (s.arg0).fields["id"] = (s.tmp_6);
// base/interval.ts(19,13): this.func = func
    r0 = (s.arg0).fields["func"] = (s.arg1);
// base/interval.ts(20,13): this.delay = delay
    r0 = (s.arg0).fields["delay"] = (s.arg2);
// base/interval.ts(21,13): this.mode = mode
    r0 = (s.arg0).fields["mode"] = (s.arg3);
// base/interval.ts(22,13): _intervals.push(this)
    r0 = pxsim_Array__push(globals._intervals___2172, s.arg0);
// base/interval.ts(24,13): control.runInParallel(() => this.work())
    r0 = pxsim_pxtcore_mkAction(1, control_Interval_inline__P4208);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.control.runInParallel(s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_constructor__P2176.info = {"start":283,"length":367,"line":15,"column":8,"endLine":24,"endColumn":9,"fileName":"pxt_modules/base/interval.ts","functionName":"inline","argumentNames":["this","func","delay","mode"]}

function control_Interval_constructor__P2176_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_constructor__P2176, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function control_Interval_inline__P4208(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = control_Interval_work__P2174_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 53; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_inline__P4208.info = {"start":621,"length":17,"line":23,"column":34,"endLine":23,"endColumn":51,"fileName":"pxt_modules/base/interval.ts","functionName":"inline","argumentNames":[]}

function control_Interval_inline__P4208_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_inline__P4208, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function control_Interval_work__P2174(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_Interval__C2173_VT)) failedCast(r0);
// base/interval.ts(29,1): switch (this.mode) {...
    r0 = s.arg0.fields["mode"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 12; continue; }
  case 1:
  case 2:
// base/interval.ts(32,21): if (this.delay > 0)...
    r0 = s.arg0.fields["delay"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// base/interval.ts(33,25): pause(this.delay)
    s.tmp_3 = pause__P411_mk(s);
    r0 = s.arg0.fields["delay"];
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 54; s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
  case 3:
  case 4:
// base/interval.ts(34,1): if (this.delay >= 0) // immediate, timeout
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// base/interval.ts(35,1): this.func()
    s.tmp_2 = if_func_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "func"), 1);
      s.callLocIdx = 55; s.pc = 14; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["func"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["func"], 1); s.callLocIdx = 55; s.pc = 14; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 55; s.pc = 14; return s.tmp_2;; }
     else { s.callLocIdx = 55; s.pc = 14; return s.tmp_2; }
    }
  case 14:
    r0 = s.retval;
  case 5:
  case 6:
// base/interval.ts(36,21): break;
    { step = 12; continue; }
  case 7:
// base/interval.ts(38,21): while (this.delay > 0) {...
  case 8:
// base/interval.ts(38,28): this.delay > 0
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// base/interval.ts(39,25): pause(this.delay)
    s.tmp_2 = pause__P411_mk(s);
    r0 = s.arg0.fields["delay"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 56; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
// base/interval.ts(41,1): if (this.delay > 0)...
    r0 = s.arg0.fields["delay"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// base/interval.ts(42,29): this.func()
    s.tmp_2 = if_func_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "func"), 1);
      s.callLocIdx = 57; s.pc = 16; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["func"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["func"], 1); s.callLocIdx = 57; s.pc = 16; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 57; s.pc = 16; return s.tmp_2;; }
     else { s.callLocIdx = 57; s.pc = 16; return s.tmp_2; }
    }
  case 16:
    r0 = s.retval;
  case 9:
  case 10:
    { step = 8; continue; }
  case 11:
// base/interval.ts(44,21): break;
  case 12:
// base/interval.ts(47,1): _intervals.removeElement(this)
    r0 = pxsim_Array_.removeElement(globals._intervals___2172, s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_work__P2174.info = {"start":660,"length":823,"line":26,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/base/interval.ts","functionName":"work","argumentNames":["this"]}

function control_Interval_work__P2174_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_work__P2174, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function helpers_arrayFilter__P110(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___4243 = undefined;
    s.len___4245 = undefined;
    s.i___4248 = undefined;
    s.v___4253 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(263,13): res: T[] = []
    r0 = pxsim_Array__mk();
    s.res___4243 = (r0);
// base/pxt-helpers.ts(264,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___4245 = (r0);
// base/pxt-helpers.ts(265,18): i = 0
    s.i___4248 = (0);
// base/pxt-helpers.ts(265,9): for (let i = 0; i < len; ++i) {...
  case 1:
// base/pxt-helpers.ts(265,25): i < len
    r0 = (s.i___4248 < s.len___4245);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(266,17): v = arr[i]
    r0 = pxsim_Array__getAt(s.arg0, s.i___4248);
    s.v___4253 = (r0);
// base/pxt-helpers.ts(267,1): if (callbackfn(v, i)) res.push(v)
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.v___4253;
    s.tmp_1.arg1 = s.i___4248;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 8; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(267,35): res.push(v)
    r0 = pxsim_Array__push(s.res___4243, s.v___4253);
  case 2:
  case 3:
// base/pxt-helpers.ts(265,34): ++i
    r0 = (s.i___4248 + 1);
    s.i___4248 = (r0);
    { step = 1; continue; }
  case 4:
// base/pxt-helpers.ts(269,9): return res
    r0 = s.res___4243;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayFilter__P110.info = {"start":7695,"length":317,"line":261,"column":4,"endLine":269,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayFilter","argumentNames":["arr","callbackfn"]}

function helpers_arrayFilter__P110_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayFilter__P110, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  res___4243: undefined,
  len___4245: undefined,
  i___4248: undefined,
  v___4253: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_stringSlice__P119(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___4270 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(386,15): len = s.length
    r0 = pxsim_String_.length(s.arg0);
    s.len___4270 = (r0);
// base/pxt-helpers.ts(388,9): if (start < 0) {...
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/pxt-helpers.ts(389,13): start = Math.max(len + start, 0)
    s.tmp_1 = Math_max__P130_mk(s);
    r0 = (s.len___4270 + s.arg1);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    s.callLocIdx = 12; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.arg1 = (r0);
  case 1:
  case 2:
// base/pxt-helpers.ts(392,9): if (end === undefined) {...
    r0 = (s.arg2 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// base/pxt-helpers.ts(393,13): end = len
    s.arg2 = (s.len___4270);
    { step = 6; continue; }
  case 3:
// base/pxt-helpers.ts(394,16): if (end === null) {...
    r0 = (s.arg2 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(395,13): end = 0
    s.arg2 = (0);
  case 4:
  case 5:
  case 6:
// base/pxt-helpers.ts(398,9): if (end < 0) {...
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// base/pxt-helpers.ts(399,13): end = len + end
    r0 = (s.len___4270 + s.arg2);
    s.arg2 = (r0);
  case 7:
  case 8:
// base/pxt-helpers.ts(402,9): return stringSubstrHelper(s, start, end - start);
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.arg2 - s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_String_.substr(s.tmp_0, s.tmp_1, s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
helpers_stringSlice__P119.info = {"start":11496,"length":440,"line":384,"column":4,"endLine":402,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"stringSlice","argumentNames":["s","start","end"]}

function helpers_stringSlice__P119_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringSlice__P119, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  len___4270: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Protocol_parsePublish__P1309(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.qos___4304 = undefined;
    s.topicLength___4309 = undefined;
    s.variableLength___4314 = undefined;
    s.message___4324 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(232,19): qos: number = (cmd & 0b00000110) >> 1
    r0 = (s.arg0 & 6);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 1);
    s.qos___4304 = (r0);
// mqtt/mqtt.ts(234,19): topicLength = payload.getNumber(NumberFormat.UInt16BE, 0)
    r0 = pxsim.BufferMethods.getNumber(s.arg1, 9, 0);
    s.topicLength___4309 = (r0);
// mqtt/mqtt.ts(235,17): variableLength: number = 2 + topicLength
    r0 = (2 + s.topicLength___4309);
    s.variableLength___4314 = (r0);
// mqtt/mqtt.ts(236,13): if (qos > 0) {...
    r0 = (s.qos___4304 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(237,17): variableLength += 2
    r0 = (s.variableLength___4314 + 2);
    s.variableLength___4314 = (r0);
  case 1:
  case 2:
// mqtt/mqtt.ts(240,19): message: IMessage = {...
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.arg1, 2, s.topicLength___4309);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "topic", s.tmp_1);
    r0 = pxsim.BufferMethods.slice(s.arg1, s.variableLength___4314, -1);
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "content", s.tmp_3);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "qos", s.qos___4304);
    r0 = (s.arg0 & 1);
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "retain", s.tmp_4);
    s.message___4324 = (s.tmp_0);
// mqtt/mqtt.ts(247,13): if (qos > 0)...
    r0 = (s.qos___4304 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// mqtt/mqtt.ts(248,17): message.pid = payload.getNumber(NumberFormat.UInt16BE, variableLength - 2)
    s.tmp_1 = if_pid_2_mk(s);
    s.tmp_1.arg0 = s.message___4324;
    s.tmp_2 = r0 = s.arg1;
    r0 = (s.variableLength___4314 - 2);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_2, 9, s.tmp_3);
    s.tmp_1.arg1 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_1.arg0, "pid", s.tmp_1.arg1);
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["set/pid"];
      if (s.tmp_1.fn === null) { s.tmp_1.arg0.fields["pid"] = s.tmp_1.arg1; }
      else if (s.tmp_1.fn === undefined) { failedCast(s.tmp_1.arg0) } 
     else { s.callLocIdx = 354; s.pc = 5; return s.tmp_1; }
    }
  case 5:
    r0 = s.retval;
  case 3:
  case 4:
// mqtt/mqtt.ts(250,13): return message;
    r0 = s.message___4324;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_parsePublish__P1309.info = {"start":7325,"length":733,"line":230,"column":8,"endLine":250,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"parsePublish","argumentNames":["cmd","payload"]}

function mqtt_Protocol_parsePublish__P1309_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_parsePublish__P1309, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  qos___4304: undefined,
  topicLength___4309: undefined,
  variableLength___4314: undefined,
  message___4324: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_describe__P2278(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.error___4352 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(376,17): error: string = 'Connection refused, '
    s.error___4352 = ("Connection refused, ");
// mqtt/mqtt.ts(377,13): switch (code) {...
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 1:
// mqtt/mqtt.ts(379,21): error += 'unacceptable protocol version.'
    if ((s.error___4352) && (s.error___4352).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.error___4352);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4352) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "unacceptable protocol version.");
    s.error___4352 = (r0);
// mqtt/mqtt.ts(380,21): break;
    { step = 7; continue; }
  case 2:
// mqtt/mqtt.ts(382,21): error += 'identifier rejected.'
    if ((s.error___4352) && (s.error___4352).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.error___4352);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4352) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "identifier rejected.");
    s.error___4352 = (r0);
// mqtt/mqtt.ts(383,21): break;
    { step = 7; continue; }
  case 3:
// mqtt/mqtt.ts(385,21): error += 'server unavailable.'
    if ((s.error___4352) && (s.error___4352).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.error___4352);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4352) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "server unavailable.");
    s.error___4352 = (r0);
// mqtt/mqtt.ts(386,21): break;
    { step = 7; continue; }
  case 4:
// mqtt/mqtt.ts(388,21): error += 'bad user name or password.'
    if ((s.error___4352) && (s.error___4352).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.error___4352);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4352) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "bad user name or password.");
    s.error___4352 = (r0);
// mqtt/mqtt.ts(389,21): break;
    { step = 7; continue; }
  case 5:
// mqtt/mqtt.ts(391,21): error += 'not authorized.'
    if ((s.error___4352) && (s.error___4352).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.error___4352);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4352) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "not authorized.");
    s.error___4352 = (r0);
// mqtt/mqtt.ts(392,21): break;
    { step = 7; continue; }
  case 6:
// mqtt/mqtt.ts(394,21): error += `unknown return code: ${code}.`
    if ((s.error___4352) && (s.error___4352).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.error___4352);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.error___4352) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("unknown return code: ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, ".");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.error___4352 = (r0);
  case 7:
// mqtt/mqtt.ts(397,13): return error;
    r0 = s.error___4352;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_describe__P2278.info = {"start":11508,"length":991,"line":374,"column":8,"endLine":397,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"describe","argumentNames":["code"]}

function mqtt_Client_describe__P2278_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_describe__P2278, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  error___4352: undefined,
  arg0: undefined,
} }





function mqtt_Client_send1__P2284(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(644,13): if (this.canSend()) {...
    s.tmp_1 = mqtt_Client_canSend__P2279_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 461; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(645,17): this.send(msg)
    s.tmp_2 = mqtt_Client_send__P2282_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 462; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
// mqtt/mqtt.ts(646,17): this.doneSending()
    s.tmp_0 = mqtt_Client_doneSending__P2280_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 463; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_send1__P2284.info = {"start":21953,"length":152,"line":642,"column":8,"endLine":647,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"send1","argumentNames":["this","msg"]}

function mqtt_Client_send1__P2284_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_send1__P2284, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function mqtt_Client_ping__P2285(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(651,13): this.send1(Protocol.createPingReq())
    s.tmp_0 = mqtt_Client_send1__P2284_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = mqtt_Protocol_createPingReq__P1307_mk(s);
    s.callLocIdx = 464; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 465; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// mqtt/mqtt.ts(652,13): this.emit('debug', 'Sent: Ping request.')
    s.tmp_0 = mqtt_EventEmitter_emit__P2272_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "debug";
    s.tmp_0.arg2 = "Sent: Ping request.";
    s.callLocIdx = 466; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_ping__P2285.info = {"start":22115,"length":131,"line":649,"column":8,"endLine":652,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"ping","argumentNames":["this"]}

function mqtt_Client_ping__P2285_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_ping__P2285, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_createPingReq__P1307(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// mqtt/mqtt.ts(214,13): return strChr([ControlPacketType.PingReq << 4, 0]);
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, 192);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    s.tmp_1 = mqtt_Protocol_strChr__P2265_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 347; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createPingReq__P1307.info = {"start":6557,"length":107,"line":212,"column":8,"endLine":214,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createPingReq","argumentNames":[]}

function mqtt_Protocol_createPingReq__P1307_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createPingReq__P1307, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function mqtt_Protocol_createConnect__P1306(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.protocolName___4423 = undefined;
    s.nums___4427 = undefined;
    s.payload___4442 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(181,19): protocolName = pack('MQTT')
    s.tmp_0 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_0.arg0 = "MQTT";
    s.callLocIdx = 324; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.protocolName___4423 = (r0);
// mqtt/mqtt.ts(182,19): nums = control.createBuffer(4)
    r0 = pxsim.control.createBuffer(4);
    s.nums___4427 = (r0);
// mqtt/mqtt.ts(183,13): nums[0] = 4
    r0 = pxsim.BufferMethods.setByte(s.nums___4427, 0, 4);
// mqtt/mqtt.ts(184,1): nums[1] = createConnectFlags(options)
    s.tmp_0 = r0 = s.nums___4427;
    s.tmp_2 = mqtt_Protocol_createConnectFlags__P2267_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 325; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 1, s.tmp_1);
// mqtt/mqtt.ts(185,13): nums[2] = 0
    r0 = pxsim.BufferMethods.setByte(s.nums___4427, 2, 0);
// mqtt/mqtt.ts(186,13): nums[3] = Constants.KeepAlive
    r0 = pxsim.BufferMethods.setByte(s.nums___4427, 3, 60);
// mqtt/mqtt.ts(188,17): payload = pack(options.clientId)
    s.tmp_0 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_1 = if_clientId_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "clientId");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["clientId"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["clientId"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 326; s.pc = 10; return s.tmp_1; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 327; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.payload___4442 = (r0);
// mqtt/mqtt.ts(190,13): if (options.will) {...
    s.tmp_1 = if_will_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "will");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["will"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["will"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 328; s.pc = 11; return s.tmp_1; }
    }
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(191,17): payload = payload...
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_2.arg0 = s.payload___4442;
    s.tmp_3 = helpers_bufferConcat__P184_mk(s);
    s.tmp_4 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_5 = if_topic_1_mk(s);
    s.tmp_6 = if_will_1_mk(s);
    s.tmp_6.arg0 = s.arg0;
    if (!s.tmp_6.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_6.arg0, "will");
    } else {
      s.tmp_6.fn = s.tmp_6.arg0.vtable.iface["will"];
      if (s.tmp_6.fn == null) { s.retval = s.tmp_6.arg0.fields["will"]; }
      else if (!s.tmp_6.fn.isGetter) { s.retval = bind(s.tmp_6); }
     else { s.callLocIdx = 329; s.pc = 16; return s.tmp_6; }
    }
  case 16:
    r0 = s.retval;
    s.tmp_5.arg0 = r0;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "topic");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["topic"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["topic"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 330; s.pc = 15; return s.tmp_5; }
    }
  case 15:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 331; s.pc = 14; return s.tmp_4;
  case 14:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_7 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_8 = if_message_1_mk(s);
    s.tmp_9 = if_will_1_mk(s);
    s.tmp_9.arg0 = s.arg0;
    if (!s.tmp_9.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_9.arg0, "will");
    } else {
      s.tmp_9.fn = s.tmp_9.arg0.vtable.iface["will"];
      if (s.tmp_9.fn == null) { s.retval = s.tmp_9.arg0.fields["will"]; }
      else if (!s.tmp_9.fn.isGetter) { s.retval = bind(s.tmp_9); }
     else { s.callLocIdx = 332; s.pc = 19; return s.tmp_9; }
    }
  case 19:
    r0 = s.retval;
    s.tmp_8.arg0 = r0;
    if (!s.tmp_8.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_8.arg0, "message");
    } else {
      s.tmp_8.fn = s.tmp_8.arg0.vtable.iface["message"];
      if (s.tmp_8.fn == null) { s.retval = s.tmp_8.arg0.fields["message"]; }
      else if (!s.tmp_8.fn.isGetter) { s.retval = bind(s.tmp_8); }
     else { s.callLocIdx = 333; s.pc = 18; return s.tmp_8; }
    }
  case 18:
    r0 = s.retval;
    s.tmp_7.arg0 = r0;
    s.callLocIdx = 334; s.pc = 17; return s.tmp_7;
  case 17:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 335; s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 336; s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.payload___4442 = (r0);
  case 1:
  case 2:
// mqtt/mqtt.ts(196,13): if (options.username) {...
    s.tmp_1 = if_username_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "username");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["username"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["username"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 337; s.pc = 20; return s.tmp_1; }
    }
  case 20:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// mqtt/mqtt.ts(197,17): payload = payload.concat(pack(options.username))
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_2.arg0 = s.payload___4442;
    s.tmp_3 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_4 = if_username_1_mk(s);
    s.tmp_4.arg0 = s.arg0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "username");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["username"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["username"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 338; s.pc = 23; return s.tmp_4; }
    }
  case 23:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 339; s.pc = 22; return s.tmp_3;
  case 22:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 340; s.pc = 21; return s.tmp_2;
  case 21:
    r0 = s.retval;
    s.payload___4442 = (r0);
// mqtt/mqtt.ts(198,17): if (options.password) {...
    s.tmp_1 = if_password_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "password");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["password"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["password"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 341; s.pc = 24; return s.tmp_1; }
    }
  case 24:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// mqtt/mqtt.ts(199,21): payload = payload.concat(pack(options.password))
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_2.arg0 = s.payload___4442;
    s.tmp_3 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_4 = if_password_1_mk(s);
    s.tmp_4.arg0 = s.arg0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "password");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["password"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["password"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 342; s.pc = 27; return s.tmp_4; }
    }
  case 27:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 343; s.pc = 26; return s.tmp_3;
  case 26:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 344; s.pc = 25; return s.tmp_2;
  case 25:
    r0 = s.retval;
    s.payload___4442 = (r0);
  case 3:
  case 4:
  case 5:
  case 6:
// mqtt/mqtt.ts(203,13): return createPacket(...
    s.tmp_0 = mqtt_Protocol_createPacket__P2271_mk(s);
    s.tmp_0.arg0 = 16;
    s.tmp_1 = helpers_bufferConcat__P184_mk(s);
    s.tmp_1.arg0 = s.protocolName___4423;
    s.tmp_1.arg1 = s.nums___4427;
    s.callLocIdx = 345; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.payload___4442;
    s.callLocIdx = 346; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createConnect__P1306.info = {"start":5377,"length":1031,"line":177,"column":8,"endLine":207,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createConnect","argumentNames":["options"]}

function mqtt_Protocol_createConnect__P1306_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createConnect__P1306, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  protocolName___4423: undefined,
  nums___4427: undefined,
  payload___4442: undefined,
  arg0: undefined,
} }





function mqtt_Protocol_createConnectFlags__P2267(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.flags___4483 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(126,17): flags: number = 0
    s.flags___4483 = (0);
// mqtt/mqtt.ts(127,13): flags |= (options.username) ? ConnectFlags.UserName : 0
    s.tmp_1 = if_username_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "username");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["username"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["username"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 306; s.pc = 13; return s.tmp_1; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 128;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = (s.flags___4483 | s.tmp_2);
    s.flags___4483 = (r0);
// mqtt/mqtt.ts(128,13): flags |= (options.username && options.password) ? ConnectFlags.Password : 0
    s.tmp_1 = if_username_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "username");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["username"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["username"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 307; s.pc = 14; return s.tmp_1; }
    }
  case 14:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    s.tmp_2 = if_password_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "password");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["password"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["password"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 308; s.pc = 15; return s.tmp_2; }
    }
  case 15:
    r0 = s.retval;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
    r0 = 64;
    { step = 6; continue; }
  case 5:
    r0 = 0;
  case 6:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = (s.flags___4483 | s.tmp_4);
    s.flags___4483 = (r0);
// mqtt/mqtt.ts(129,13): flags |= ConnectFlags.CleanSession
    r0 = (s.flags___4483 | 2);
    s.flags___4483 = (r0);
// mqtt/mqtt.ts(131,13): if (options.will) {...
    s.tmp_1 = if_will_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "will");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["will"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["will"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 309; s.pc = 16; return s.tmp_1; }
    }
  case 16:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// mqtt/mqtt.ts(132,17): flags |= ConnectFlags.Will
    r0 = (s.flags___4483 | 4);
    s.flags___4483 = (r0);
// mqtt/mqtt.ts(133,17): flags |= (options.will.qos || 0) << 3
    s.tmp_1 = if_qos_1_mk(s);
    s.tmp_2 = if_will_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "will");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["will"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["will"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 310; s.pc = 18; return s.tmp_2; }
    }
  case 18:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "qos");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["qos"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["qos"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 311; s.pc = 17; return s.tmp_1; }
    }
  case 17:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    r0 = 0;
  case 8:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = r0 = s.flags___4483;
    r0 = (s.tmp_3 << 3);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 | s.tmp_5);
    s.flags___4483 = (r0);
// mqtt/mqtt.ts(134,17): flags |= (options.will.retain) ? ConnectFlags.WillRetain : 0
    s.tmp_1 = if_retain_1_mk(s);
    s.tmp_2 = if_will_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "will");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["will"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["will"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 312; s.pc = 20; return s.tmp_2; }
    }
  case 20:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "retain");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["retain"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["retain"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 313; s.pc = 19; return s.tmp_1; }
    }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = 32;
    { step = 10; continue; }
  case 9:
    r0 = 0;
  case 10:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = (s.flags___4483 | s.tmp_3);
    s.flags___4483 = (r0);
  case 11:
  case 12:
// mqtt/mqtt.ts(137,13): return flags;
    r0 = s.flags___4483;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createConnectFlags__P2267.info = {"start":3241,"length":568,"line":124,"column":8,"endLine":137,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createConnectFlags","argumentNames":["options"]}

function mqtt_Protocol_createConnectFlags__P2267_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createConnectFlags__P2267, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  flags___4483: undefined,
  arg0: undefined,
} }





function net_Net_createSocket__P1209(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___4530 = undefined;
    s.socket___4535 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Net__C1204_VT)) failedCast(r0);
// net/net.ts(128,19): c = this.controller
    s.tmp_0 = net_Net_controller__P1207_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 224; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.c___4530 = (r0);
// net/net.ts(129,13): if (!c) return undefined;
    r0 = pxsim_numops_toBoolDecr(s.c___4530);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/net.ts(129,21): return undefined;
    r0 = undefined;
    { step = 5; continue; }
  case 1:
  case 2:
// net/net.ts(130,19): socket = new net.ControllerSocket(c, host, port, secure ? net.TLS_MODE : net.TCP
    r0 = pxsim_pxtcore_mkClassInstance(net_ControllerSocket__C1147_VT);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.arg3);
    if (!r0) { step = 3; continue; }
    r0 = 2;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = net_ControllerSocket_constructor__P1156_mk(s);
    s.tmp_4.arg0 = s.tmp_2;
    s.tmp_4.arg1 = s.c___4530;
    s.tmp_4.arg2 = s.arg1;
    s.tmp_4.arg3 = s.arg2;
    s.tmp_4.arg4 = s.tmp_3;
    s.callLocIdx = 225; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    s.socket___4535 = (s.tmp_2);
// net/net.ts(131,13): return socket;
    r0 = s.socket___4535;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
net_Net_createSocket__P1209.info = {"start":3885,"length":291,"line":126,"column":8,"endLine":131,"endColumn":9,"fileName":"pxt_modules/net/net.ts","functionName":"createSocket","argumentNames":["this","host","port","secure"]}

function net_Net_createSocket__P1209_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Net_createSocket__P1209, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  c___4530: undefined,
  socket___4535: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function net_ControllerSocket_constructor__P1156(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
    r0 = (s.arg0).fields["controller"] = (s.arg1);
    r0 = (s.arg0).fields["host"] = (s.arg2);
    r0 = (s.arg0).fields["port"] = (s.arg3);
    r0 = (s.arg0).fields["conntype"] = (s.arg4);
// net/controllersocket.ts(24,13): if (this.conntype === null) {...
    r0 = s.arg0.fields["conntype"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/controllersocket.ts(25,17): this.conntype = net.TCP_MODE
    r0 = (s.arg0).fields["conntype"] = (0);
  case 1:
  case 2:
// net/controllersocket.ts(27,13): this._buffer = hex``
    r0 = (s.arg0).fields["_buffer"] = (_hex4560);
// net/controllersocket.ts(28,13): this._socknum = this.controller.socket()
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = net_Controller__C1112_v2_1_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_2.arg0 = r0;
    if (!checkSubtype(s.tmp_2.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.socket;
    s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_socknum"] = (s.tmp_1);
// net/controllersocket.ts(29,13): this.setTimeout(0)
    s.tmp_0 = net_ControllerSocket_setTimeout__P1165_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 183; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_constructor__P1156.info = {"start":672,"length":359,"line":22,"column":8,"endLine":29,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"inline","argumentNames":["this","controller","host","port","conntype"]}

function net_ControllerSocket_constructor__P1156_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_constructor__P1156, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }

const _hex4560 = pxsim.BufferMethods.createBufferFromHex("")




function net_ControllerSocket_setTimeout__P1165(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(176,13): this._timeout = value
    r0 = (s.arg0).fields["_timeout"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_setTimeout__P1165.info = {"start":6657,"length":78,"line":174,"column":8,"endLine":176,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"setTimeout","argumentNames":["this","value"]}

function net_ControllerSocket_setTimeout__P1165_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_setTimeout__P1165, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_socket__P1118(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(47,13): return -1;
    r0 = -1;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socket__P1118.info = {"start":1278,"length":58,"line":45,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socket","argumentNames":["this"]}

function net_Controller_socket__P1118_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socket__P1118, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function mqtt_Client_disconnect__P1327(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.s___4597 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(401,13): this.log("disconnect")
    s.tmp_0 = mqtt_Client_log__P2276_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "disconnect";
    s.callLocIdx = 383; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// mqtt/mqtt.ts(402,13): if (this.wdId !== Constants.Uninitialized) {...
    r0 = s.arg0.fields["wdId"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== -123);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(403,17): clearInterval(this.wdId)
    s.tmp_2 = clearInterval__P423_mk(s);
    r0 = s.arg0.fields["wdId"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 384; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
// mqtt/mqtt.ts(404,17): this.wdId = Constants.Uninitialized
    r0 = (s.arg0).fields["wdId"] = (-123);
  case 1:
  case 2:
// mqtt/mqtt.ts(407,13): if (this.piId !== Constants.Uninitialized) {...
    r0 = s.arg0.fields["piId"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== -123);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// mqtt/mqtt.ts(408,17): clearInterval(this.piId)
    s.tmp_2 = clearInterval__P423_mk(s);
    r0 = s.arg0.fields["piId"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 385; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
// mqtt/mqtt.ts(409,17): this.piId = Constants.Uninitialized
    r0 = (s.arg0).fields["piId"] = (-123);
  case 3:
  case 4:
// mqtt/mqtt.ts(412,19): s = this.sct
    r0 = s.arg0.fields["sct"];
    s.s___4597 = (r0);
// mqtt/mqtt.ts(413,13): if (s) {...
    r0 = pxsim_numops_toBoolDecr(s.s___4597);
    if (!r0) { step = 5; continue; }
// mqtt/mqtt.ts(414,17): this.sct = null
    r0 = (s.arg0).fields["sct"] = (null);
// mqtt/mqtt.ts(415,17): s.close()
    s.tmp_0 = if_close_1_mk(s);
    s.tmp_0.arg0 = s.s___4597;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "close"), 1);
      s.callLocIdx = 386; s.pc = 10; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["close"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["close"], 1); s.callLocIdx = 386; s.pc = 10; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 386; s.pc = 10; return s.tmp_0;; }
     else { s.callLocIdx = 386; s.pc = 10; return s.tmp_0; }
    }
  case 10:
    r0 = s.retval;
  case 5:
  case 6:
// mqtt/mqtt.ts(418,13): this.status = Status.Disconnected
    r0 = (s.arg0).fields["status"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_disconnect__P1327.info = {"start":12509,"length":577,"line":399,"column":8,"endLine":418,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"disconnect","argumentNames":["this"]}

function mqtt_Client_disconnect__P1327_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_disconnect__P1327, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  s___4597: undefined,
  arg0: undefined,
} }





function clearInterval__P423(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/scheduling.ts(18,5): control.clearInterval(intervalId, control.IntervalMode.Interval)
    s.tmp_0 = control_clearInterval__P353_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 0;
    s.callLocIdx = 123; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
clearInterval__P423.info = {"start":404,"length":116,"line":16,"column":0,"endLine":18,"endColumn":1,"fileName":"pxt_modules/base/scheduling.ts","functionName":"clearInterval","argumentNames":["intervalId"]}

function clearInterval__P423_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: clearInterval__P423, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function control_clearInterval__P353(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___4617 = undefined;
    s.it___4623 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/interval.ts(63,9): if (!_intervals) return;
    r0 = pxsim_numops_toBoolDecr(globals._intervals___2172);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/interval.ts(63,26): return;
    { step = 9; continue; }
  case 1:
  case 2:
// base/interval.ts(64,18): i = 0
    s.i___4617 = (0);
// base/interval.ts(64,9): for (let i = 0; i < _intervals.length; ++i) {...
  case 3:
// base/interval.ts(64,25): i < _intervals.length
    s.tmp_1 = r0 = s.i___4617;
    r0 = pxsim_Array__length(globals._intervals___2172);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// base/interval.ts(65,19): it = _intervals[i]
    r0 = pxsim_Array__getAt(globals._intervals___2172, s.i___4617);
    s.it___4623 = (r0);
// base/interval.ts(66,13): if (it.id == intervalId && it.mode == mode) {...
    r0 = s.it___4623.fields["id"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    r0 = s.it___4623.fields["mode"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.arg1);
  case 5:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
// base/interval.ts(67,17): it.cancel()
    s.tmp_4 = control_Interval_cancel__P2175_mk(s);
    s.tmp_4.arg0 = s.it___4623;
    s.callLocIdx = 59; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
// base/interval.ts(68,17): break;
    { step = 8; continue; }
  case 6:
  case 7:
// base/interval.ts(64,48): ++i
    r0 = (s.i___4617 + 1);
    s.i___4617 = (r0);
    { step = 3; continue; }
  case 8:
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_clearInterval__P353.info = {"start":1826,"length":342,"line":61,"column":4,"endLine":70,"endColumn":5,"fileName":"pxt_modules/base/interval.ts","functionName":"clearInterval","argumentNames":["intervalId","mode"]}

function control_clearInterval__P353_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_clearInterval__P353, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  i___4617: undefined,
  it___4623: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_Interval_cancel__P2175(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_Interval__C2173_VT)) failedCast(r0);
// base/interval.ts(51,13): this.delay = -1
    r0 = (s.arg0).fields["delay"] = (-1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_Interval_cancel__P2175.info = {"start":1493,"length":49,"line":49,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/base/interval.ts","functionName":"cancel","argumentNames":["this"]}

function control_Interval_cancel__P2175_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_Interval_cancel__P2175, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function mqtt_Client_connected__P1325(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(353,13): return this.status >= Status.Connected
    r0 = s.arg0.fields["status"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >= 2);
    return leaveAccessor(s, r0)
  default: oops()
} } }
mqtt_Client_connected__P1325.info = {"start":10874,"length":78,"line":351,"column":8,"endLine":353,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"connected","argumentNames":["this"]}
mqtt_Client_connected__P1325.isGetter = true;

function mqtt_Client_connected__P1325_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_connected__P1325, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function mqtt_EventEmitter_on__P1314(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.listeners___4659 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_EventEmitter__C1312_VT)) failedCast(r0);
// mqtt/mqtt.ts(287,13): if (!event || !listener) return;
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// mqtt/mqtt.ts(287,38): return;
    { step = 7; continue; }
  case 3:
  case 4:
// mqtt/mqtt.ts(289,17): listeners = this.handlers[event]
    r0 = s.arg0.fields["handlers"];
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_4, s.arg1);
    s.listeners___4659 = (r0);
// mqtt/mqtt.ts(290,13): if (!listeners)...
    r0 = pxsim_numops_toBoolDecr(s.listeners___4659);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// mqtt/mqtt.ts(291,17): this.handlers[event] = listeners = []
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    s.listeners___4659 = (r0);
    r0 = s.arg0.fields["handlers"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_3, s.arg1, s.tmp_2);
  case 5:
  case 6:
// mqtt/mqtt.ts(292,13): listeners.push(listener)
    r0 = pxsim_Array__push(s.listeners___4659, s.arg2);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_EventEmitter_on__P1314.info = {"start":9155,"length":283,"line":285,"column":8,"endLine":292,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"on","argumentNames":["this","event","listener"]}

function mqtt_EventEmitter_on__P1314_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_EventEmitter_on__P1314, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  listeners___4659: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Client_constructor__P1326(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
    r0 = (s.arg0).fields["logPriority"] = (0);
    r0 = (s.arg0).fields["tracePriority"] = (-1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["subs"] = (s.tmp_1);
    r0 = (s.arg0).fields["status"] = (0);
// mqtt/mqtt.ts(359,13): super()
    s.tmp_2 = mqtt_EventEmitter_constructor__P1313_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 368; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
// mqtt/mqtt.ts(361,13): this.wdId = Constants.Uninitialized
    r0 = (s.arg0).fields["wdId"] = (-123);
// mqtt/mqtt.ts(362,13): this.piId = Constants.Uninitialized
    r0 = (s.arg0).fields["piId"] = (-123);
// mqtt/mqtt.ts(363,13): opt.port = opt.port || 8883
    s.tmp_1 = if_port_1_mk(s);
    s.tmp_1.arg0 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "port");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["port"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["port"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 369; s.pc = 10; return s.tmp_1; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 8883;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = if_port_2_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = s.tmp_2;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_3.arg0, "port", s.tmp_3.arg1);
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["set/port"];
      if (s.tmp_3.fn === null) { s.tmp_3.arg0.fields["port"] = s.tmp_3.arg1; }
      else if (s.tmp_3.fn === undefined) { failedCast(s.tmp_3.arg0) } 
     else { s.callLocIdx = 370; s.pc = 11; return s.tmp_3; }
    }
  case 11:
    r0 = s.retval;
// mqtt/mqtt.ts(364,13): opt.clientId = opt.clientId
    s.tmp_0 = if_clientId_2_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = if_clientId_1_mk(s);
    s.tmp_1.arg0 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "clientId");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["clientId"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["clientId"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 371; s.pc = 13; return s.tmp_1; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_0.arg0, "clientId", s.tmp_0.arg1);
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["set/clientId"];
      if (s.tmp_0.fn === null) { s.tmp_0.arg0.fields["clientId"] = s.tmp_0.arg1; }
      else if (s.tmp_0.fn === undefined) { failedCast(s.tmp_0.arg0) } 
     else { s.callLocIdx = 372; s.pc = 12; return s.tmp_0; }
    }
  case 12:
    r0 = s.retval;
// mqtt/mqtt.ts(366,13): if (opt.will) {...
    s.tmp_1 = if_will_1_mk(s);
    s.tmp_1.arg0 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "will");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["will"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["will"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 373; s.pc = 14; return s.tmp_1; }
    }
  case 14:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// mqtt/mqtt.ts(367,17): opt.will.qos = opt.will.qos || Constants.DefaultQos
    s.tmp_3 = if_qos_1_mk(s);
    s.tmp_4 = if_will_1_mk(s);
    s.tmp_4.arg0 = s.arg1;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "will");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["will"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["will"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 375; s.pc = 16; return s.tmp_4; }
    }
  case 16:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "qos");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["qos"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["qos"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 376; s.pc = 15; return s.tmp_3; }
    }
  case 15:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    s.tmp_6 = if_qos_2_mk(s);
    s.tmp_7 = if_will_1_mk(s);
    s.tmp_7.arg0 = s.arg1;
    if (!s.tmp_7.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_7.arg0, "will");
    } else {
      s.tmp_7.fn = s.tmp_7.arg0.vtable.iface["will"];
      if (s.tmp_7.fn == null) { s.retval = s.tmp_7.arg0.fields["will"]; }
      else if (!s.tmp_7.fn.isGetter) { s.retval = bind(s.tmp_7); }
     else { s.callLocIdx = 374; s.pc = 18; return s.tmp_7; }
    }
  case 18:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = s.tmp_5;
    if (!s.tmp_6.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_6.arg0, "qos", s.tmp_6.arg1);
    } else {
      s.tmp_6.fn = s.tmp_6.arg0.vtable.iface["set/qos"];
      if (s.tmp_6.fn === null) { s.tmp_6.arg0.fields["qos"] = s.tmp_6.arg1; }
      else if (s.tmp_6.fn === undefined) { failedCast(s.tmp_6.arg0) } 
     else { s.callLocIdx = 377; s.pc = 17; return s.tmp_6; }
    }
  case 17:
    r0 = s.retval;
// mqtt/mqtt.ts(368,17): opt.will.retain = opt.will.retain || false
    s.tmp_1 = if_retain_1_mk(s);
    s.tmp_2 = if_will_1_mk(s);
    s.tmp_2.arg0 = s.arg1;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "will");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["will"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["will"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 379; s.pc = 20; return s.tmp_2; }
    }
  case 20:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "retain");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["retain"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["retain"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 380; s.pc = 19; return s.tmp_1; }
    }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = false;
  case 6:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = if_retain_2_mk(s);
    s.tmp_5 = if_will_1_mk(s);
    s.tmp_5.arg0 = s.arg1;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "will");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["will"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["will"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 378; s.pc = 22; return s.tmp_5; }
    }
  case 22:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.tmp_3;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_4.arg0, "retain", s.tmp_4.arg1);
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["set/retain"];
      if (s.tmp_4.fn === null) { s.tmp_4.arg0.fields["retain"] = s.tmp_4.arg1; }
      else if (s.tmp_4.fn === undefined) { failedCast(s.tmp_4.arg0) } 
     else { s.callLocIdx = 381; s.pc = 21; return s.tmp_4; }
    }
  case 21:
    r0 = s.retval;
  case 7:
  case 8:
// mqtt/mqtt.ts(371,13): this.opt = opt
    r0 = (s.arg0).fields["opt"] = (s.arg1);
// mqtt/mqtt.ts(372,13): this.net = net.instance()
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = net_instance__P1211_mk(s);
    s.callLocIdx = 382; s.pc = 23; return s.tmp_2;
  case 23:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["net"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_constructor__P1326.info = {"start":11008,"length":490,"line":357,"column":8,"endLine":372,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["this","opt"]}

function mqtt_Client_constructor__P1326_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_constructor__P1326, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_instance__P1211(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// net/net.ts(147,9): return net.Net.instance;
    r0 = globals.net_Net_instance___1206;
    return leave(s, r0)
  default: oops()
} } }
net_instance__P1211.info = {"start":4498,"length":72,"line":145,"column":4,"endLine":147,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"instance","argumentNames":[]}

function net_instance__P1211_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_instance__P1211, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function mqtt_EventEmitter_constructor__P1313(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_EventEmitter__C1312_VT)) failedCast(r0);
// mqtt/mqtt.ts(283,13): this.handlers = {}
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["handlers"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_EventEmitter_constructor__P1313.info = {"start":9088,"length":57,"line":281,"column":8,"endLine":283,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["this"]}

function mqtt_EventEmitter_constructor__P1313_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_EventEmitter_constructor__P1313, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function azureiot_generateSasToken__P2293(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.key___4728 = undefined;
    s.toSign___4735 = undefined;
    s.sig___4745 = undefined;
    s.token___4755 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(35,15): key = Buffer.fromBase64(signingKey)
    s.tmp_0 = Buffer_fromBase64__P205_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 470; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.key___4728 = (r0);
// azureiot/azureiot.ts(36,9): resourceUri = net.urlencode(resourceUri)
    s.tmp_0 = net_urlencode__P1219_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 471; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.arg0 = (r0);
// azureiot/azureiot.ts(37,15): toSign = resourceUri + "\n" + expiresEpoch
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "\n");
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_3);
    s.toSign___4735 = (r0);
// azureiot/azureiot.ts(38,15): sig = net.urlencode(crypto.sha256Hmac(key, Buffer.fromUTF8(toSign)).toBase64())
    s.tmp_0 = net_urlencode__P1219_mk(s);
    s.tmp_1 = helpers_bufferToBase64__P192_mk(s);
    s.tmp_2 = crypto_sha256Hmac__P1077_mk(s);
    s.tmp_2.arg0 = s.key___4728;
    r0 = pxsim.control.createBufferFromUTF8(s.toSign___4735);
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 472; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 473; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 474; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.sig___4745 = (r0);
// azureiot/azureiot.ts(39,15): token = `sr=${resourceUri}&se=${expiresEpoch}&sig=${sig}`
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("sr=", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "&se=");
    s.tmp_2 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "&sig=");
    s.tmp_0 = r0;
    if ((s.sig___4745) && (s.sig___4745).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.sig___4745);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.sig___4745) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_6);
    s.token___4755 = (r0);
// azureiot/azureiot.ts(40,9): return token
    r0 = s.token___4755;
    return leave(s, r0)
  default: oops()
} } }
azureiot_generateSasToken__P2293.info = {"start":893,"length":439,"line":33,"column":4,"endLine":40,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"generateSasToken","argumentNames":["resourceUri","signingKey","expiresEpoch"]}

function azureiot_generateSasToken__P2293_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_generateSasToken__P2293, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  key___4728: undefined,
  toSign___4735: undefined,
  sig___4745: undefined,
  token___4755: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function crypto_sha256Hmac__P1077(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.paddedKey___4785 = undefined;
    s.i___4793 = undefined;
    s.h0___4806 = undefined;
    s.i___4812 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// core---esp32s2/crypto.ts(14,9): if (key.length > blockSize) key = sha256([key])
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 64);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// core---esp32s2/crypto.ts(14,37): key = sha256([key])
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.arg0);
    (function(cb) { pxsim.crypto._sha256(s.tmp_2).then(cb) })(buildResume(s, 7));
    checkResumeConsumed();
    return;
  case 7:
    r0 = s.retval;
    s.arg0 = (r0);
  case 1:
  case 2:
// core---esp32s2/crypto.ts(15,15): paddedKey = Buffer.create(blockSize)
    r0 = pxsim.control.createBuffer(64);
    s.paddedKey___4785 = (r0);
// core---esp32s2/crypto.ts(16,9): paddedKey.write(0, key)
    r0 = pxsim.BufferMethods.write(s.paddedKey___4785, 0, s.arg0);
// core---esp32s2/crypto.ts(17,18): i = 0
    s.i___4793 = (0);
// core---esp32s2/crypto.ts(17,9): for (let i = 0; i < blockSize; ++i) paddedKey[i] ^= 0x36
  case 3:
// core---esp32s2/crypto.ts(17,25): i < blockSize
    r0 = (s.i___4793 < 64);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// core---esp32s2/crypto.ts(17,45): paddedKey[i] ^= 0x36
    s.tmp_1 = r0 = s.paddedKey___4785;
    s.tmp_2 = r0 = s.i___4793;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, s.i___4793);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 ^ 54);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.tmp_3);
// core---esp32s2/crypto.ts(17,40): ++i
    r0 = (s.i___4793 + 1);
    s.i___4793 = (r0);
    { step = 3; continue; }
  case 4:
// core---esp32s2/crypto.ts(18,15): h0 = sha256([paddedKey, msg])
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.paddedKey___4785);
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    (function(cb) { pxsim.crypto._sha256(s.tmp_0).then(cb) })(buildResume(s, 8));
    checkResumeConsumed();
    return;
  case 8:
    r0 = s.retval;
    s.h0___4806 = (r0);
// core---esp32s2/crypto.ts(19,18): i = 0
    s.i___4812 = (0);
// core---esp32s2/crypto.ts(19,9): for (let i = 0; i < blockSize; ++i) paddedKey[i] ^= (0x36 ^ 0x5c)
  case 5:
// core---esp32s2/crypto.ts(19,25): i < blockSize
    r0 = (s.i___4812 < 64);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// core---esp32s2/crypto.ts(19,45): paddedKey[i] ^= (0x36 ^ 0x5c)
    s.tmp_1 = r0 = s.paddedKey___4785;
    s.tmp_2 = r0 = s.i___4812;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, s.i___4812);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 ^ 106);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.tmp_3);
// core---esp32s2/crypto.ts(19,40): ++i
    r0 = (s.i___4812 + 1);
    s.i___4812 = (r0);
    { step = 5; continue; }
  case 6:
// core---esp32s2/crypto.ts(20,9): return sha256([paddedKey, h0])
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.paddedKey___4785);
    r0 = pxsim_Array__push(s.tmp_0, s.h0___4806);
    (function(cb) { pxsim.crypto._sha256(s.tmp_0).then(cb) })(buildResume(s, 9));
    checkResumeConsumed();
    return;
  case 9:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
crypto_sha256Hmac__P1077.info = {"start":333,"length":450,"line":11,"column":4,"endLine":20,"endColumn":5,"fileName":"pxt_modules/core---esp32s2/crypto.ts","functionName":"sha256Hmac","argumentNames":["key","msg"]}

function crypto_sha256Hmac__P1077_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: crypto_sha256Hmac__P1077, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  paddedKey___4785: undefined,
  i___4793: undefined,
  h0___4806: undefined,
  i___4812: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_bufferToBase64__P192(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___4834 = undefined;
    s.r___4837 = undefined;
    s.i___4838 = undefined;
    s.x0___4843 = undefined;
    s.x1___4877 = undefined;
    s.x2___4917 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(198,15): len = buf.length
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.len___4834 = (r0);
// base/buffer.ts(199,13): r = ""
    r0 = pxsim_String_.mkEmpty();
    s.r___4837 = (r0);
// base/buffer.ts(200,18): i = 0
    s.i___4838 = (0);
// base/buffer.ts(200,9): for (let i = 0; i < len; i += 3) {...
  case 1:
// base/buffer.ts(200,25): i < len
    r0 = (s.i___4838 < s.len___4834);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/buffer.ts(201,19): x0 = buf[i]
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___4838);
    s.x0___4843 = (r0);
// base/buffer.ts(202,13): r += _b64[x0 >> 2]
    if ((s.r___4837) && (s.r___4837).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.r___4837);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4837) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = r0 = globals._b64___191;
    r0 = (s.x0___4843 >> 2);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4837 = (r0);
// base/buffer.ts(203,13): if (i + 1 >= len) {...
    r0 = (s.i___4838 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= s.len___4834);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/buffer.ts(204,17): r += _b64[(x0 & 3) << 4] + "=="
    if ((s.r___4837) && (s.r___4837).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.r___4837);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4837) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_2 = r0;
    s.tmp_7 = r0 = globals._b64___191;
    r0 = (s.x0___4843 & 3);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 << 4);
    s.tmp_8 = r0;
    r0 = pxsim_String_.charAt(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, "==");
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.r___4837 = (r0);
    { step = 5; continue; }
  case 2:
// base/buffer.ts(206,23): x1 = buf[i + 1]
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.i___4838 + 1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, s.tmp_1);
    s.x1___4877 = (r0);
// base/buffer.ts(207,17): r += _b64[(x0 & 3) << 4 | (x1 >> 4)]
    if ((s.r___4837) && (s.r___4837).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.r___4837);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4837) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = r0 = globals._b64___191;
    r0 = (s.x0___4843 & 3);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 << 4);
    s.tmp_5 = r0;
    r0 = (s.x1___4877 >> 4);
    s.tmp_7 = r0;
    r0 = (s.tmp_5 | s.tmp_7);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4837 = (r0);
// base/buffer.ts(208,17): if (i + 2 >= len) {...
    r0 = (s.i___4838 + 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= s.len___4834);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// base/buffer.ts(209,21): r += _b64[(x1 & 15) << 2] + "="
    if ((s.r___4837) && (s.r___4837).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.r___4837);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4837) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_2 = r0;
    s.tmp_7 = r0 = globals._b64___191;
    r0 = (s.x1___4877 & 15);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 << 2);
    s.tmp_8 = r0;
    r0 = pxsim_String_.charAt(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, "=");
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.r___4837 = (r0);
    { step = 4; continue; }
  case 3:
// base/buffer.ts(211,27): x2 = buf[i + 2]
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.i___4838 + 2);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, s.tmp_1);
    s.x2___4917 = (r0);
// base/buffer.ts(212,21): r += _b64[(x1 & 15) << 2 | (x2 >> 6)]
    if ((s.r___4837) && (s.r___4837).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.r___4837);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4837) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = r0 = globals._b64___191;
    r0 = (s.x1___4877 & 15);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 << 2);
    s.tmp_5 = r0;
    r0 = (s.x2___4917 >> 6);
    s.tmp_7 = r0;
    r0 = (s.tmp_5 | s.tmp_7);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4837 = (r0);
// base/buffer.ts(213,21): r += _b64[x2 & 63]
    if ((s.r___4837) && (s.r___4837).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.r___4837);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___4837) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = r0 = globals._b64___191;
    r0 = (s.x2___4917 & 63);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___4837 = (r0);
  case 4:
  case 5:
// base/buffer.ts(200,34): i += 3
    r0 = (s.i___4838 + 3);
    s.i___4838 = (r0);
    { step = 1; continue; }
  case 6:
// base/buffer.ts(217,9): return r
    r0 = s.r___4837;
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferToBase64__P192.info = {"start":5805,"length":708,"line":196,"column":4,"endLine":217,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferToBase64","argumentNames":["buf"]}

function helpers_bufferToBase64__P192_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferToBase64__P192, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  len___4834: undefined,
  r___4837: undefined,
  i___4838: undefined,
  x0___4843: undefined,
  x1___4877: undefined,
  x2___4917: undefined,
  arg0: undefined,
} }





function Buffer_fromBase64__P205(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sz___4952 = undefined;
    s.res___4957 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(346,15): sz = fromBase64Core(null, b64)
    s.tmp_0 = Buffer_fromBase64Core__P2146_mk(s);
    s.tmp_0.arg0 = null;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 35; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.sz___4952 = (r0);
// base/buffer.ts(347,15): res = create(sz)
    r0 = pxsim.control.createBuffer(s.sz___4952);
    s.res___4957 = (r0);
// base/buffer.ts(348,9): fromBase64Core(res, b64)
    s.tmp_0 = Buffer_fromBase64Core__P2146_mk(s);
    s.tmp_0.arg0 = s.res___4957;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 36; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// base/buffer.ts(349,9): return res
    r0 = s.res___4957;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromBase64__P205.info = {"start":9796,"length":175,"line":344,"column":4,"endLine":349,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"fromBase64","argumentNames":["b64"]}

function Buffer_fromBase64__P205_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromBase64__P205, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  sz___4952: undefined,
  res___4957: undefined,
  arg0: undefined,
} }





function Buffer_fromBase64Core__P2146(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___4967 = undefined;
    s.dp___4970 = undefined;
    s.i___4971 = undefined;
    s.x0___4976 = undefined;
    s.x1___4982 = undefined;
    s.x2___4990 = undefined;
    s.x3___4998 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(314,15): len = b64.length
    r0 = pxsim_String_.length(s.arg1);
    s.len___4967 = (r0);
// base/buffer.ts(315,13): dp = 0
    s.dp___4970 = (0);
// base/buffer.ts(316,18): i = 0
    s.i___4971 = (0);
// base/buffer.ts(316,9): for (let i = 0; i < len; i += 4) {...
  case 1:
// base/buffer.ts(316,25): i < len
    r0 = (s.i___4971 < s.len___4967);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
// base/buffer.ts(317,19): x0 = b64Idx(b64[i])
    s.tmp_1 = Buffer_b64Idx__P2145_mk(s);
    r0 = pxsim_String_.charAt(s.arg1, s.i___4971);
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 31; s.pc = 21; return s.tmp_1;
  case 21:
    r0 = s.retval;
    s.x0___4976 = (r0);
// base/buffer.ts(318,19): x1 = b64Idx(b64[i + 1])
    s.tmp_0 = Buffer_b64Idx__P2145_mk(s);
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.i___4971 + 1);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.tmp_1, s.tmp_2);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 32; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    s.x1___4982 = (r0);
// base/buffer.ts(319,19): x2 = b64Idx(b64[i + 2])
    s.tmp_0 = Buffer_b64Idx__P2145_mk(s);
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.i___4971 + 2);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.tmp_1, s.tmp_2);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 33; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
    s.x2___4990 = (r0);
// base/buffer.ts(320,19): x3 = b64Idx(b64[i + 3])
    s.tmp_0 = Buffer_b64Idx__P2145_mk(s);
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.i___4971 + 3);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.tmp_1, s.tmp_2);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 34; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.x3___4998 = (r0);
// base/buffer.ts(321,13): if (x0 < 0 || x1 < 0) throw "Invalid Base64"
    r0 = (s.x0___4976 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.x1___4982 < 0);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
// base/buffer.ts(321,35): throw "Invalid Base64"
    r0 = pxsim_pxtcore.throwValue("Invalid Base64");
  case 4:
  case 5:
// base/buffer.ts(322,13): if (trg)...
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 6; continue; }
// base/buffer.ts(323,17): trg[dp] = (x0 << 2) | (x1 >> 4)
    s.tmp_2 = r0 = s.arg0;
    s.tmp_3 = r0 = s.dp___4970;
    r0 = (s.x0___4976 << 2);
    s.tmp_5 = r0;
    r0 = (s.x1___4982 >> 4);
    s.tmp_6 = r0;
    r0 = (s.tmp_5 | s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, s.tmp_3, s.tmp_4);
  case 6:
  case 7:
// base/buffer.ts(324,13): dp++
    r0 = (s.dp___4970 + 1);
    s.dp___4970 = (r0);
// base/buffer.ts(325,13): if (x2 >= 0) {...
    r0 = (s.x2___4990 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// base/buffer.ts(326,17): if (trg)...
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 8; continue; }
// base/buffer.ts(327,21): trg[dp] = (x1 << 4) | (x2 >> 2)
    s.tmp_1 = r0 = s.arg0;
    s.tmp_2 = r0 = s.dp___4970;
    r0 = (s.x1___4982 << 4);
    s.tmp_4 = r0;
    r0 = (s.x2___4990 >> 2);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 | s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.tmp_3);
  case 8:
  case 9:
// base/buffer.ts(328,17): dp++
    r0 = (s.dp___4970 + 1);
    s.dp___4970 = (r0);
// base/buffer.ts(329,17): if (x3 >= 0) {...
    r0 = (s.x3___4998 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
// base/buffer.ts(330,21): if (trg)...
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 10; continue; }
// base/buffer.ts(331,25): trg[dp] = (x2 << 6) | x3
    s.tmp_1 = r0 = s.arg0;
    s.tmp_2 = r0 = s.dp___4970;
    r0 = (s.x2___4990 << 6);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | s.x3___4998);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.tmp_3);
  case 10:
  case 11:
// base/buffer.ts(332,21): dp++
    r0 = (s.dp___4970 + 1);
    s.dp___4970 = (r0);
  case 12:
  case 13:
    { step = 19; continue; }
  case 14:
// base/buffer.ts(335,17): if (x3 >= 0 || i + 4 < len)...
    r0 = (s.x3___4998 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = s.tmp_0;
    { step = 16; continue; }
  case 15:
    r0 = (s.i___4971 + 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < s.len___4967);
  case 16:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 17; continue; }
// base/buffer.ts(336,21): throw "Invalid Base64"
    r0 = pxsim_pxtcore.throwValue("Invalid Base64");
  case 17:
  case 18:
  case 19:
// base/buffer.ts(316,34): i += 4
    r0 = (s.i___4971 + 4);
    s.i___4971 = (r0);
    { step = 1; continue; }
  case 20:
// base/buffer.ts(339,9): return dp
    r0 = s.dp___4970;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromBase64Core__P2146.info = {"start":8837,"length":884,"line":312,"column":4,"endLine":339,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"fromBase64Core","argumentNames":["trg","b64"]}

function Buffer_fromBase64Core__P2146_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromBase64Core__P2146, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  len___4967: undefined,
  dp___4970: undefined,
  i___4971: undefined,
  x0___4976: undefined,
  x1___4982: undefined,
  x2___4990: undefined,
  x3___4998: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Buffer_b64Idx__P2145(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5076 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(301,9): if (c === undefined || c == "=") return -1
    r0 = (s.arg0 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg0 == "=");
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// base/buffer.ts(301,42): return -1
    r0 = -1;
    { step = 11; continue; }
  case 3:
  case 4:
// base/buffer.ts(304,1): if (c == "-") return 62
    r0 = (s.arg0 == "-");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
// base/buffer.ts(304,23): return 62
    r0 = 62;
    { step = 11; continue; }
  case 5:
  case 6:
// base/buffer.ts(305,9): if (c == "_") return 63
    r0 = (s.arg0 == "_");
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 7; continue; }
// base/buffer.ts(305,23): return 63
    r0 = 63;
    { step = 11; continue; }
  case 7:
  case 8:
// base/buffer.ts(307,15): r = helpers._b64.indexOf(c)
    r0 = pxsim_String_.indexOf(globals._b64___191, s.arg0, undefined);
    s.r___5076 = (r0);
// base/buffer.ts(308,9): if (r < 0)...
    r0 = (s.r___5076 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// base/buffer.ts(309,13): throw "Invalid Base64"
    r0 = pxsim_pxtcore.throwValue("Invalid Base64");
  case 9:
  case 10:
// base/buffer.ts(310,9): return r
    r0 = s.r___5076;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
Buffer_b64Idx__P2145.info = {"start":8539,"length":292,"line":299,"column":4,"endLine":310,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"b64Idx","argumentNames":["c"]}

function Buffer_b64Idx__P2145_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_b64Idx__P2145, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  r___5076: undefined,
  arg0: undefined,
} }





function azureiot_parseConnectionString__P2298(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.connString___5086 = undefined;
    s.connStringParts___5092 = undefined;
// azureiot/azureiot.ts(117,9): try {...
    r0 = pxsim_pxtcore.beginTry(1);
// azureiot/azureiot.ts(118,19): connString = settings.programSecrets.readSecret(SECRETS_KEY)
    s.tmp_0 = settings_SecretStore_readSecret__P1098_mk(s);
    s.tmp_0.arg0 = globals.programSecrets___1102;
    s.tmp_0.arg1 = globals.SECRETS_KEY___1341;
    s.tmp_0.arg2 = false;
    s.callLocIdx = 505; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.connString___5086 = (r0);
// azureiot/azureiot.ts(119,19): connStringParts = parsePropertyBag(connString, ";")
    s.tmp_0 = azureiot_parsePropertyBag__P2297_mk(s);
    s.tmp_0.arg0 = s.connString___5086;
    s.tmp_0.arg1 = ";";
    s.callLocIdx = 506; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.connStringParts___5092 = (r0);
// azureiot/azureiot.ts(120,13): return connStringParts
    r0 = pxsim_pxtcore.endTry();
    r0 = s.connStringParts___5092;
    { step = 3; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 2; continue; }
  case 1:
// azureiot/azureiot.ts(122,13): console.debug(`clearing invalid azure iot connection string`)
    s.tmp_0 = console_debug__P375_mk(s);
    s.tmp_0.arg0 = "clearing invalid azure iot connection string";
    s.callLocIdx = 507; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
// azureiot/azureiot.ts(123,13): settings.programSecrets.setSecret(SECRETS_KEY, "")
    s.tmp_0 = settings_SecretStore_setSecret__P1096_mk(s);
    s.tmp_0.arg0 = globals.programSecrets___1102;
    s.tmp_0.arg1 = globals.SECRETS_KEY___1341;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 508; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// azureiot/azureiot.ts(124,13): return {}
    r0 = pxsim_pxtrt.mkMap();
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_parseConnectionString__P2298.info = {"start":3885,"length":427,"line":115,"column":4,"endLine":125,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"parseConnectionString","argumentNames":[]}

function azureiot_parseConnectionString__P2298_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_parseConnectionString__P2298, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  connString___5086: undefined,
  connStringParts___5092: undefined,
} }





function settings_SecretStore_setSecret__P1096(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.secrets___5104 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, settings_SecretStore__C1094_VT)) failedCast(r0);
// settings---esp32/settings.ts(203,19): secrets = this.readSecrets()
    s.tmp_0 = settings_SecretStore_readSecrets__P1100_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 151; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.secrets___5104 = (r0);
// settings---esp32/settings.ts(204,13): secrets[name] = value
    r0 = pxsim_pxtrt.mapSetGeneric(s.secrets___5104, s.arg1, s.arg2);
// settings---esp32/settings.ts(205,13): writeJSON(this.key, secrets)
    s.tmp_0 = settings_writeJSON__P1083_mk(s);
    r0 = s.arg0.fields["key"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.secrets___5104;
    s.callLocIdx = 152; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_SecretStore_setSecret__P1096.info = {"start":4963,"length":172,"line":201,"column":8,"endLine":205,"endColumn":9,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"setSecret","argumentNames":["this","name","value"]}

function settings_SecretStore_setSecret__P1096_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_SecretStore_setSecret__P1096, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  secrets___5104: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function settings_writeJSON__P1083(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(84,9): writeString(key, JSON.stringify(value))
    s.tmp_0 = settings_writeString__P1082_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = JSON_stringify__P385_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = null;
    s.tmp_1.arg2 = 0;
    s.callLocIdx = 135; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 136; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeJSON__P1083.info = {"start":2092,"length":106,"line":82,"column":4,"endLine":84,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"writeJSON","argumentNames":["key","value"]}

function settings_writeJSON__P1083_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeJSON__P1083, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function settings_writeString__P1082(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(77,9): writeBuffer(key, control.createBufferFromUTF8(value))
    s.tmp_0 = settings_writeBuffer__P1081_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBufferFromUTF8(s.arg1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 134; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeString__P1082.info = {"start":1895,"length":125,"line":75,"column":4,"endLine":77,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"writeString","argumentNames":["key","value"]}

function settings_writeString__P1082_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeString__P1082, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function settings_writeBuffer__P1081(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(65,9): if (_set(key, value)) {...
    r0 = pxsim.settings._set(s.arg0, s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// settings---esp32/settings.ts(67,1): _userClean()
    r0 = pxsim.settings._userClean();
// settings---esp32/settings.ts(69,1): control.panic(920)
    r0 = pxsim_pxtrt.panic(920);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeBuffer__P1081.info = {"start":1538,"length":290,"line":63,"column":4,"endLine":70,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"writeBuffer","argumentNames":["key","value"]}

function settings_writeBuffer__P1081_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeBuffer__P1081, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function settings_SecretStore_readSecrets__P1100(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, settings_SecretStore__C1094_VT)) failedCast(r0);
// settings---esp32/settings.ts(230,13): try {...
    r0 = pxsim_pxtcore.beginTry(3);
// settings---esp32/settings.ts(231,17): return readJSON(this.key) || {}
    s.tmp_1 = settings_readJSON__P1088_mk(s);
    r0 = s.arg0.fields["key"];
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 157; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtrt.mkMap();
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_pxtcore.endTry();
    r0 = s.tmp_2;
    { step = 5; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
// settings---esp32/settings.ts(233,17): control.dmesg("invalid secret format")
    r0 = pxsim.control.dmesg("invalid secret format");
// settings---esp32/settings.ts(234,17): return {};
    r0 = pxsim_pxtrt.mkMap();
    { step = 5; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
settings_SecretStore_readSecrets__P1100.info = {"start":5813,"length":214,"line":228,"column":8,"endLine":235,"endColumn":9,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readSecrets","argumentNames":["this"]}

function settings_SecretStore_readSecrets__P1100_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_SecretStore_readSecrets__P1100, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function settings_readJSON__P1088(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.s___5150 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(123,15): s = readString(key)
    s.tmp_0 = settings_readString__P1087_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 140; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.s___5150 = (r0);
// settings---esp32/settings.ts(124,9): if (s)...
    r0 = pxsim_numops_toBoolDecr(s.s___5150);
    if (!r0) { step = 1; continue; }
// settings---esp32/settings.ts(125,13): return JSON.parse(s)
    s.tmp_0 = JSON_parse__P386_mk(s);
    s.tmp_0.arg0 = s.s___5150;
    s.callLocIdx = 141; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    { step = 3; continue; }
  case 1:
  case 2:
// settings---esp32/settings.ts(126,9): return undefined
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
settings_readJSON__P1088.info = {"start":3070,"length":152,"line":121,"column":4,"endLine":126,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readJSON","argumentNames":["key"]}

function settings_readJSON__P1088_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readJSON__P1088, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  s___5150: undefined,
  arg0: undefined,
} }





function JSON_parse__P386(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___5159 = undefined;
    s.r___5169 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/json.ts(309,15): p = new Parser()
    r0 = pxsim_pxtcore_mkClassInstance(JSON_Parser__C2186_VT);
    s.p___5159 = (r0);
// base/json.ts(310,9): p.ptr = 0
    r0 = (s.p___5159).fields["ptr"] = (0);
// base/json.ts(311,9): p.s = s
    r0 = (s.p___5159).fields["s"] = (s.arg0);
// base/json.ts(312,15): r = p.value()
    s.tmp_0 = JSON_Parser_value__P2195_mk(s);
    s.tmp_0.arg0 = s.p___5159;
    s.callLocIdx = 113; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.r___5169 = (r0);
// base/json.ts(313,9): if (p.skipWS()) {...
    s.tmp_1 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_1.arg0 = s.p___5159;
    s.callLocIdx = 114; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/json.ts(314,13): p.error("excessive input")
    s.tmp_2 = JSON_Parser_error__P2187_mk(s);
    s.tmp_2.arg0 = s.p___5159;
    s.tmp_2.arg1 = "excessive input";
    s.callLocIdx = 115; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 1:
  case 2:
// base/json.ts(316,9): if (p.errorMsg) {...
    r0 = s.p___5159.fields["errorMsg"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// base/json.ts(317,13): control.dmesg("Invalid JSON: " + p.errorMsg)
    r0 = s.p___5159.fields["errorMsg"];
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("Invalid JSON: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim.control.dmesg(s.tmp_1);
// base/json.ts(318,13): return undefined
    r0 = undefined;
    { step = 5; continue; }
  case 3:
  case 4:
// base/json.ts(320,9): return r
    r0 = s.r___5169;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
JSON_parse__P386.info = {"start":9325,"length":347,"line":307,"column":4,"endLine":320,"endColumn":5,"fileName":"pxt_modules/base/json.ts","functionName":"parse","argumentNames":["s"]}

function JSON_parse__P386_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_parse__P386, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  p___5159: undefined,
  r___5169: undefined,
  arg0: undefined,
} }





function JSON_Parser_error__P2187(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(45,13): if (!this.errorMsg) {...
    r0 = s.arg0.fields["errorMsg"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/json.ts(46,17): this.errorMsg = msg + " at position " + this.ptr
    s.tmp_3 = r0 = s.arg0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " at position ");
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["errorMsg"] = (s.tmp_4);
// base/json.ts(47,17): this.ptr = this.s.length
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["s"];
    s.tmp_2 = r0;
    r0 = pxsim_String_.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_error__P2187.info = {"start":1009,"length":184,"line":43,"column":8,"endLine":48,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"error","argumentNames":["this","msg"]}

function JSON_Parser_error__P2187_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_error__P2187, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function JSON_Parser_skipWS__P2188(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___5214 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(52,13): for (; ;) {...
  case 1:
// base/json.ts(53,23): c = this.nextChar()
    s.tmp_0 = JSON_Parser_nextChar__P2189_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 78; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.c___5214 = (r0);
// base/json.ts(54,17): if (c == 0x20 || c == 0x0a || c == 0x0d || c == 0x09) {...
    r0 = (s.c___5214 == 32);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___5214 == 10);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 5; continue; }
  case 4:
    r0 = (s.c___5214 == 13);
  case 5:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 6; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 6:
    r0 = (s.c___5214 == 9);
  case 7:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 8; continue; }
    { step = 9; continue; }
  case 8:
// base/json.ts(57,21): this.ptr--
    s.tmp_4 = r0 = s.arg0;
    r0 = s.tmp_4.fields["ptr"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 - 1);
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["ptr"] = (s.tmp_5);
// base/json.ts(58,21): return c
    r0 = s.c___5214;
    { step = 10; continue; }
  case 9:
    { step = 1; continue; }
    r0 = undefined;
  case 10:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_skipWS__P2188.info = {"start":1203,"length":301,"line":50,"column":8,"endLine":60,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"skipWS","argumentNames":["this"]}

function JSON_Parser_skipWS__P2188_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_skipWS__P2188, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  c___5214: undefined,
  arg0: undefined,
} }





function JSON_Parser_nextChar__P2189(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(64,13): if (this.ptr < this.s.length)...
    r0 = s.arg0.fields["ptr"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["s"];
    s.tmp_3 = r0;
    r0 = pxsim_String_.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/json.ts(65,17): return this.s.charCodeAt(this.ptr++)
    s.tmp_4 = r0 = s.arg0;
    r0 = s.tmp_4.fields["ptr"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 + 1);
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["ptr"] = (s.tmp_5);
    r0 = s.arg0.fields["s"];
    s.tmp_7 = r0;
    r0 = pxsim_String_.charCodeAt(s.tmp_7, s.tmp_6);
    { step = 3; continue; }
  case 1:
  case 2:
// base/json.ts(66,13): return 0
    r0 = 0;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_nextChar__P2189.info = {"start":1514,"length":138,"line":62,"column":8,"endLine":66,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"nextChar","argumentNames":["this"]}

function JSON_Parser_nextChar__P2189_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_nextChar__P2189, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
} }





function JSON_Parser_value__P2195(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___5250 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(180,13): if (this.errorMsg)...
    r0 = s.arg0.fields["errorMsg"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/json.ts(181,17): return null
    r0 = null;
    { step = 27; continue; }
  case 1:
  case 2:
// base/json.ts(183,19): c = this.skipWS()
    s.tmp_1 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 97; s.pc = 28; return s.tmp_1;
  case 28:
    r0 = s.retval;
    s.c___5250 = (r0);
// base/json.ts(184,13): if (c == 0x7b)...
    r0 = (s.c___5250 == 123);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// base/json.ts(185,17): return this.doObject()
    s.tmp_1 = JSON_Parser_doObject__P2192_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 98; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
    { step = 27; continue; }
    { step = 26; continue; }
  case 3:
// base/json.ts(186,18): if (c == 0x5b)...
    r0 = (s.c___5250 == 91);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
// base/json.ts(187,17): return this.doArray()
    s.tmp_3 = JSON_Parser_doArray__P2191_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 99; s.pc = 30; return s.tmp_3;
  case 30:
    r0 = s.retval;
    { step = 27; continue; }
    { step = 25; continue; }
  case 4:
// base/json.ts(188,18): if ((0x30 <= c && c <= 0x39) || c == 0x2d)...
    r0 = (48 <= s.c___5250);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_4;
    { step = 6; continue; }
  case 5:
    r0 = (s.c___5250 <= 57);
  case 6:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_5;
    { step = 8; continue; }
  case 7:
    r0 = (s.c___5250 == 45);
  case 8:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 9; continue; }
// base/json.ts(189,17): return this.doNumber()
    s.tmp_7 = JSON_Parser_doNumber__P2193_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.callLocIdx = 100; s.pc = 31; return s.tmp_7;
  case 31:
    r0 = s.retval;
    { step = 27; continue; }
    { step = 24; continue; }
  case 9:
// base/json.ts(190,18): if (c == 0x22)...
    r0 = (s.c___5250 == 34);
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 10; continue; }
// base/json.ts(191,17): return this.doString()
    s.tmp_9 = JSON_Parser_doString__P2190_mk(s);
    s.tmp_9.arg0 = s.arg0;
    s.callLocIdx = 101; s.pc = 32; return s.tmp_9;
  case 32:
    r0 = s.retval;
    { step = 27; continue; }
    { step = 23; continue; }
  case 10:
// base/json.ts(192,18): if (c == 0x74 && this.checkKw("true"))...
    r0 = (s.c___5250 == 116);
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBool(s.tmp_10);
    if (r0) { step = 11; continue; }
    r0 = s.tmp_10;
    { step = 12; continue; }
  case 11:
    s.tmp_11 = JSON_Parser_checkKw__P2194_mk(s);
    s.tmp_11.arg0 = s.arg0;
    s.tmp_11.arg1 = "true";
    s.callLocIdx = 102; s.pc = 33; return s.tmp_11;
  case 33:
    r0 = s.retval;
  case 12:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 13; continue; }
// base/json.ts(193,17): return true
    r0 = true;
    { step = 27; continue; }
    { step = 22; continue; }
  case 13:
// base/json.ts(194,18): if (c == 0x66 && this.checkKw("false"))...
    r0 = (s.c___5250 == 102);
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBool(s.tmp_13);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_13;
    { step = 15; continue; }
  case 14:
    s.tmp_14 = JSON_Parser_checkKw__P2194_mk(s);
    s.tmp_14.arg0 = s.arg0;
    s.tmp_14.arg1 = "false";
    s.callLocIdx = 103; s.pc = 34; return s.tmp_14;
  case 34:
    r0 = s.retval;
  case 15:
    // jmp value (already in r0)
    s.tmp_15 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_15);
    if (!r0) { step = 16; continue; }
// base/json.ts(195,17): return false
    r0 = false;
    { step = 27; continue; }
    { step = 21; continue; }
  case 16:
// base/json.ts(196,18): if (c == 0x6e && this.checkKw("null"))...
    r0 = (s.c___5250 == 110);
    s.tmp_16 = r0;
    r0 = pxsim_numops_toBool(s.tmp_16);
    if (r0) { step = 17; continue; }
    r0 = s.tmp_16;
    { step = 18; continue; }
  case 17:
    s.tmp_17 = JSON_Parser_checkKw__P2194_mk(s);
    s.tmp_17.arg0 = s.arg0;
    s.tmp_17.arg1 = "null";
    s.callLocIdx = 104; s.pc = 35; return s.tmp_17;
  case 35:
    r0 = s.retval;
  case 18:
    // jmp value (already in r0)
    s.tmp_18 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_18);
    if (!r0) { step = 19; continue; }
// base/json.ts(197,17): return null
    r0 = null;
    { step = 27; continue; }
  case 19:
  case 20:
  case 21:
  case 22:
  case 23:
  case 24:
  case 25:
  case 26:
// base/json.ts(199,13): this.error("unexpected token")
    s.tmp_19 = JSON_Parser_error__P2187_mk(s);
    s.tmp_19.arg0 = s.arg0;
    s.tmp_19.arg1 = "unexpected token";
    s.callLocIdx = 105; s.pc = 36; return s.tmp_19;
  case 36:
    r0 = s.retval;
// base/json.ts(200,13): return null
    r0 = null;
  case 27:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_value__P2195.info = {"start":4976,"length":743,"line":178,"column":8,"endLine":200,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"value","argumentNames":["this"]}

function JSON_Parser_value__P2195_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_value__P2195, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  c___5250: undefined,
  arg0: undefined,
} }





function JSON_Parser_checkKw__P2194(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(172,13): if (this.s.slice(this.ptr, this.ptr + k.length) == k) {...
    s.tmp_2 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["s"];
    s.tmp_2.arg0 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_2.arg1 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_3 = r0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_4 = r0;
    r0 = (s.tmp_3 + s.tmp_4);
    s.tmp_2.arg2 = r0;
    s.callLocIdx = 96; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/json.ts(173,17): this.ptr += k.length
    s.tmp_5 = r0 = s.arg0;
    r0 = s.tmp_5.fields["ptr"];
    s.tmp_7 = r0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_8 = r0;
    r0 = (s.tmp_7 + s.tmp_8);
    s.tmp_6 = r0;
    r0 = (s.tmp_5).fields["ptr"] = (s.tmp_6);
// base/json.ts(174,17): return true
    r0 = true;
    { step = 3; continue; }
  case 1:
  case 2:
// base/json.ts(176,13): return false
    r0 = false;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_checkKw__P2194.info = {"start":4764,"length":202,"line":170,"column":8,"endLine":176,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"checkKw","argumentNames":["this","k"]}

function JSON_Parser_checkKw__P2194_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_checkKw__P2194, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function JSON_Parser_doString__P2190(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5310 = undefined;
    s.c___5315 = undefined;
    s.q___5329 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(70,17): r = ""
    r0 = pxsim_String_.mkEmpty();
    s.r___5310 = (r0);
// base/json.ts(71,13): this.ptr++
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
// base/json.ts(72,13): for (; ;) {...
  case 1:
// base/json.ts(73,23): c = this.s.charAt(this.ptr++)
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
    r0 = s.arg0.fields["s"];
    s.tmp_3 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_2);
    s.c___5315 = (r0);
// base/json.ts(74,17): if (c == "\"")...
    r0 = (s.c___5315 == "\"");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/json.ts(75,21): return r
    r0 = s.r___5310;
    { step = 16; continue; }
  case 2:
  case 3:
// base/json.ts(76,17): if (c == "\\") {...
    r0 = (s.c___5315 == "\\");
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 14; continue; }
// base/json.ts(77,25): q = this.s.charAt(this.ptr++)
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["ptr"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["ptr"] = (s.tmp_3);
    r0 = s.arg0.fields["s"];
    s.tmp_5 = r0;
    r0 = pxsim_String_.charAt(s.tmp_5, s.tmp_4);
    s.q___5329 = (r0);
// base/json.ts(78,21): if (q == "b") q = "\b"...
    r0 = (s.q___5329 == "b");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/json.ts(78,35): q = "\b"
    s.q___5329 = ("\b");
    { step = 13; continue; }
  case 4:
// base/json.ts(79,26): if (q == "n") q = "\n"...
    r0 = (s.q___5329 == "n");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// base/json.ts(79,40): q = "\n"
    s.q___5329 = ("\n");
    { step = 12; continue; }
  case 5:
// base/json.ts(80,26): if (q == "r") q = "\r"...
    r0 = (s.q___5329 == "r");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/json.ts(80,40): q = "\r"
    s.q___5329 = ("\r");
    { step = 11; continue; }
  case 6:
// base/json.ts(81,26): if (q == "t") q = "\t"...
    r0 = (s.q___5329 == "t");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// base/json.ts(81,40): q = "\t"
    s.q___5329 = ("\t");
    { step = 10; continue; }
  case 7:
// base/json.ts(82,26): if (q == "u") {...
    r0 = (s.q___5329 == "u");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// base/json.ts(83,25): q = String.fromCharCode(parseIntRadix(this.s.slice(this.ptr, this.ptr + 4), 16))
    s.tmp_2 = JSON_parseIntRadix__P384_mk(s);
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["s"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_3.arg1 = r0;
    r0 = s.arg0.fields["ptr"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 4);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 79; s.pc = 18; return s.tmp_3;
  case 18:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = 16;
    s.callLocIdx = 80; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_1);
    s.q___5329 = (r0);
// base/json.ts(84,25): this.ptr += 4
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
  case 8:
  case 9:
  case 10:
  case 11:
  case 12:
  case 13:
// base/json.ts(86,21): r += q
    if ((s.r___5310) && (s.r___5310).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.r___5310);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___5310) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.q___5329) && (s.q___5329).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.q___5329);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.q___5329) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___5310 = (r0);
    { step = 15; continue; }
  case 14:
// base/json.ts(88,21): r += c
    if ((s.r___5310) && (s.r___5310).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.r___5310);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___5310) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.c___5315) && (s.c___5315).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.c___5315);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.c___5315) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___5310 = (r0);
  case 15:
    { step = 1; continue; }
    r0 = undefined;
  case 16:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_doString__P2190.info = {"start":1662,"length":795,"line":68,"column":8,"endLine":90,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doString","argumentNames":["this"]}

function JSON_Parser_doString__P2190_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_doString__P2190, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  r___5310: undefined,
  c___5315: undefined,
  q___5329: undefined,
  arg0: undefined,
} }





function JSON_parseIntRadix__P384(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.m___5393 = undefined;
    s.r___5394 = undefined;
    s.i___5395 = undefined;
    s.c___5401 = undefined;
    s.v___5426 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/json.ts(3,9): if (base == null || base == 10) {...
    r0 = (s.arg1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg1 == 10);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// base/json.ts(4,13): return parseFloat(s) | 0
    r0 = pxsim_String_.toNumber(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 0);
    { step = 36; continue; }
  case 3:
  case 4:
// base/json.ts(7,13): m = false
    s.m___5393 = (false);
// base/json.ts(8,13): r = 0
    s.r___5394 = (0);
// base/json.ts(9,18): i = 0
    s.i___5395 = (0);
// base/json.ts(9,9): for (let i = 0; i < s.length; ++i) {...
  case 5:
// base/json.ts(9,25): i < s.length
    s.tmp_1 = r0 = s.i___5395;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 33; continue; }
// base/json.ts(10,17): c = s.charCodeAt(i)
    r0 = pxsim_String_.charCodeAt(s.arg0, s.i___5395);
    s.c___5401 = (r0);
// base/json.ts(11,13): if (c == 0x20 || c == 10 || c == 13 || c == 9)...
    r0 = (s.c___5401 == 32);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 6; continue; }
    r0 = s.tmp_0;
    { step = 7; continue; }
  case 6:
    r0 = (s.c___5401 == 10);
  case 7:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_1;
    { step = 9; continue; }
  case 8:
    r0 = (s.c___5401 == 13);
  case 9:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_2;
    { step = 11; continue; }
  case 10:
    r0 = (s.c___5401 == 9);
  case 11:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 12; continue; }
// base/json.ts(12,17): continue
    { step = 32; continue; }
  case 12:
  case 13:
// base/json.ts(13,13): if (r == 0 && !m && c == 0x2d) {...
    r0 = (s.r___5394 == 0);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_4;
    { step = 15; continue; }
  case 14:
    r0 = pxsim_numops_toBoolDecr(s.m___5393);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
  case 15:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_6;
    { step = 17; continue; }
  case 16:
    r0 = (s.c___5401 == 45);
  case 17:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 18; continue; }
// base/json.ts(14,17): m = true
    s.m___5393 = (true);
// base/json.ts(15,17): continue
    { step = 32; continue; }
  case 18:
  case 19:
// base/json.ts(18,17): v = -1
    s.v___5426 = (-1);
// base/json.ts(19,13): if (0x30 <= c && c <= 0x39)...
    r0 = (48 <= s.c___5401);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 20; continue; }
    r0 = s.tmp_0;
    { step = 21; continue; }
  case 20:
    r0 = (s.c___5401 <= 57);
  case 21:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 22; continue; }
// base/json.ts(20,17): v = c - 0x30
    r0 = (s.c___5401 - 48);
    s.v___5426 = (r0);
    { step = 27; continue; }
  case 22:
// base/json.ts(22,17): c |= 0x20
    r0 = (s.c___5401 | 32);
    s.c___5401 = (r0);
// base/json.ts(23,17): if (0x61 <= c && c <= 0x7a)...
    r0 = (97 <= s.c___5401);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 23; continue; }
    r0 = s.tmp_0;
    { step = 24; continue; }
  case 23:
    r0 = (s.c___5401 <= 122);
  case 24:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 25; continue; }
// base/json.ts(24,21): v = c - 0x61 + 10
    r0 = (s.c___5401 - 97);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 10);
    s.v___5426 = (r0);
  case 25:
  case 26:
  case 27:
// base/json.ts(27,13): if (0 <= v && v < base) {...
    r0 = (0 <= s.v___5426);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 28; continue; }
    r0 = s.tmp_0;
    { step = 29; continue; }
  case 28:
    r0 = (s.v___5426 < s.arg1);
  case 29:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 30; continue; }
// base/json.ts(28,17): r *= base
    r0 = (s.r___5394 * s.arg1);
    s.r___5394 = (r0);
// base/json.ts(29,17): r += v
    r0 = (s.r___5394 + s.v___5426);
    s.r___5394 = (r0);
    { step = 31; continue; }
  case 30:
// base/json.ts(31,17): return undefined
    r0 = undefined;
    { step = 36; continue; }
  case 31:
  case 32:
// base/json.ts(9,39): ++i
    r0 = (s.i___5395 + 1);
    s.i___5395 = (r0);
    { step = 5; continue; }
  case 33:
// base/json.ts(35,9): return m ? -r : r
    r0 = pxsim_numops_toBoolDecr(s.m___5393);
    if (!r0) { step = 34; continue; }
    r0 = (0 - s.r___5394);
    { step = 35; continue; }
  case 34:
    r0 = s.r___5394;
  case 35:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
  case 36:
    return leave(s, r0)
  default: oops()
} } }
JSON_parseIntRadix__P384.info = {"start":21,"length":894,"line":1,"column":4,"endLine":35,"endColumn":5,"fileName":"pxt_modules/base/json.ts","functionName":"parseIntRadix","argumentNames":["s","base"]}

function JSON_parseIntRadix__P384_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_parseIntRadix__P384, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  m___5393: undefined,
  r___5394: undefined,
  i___5395: undefined,
  c___5401: undefined,
  v___5426: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function JSON_Parser_doNumber__P2193(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.beg___5476 = undefined;
    s.c___5480 = undefined;
    s.ss___5508 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(153,19): beg = this.ptr
    r0 = s.arg0.fields["ptr"];
    s.beg___5476 = (r0);
// base/json.ts(154,13): for (; ;) {...
  case 1:
// base/json.ts(155,23): c = this.nextChar()
    s.tmp_0 = JSON_Parser_nextChar__P2189_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 93; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    s.c___5480 = (r0);
// base/json.ts(156,17): if ((0x30 <= c && c <= 0x39) || c == 0x2b || c == 0x2d || c == 0x2e || c == 0x45
    r0 = (48 <= s.c___5480);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___5480 <= 57);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 5; continue; }
  case 4:
    r0 = (s.c___5480 == 43);
  case 5:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 6; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 6:
    r0 = (s.c___5480 == 45);
  case 7:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_3;
    { step = 9; continue; }
  case 8:
    r0 = (s.c___5480 == 46);
  case 9:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_4;
    { step = 11; continue; }
  case 10:
    r0 = (s.c___5480 == 69);
  case 11:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 12; continue; }
    r0 = s.tmp_5;
    { step = 13; continue; }
  case 12:
    r0 = (s.c___5480 == 101);
  case 13:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 14; continue; }
    { step = 15; continue; }
  case 14:
// base/json.ts(159,21): this.ptr--
    s.tmp_7 = r0 = s.arg0;
    r0 = s.tmp_7.fields["ptr"];
    s.tmp_9 = r0;
    r0 = (s.tmp_9 - 1);
    s.tmp_8 = r0;
    r0 = (s.tmp_7).fields["ptr"] = (s.tmp_8);
// base/json.ts(160,21): break
    { step = 16; continue; }
  case 15:
    { step = 1; continue; }
  case 16:
// base/json.ts(163,19): ss = this.s.slice(beg, this.ptr)
    s.tmp_0 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["s"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.beg___5476;
    r0 = s.arg0.fields["ptr"];
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 94; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.ss___5508 = (r0);
// base/json.ts(164,13): if (ss.length == 0) {...
    r0 = pxsim_String_.length(s.ss___5508);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
// base/json.ts(165,17): this.error("expecting number")
    s.tmp_2 = JSON_Parser_error__P2187_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "expecting number";
    s.callLocIdx = 95; s.pc = 22; return s.tmp_2;
  case 22:
    r0 = s.retval;
// base/json.ts(166,17): return 0
    r0 = 0;
    { step = 19; continue; }
  case 17:
  case 18:
// base/json.ts(168,13): return parseFloat(ss)
    r0 = pxsim_String_.toNumber(s.ss___5508);
  case 19:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_doNumber__P2193.info = {"start":4169,"length":585,"line":151,"column":8,"endLine":168,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doNumber","argumentNames":["this"]}

function JSON_Parser_doNumber__P2193_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_doNumber__P2193, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  beg___5476: undefined,
  c___5480: undefined,
  ss___5508: undefined,
  arg0: undefined,
} }





function JSON_Parser_doArray__P2191(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5524 = undefined;
    s.c___5530 = undefined;
    s.v___5538 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(94,19): r = []
    r0 = pxsim_Array__mk();
    s.r___5524 = (r0);
// base/json.ts(95,13): this.ptr++
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
// base/json.ts(96,13): for (; ;) {...
  case 1:
// base/json.ts(97,21): c = this.skipWS()
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 81; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.c___5530 = (r0);
// base/json.ts(98,17): if (c == 0x5d) {...
    r0 = (s.c___5530 == 93);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/json.ts(99,21): this.ptr++
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["ptr"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["ptr"] = (s.tmp_2);
// base/json.ts(100,21): return r
    r0 = s.r___5524;
    { step = 11; continue; }
  case 2:
  case 3:
// base/json.ts(102,23): v = this.value()
    s.tmp_0 = JSON_Parser_value__P2195_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 82; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.v___5538 = (r0);
// base/json.ts(103,17): if (this.errorMsg)...
    r0 = s.arg0.fields["errorMsg"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/json.ts(104,21): return null
    r0 = null;
    { step = 11; continue; }
  case 4:
  case 5:
// base/json.ts(105,17): r.push(v)
    r0 = pxsim_Array__push(s.r___5524, s.v___5538);
// base/json.ts(106,17): c = this.skipWS()
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 83; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    s.c___5530 = (r0);
// base/json.ts(107,17): if (c == 0x2c) {...
    r0 = (s.c___5530 == 44);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/json.ts(108,21): this.ptr++
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["ptr"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["ptr"] = (s.tmp_2);
// base/json.ts(109,21): continue
    { step = 10; continue; }
  case 6:
  case 7:
// base/json.ts(111,17): if (c == 0x5d)...
    r0 = (s.c___5530 == 93);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// base/json.ts(112,21): continue
    { step = 10; continue; }
  case 8:
  case 9:
// base/json.ts(113,17): this.error("expecting comma")
    s.tmp_1 = JSON_Parser_error__P2187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "expecting comma";
    s.callLocIdx = 84; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
  case 10:
    { step = 1; continue; }
    r0 = undefined;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_doArray__P2191.info = {"start":2467,"length":646,"line":92,"column":8,"endLine":114,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doArray","argumentNames":["this"]}

function JSON_Parser_doArray__P2191_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_doArray__P2191, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  r___5524: undefined,
  c___5530: undefined,
  v___5538: undefined,
  arg0: undefined,
} }





function JSON_Parser_doObject__P2192(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5559 = undefined;
    s.c___5565 = undefined;
    s.k___5577 = undefined;
    s.v___5589 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Parser__C2186_VT)) failedCast(r0);
// base/json.ts(118,19): r: any = {}
    r0 = pxsim_pxtrt.mkMap();
    s.r___5559 = (r0);
// base/json.ts(119,13): this.ptr++
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
// base/json.ts(120,13): for (; ;) {...
  case 1:
// base/json.ts(121,21): c = this.skipWS()
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 85; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.c___5565 = (r0);
// base/json.ts(122,17): if (c == 0x7d) {...
    r0 = (s.c___5565 == 125);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/json.ts(123,21): this.ptr++
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["ptr"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["ptr"] = (s.tmp_2);
// base/json.ts(124,21): return r
    r0 = s.r___5559;
    { step = 15; continue; }
  case 2:
  case 3:
// base/json.ts(126,17): if (c != 0x22) {...
    r0 = (s.c___5565 != 34);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/json.ts(127,21): this.error("expecting key")
    s.tmp_1 = JSON_Parser_error__P2187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "expecting key";
    s.callLocIdx = 86; s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
// base/json.ts(128,21): return r
    r0 = s.r___5559;
    { step = 15; continue; }
  case 4:
  case 5:
// base/json.ts(130,23): k = this.doString()
    s.tmp_0 = JSON_Parser_doString__P2190_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 87; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.k___5577 = (r0);
// base/json.ts(131,17): c = this.skipWS()
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 88; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    s.c___5565 = (r0);
// base/json.ts(132,17): if (c != 0x3a) {...
    r0 = (s.c___5565 != 58);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/json.ts(133,21): this.error("expecting colon")
    s.tmp_1 = JSON_Parser_error__P2187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "expecting colon";
    s.callLocIdx = 89; s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
// base/json.ts(134,21): return r
    r0 = s.r___5559;
    { step = 15; continue; }
  case 6:
  case 7:
// base/json.ts(136,17): this.ptr++
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["ptr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["ptr"] = (s.tmp_1);
// base/json.ts(137,23): v = this.value()
    s.tmp_0 = JSON_Parser_value__P2195_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 90; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.v___5589 = (r0);
// base/json.ts(138,17): if (this.errorMsg)...
    r0 = s.arg0.fields["errorMsg"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// base/json.ts(139,21): return null
    r0 = null;
    { step = 15; continue; }
  case 8:
  case 9:
// base/json.ts(140,17): r[k] = v
    r0 = pxsim_pxtrt.mapSetGeneric(s.r___5559, s.k___5577, s.v___5589);
// base/json.ts(141,17): c = this.skipWS()
    s.tmp_0 = JSON_Parser_skipWS__P2188_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 91; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    s.c___5565 = (r0);
// base/json.ts(142,17): if (c == 0x2c) {...
    r0 = (s.c___5565 == 44);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// base/json.ts(143,21): this.ptr++
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["ptr"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["ptr"] = (s.tmp_2);
// base/json.ts(144,21): continue
    { step = 14; continue; }
  case 10:
  case 11:
// base/json.ts(146,17): if (c == 0x7d)...
    r0 = (s.c___5565 == 125);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
// base/json.ts(147,21): continue
    { step = 14; continue; }
  case 12:
  case 13:
// base/json.ts(148,17): this.error("expecting comma, got " + String.fromCharCode(c))
    s.tmp_1 = JSON_Parser_error__P2187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    r0 = pxsim_String_.fromCharCode(s.c___5565);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("expecting comma, got ", s.tmp_2);
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 92; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
  case 14:
    { step = 1; continue; }
    r0 = undefined;
  case 15:
    return leave(s, r0)
  default: oops()
} } }
JSON_Parser_doObject__P2192.info = {"start":3123,"length":1036,"line":116,"column":8,"endLine":149,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doObject","argumentNames":["this"]}

function JSON_Parser_doObject__P2192_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Parser_doObject__P2192, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  r___5559: undefined,
  c___5565: undefined,
  k___5577: undefined,
  v___5589: undefined,
  arg0: undefined,
} }





function settings_readString__P1087(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___5617 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(112,15): buf = readBuffer(key)
    s.tmp_0 = settings_readBuffer__P1086_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 139; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.buf___5617 = (r0);
// settings---esp32/settings.ts(113,9): if (!buf)...
    r0 = pxsim_numops_toBoolDecr(s.buf___5617);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// settings---esp32/settings.ts(114,13): return undefined
    r0 = undefined;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
// settings---esp32/settings.ts(116,13): return buf.toString()
    r0 = pxsim.BufferMethods.toString(s.buf___5617);
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
settings_readString__P1087.info = {"start":2827,"length":177,"line":110,"column":4,"endLine":116,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readString","argumentNames":["key"]}

function settings_readString__P1087_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readString__P1087, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  buf___5617: undefined,
  arg0: undefined,
} }





function settings_readBuffer__P1086(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(105,9): return _get(key)
    r0 = pxsim.settings._get(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_readBuffer__P1086.info = {"start":2694,"length":72,"line":103,"column":4,"endLine":105,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readBuffer","argumentNames":["key"]}

function settings_readBuffer__P1086_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readBuffer__P1086, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function azureiot_parsePropertyBag__P2297(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5633 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(107,15): r: SMap<string> = {}
    r0 = pxsim_pxtrt.mkMap();
    s.r___5633 = (r0);
// azureiot/azureiot.ts(108,9): if (msg && typeof msg === "string")...
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === "string");
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
// azureiot/azureiot.ts(109,13): msg.split(separator || "&")...
    s.tmp_3 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_3;
    { step = 4; continue; }
  case 3:
    r0 = "&";
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_pxtcore_mkAction(1, azureiot_parsePropertyBag_inline__P5658);
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_5, 0, s.r___5633);
    s.tmp_6 = helpers_arrayForEach__P109_mk(s);
    s.tmp_7 = helpers_arrayFilter__P110_mk(s);
    s.tmp_8 = helpers_arrayMap__P106_mk(s);
    s.tmp_9 = helpers_stringSplit__P122_mk(s);
    s.tmp_9.arg0 = s.arg0;
    s.tmp_9.arg1 = s.tmp_4;
    s.tmp_9.arg2 = undefined;
    s.callLocIdx = 498; s.pc = 10; return s.tmp_9;
  case 10:
    r0 = s.retval;
    s.tmp_8.arg0 = r0;
    s.tmp_8.arg1 = filter_inline__P5648;
    s.callLocIdx = 500; s.pc = 9; return s.tmp_8;
  case 9:
    r0 = s.retval;
    s.tmp_7.arg0 = r0;
    s.tmp_7.arg1 = forEach_inline__P5652;
    s.callLocIdx = 501; s.pc = 8; return s.tmp_7;
  case 8:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = s.tmp_5;
    s.callLocIdx = 504; s.pc = 7; return s.tmp_6;
  case 7:
    r0 = s.retval;
  case 5:
  case 6:
// azureiot/azureiot.ts(113,9): return r;
    r0 = s.r___5633;
    return leave(s, r0)
  default: oops()
} } }
azureiot_parsePropertyBag__P2297.info = {"start":3478,"length":401,"line":105,"column":4,"endLine":113,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"parsePropertyBag","argumentNames":["msg","separator"]}

function azureiot_parsePropertyBag__P2297_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_parsePropertyBag__P2297, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  r___5633: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function filter_inline__P5648(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = azureiot_splitPair__P2296_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 499; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
filter_inline__P5648.info = {"start":3694,"length":19,"line":109,"column":21,"endLine":109,"endColumn":40,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["kv"]}

function filter_inline__P5648_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: filter_inline__P5648, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function forEach_inline__P5652(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__getAt(s.arg0, 1);
    s.tmp_4 = r0;
    r0 = pxsim_String_.length(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
forEach_inline__P5652.info = {"start":3739,"length":26,"line":110,"column":24,"endLine":110,"endColumn":50,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["parts"]}

function forEach_inline__P5652_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: forEach_inline__P5652, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function azureiot_parsePropertyBag_inline__P5658(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.caps[0];
    s.tmp_2 = net_urldecode__P1220_mk(s);
    r0 = pxsim_Array__getAt(s.arg0, 0);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 502; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    s.tmp_4 = net_urldecode__P1220_mk(s);
    r0 = pxsim_Array__getAt(s.arg0, 1);
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 503; s.pc = 2; return s.tmp_4;
  case 2:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_0, s.tmp_1, s.tmp_3);
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
azureiot_parsePropertyBag_inline__P5658.info = {"start":3792,"length":61,"line":111,"column":25,"endLine":111,"endColumn":86,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["parts"]}

function azureiot_parsePropertyBag_inline__P5658_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_parsePropertyBag_inline__P5658, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function net_urldecode__P1220(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___5668 = undefined;
    s.isUtf8___5669 = undefined;
    s.i___5670 = undefined;
    s.c___5676 = undefined;
    s.h___5682 = undefined;
    s.chcode___5692 = undefined;
    s.buf___5725 = undefined;
    s.i___5730 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// net/netutil.ts(18,13): r = ""
    r0 = pxsim_String_.mkEmpty();
    s.r___5668 = (r0);
// net/netutil.ts(19,13): isUtf8 = false
    s.isUtf8___5669 = (false);
// net/netutil.ts(20,18): i = 0
    s.i___5670 = (0);
// net/netutil.ts(20,9): for (let i = 0; i < s.length; ++i) {...
  case 1:
// net/netutil.ts(20,25): i < s.length
    s.tmp_1 = r0 = s.i___5670;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// net/netutil.ts(21,19): c = s[i]
    r0 = pxsim_String_.charAt(s.arg0, s.i___5670);
    s.c___5676 = (r0);
// net/netutil.ts(22,13): if (c == "%") {...
    r0 = (s.c___5676 == "%");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// net/netutil.ts(23,23): h = s.slice(i + 1, i + 3)
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_1.arg0 = s.arg0;
    r0 = (s.i___5670 + 1);
    s.tmp_1.arg1 = r0;
    r0 = (s.i___5670 + 3);
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 234; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.h___5682 = (r0);
// net/netutil.ts(24,23): chcode = parseInt(h, 16)
    s.tmp_0 = parseInt__P97_mk(s);
    s.tmp_0.arg0 = s.h___5682;
    s.tmp_0.arg1 = 16;
    s.callLocIdx = 235; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.chcode___5692 = (r0);
// net/netutil.ts(25,17): if (!isNaN(chcode)) {...
    s.tmp_3 = isNaN__P93_mk(s);
    s.tmp_3.arg0 = s.chcode___5692;
    s.callLocIdx = 236; s.pc = 17; return s.tmp_3;
  case 17:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// net/netutil.ts(26,21): if (chcode > 127)...
    r0 = (s.chcode___5692 > 127);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 2; continue; }
// net/netutil.ts(27,25): isUtf8 = true
    s.isUtf8___5669 = (true);
  case 2:
  case 3:
// net/netutil.ts(28,21): r += String.fromCharCode(chcode)
    if ((s.r___5668) && (s.r___5668).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.r___5668);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___5668) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String_.fromCharCode(s.chcode___5692);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___5668 = (r0);
// net/netutil.ts(29,21): i += 2
    r0 = (s.i___5670 + 2);
    s.i___5670 = (r0);
// net/netutil.ts(30,21): continue
    { step = 8; continue; }
  case 4:
  case 5:
  case 6:
  case 7:
// net/netutil.ts(33,13): r += c
    if ((s.r___5668) && (s.r___5668).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.r___5668);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___5668) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.c___5676) && (s.c___5676).vtable) {
    setupResume(s, 21);
    pxsim_String__stringConv(s.c___5676);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.c___5676) + ""; }
  case 21:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___5668 = (r0);
  case 8:
// net/netutil.ts(20,39): ++i
    r0 = (s.i___5670 + 1);
    s.i___5670 = (r0);
    { step = 1; continue; }
  case 9:
// net/netutil.ts(35,9): if (isUtf8) {...
    r0 = pxsim_numops_toBoolDecr(s.isUtf8___5669);
    if (!r0) { step = 12; continue; }
// net/netutil.ts(36,19): buf = Buffer.create(r.length)
    r0 = pxsim_String_.length(s.r___5668);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___5725 = (r0);
// net/netutil.ts(37,22): i = 0
    s.i___5730 = (0);
// net/netutil.ts(37,13): for (let i = 0; i < buf.length; ++i)...
  case 10:
// net/netutil.ts(37,29): i < buf.length
    s.tmp_1 = r0 = s.i___5730;
    r0 = pxsim.BufferMethods.length(s.buf___5725);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// net/netutil.ts(38,17): buf[i] = r.charCodeAt(i)
    s.tmp_3 = r0 = s.buf___5725;
    s.tmp_4 = r0 = s.i___5730;
    r0 = pxsim_String_.charCodeAt(s.r___5668, s.i___5730);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_3, s.tmp_4, s.tmp_5);
// net/netutil.ts(37,45): ++i
    r0 = (s.i___5730 + 1);
    s.i___5730 = (r0);
    { step = 10; continue; }
  case 11:
// net/netutil.ts(39,13): return buf.toString()
    r0 = pxsim.BufferMethods.toString(s.buf___5725);
    { step = 14; continue; }
    { step = 13; continue; }
  case 12:
// net/netutil.ts(41,13): return r
    r0 = s.r___5668;
    { step = 14; continue; }
  case 13:
    r0 = undefined;
  case 14:
    return leave(s, r0)
  default: oops()
} } }
net_urldecode__P1220.info = {"start":503,"length":811,"line":16,"column":4,"endLine":42,"endColumn":5,"fileName":"pxt_modules/net/netutil.ts","functionName":"urldecode","argumentNames":["s"]}

function net_urldecode__P1220_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_urldecode__P1220, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  r___5668: undefined,
  isUtf8___5669: undefined,
  i___5670: undefined,
  c___5676: undefined,
  h___5682: undefined,
  chcode___5692: undefined,
  buf___5725: undefined,
  i___5730: undefined,
  arg0: undefined,
} }





function isNaN__P93(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(14,5): x = +x
    r0 = (s.arg0 - 0);
    s.arg0 = (r0);
// base/pxt-helpers.ts(15,1): return x !== x
    r0 = (s.arg0 !== s.arg0);
    return leave(s, r0)
  default: oops()
} } }
isNaN__P93.info = {"start":169,"length":80,"line":12,"column":0,"endLine":15,"endColumn":1,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"isNaN","argumentNames":["x"]}

function isNaN__P93_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: isNaN__P93, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function parseInt__P97(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.start___5772 = undefined;
    s.sign___5802 = undefined;
    s.output___5847 = undefined;
    s.hasDigit___5848 = undefined;
    s.i___5849 = undefined;
    s.code___5856 = undefined;
    s.val___5863 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(47,1): // with some consideration for avoiding unnecessary slices where easy...
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 1:
    r0 = (s.arg1 != null);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 2:
    r0 = (s.arg1 < 2);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_3;
    { step = 4; continue; }
  case 3:
    r0 = (s.arg1 > 36);
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
  case 6:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 7; continue; }
// base/pxt-helpers.ts(49,9): return NaN;
    r0 = NaN;
    { step = 46; continue; }
  case 7:
  case 8:
// base/pxt-helpers.ts(51,9): start = 0
    s.start___5772 = (0);
// base/pxt-helpers.ts(52,5): while (start < text.length && helpers.isWhitespace(text.charCodeAt(start)))
  case 9:
// base/pxt-helpers.ts(52,12): start < text.length && helpers.isWhitespace(text.charCodeAt(start))
    s.tmp_1 = r0 = s.start___5772;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 10:
    s.tmp_3 = helpers_isWhitespace__P124_mk(s);
    r0 = pxsim_String_.charCodeAt(s.arg0, s.start___5772);
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 0; s.pc = 47; return s.tmp_3;
  case 47:
    r0 = s.retval;
  case 11:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 12; continue; }
// base/pxt-helpers.ts(53,9): ++start
    r0 = (s.start___5772 + 1);
    s.start___5772 = (r0);
    { step = 9; continue; }
  case 12:
// base/pxt-helpers.ts(55,5): if (start === text.length)...
    s.tmp_1 = r0 = s.start___5772;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 === s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// base/pxt-helpers.ts(56,9): return NaN;
    r0 = NaN;
    { step = 46; continue; }
  case 13:
  case 14:
// base/pxt-helpers.ts(64,9): sign = 1
    s.sign___5802 = (1);
// base/pxt-helpers.ts(65,5): switch (text.charAt(start)) {...
    r0 = pxsim_String_.charAt(s.arg0, s.start___5772);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq("-", s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq("+", s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 15:
// base/pxt-helpers.ts(67,13): sign = -1
    s.sign___5802 = (-1);
  case 16:
// base/pxt-helpers.ts(70,13): ++start
    r0 = (s.start___5772 + 1);
    s.start___5772 = (r0);
  case 17:
// base/pxt-helpers.ts(73,5): if ((!radix || radix == 16)...
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 18; continue; }
    r0 = s.tmp_0;
    { step = 19; continue; }
  case 18:
    r0 = (s.arg1 == 16);
  case 19:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 20; continue; }
    r0 = s.tmp_2;
    { step = 21; continue; }
  case 20:
    r0 = pxsim_String_.charAt(s.arg0, s.start___5772);
    s.tmp_3 = r0;
    r0 = ("0" === s.tmp_3);
  case 21:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 22; continue; }
    r0 = s.tmp_4;
    { step = 25; continue; }
  case 22:
    s.tmp_7 = r0 = s.arg0;
    r0 = (s.start___5772 + 1);
    s.tmp_8 = r0;
    r0 = pxsim_String_.charAt(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    r0 = ("x" === s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (!r0) { step = 23; continue; }
    r0 = s.tmp_5;
    { step = 24; continue; }
  case 23:
    s.tmp_10 = r0 = s.arg0;
    r0 = (s.start___5772 + 1);
    s.tmp_11 = r0;
    r0 = pxsim_String_.charAt(s.tmp_10, s.tmp_11);
    s.tmp_9 = r0;
    r0 = ("X" === s.tmp_9);
  case 24:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = s.tmp_12;
  case 25:
    // jmp value (already in r0)
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    if (!r0) { step = 26; continue; }
// base/pxt-helpers.ts(76,9): radix = 16
    s.arg1 = (16);
// base/pxt-helpers.ts(77,9): start += 2
    r0 = (s.start___5772 + 2);
    s.start___5772 = (r0);
    { step = 29; continue; }
  case 26:
// base/pxt-helpers.ts(78,12): if (!radix) {...
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
// base/pxt-helpers.ts(79,9): radix = 10
    s.arg1 = (10);
  case 27:
  case 28:
  case 29:
// base/pxt-helpers.ts(82,9): output = 0
    s.output___5847 = (0);
// base/pxt-helpers.ts(83,9): hasDigit = false
    s.hasDigit___5848 = (false);
// base/pxt-helpers.ts(84,14): i = start
    s.i___5849 = (s.start___5772);
// base/pxt-helpers.ts(84,5): for (let i = start; i < text.length; ++i) {...
  case 30:
// base/pxt-helpers.ts(84,25): i < text.length
    s.tmp_1 = r0 = s.i___5849;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 45; continue; }
// base/pxt-helpers.ts(85,15): code = text.charCodeAt(i) | lowerCaseMask
    r0 = pxsim_String_.charCodeAt(s.arg0, s.i___5849);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 | 32);
    s.code___5856 = (r0);
// base/pxt-helpers.ts(86,13): val: number = undefined
    s.val___5863 = (undefined);
// base/pxt-helpers.ts(88,9): if (code >= numberOffset && code < numberOffset + numCount)...
    r0 = (s.code___5856 >= 48);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 31; continue; }
    r0 = s.tmp_0;
    { step = 32; continue; }
  case 31:
    r0 = (s.code___5856 < 58);
  case 32:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 33; continue; }
// base/pxt-helpers.ts(89,13): val = code - numberOffset
    r0 = (s.code___5856 - 48);
    s.val___5863 = (r0);
    { step = 38; continue; }
  case 33:
// base/pxt-helpers.ts(90,14): if (code >= letterOffset && code < letterOffset + letterCount)...
    r0 = (s.code___5856 >= 97);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 34; continue; }
    r0 = s.tmp_0;
    { step = 35; continue; }
  case 34:
    r0 = (s.code___5856 < 123);
  case 35:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 36; continue; }
// base/pxt-helpers.ts(91,13): val = numCount + code - letterOffset
    r0 = (10 + s.code___5856);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 97);
    s.val___5863 = (r0);
  case 36:
  case 37:
  case 38:
// base/pxt-helpers.ts(93,9): if (val == undefined || val >= radix) {...
    r0 = (s.val___5863 == undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 39; continue; }
    r0 = s.tmp_0;
    { step = 40; continue; }
  case 39:
    r0 = (s.val___5863 >= s.arg1);
  case 40:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 43; continue; }
// base/pxt-helpers.ts(94,13): if (!hasDigit) {...
    r0 = pxsim_numops_toBoolDecr(s.hasDigit___5848);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 41; continue; }
// base/pxt-helpers.ts(95,17): return NaN;
    r0 = NaN;
    { step = 46; continue; }
  case 41:
  case 42:
// base/pxt-helpers.ts(97,13): break;
    { step = 45; continue; }
  case 43:
  case 44:
// base/pxt-helpers.ts(99,9): hasDigit = true
    s.hasDigit___5848 = (true);
// base/pxt-helpers.ts(100,9): output = output * radix + val
    r0 = (s.output___5847 * s.arg1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + s.val___5863);
    s.output___5847 = (r0);
// base/pxt-helpers.ts(84,42): ++i
    r0 = (s.i___5849 + 1);
    s.i___5849 = (r0);
    { step = 30; continue; }
  case 45:
// base/pxt-helpers.ts(103,5): return sign * output;
    r0 = (s.sign___5802 * s.output___5847);
  case 46:
    return leave(s, r0)
  default: oops()
} } }
parseInt__P97.info = {"start":1064,"length":1690,"line":44,"column":0,"endLine":103,"endColumn":1,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"parseInt","argumentNames":["text","radix"]}

function parseInt__P97_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: parseInt__P97, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  start___5772: undefined,
  sign___5802: undefined,
  output___5847: undefined,
  hasDigit___5848: undefined,
  i___5849: undefined,
  code___5856: undefined,
  val___5863: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_isWhitespace__P124(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(506,1): switch (c) {...
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(11, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(12, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(32, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(160, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(65279, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(10, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(8232, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(8233, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 1:
  case 2:
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
  case 8:
  case 9:
  case 10:
// base/pxt-helpers.ts(517,1): return true;
    r0 = true;
    { step = 12; continue; }
  case 11:
// base/pxt-helpers.ts(519,17): return false;
    r0 = false;
    { step = 12; continue; }
    r0 = undefined;
  case 12:
    return leave(s, r0)
  default: oops()
} } }
helpers_isWhitespace__P124.info = {"start":14864,"length":674,"line":503,"column":4,"endLine":520,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"isWhitespace","argumentNames":["c"]}

function helpers_isWhitespace__P124_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_isWhitespace__P124, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function azureiot_splitPair__P2296(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___5920 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(99,15): i = kv.indexOf('=')
    r0 = pxsim_String_.indexOf(s.arg0, "=", undefined);
    s.i___5920 = (r0);
// azureiot/azureiot.ts(100,9): if (i < 0)...
    r0 = (s.i___5920 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(101,13): return [kv, ""];
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.arg0);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    r0 = s.tmp_1;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
// azureiot/azureiot.ts(103,13): return [kv.slice(0, i), kv.slice(i + 1)];
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    s.tmp_5 = helpers_stringSlice__P119_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.tmp_5.arg1 = 0;
    s.tmp_5.arg2 = s.i___5920;
    s.callLocIdx = 496; s.pc = 4; return s.tmp_5;
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.tmp_4);
    s.tmp_7 = helpers_stringSlice__P119_mk(s);
    s.tmp_7.arg0 = s.arg0;
    r0 = (s.i___5920 + 1);
    s.tmp_7.arg1 = r0;
    s.tmp_7.arg2 = undefined;
    s.callLocIdx = 497; s.pc = 5; return s.tmp_7;
  case 5:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.tmp_6);
    r0 = s.tmp_3;
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_splitPair__P2296.info = {"start":3274,"length":198,"line":97,"column":4,"endLine":103,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"splitPair","argumentNames":["kv"]}

function azureiot_splitPair__P2296_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_splitPair__P2296, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  i___5920: undefined,
  arg0: undefined,
} }





function helpers_stringSplit__P122(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.A___5943 = undefined;
    s.lim___5945 = undefined;
    s.s___5961 = undefined;
    s.p___5964 = undefined;
    s.R___5965 = undefined;
    s.z___5979 = undefined;
    s.T___5992 = undefined;
    s.q___5993 = undefined;
    s.e___5999 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(437,15): A: string[] = []
    r0 = pxsim_Array__mk();
    s.A___5943 = (r0);
// base/pxt-helpers.ts(438,13): lim = 0
    s.lim___5945 = (0);
// base/pxt-helpers.ts(439,9): if (limit === undefined)...
    r0 = (s.arg2 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/pxt-helpers.ts(440,13): lim = (1 << 29) - 1
    r0 = (536870912 - 1);
    s.lim___5945 = (r0);
    { step = 4; continue; }
  case 1:
// base/pxt-helpers.ts(441,14): if (limit < 0)...
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(442,13): lim = 0
    s.lim___5945 = (0);
    { step = 3; continue; }
  case 2:
// base/pxt-helpers.ts(444,13): lim = limit | 0
    r0 = (s.arg2 | 0);
    s.lim___5945 = (r0);
  case 3:
  case 4:
// base/pxt-helpers.ts(445,15): s = S.length
    r0 = pxsim_String_.length(s.arg0);
    s.s___5961 = (r0);
// base/pxt-helpers.ts(446,13): p = 0
    s.p___5964 = (0);
// base/pxt-helpers.ts(447,15): R = separator
    s.R___5965 = (s.arg1);
// base/pxt-helpers.ts(448,9): if (lim == 0)...
    r0 = (s.lim___5945 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// base/pxt-helpers.ts(449,13): return A;
    r0 = s.A___5943;
    { step = 21; continue; }
  case 5:
  case 6:
// base/pxt-helpers.ts(450,9): if (separator === undefined) {...
    r0 = (s.arg1 === undefined);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
// base/pxt-helpers.ts(451,13): A[0] = S
    r0 = pxsim_Array_.setAt(s.A___5943, 0, s.arg0);
// base/pxt-helpers.ts(452,13): return A;
    r0 = s.A___5943;
    { step = 21; continue; }
  case 7:
  case 8:
// base/pxt-helpers.ts(454,9): if (s == 0) {...
    r0 = (s.s___5961 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// base/pxt-helpers.ts(455,17): z = splitMatch(S, 0, R)
    s.tmp_1 = helpers_splitMatch__P2130_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = 0;
    s.tmp_1.arg2 = s.R___5965;
    s.callLocIdx = 15; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.z___5979 = (r0);
// base/pxt-helpers.ts(456,13): if (z > -1) return A;
    r0 = (s.z___5979 > -1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// base/pxt-helpers.ts(456,25): return A;
    r0 = s.A___5943;
    { step = 21; continue; }
  case 9:
  case 10:
// base/pxt-helpers.ts(457,13): A[0] = S
    r0 = pxsim_Array_.setAt(s.A___5943, 0, s.arg0);
// base/pxt-helpers.ts(458,13): return A;
    r0 = s.A___5943;
    { step = 21; continue; }
  case 11:
  case 12:
// base/pxt-helpers.ts(461,13): q = p
    s.q___5993 = (s.p___5964);
// base/pxt-helpers.ts(462,9): while (q != s) {...
  case 13:
// base/pxt-helpers.ts(462,16): q != s
    r0 = (s.q___5993 != s.s___5961);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
// base/pxt-helpers.ts(463,17): e = splitMatch(S, q, R)
    s.tmp_1 = helpers_splitMatch__P2130_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.q___5993;
    s.tmp_1.arg2 = s.R___5965;
    s.callLocIdx = 16; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
    s.e___5999 = (r0);
// base/pxt-helpers.ts(464,13): if (e < 0) q++;...
    r0 = (s.e___5999 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// base/pxt-helpers.ts(464,24): q++
    r0 = (s.q___5993 + 1);
    s.q___5993 = (r0);
    { step = 19; continue; }
  case 14:
// base/pxt-helpers.ts(466,17): if (e == p) q++;...
    r0 = (s.e___5999 == s.p___5964);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
// base/pxt-helpers.ts(466,29): q++
    r0 = (s.q___5993 + 1);
    s.q___5993 = (r0);
    { step = 18; continue; }
  case 15:
// base/pxt-helpers.ts(468,21): T = stringSlice(S, p, q)
    s.tmp_0 = helpers_stringSlice__P119_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.p___5964;
    s.tmp_0.arg2 = s.q___5993;
    s.callLocIdx = 17; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.T___5992 = (r0);
// base/pxt-helpers.ts(469,21): A.push(T)
    r0 = pxsim_Array__push(s.A___5943, s.T___5992);
// base/pxt-helpers.ts(470,21): if (A.length == lim) return A;
    r0 = pxsim_Array__length(s.A___5943);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.lim___5945);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
// base/pxt-helpers.ts(470,42): return A;
    r0 = s.A___5943;
    { step = 21; continue; }
  case 16:
  case 17:
// base/pxt-helpers.ts(471,21): p = e
    s.p___5964 = (s.e___5999);
// base/pxt-helpers.ts(472,21): q = p
    s.q___5993 = (s.p___5964);
  case 18:
  case 19:
    { step = 13; continue; }
  case 20:
// base/pxt-helpers.ts(476,9): T = stringSlice(S, p, q)
    s.tmp_0 = helpers_stringSlice__P119_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.p___5964;
    s.tmp_0.arg2 = s.q___5993;
    s.callLocIdx = 18; s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
    s.T___5992 = (r0);
// base/pxt-helpers.ts(477,9): A.push(T)
    r0 = pxsim_Array__push(s.A___5943, s.T___5992);
// base/pxt-helpers.ts(478,9): return A;
    r0 = s.A___5943;
  case 21:
    return leave(s, r0)
  default: oops()
} } }
helpers_stringSplit__P122.info = {"start":12919,"length":1319,"line":434,"column":4,"endLine":478,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"stringSplit","argumentNames":["S","separator","limit"]}

function helpers_stringSplit__P122_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringSplit__P122, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  A___5943: undefined,
  lim___5945: undefined,
  s___5961: undefined,
  p___5964: undefined,
  R___5965: undefined,
  z___5979: undefined,
  T___5992: undefined,
  q___5993: undefined,
  e___5999: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_splitMatch__P2130(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___6044 = undefined;
    s.s___6047 = undefined;
    s.i___6057 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(482,15): r = R.length
    r0 = pxsim_String_.length(s.arg2);
    s.r___6044 = (r0);
// base/pxt-helpers.ts(483,15): s = S.length
    r0 = pxsim_String_.length(s.arg0);
    s.s___6047 = (r0);
// base/pxt-helpers.ts(484,9): if (q + r > s) return -1;
    r0 = (s.arg1 + s.r___6044);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.s___6047);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/pxt-helpers.ts(484,24): return -1;
    r0 = -1;
    { step = 7; continue; }
  case 1:
  case 2:
// base/pxt-helpers.ts(485,18): i = 0
    s.i___6057 = (0);
// base/pxt-helpers.ts(485,9): for (let i = 0; i < r; ++i) {...
  case 3:
// base/pxt-helpers.ts(485,25): i < r
    r0 = (s.i___6057 < s.r___6044);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/pxt-helpers.ts(486,13): if (S[q + i] != R[i])...
    s.tmp_3 = r0 = s.arg0;
    r0 = (s.arg1 + s.i___6057);
    s.tmp_4 = r0;
    r0 = pxsim_String_.charAt(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_String_.charAt(s.arg2, s.i___6057);
    s.tmp_5 = r0;
    r0 = (s.tmp_2 != s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(487,17): return -1;
    r0 = -1;
    { step = 7; continue; }
  case 4:
  case 5:
// base/pxt-helpers.ts(485,32): ++i
    r0 = (s.i___6057 + 1);
    s.i___6057 = (r0);
    { step = 3; continue; }
  case 6:
// base/pxt-helpers.ts(489,9): return q + r;
    r0 = (s.arg1 + s.r___6044);
  case 7:
    return leave(s, r0)
  default: oops()
} } }
helpers_splitMatch__P2130.info = {"start":14244,"length":289,"line":480,"column":4,"endLine":489,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"splitMatch","argumentNames":["S","q","R"]}

function helpers_splitMatch__P2130_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_splitMatch__P2130, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  r___6044: undefined,
  s___6047: undefined,
  i___6057: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function settings_SecretStore_constructor__P1095(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, settings_SecretStore__C1094_VT)) failedCast(r0);
    r0 = (s.arg0).fields["key"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_SecretStore_constructor__P1095.info = {"start":4917,"length":36,"line":199,"column":8,"endLine":199,"endColumn":44,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"inline","argumentNames":["this","key"]}

function settings_SecretStore_constructor__P1095_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_SecretStore_constructor__P1095, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function settings_SecretStore_readSecret__P1098(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.secrets___6085 = undefined;
    s.secret___6088 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, settings_SecretStore__C1094_VT)) failedCast(r0);
// settings---esp32/settings.ts(218,19): secrets = this.readSecrets()
    s.tmp_0 = settings_SecretStore_readSecrets__P1100_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 156; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.secrets___6085 = (r0);
// settings---esp32/settings.ts(219,19): secret = secrets[name]
    r0 = pxsim_pxtrt.mapGetGeneric(s.secrets___6085, s.arg1);
    s.secret___6088 = (r0);
// settings---esp32/settings.ts(220,13): if (ensure && !secret)...
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.secret___6088);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
// settings---esp32/settings.ts(221,17): throw "missing secret " + name;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("missing secret ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_pxtcore.throwValue(s.tmp_3);
  case 3:
  case 4:
// settings---esp32/settings.ts(222,13): return secret;
    r0 = s.secret___6088;
    return leave(s, r0)
  default: oops()
} } }
settings_SecretStore_readSecret__P1098.info = {"start":5460,"length":266,"line":216,"column":8,"endLine":222,"endColumn":9,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readSecret","argumentNames":["this","name","ensure"]}

function settings_SecretStore_readSecret__P1098_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_SecretStore_readSecret__P1098, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  secrets___6085: undefined,
  secret___6088: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function azureiot_hubDeviceId__P1345(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// azureiot/azureiot.ts(48,9): return connectionStringPart("DeviceId")
    s.tmp_0 = azureiot_connectionStringPart__P2299_mk(s);
    s.tmp_0.arg0 = "DeviceId";
    s.callLocIdx = 476; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
azureiot_hubDeviceId__P1345.info = {"start":1425,"length":85,"line":46,"column":4,"endLine":48,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"hubDeviceId","argumentNames":[]}

function azureiot_hubDeviceId__P1345_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_hubDeviceId__P1345, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function azureiot_connectionStringPart__P2299(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.connStringParts___6104 = undefined;
    s.value___6107 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(129,15): connStringParts = parseConnectionString()
    s.tmp_0 = azureiot_parseConnectionString__P2298_mk(s);
    s.callLocIdx = 509; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.connStringParts___6104 = (r0);
// azureiot/azureiot.ts(130,15): value = connStringParts[name]
    r0 = pxsim_pxtrt.mapGetGeneric(s.connStringParts___6104, s.arg0);
    s.value___6107 = (r0);
// azureiot/azureiot.ts(131,9): return value || ""
    s.tmp_0 = r0 = s.value___6107;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.mkEmpty();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
azureiot_connectionStringPart__P2299.info = {"start":4318,"length":179,"line":127,"column":4,"endLine":131,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"connectionStringPart","argumentNames":["name"]}

function azureiot_connectionStringPart__P2299_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_connectionStringPart__P2299, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  connStringParts___6104: undefined,
  value___6107: undefined,
  arg0: undefined,
} }





function azureiot_hubName__P1344(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// azureiot/azureiot.ts(44,9): return connectionStringPart("HostName")
    s.tmp_0 = azureiot_connectionStringPart__P2299_mk(s);
    s.tmp_0.arg0 = "HostName";
    s.callLocIdx = 475; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
azureiot_hubName__P1344.info = {"start":1338,"length":81,"line":42,"column":4,"endLine":44,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"hubName","argumentNames":[]}

function azureiot_hubName__P1344_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_hubName__P1344, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function azureiot_messageBusId__P2294(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// azureiot/azureiot.ts(52,9): if (!_messageBusId)...
    r0 = pxsim_numops_toBoolDecr(globals._messageBusId___2288);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(53,13): _messageBusId = control.allocateEventSource()
    s.tmp_2 = control_allocateEventSource__P332_mk(s);
    s.callLocIdx = 477; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    globals._messageBusId___2288 = (r0);
  case 1:
  case 2:
// azureiot/azureiot.ts(54,9): return _messageBusId
    r0 = globals._messageBusId___2288;
    return leave(s, r0)
  default: oops()
} } }
azureiot_messageBusId__P2294.info = {"start":1516,"length":147,"line":50,"column":4,"endLine":54,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"messageBusId","argumentNames":[]}

function azureiot_messageBusId__P2294_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_messageBusId__P2294, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function control_allocateEventSource__P332(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// base/control.ts(87,9): return ++_evSource
    r0 = (globals._evSource___2169 + 1);
    s.tmp_0 = r0;
    globals._evSource___2169 = (r0);
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
control_allocateEventSource__P332.info = {"start":2528,"length":72,"line":85,"column":4,"endLine":87,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"allocateEventSource","argumentNames":[]}

function control_allocateEventSource__P332_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_allocateEventSource__P332, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_twins_DeviceTwin_serialize__P2652(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.serv___6125 = undefined;
    s.unnamed186___U1 = undefined;
    s.unnamed187___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2649_VT)) failedCast(r0);
// twins.ts(307,24): serv
    s.serv___6125 = (undefined);
    r0 = s.arg0.fields["services"];
    s.unnamed186___U1 = (r0);
    s.unnamed187___U2 = (0);
// twins.ts(307,13): for (const serv of this.services) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed187___U2;
    r0 = pxsim_Array__length(s.unnamed186___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed186___U1, s.unnamed187___U2);
    s.serv___6125 = (r0);
// twins.ts(308,17): if (serv) serv.serialize(now)
    r0 = pxsim_numops_toBoolDecr(s.serv___6125);
    if (!r0) { step = 2; continue; }
// twins.ts(308,27): serv.serialize(now)
    s.tmp_2 = jacdac_twins_ServiceTwin_serialize__P2629_mk(s);
    s.tmp_2.arg0 = s.serv___6125;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 1282; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
  case 2:
  case 3:
    r0 = (s.unnamed187___U2 + 1);
    s.unnamed187___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed186___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_serialize__P2652.info = {"start":10074,"length":142,"line":305,"column":8,"endLine":309,"endColumn":9,"fileName":"twins.ts","functionName":"serialize","argumentNames":["this","now"]}

function jacdac_twins_DeviceTwin_serialize__P2652_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_serialize__P2652, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  serv___6125: undefined,
  unnamed186___U1: undefined,
  unnamed187___U2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_ServiceTwin_serialize__P2629(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___6139 = undefined;
    s.buf___6142 = undefined;
    s.i___6146 = undefined;
    s.ts___6151 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2628_VT)) failedCast(r0);
// twins.ts(73,13): if (!this.readingPtr) return
    r0 = s.arg0.fields["readingPtr"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// twins.ts(73,35): return
    { step = 7; continue; }
  case 1:
  case 2:
// twins.ts(75,19): len = this.readingPtr
    r0 = s.arg0.fields["readingPtr"];
    s.len___6139 = (r0);
// twins.ts(76,19): buf = this.readingBuffer
    r0 = s.arg0.fields["readingBuffer"];
    s.buf___6142 = (r0);
// twins.ts(77,22): i = 0
    s.i___6146 = (0);
// twins.ts(77,13): for (let i = 0; i < len; i += 8) {...
  case 3:
// twins.ts(77,29): i < len
    r0 = (s.i___6146 < s.len___6139);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// twins.ts(78,23): ts = buf.getNumber(NumberFormat.UInt32LE, i)
    r0 = pxsim.BufferMethods.getNumber(s.buf___6142, 11, s.i___6146);
    s.ts___6151 = (r0);
// twins.ts(79,17): buf.setNumber(NumberFormat.UInt32LE, i, now - ts)
    s.tmp_0 = r0 = s.buf___6142;
    s.tmp_1 = r0 = s.i___6146;
    r0 = (s.arg1 - s.ts___6151);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, s.tmp_1, s.tmp_2);
// twins.ts(77,38): i += 8
    r0 = (s.i___6146 + 8);
    s.i___6146 = (r0);
    { step = 3; continue; }
  case 4:
// twins.ts(81,13): writeBuffer(this.header)
    s.tmp_0 = jacdac_twins_writeBuffer__P2622_mk(s);
    r0 = s.arg0.fields["header"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1211; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// twins.ts(82,13): writeBuffer(jdpack("u32", [this.readingPtr]))
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = s.arg0.fields["readingPtr"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    s.tmp_2 = jacdac_twins_writeBuffer__P2622_mk(s);
    s.tmp_3 = jacdac_jdpack__P1468_mk(s);
    s.tmp_3.arg0 = "u32";
    s.tmp_3.arg1 = s.tmp_0;
    s.callLocIdx = 1212; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 1213; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
// twins.ts(83,13): writeBuffer(buf.slice(0, this.readingPtr))
    s.tmp_0 = jacdac_twins_writeBuffer__P2622_mk(s);
    r0 = s.arg0.fields["readingPtr"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.buf___6142, 0, s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1214; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
// twins.ts(84,13): this.readingPtr = 0
    r0 = (s.arg0).fields["readingPtr"] = (0);
// twins.ts(85,13): if (len < this.readingBuffer.length >> 1) this.readingBuffer = null
    s.tmp_1 = r0 = s.len___6139;
    r0 = s.arg0.fields["readingBuffer"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_4);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 >> 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// twins.ts(85,55): this.readingBuffer = null
    r0 = (s.arg0).fields["readingBuffer"] = (null);
  case 5:
  case 6:
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_serialize__P2629.info = {"start":1977,"length":623,"line":71,"column":8,"endLine":85,"endColumn":9,"fileName":"twins.ts","functionName":"serialize","argumentNames":["this","now"]}

function jacdac_twins_ServiceTwin_serialize__P2629_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_serialize__P2629, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___6139: undefined,
  buf___6142: undefined,
  i___6146: undefined,
  ts___6151: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdpack__P1468(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___6203 = undefined;
    s.res___6209 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/pack.ts(305,9): if (!fmt || !data) return undefined
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// jacdac/pack.ts(305,28): return undefined
    r0 = undefined;
    { step = 5; continue; }
  case 3:
  case 4:
// jacdac/pack.ts(316,15): len = jdpackCore(null, fmt, data, 0)
    s.tmp_4 = jacdac_jdpackCore__P2369_mk(s);
    s.tmp_4.arg0 = null;
    s.tmp_4.arg1 = s.arg0;
    s.tmp_4.arg2 = s.arg1;
    s.tmp_4.arg3 = 0;
    s.callLocIdx = 692; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.len___6203 = (r0);
// jacdac/pack.ts(317,15): res = Buffer.create(len)
    r0 = pxsim.control.createBuffer(s.len___6203);
    s.res___6209 = (r0);
// jacdac/pack.ts(318,9): jdpackCore(res, fmt, data, 0)
    s.tmp_0 = jacdac_jdpackCore__P2369_mk(s);
    s.tmp_0.arg0 = s.res___6209;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = 0;
    s.callLocIdx = 693; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// jacdac/pack.ts(319,9): return res
    r0 = s.res___6209;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdpack__P1468.info = {"start":9941,"length":582,"line":303,"column":4,"endLine":319,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdpack","argumentNames":["fmt","data"]}

function jacdac_jdpack__P1468_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdpack__P1468, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___6203: undefined,
  res___6209: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdpackCore__P2369(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idx___6222 = undefined;
    s.parser___6223 = undefined;
    s.c0___6230 = undefined;
    s.dataItem___6243 = undefined;
    s.fmt0___6251 = undefined;
    s.velt___6260 = undefined;
    s.unnamed138___U6 = undefined;
    s.unnamed139___U7 = undefined;
    s.arr___6269 = undefined;
    s.v___6279 = undefined;
    s.unnamed140___U10 = undefined;
    s.unnamed141___U11 = undefined;
    s.vp___6296 = undefined;
    s.vp32___6313 = undefined;
    s.buf___6332 = undefined;
    s.sz___6367 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
// jacdac/pack.ts(229,13): idx = 0
    s.idx___6222 = (0);
// jacdac/pack.ts(230,15): parser = new TokenParser(fmt)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_TokenParser__C2365_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_TokenParser_constructor__P2367_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 685; s.pc = 43; return s.tmp_1;
  case 43:
    r0 = s.retval;
    s.parser___6223 = (s.tmp_0);
// jacdac/pack.ts(231,9): while (parser.parse()) {...
  case 1:
// jacdac/pack.ts(231,16): parser.parse()
    s.tmp_1 = jacdac_TokenParser_parse__P2366_mk(s);
    s.tmp_1.arg0 = s.parser___6223;
    s.callLocIdx = 686; s.pc = 44; return s.tmp_1;
  case 44:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 40; continue; }
// jacdac/pack.ts(232,19): c0 = parser.c0
    r0 = s.parser___6223.fields["c0"];
    s.c0___6230 = (r0);
// jacdac/pack.ts(234,13): if (c0 == ch_x) {...
    r0 = (s.c0___6230 == 120);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// jacdac/pack.ts(236,1): off += parser.size
    r0 = s.parser___6223.fields["size"];
    s.tmp_1 = r0;
    r0 = (s.arg3 + s.tmp_1);
    s.arg3 = (r0);
// jacdac/pack.ts(237,17): continue
    { step = 1; continue; }
  case 2:
  case 3:
// jacdac/pack.ts(240,17): dataItem = data[idx++]
    s.tmp_0 = r0 = s.idx___6222;
    r0 = (s.tmp_0 + 1);
    s.idx___6222 = (r0);
    r0 = pxsim_Array__getAt(s.arg2, s.tmp_0);
    s.dataItem___6243 = (r0);
// jacdac/pack.ts(242,13): if (c0 == ch_r) {...
    r0 = (s.c0___6230 == 114);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// jacdac/pack.ts(243,23): fmt0 = fmt.slice(parser.fp)
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_1.arg0 = s.arg1;
    r0 = s.parser___6223.fields["fp"];
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 687; s.pc = 45; return s.tmp_1;
  case 45:
    r0 = s.retval;
    s.fmt0___6251 = (r0);
// jacdac/pack.ts(244,28): velt
    s.velt___6260 = (undefined);
    s.unnamed138___U6 = (s.dataItem___6243);
    s.unnamed139___U7 = (0);
// jacdac/pack.ts(244,17): for (const velt of dataItem as any[][]) {...
  case 4:
    s.tmp_0 = r0 = s.unnamed139___U7;
    r0 = pxsim_Array__length(s.unnamed138___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 5; continue; }
    r0 = pxsim_Array__getAt(s.unnamed138___U6, s.unnamed139___U7);
    s.velt___6260 = (r0);
// jacdac/pack.ts(245,21): off = jdpackCore(trg, fmt0, velt, off)
    s.tmp_2 = jacdac_jdpackCore__P2369_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.fmt0___6251;
    s.tmp_2.arg2 = s.velt___6260;
    s.tmp_2.arg3 = s.arg3;
    s.callLocIdx = 688; s.pc = 46; return s.tmp_2;
  case 46:
    r0 = s.retval;
    s.arg3 = (r0);
    r0 = (s.unnamed139___U7 + 1);
    s.unnamed139___U7 = (r0);
    { step = 4; continue; }
  case 5:
    s.unnamed138___U6 = (undefined);
// jacdac/pack.ts(247,17): break
    { step = 40; continue; }
  case 6:
  case 7:
// jacdac/pack.ts(251,17): arr: any[]
    s.arr___6269 = (undefined);
// jacdac/pack.ts(252,13): if (parser.isArray) arr = dataItem...
    r0 = s.parser___6223.fields["isArray"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// jacdac/pack.ts(252,33): arr = dataItem
    s.arr___6269 = (s.dataItem___6243);
    { step = 9; continue; }
  case 8:
// jacdac/pack.ts(253,18): arr = [dataItem]
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.dataItem___6243);
    s.arr___6269 = (s.tmp_0);
  case 9:
// jacdac/pack.ts(255,24): v
    s.v___6279 = (undefined);
    s.unnamed140___U10 = (s.arr___6269);
    s.unnamed141___U11 = (0);
// jacdac/pack.ts(255,13): for (const v of arr) {...
  case 10:
    s.tmp_0 = r0 = s.unnamed141___U11;
    r0 = pxsim_Array__length(s.unnamed140___U10);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 39; continue; }
    r0 = pxsim_Array__getAt(s.unnamed140___U10, s.unnamed141___U11);
    s.v___6279 = (r0);
// jacdac/pack.ts(256,17): if (parser.nfmt !== null) {...
    r0 = s.parser___6223.fields["nfmt"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 !== null);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 17; continue; }
// jacdac/pack.ts(257,21): if (typeof v != "number")...
    r0 = pxsim_pxtcore.typeOf(s.v___6279);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 != "number");
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 11; continue; }
// jacdac/pack.ts(258,25): throw `expecting number, got ` + typeof v
    r0 = pxsim_pxtcore.typeOf(s.v___6279);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 47);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 47:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat("expecting number, got ", s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_pxtcore.throwValue(s.tmp_6);
  case 11:
  case 12:
// jacdac/pack.ts(259,21): if (trg) {...
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 15; continue; }
// jacdac/pack.ts(260,31): vp = v * parser.div
    r0 = s.parser___6223.fields["div"];
    s.tmp_9 = r0;
    r0 = (s.v___6279 * s.tmp_9);
    s.vp___6296 = (r0);
// jacdac/pack.ts(261,25): trg.setNumber(parser.nfmt, off, vp | 0)
    s.tmp_0 = r0 = s.arg0;
    r0 = s.parser___6223.fields["nfmt"];
    s.tmp_1 = r0;
    s.tmp_2 = r0 = s.arg3;
    r0 = (s.vp___6296 | 0);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.tmp_3);
// jacdac/pack.ts(262,25): if (parser.nfmt2) {...
    r0 = s.parser___6223.fields["nfmt2"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// jacdac/pack.ts(263,33): vp32 = Math.floor(vp / 4294967296)
    r0 = (s.vp___6296 / 4294967296);
    s.tmp_1 = r0;
    r0 = pxsim.Math_.floor(s.tmp_1);
    s.vp32___6313 = (r0);
// jacdac/pack.ts(264,29): trg.setNumber(parser.nfmt, off + 4, vp32)
    s.tmp_0 = r0 = s.arg0;
    r0 = s.parser___6223.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.arg3 + 4);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.vp32___6313);
  case 13:
  case 14:
  case 15:
  case 16:
// jacdac/pack.ts(267,21): off += parser.size
    r0 = s.parser___6223.fields["size"];
    s.tmp_0 = r0;
    r0 = (s.arg3 + s.tmp_0);
    s.arg3 = (r0);
    { step = 38; continue; }
  case 17:
// jacdac/pack.ts(269,25): buf: Buffer
    s.buf___6332 = (undefined);
// jacdac/pack.ts(270,21): if (typeof v == "string") {...
    r0 = pxsim_pxtcore.typeOf(s.v___6279);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
// jacdac/pack.ts(271,25): if (c0 == ch_z) buf = stringToBuffer(v + "\u0000")...
    r0 = (s.c0___6230 == 122);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 18; continue; }
// jacdac/pack.ts(271,41): buf = stringToBuffer(v + "\u0000")
    s.tmp_3 = jacdac_stringToBuffer__P2363_mk(s);
    if ((s.v___6279) && (s.v___6279).vtable) {
    setupResume(s, 49);
    pxsim_String__stringConv(s.v___6279);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.v___6279) + ""; }
  case 49:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "\u0000");
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 689; s.pc = 48; return s.tmp_3;
  case 48:
    r0 = s.retval;
    s.buf___6332 = (r0);
    { step = 21; continue; }
  case 18:
// jacdac/pack.ts(272,30): if (c0 == ch_s) buf = stringToBuffer(v)...
    r0 = (s.c0___6230 == 115);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
// jacdac/pack.ts(272,46): buf = stringToBuffer(v)
    s.tmp_1 = jacdac_stringToBuffer__P2363_mk(s);
    s.tmp_1.arg0 = s.v___6279;
    s.callLocIdx = 690; s.pc = 50; return s.tmp_1;
  case 50:
    r0 = s.retval;
    s.buf___6332 = (r0);
    { step = 20; continue; }
  case 19:
// jacdac/pack.ts(273,30): throw `unexpected string`
    r0 = pxsim_pxtcore.throwValue("unexpected string");
  case 20:
  case 21:
    { step = 31; continue; }
  case 22:
// jacdac/pack.ts(274,28): if (...
    s.tmp_0 = r0 = s.v___6279;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 23; continue; }
    r0 = s.tmp_0;
    { step = 24; continue; }
  case 23:
    r0 = pxsim_pxtcore.typeOf(s.v___6279);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "object");
  case 24:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 25; continue; }
    r0 = s.tmp_2;
    { step = 26; continue; }
  case 25:
    r0 = pxsim.BufferMethods.length(s.v___6279);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != null);
  case 26:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 29; continue; }
// jacdac/pack.ts(280,1): if (c0 == ch_b) buf = v...
    r0 = (s.c0___6230 == 98);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 27; continue; }
// jacdac/pack.ts(280,41): buf = v
    s.buf___6332 = (s.v___6279);
    { step = 28; continue; }
  case 27:
// jacdac/pack.ts(281,30): throw `unexpected buffer`
    r0 = pxsim_pxtcore.throwValue("unexpected buffer");
  case 28:
    { step = 30; continue; }
  case 29:
// jacdac/pack.ts(283,25): throw `expecting string or buffer`
    r0 = pxsim_pxtcore.throwValue("expecting string or buffer");
  case 30:
  case 31:
// jacdac/pack.ts(286,25): sz = parser.size
    r0 = s.parser___6223.fields["size"];
    s.sz___6367 = (r0);
// jacdac/pack.ts(287,21): if (sz >= 0) {...
    r0 = (s.sz___6367 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 34; continue; }
// jacdac/pack.ts(288,25): if (buf.length > sz) buf = bufferSlice(buf, 0, sz)
    r0 = pxsim.BufferMethods.length(s.buf___6332);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > s.sz___6367);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 32; continue; }
// jacdac/pack.ts(288,46): buf = bufferSlice(buf, 0, sz)
    s.tmp_3 = jacdac_bufferSlice__P2364_mk(s);
    s.tmp_3.arg0 = s.buf___6332;
    s.tmp_3.arg1 = 0;
    s.tmp_3.arg2 = s.sz___6367;
    s.callLocIdx = 691; s.pc = 51; return s.tmp_3;
  case 51:
    r0 = s.retval;
    s.buf___6332 = (r0);
  case 32:
  case 33:
    { step = 35; continue; }
  case 34:
// jacdac/pack.ts(290,25): sz = buf.length
    r0 = pxsim.BufferMethods.length(s.buf___6332);
    s.sz___6367 = (r0);
  case 35:
// jacdac/pack.ts(293,21): if (trg) trg.write(off, buf)
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 36; continue; }
// jacdac/pack.ts(293,30): trg.write(off, buf)
    r0 = pxsim.BufferMethods.write(s.arg0, s.arg3, s.buf___6332);
  case 36:
  case 37:
// jacdac/pack.ts(294,21): off += sz
    r0 = (s.arg3 + s.sz___6367);
    s.arg3 = (r0);
  case 38:
    r0 = (s.unnamed141___U11 + 1);
    s.unnamed141___U11 = (r0);
    { step = 10; continue; }
  case 39:
    s.unnamed140___U10 = (undefined);
    { step = 1; continue; }
  case 40:
// jacdac/pack.ts(299,9): if (data.length > idx) throw `format too short`
    r0 = pxsim_Array__length(s.arg2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.idx___6222);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 41; continue; }
// jacdac/pack.ts(299,32): throw `format too short`
    r0 = pxsim_pxtcore.throwValue("format too short");
  case 41:
  case 42:
// jacdac/pack.ts(301,9): return off
    r0 = s.arg3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdpackCore__P2369.info = {"start":7326,"length":2609,"line":227,"column":4,"endLine":301,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdpackCore","argumentNames":["trg","fmt","data","off"]}

function jacdac_jdpackCore__P2369_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdpackCore__P2369, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  idx___6222: undefined,
  parser___6223: undefined,
  c0___6230: undefined,
  dataItem___6243: undefined,
  fmt0___6251: undefined,
  velt___6260: undefined,
  unnamed138___U6: undefined,
  unnamed139___U7: undefined,
  arr___6269: undefined,
  v___6279: undefined,
  unnamed140___U10: undefined,
  unnamed141___U11: undefined,
  vp___6296: undefined,
  vp32___6313: undefined,
  buf___6332: undefined,
  sz___6367: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_bufferSlice__P2364(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// jacdac/pack.ts(52,9): return buf.slice(start, end - start)
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = (s.arg2 - s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, s.tmp_1, s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_bufferSlice__P2364.info = {"start":1363,"length":114,"line":50,"column":4,"endLine":52,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"bufferSlice","argumentNames":["buf","start","end"]}

function jacdac_bufferSlice__P2364_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_bufferSlice__P2364, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_stringToBuffer__P2363(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/pack.ts(48,9): return Buffer.fromUTF8(str)
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_stringToBuffer__P2363.info = {"start":1277,"length":80,"line":46,"column":4,"endLine":48,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"stringToBuffer","argumentNames":["str"]}

function jacdac_stringToBuffer__P2363_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_stringToBuffer__P2363, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_TokenParser_parse__P2366(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.fmt___6417 = undefined;
    s.endp___6427 = undefined;
    s.word___6443 = undefined;
    s.dotIdx___6456 = undefined;
    s.c0___6462 = undefined;
    s.sz0___6477 = undefined;
    s.sz1___6485 = undefined;
    s.c1___6511 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_TokenParser__C2365_VT)) failedCast(r0);
// jacdac/pack.ts(68,13): this.div = 1
    r0 = (s.arg0).fields["div"] = (1);
// jacdac/pack.ts(69,13): this.isArray = false
    r0 = (s.arg0).fields["isArray"] = (false);
// jacdac/pack.ts(71,19): fmt = this.fmt
    r0 = s.arg0.fields["fmt"];
    s.fmt___6417 = (r0);
// jacdac/pack.ts(72,13): while (this.fp < fmt.length) {...
  case 1:
// jacdac/pack.ts(72,20): this.fp < fmt.length
    r0 = s.arg0.fields["fp"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.length(s.fmt___6417);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 50; continue; }
// jacdac/pack.ts(73,21): endp = this.fp
    r0 = s.arg0.fields["fp"];
    s.endp___6427 = (r0);
// jacdac/pack.ts(74,17): while (endp < fmt.length && fmt.charCodeAt(endp) != 32) endp++
  case 2:
// jacdac/pack.ts(74,24): endp < fmt.length && fmt.charCodeAt(endp) != 32
    s.tmp_1 = r0 = s.endp___6427;
    r0 = pxsim_String_.length(s.fmt___6417);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.charCodeAt(s.fmt___6417, s.endp___6427);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 32);
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
// jacdac/pack.ts(74,73): endp++
    r0 = (s.endp___6427 + 1);
    s.endp___6427 = (r0);
    { step = 2; continue; }
  case 5:
// jacdac/pack.ts(75,21): word = fmt.slice(this.fp, endp)
    s.tmp_0 = helpers_stringSlice__P119_mk(s);
    s.tmp_0.arg0 = s.fmt___6417;
    r0 = s.arg0.fields["fp"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.endp___6427;
    s.callLocIdx = 664; s.pc = 52; return s.tmp_0;
  case 52:
    r0 = s.retval;
    s.word___6443 = (r0);
// jacdac/pack.ts(76,17): this.fp = endp + 1
    s.tmp_0 = r0 = s.arg0;
    r0 = (s.endp___6427 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["fp"] = (s.tmp_1);
// jacdac/pack.ts(77,17): if (!word) continue
    r0 = pxsim_numops_toBoolDecr(s.word___6443);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// jacdac/pack.ts(77,28): continue
    { step = 1; continue; }
  case 6:
  case 7:
// jacdac/pack.ts(79,23): dotIdx = word.indexOf(".")
    r0 = pxsim_String_.indexOf(s.word___6443, ".", undefined);
    s.dotIdx___6456 = (r0);
// jacdac/pack.ts(80,21): c0 = word.charCodeAt(0)
    r0 = pxsim_String_.charCodeAt(s.word___6443, 0);
    s.c0___6462 = (r0);
// jacdac/pack.ts(82,1): if ((c0 == ch_i || c0 == ch_u) && dotIdx >= 0) {
    r0 = (s.c0___6462 == 105);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 8:
    r0 = (s.c0___6462 == 117);
  case 9:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_1;
    { step = 11; continue; }
  case 10:
    r0 = (s.dotIdx___6456 >= 0);
  case 11:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 12; continue; }
// jacdac/pack.ts(83,27): sz0 = parseInt(word.slice(1, dotIdx))
    s.tmp_3 = parseInt__P97_mk(s);
    s.tmp_4 = helpers_stringSlice__P119_mk(s);
    s.tmp_4.arg0 = s.word___6443;
    s.tmp_4.arg1 = 1;
    s.tmp_4.arg2 = s.dotIdx___6456;
    s.callLocIdx = 665; s.pc = 54; return s.tmp_4;
  case 54:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = undefined;
    s.callLocIdx = 666; s.pc = 53; return s.tmp_3;
  case 53:
    r0 = s.retval;
    s.sz0___6477 = (r0);
// jacdac/pack.ts(84,27): sz1 = parseInt(word.slice(dotIdx + 1))
    s.tmp_0 = parseInt__P97_mk(s);
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_1.arg0 = s.word___6443;
    r0 = (s.dotIdx___6456 + 1);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 667; s.pc = 56; return s.tmp_1;
  case 56:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 668; s.pc = 55; return s.tmp_0;
  case 55:
    r0 = s.retval;
    s.sz1___6485 = (r0);
// jacdac/pack.ts(85,21): word = word[0] + (sz0 + sz1)
    r0 = pxsim_String_.charAt(s.word___6443, 0);
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 57);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 57:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.sz0___6477 + s.sz1___6485);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 58);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 58:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_2);
    s.word___6443 = (r0);
// jacdac/pack.ts(86,21): this.div = 1 << sz1
    s.tmp_0 = r0 = s.arg0;
    r0 = (1 << s.sz1___6485);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["div"] = (s.tmp_1);
  case 12:
  case 13:
// jacdac/pack.ts(89,23): c1 = word.charCodeAt(1)
    r0 = pxsim_String_.charCodeAt(s.word___6443, 1);
    s.c1___6511 = (r0);
// jacdac/pack.ts(90,17): if (c1 == ch_sq_open) {...
    r0 = (s.c1___6511 == 91);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// jacdac/pack.ts(91,21): this.size = parseInt(word.slice(2))
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = parseInt__P97_mk(s);
    s.tmp_4 = helpers_stringSlice__P119_mk(s);
    s.tmp_4.arg0 = s.word___6443;
    s.tmp_4.arg1 = 2;
    s.tmp_4.arg2 = undefined;
    s.callLocIdx = 669; s.pc = 60; return s.tmp_4;
  case 60:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = undefined;
    s.callLocIdx = 670; s.pc = 59; return s.tmp_3;
  case 59:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["size"] = (s.tmp_2);
    { step = 15; continue; }
  case 14:
// jacdac/pack.ts(93,21): this.size = -1
    r0 = (s.arg0).fields["size"] = (-1);
  case 15:
// jacdac/pack.ts(96,17): if (...
    s.tmp_2 = r0 = s.word___6443;
    r0 = pxsim_String_.length(s.word___6443);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - 1);
    s.tmp_3 = r0;
    r0 = pxsim_String_.charCodeAt(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 93);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 16:
    s.tmp_6 = r0 = s.word___6443;
    r0 = pxsim_String_.length(s.word___6443);
    s.tmp_8 = r0;
    r0 = (s.tmp_8 - 2);
    s.tmp_7 = r0;
    r0 = pxsim_String_.charCodeAt(s.tmp_6, s.tmp_7);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == 91);
  case 17:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    if (!r0) { step = 18; continue; }
// jacdac/pack.ts(100,21): word = word.slice(0, -2)
    s.tmp_10 = helpers_stringSlice__P119_mk(s);
    s.tmp_10.arg0 = s.word___6443;
    s.tmp_10.arg1 = 0;
    s.tmp_10.arg2 = -2;
    s.callLocIdx = 671; s.pc = 61; return s.tmp_10;
  case 61:
    r0 = s.retval;
    s.word___6443 = (r0);
// jacdac/pack.ts(101,21): this.isArray = true
    r0 = (s.arg0).fields["isArray"] = (true);
  case 18:
  case 19:
// jacdac/pack.ts(104,17): this.nfmt2 = null
    r0 = (s.arg0).fields["nfmt2"] = (null);
// jacdac/pack.ts(105,17): this.nfmt = numberFormatOfType(word)
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_numberFormatOfType__P2361_mk(s);
    s.tmp_2.arg0 = s.word___6443;
    s.callLocIdx = 672; s.pc = 62; return s.tmp_2;
  case 62:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nfmt"] = (s.tmp_1);
// jacdac/pack.ts(106,17): if (this.nfmt == null) {...
    r0 = s.arg0.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 24; continue; }
// jacdac/pack.ts(107,21): if (word == "u64") {...
    r0 = (s.word___6443 == "u64");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
// jacdac/pack.ts(108,25): this.nfmt = NumberFormat.UInt32LE
    r0 = (s.arg0).fields["nfmt"] = (11);
// jacdac/pack.ts(109,25): this.nfmt2 = true
    r0 = (s.arg0).fields["nfmt2"] = (true);
    { step = 23; continue; }
  case 20:
// jacdac/pack.ts(110,28): if (word == "i64") {...
    r0 = (s.word___6443 == "i64");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
// jacdac/pack.ts(111,25): this.nfmt = NumberFormat.Int32LE
    r0 = (s.arg0).fields["nfmt"] = (5);
// jacdac/pack.ts(112,25): this.nfmt2 = true
    r0 = (s.arg0).fields["nfmt2"] = (true);
  case 21:
  case 22:
  case 23:
  case 24:
  case 25:
// jacdac/pack.ts(115,17): this.word = word
    r0 = (s.arg0).fields["word"] = (s.word___6443);
// jacdac/pack.ts(117,17): if (this.nfmt == null) {...
    r0 = s.arg0.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 46; continue; }
// jacdac/pack.ts(118,21): if (c0 == ch_r) {...
    r0 = (s.c0___6462 == 114);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 28; continue; }
// jacdac/pack.ts(119,25): if (c1 != ch_colon) c0 = 0
    r0 = (s.c1___6511 != 58);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 26; continue; }
// jacdac/pack.ts(119,45): c0 = 0
    s.c0___6462 = (0);
  case 26:
  case 27:
    { step = 43; continue; }
  case 28:
// jacdac/pack.ts(120,28): if (c0 == ch_s || c0 == ch_b || c0 == ch_x) {...
    r0 = (s.c0___6462 == 115);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 29; continue; }
    r0 = s.tmp_0;
    { step = 30; continue; }
  case 29:
    r0 = (s.c0___6462 == 98);
  case 30:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 31; continue; }
    r0 = s.tmp_1;
    { step = 32; continue; }
  case 31:
    r0 = (s.c0___6462 == 120);
  case 32:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 37; continue; }
// jacdac/pack.ts(121,25): if (word.length != 1 && this.size == -1) c0 = 0
    r0 = pxsim_String_.length(s.word___6443);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 != 1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 33; continue; }
    r0 = s.tmp_3;
    { step = 34; continue; }
  case 33:
    r0 = s.arg0.fields["size"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == -1);
  case 34:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 35; continue; }
// jacdac/pack.ts(121,66): c0 = 0
    s.c0___6462 = (0);
  case 35:
  case 36:
    { step = 42; continue; }
  case 37:
// jacdac/pack.ts(122,28): if (c0 == ch_z) {...
    r0 = (s.c0___6462 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 40; continue; }
// jacdac/pack.ts(123,25): if (word.length != 1) c0 = 0
    r0 = pxsim_String_.length(s.word___6443);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 != 1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 38; continue; }
// jacdac/pack.ts(123,47): c0 = 0
    s.c0___6462 = (0);
  case 38:
  case 39:
    { step = 41; continue; }
  case 40:
// jacdac/pack.ts(125,25): c0 = 0
    s.c0___6462 = (0);
  case 41:
  case 42:
  case 43:
// jacdac/pack.ts(127,21): if (c0 == 0) throw `invalid format: ${word}`
    r0 = (s.c0___6462 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 44; continue; }
// jacdac/pack.ts(127,34): throw `invalid format: ${word}`
    if ((s.word___6443) && (s.word___6443).vtable) {
    setupResume(s, 63);
    pxsim_String__stringConv(s.word___6443);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.word___6443) + ""; }
  case 63:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("invalid format: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_pxtcore.throwValue(s.tmp_1);
  case 44:
  case 45:
// jacdac/pack.ts(128,21): this.c0 = c0
    r0 = (s.arg0).fields["c0"] = (s.c0___6462);
    { step = 49; continue; }
  case 46:
// jacdac/pack.ts(130,21): this.size = Buffer.sizeOfNumberFormat(this.nfmt)
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = Buffer_sizeOfNumberFormat__P213_mk(s);
    r0 = s.arg0.fields["nfmt"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 673; s.pc = 64; return s.tmp_2;
  case 64:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["size"] = (s.tmp_1);
// jacdac/pack.ts(131,21): if (this.nfmt2 != null) this.size += 4
    r0 = s.arg0.fields["nfmt2"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 47; continue; }
// jacdac/pack.ts(131,45): this.size += 4
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["size"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 4);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["size"] = (s.tmp_3);
  case 47:
  case 48:
// jacdac/pack.ts(132,21): this.c0 = -1
    r0 = (s.arg0).fields["c0"] = (-1);
  case 49:
// jacdac/pack.ts(135,17): return true
    r0 = true;
    { step = 51; continue; }
    { step = 1; continue; }
  case 50:
// jacdac/pack.ts(137,13): return false
    r0 = false;
  case 51:
    return leave(s, r0)
  default: oops()
} } }
jacdac_TokenParser_parse__P2366.info = {"start":1727,"length":2656,"line":66,"column":8,"endLine":137,"endColumn":9,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"parse","argumentNames":["this"]}

function jacdac_TokenParser_parse__P2366_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_TokenParser_parse__P2366, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  fmt___6417: undefined,
  endp___6427: undefined,
  word___6443: undefined,
  dotIdx___6456: undefined,
  c0___6462: undefined,
  sz0___6477: undefined,
  sz1___6485: undefined,
  c1___6511: undefined,
  arg0: undefined,
} }





function Buffer_sizeOfNumberFormat__P213(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(510,9): switch (format) {...
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(6, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(7, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(4, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(8, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq(9, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(5, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(10, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq(12, s.tmp_0);
    if (r0) { step = 11; continue; }
    r0 = pxsim_pxtcore.switch_eq(11, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(15, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(13, s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq(16, s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq(14, s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 1:
  case 2:
  case 3:
  case 4:
// base/buffer.ts(515,17): return 1;
    r0 = 1;
    { step = 18; continue; }
  case 5:
  case 6:
  case 7:
  case 8:
// base/buffer.ts(520,17): return 2;
    r0 = 2;
    { step = 18; continue; }
  case 9:
  case 10:
  case 11:
  case 12:
  case 13:
  case 14:
// base/buffer.ts(527,17): return 4;
    r0 = 4;
    { step = 18; continue; }
  case 15:
  case 16:
// base/buffer.ts(530,17): return 8;
    r0 = 8;
    { step = 18; continue; }
  case 17:
// base/buffer.ts(532,9): return 0;
    r0 = 0;
  case 18:
    return leave(s, r0)
  default: oops()
} } }
Buffer_sizeOfNumberFormat__P213.info = {"start":14912,"length":856,"line":508,"column":4,"endLine":532,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"sizeOfNumberFormat","argumentNames":["format"]}

function Buffer_sizeOfNumberFormat__P213_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_sizeOfNumberFormat__P213, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_numberFormatOfType__P2361(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/pack.ts(19,9): switch (tp) {...
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq("u8", s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq("u16", s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq("u32", s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq("i8", s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq("i16", s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq("i32", s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq("f32", s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = pxsim_pxtcore.switch_eq("f64", s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_0;
    { step = 9; continue; }
  case 1:
// jacdac/pack.ts(21,17): return NumberFormat.UInt8LE
    r0 = 2;
    { step = 10; continue; }
  case 2:
// jacdac/pack.ts(23,17): return NumberFormat.UInt16LE
    r0 = 4;
    { step = 10; continue; }
  case 3:
// jacdac/pack.ts(25,17): return NumberFormat.UInt32LE
    r0 = 11;
    { step = 10; continue; }
  case 4:
// jacdac/pack.ts(27,17): return NumberFormat.Int8LE
    r0 = 1;
    { step = 10; continue; }
  case 5:
// jacdac/pack.ts(29,17): return NumberFormat.Int16LE
    r0 = 3;
    { step = 10; continue; }
  case 6:
// jacdac/pack.ts(31,17): return NumberFormat.Int32LE
    r0 = 5;
    { step = 10; continue; }
  case 7:
// jacdac/pack.ts(33,17): return NumberFormat.Float32LE
    r0 = 13;
    { step = 10; continue; }
  case 8:
// jacdac/pack.ts(35,17): return NumberFormat.Float64LE
    r0 = 14;
    { step = 10; continue; }
  case 9:
// jacdac/pack.ts(39,17): return null
    r0 = null;
    { step = 10; continue; }
    r0 = undefined;
  case 10:
    return leave(s, r0)
  default: oops()
} } }
jacdac_numberFormatOfType__P2361.info = {"start":393,"length":798,"line":17,"column":4,"endLine":40,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"numberFormatOfType","argumentNames":["tp"]}

function jacdac_numberFormatOfType__P2361_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_numberFormatOfType__P2361, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_TokenParser_constructor__P2367(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_TokenParser__C2365_VT)) failedCast(r0);
    r0 = (s.arg0).fields["fmt"] = (s.arg1);
    r0 = (s.arg0).fields["fp"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_TokenParser_constructor__P2367.info = {"start":1683,"length":34,"line":64,"column":8,"endLine":64,"endColumn":42,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"inline","argumentNames":["this","fmt"]}

function jacdac_TokenParser_constructor__P2367_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_TokenParser_constructor__P2367, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_writeBuffer__P2622(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// twins.ts(18,9): messageBuffer.write(messagePtr, buf)
    r0 = pxsim.BufferMethods.write(globals.messageBuffer___2617, globals.messagePtr___2619, s.arg0);
// twins.ts(19,9): messagePtr += buf.length
    s.tmp_0 = r0 = globals.messagePtr___2619;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    globals.messagePtr___2619 = (r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_writeBuffer__P2622.info = {"start":471,"length":119,"line":16,"column":4,"endLine":19,"endColumn":5,"fileName":"twins.ts","functionName":"writeBuffer","argumentNames":["buf"]}

function jacdac_twins_writeBuffer__P2622_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_writeBuffer__P2622, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_twins_connectTwinUpdate__P2659(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// twins.ts(412,1): control.runInBackground(() => {...
    s.tmp_0 = control_runInBackground__P289_mk(s);
    s.tmp_0.arg0 = jacdac_twins_connectTwinUpdate_inline__P6694;
    s.callLocIdx = 1319; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_connectTwinUpdate__P2659.info = {"start":13451,"length":353,"line":409,"column":4,"endLine":418,"endColumn":5,"fileName":"twins.ts","functionName":"connectTwinUpdate","argumentNames":[]}

function jacdac_twins_connectTwinUpdate__P2659_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_connectTwinUpdate__P2659, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_twins_connectTwinUpdate_inline__P6694(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// twins.ts(413,13): pause(100)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 100;
    s.callLocIdx = 1314; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// twins.ts(414,13): azureiot.onTwinUpdate((twin, patch) => {...
    s.tmp_0 = azureiot_onTwinUpdate__P1363_mk(s);
    s.tmp_0.arg0 = jacdac_twins_connectTwinUpdate_inline__P6697;
    s.callLocIdx = 1318; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_connectTwinUpdate_inline__P6694.info = {"start":13578,"length":219,"line":411,"column":32,"endLine":417,"endColumn":9,"fileName":"twins.ts","functionName":"inline","argumentNames":[]}

function jacdac_twins_connectTwinUpdate_inline__P6694_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_connectTwinUpdate_inline__P6694, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_twins_connectTwinUpdate_inline__P6697(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// twins.ts(415,17): console.log(`apply: ${JSON.stringify(patch, null, 1)}`)
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_3 = JSON_stringify__P385_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = null;
    s.tmp_3.arg2 = 1;
    s.callLocIdx = 1315; s.pc = 2; return s.tmp_3;
  case 2:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("apply: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1316; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// twins.ts(416,17): applyTwinUpdate(patch)
    s.tmp_0 = jacdac_twins_applyTwinUpdate__P2658_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1317; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_connectTwinUpdate_inline__P6697.info = {"start":13643,"length":143,"line":413,"column":34,"endLine":416,"endColumn":13,"fileName":"twins.ts","functionName":"inline","argumentNames":["twin","patch"]}

function jacdac_twins_connectTwinUpdate_inline__P6697_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_connectTwinUpdate_inline__P6697, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_applyTwinUpdate__P2658(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.t___6711 = undefined;
    s.unnamed200___U1 = undefined;
    s.unnamed201___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// twins.ts(403,20): t
    s.t___6711 = (undefined);
    s.unnamed200___U1 = (globals.twins___2609);
    s.unnamed201___U2 = (0);
// twins.ts(403,9): for (const t of twins) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed201___U2;
    r0 = pxsim_Array__length(s.unnamed200___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed200___U1, s.unnamed201___U2);
    s.t___6711 = (r0);
// twins.ts(404,13): if (upd[t.id]) t.applyTwinUpdate(upd[t.id])
    r0 = s.t___6711.fields["id"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
// twins.ts(404,28): t.applyTwinUpdate(upd[t.id])
    s.tmp_4 = jacdac_twins_DeviceTwin_applyTwinUpdate__P2650_mk(s);
    s.tmp_4.arg0 = s.t___6711;
    r0 = s.t___6711.fields["id"];
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.tmp_5);
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 1313; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
  case 2:
  case 3:
    r0 = (s.unnamed201___U2 + 1);
    s.unnamed201___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed200___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_applyTwinUpdate__P2658.info = {"start":13282,"length":142,"line":401,"column":4,"endLine":405,"endColumn":5,"fileName":"twins.ts","functionName":"applyTwinUpdate","argumentNames":["upd"]}

function jacdac_twins_applyTwinUpdate__P2658_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_applyTwinUpdate__P2658, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  t___6711: undefined,
  unnamed200___U1: undefined,
  unnamed201___U2: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_applyTwinUpdate__P2650(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.s___6724 = undefined;
    s.unnamed182___U1 = undefined;
    s.unnamed183___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2649_VT)) failedCast(r0);
// twins.ts(296,24): s
    s.s___6724 = (undefined);
    r0 = s.arg0.fields["services"];
    s.unnamed182___U1 = (r0);
    s.unnamed183___U2 = (0);
// twins.ts(296,13): for (const s of this.services)...
  case 1:
    s.tmp_0 = r0 = s.unnamed183___U2;
    r0 = pxsim_Array__length(s.unnamed182___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed182___U1, s.unnamed183___U2);
    s.s___6724 = (r0);
// twins.ts(297,17): if (s && upd[s.id]) s.applyTwinUpdate(upd[s.id])
    s.tmp_2 = r0 = s.s___6724;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = s.s___6724.fields["id"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.tmp_3);
  case 3:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 4; continue; }
// twins.ts(297,37): s.applyTwinUpdate(upd[s.id])
    s.tmp_5 = jacdac_twins_ServiceTwin_applyTwinUpdate__P2631_mk(s);
    s.tmp_5.arg0 = s.s___6724;
    r0 = s.s___6724.fields["id"];
    s.tmp_6 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.tmp_6);
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 1280; s.pc = 7; return s.tmp_5;
  case 7:
    r0 = s.retval;
  case 4:
  case 5:
    r0 = (s.unnamed183___U2 + 1);
    s.unnamed183___U2 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed182___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_applyTwinUpdate__P2650.info = {"start":9790,"length":146,"line":294,"column":8,"endLine":297,"endColumn":9,"fileName":"twins.ts","functionName":"applyTwinUpdate","argumentNames":["this","upd"]}

function jacdac_twins_DeviceTwin_applyTwinUpdate__P2650_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_applyTwinUpdate__P2650, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  s___6724: undefined,
  unnamed182___U1: undefined,
  unnamed183___U2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_ServiceTwin_applyTwinUpdate__P2631(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.regs___6748 = undefined;
    s.k___6755 = undefined;
    s.unnamed176___U2 = undefined;
    s.unnamed177___U3 = undefined;
    s.rspec___6759 = undefined;
    s.v___6774 = undefined;
    s.payload___6805 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2628_VT)) failedCast(r0);
// twins.ts(101,13): console.log("applying update: " + JSON.stringify(upd))
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_3 = JSON_stringify__P385_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = null;
    s.tmp_3.arg2 = 0;
    s.callLocIdx = 1218; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("applying update: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1219; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// twins.ts(102,19): regs = upd["registers"]
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, "registers");
    s.regs___6748 = (r0);
// twins.ts(104,1): //if (regs["streaming"] !== undefined)...
    r0 = (s.arg0).fields["enabled"] = (true);
// twins.ts(107,24): k
    s.k___6755 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.regs___6748);
    s.unnamed176___U2 = (r0);
    s.unnamed177___U3 = (0);
// twins.ts(107,13): for (const k of Object.keys(regs)) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed177___U3;
    r0 = pxsim_Array__length(s.unnamed176___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed176___U2, s.unnamed177___U3);
    s.k___6755 = (r0);
// twins.ts(108,23): rspec = this.spec.registers.find(r => r.name == k)
    r0 = pxsim_pxtcore_mkAction(1, rspec_inline__P6761);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.k___6755);
    s.tmp_3 = helpers_arrayFind__P111_mk(s);
    s.tmp_4 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_4.arg0 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "registers");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["registers"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["registers"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 1220; s.pc = 13; return s.tmp_4; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_2;
    s.callLocIdx = 1222; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.rspec___6759 = (r0);
// twins.ts(109,23): v = regs[k]
    r0 = pxsim_pxtrt.mapGetGeneric(s.regs___6748, s.k___6755);
    s.v___6774 = (r0);
// twins.ts(110,17): if (rspec && typeof v == "number" && rspec.code < 0x100) {...
    s.tmp_0 = r0 = s.rspec___6759;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim_pxtcore.typeOf(s.v___6774);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "number");
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    s.tmp_4 = if_code_1_mk(s);
    s.tmp_4.arg0 = s.rspec___6759;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "code");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["code"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["code"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 1223; s.pc = 14; return s.tmp_4; }
    }
  case 14:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_3 < 256);
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 6; continue; }
// twins.ts(111,21): console.log(`set ${this.id}.${rspec.name} to ${v}`)
    s.tmp_6 = console_log__P378_mk(s);
    r0 = s.arg0.fields["id"];
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat("set ", s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_10, ".");
    s.tmp_9 = r0;
    s.tmp_15 = if_name_1_mk(s);
    s.tmp_15.arg0 = s.rspec___6759;
    if (!s.tmp_15.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_15.arg0, "name");
    } else {
      s.tmp_15.fn = s.tmp_15.arg0.vtable.iface["name"];
      if (s.tmp_15.fn == null) { s.retval = s.tmp_15.arg0.fields["name"]; }
      else if (!s.tmp_15.fn.isGetter) { s.retval = bind(s.tmp_15); }
     else { s.callLocIdx = 1224; s.pc = 17; return s.tmp_15; }
    }
  case 17:
    r0 = s.retval;
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_9, s.tmp_13);
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_8, " to ");
    s.tmp_7 = r0;
    if ((s.v___6774) && (s.v___6774).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.v___6774);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.v___6774) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_16);
    s.tmp_6.arg0 = r0;
    s.callLocIdx = 1225; s.pc = 15; return s.tmp_6;
  case 15:
    r0 = s.retval;
// twins.ts(112,27): payload = JDPacket.jdpacked(...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.v___6774);
    s.tmp_1 = jacdac_JDPacket_jdpacked__P1420_mk(s);
    s.tmp_3 = if_code_1_mk(s);
    s.tmp_3.arg0 = s.rspec___6759;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "code");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["code"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["code"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 1226; s.pc = 21; return s.tmp_3; }
    }
  case 21:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (8192 | s.tmp_2);
    s.tmp_1.arg0 = r0;
    s.tmp_4 = if_packf_1_mk(s);
    s.tmp_4.arg0 = s.rspec___6759;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "packf");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["packf"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["packf"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 1227; s.pc = 22; return s.tmp_4; }
    }
  case 22:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1228; s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
    s.payload___6805 = (r0);
// twins.ts(117,21): payload.serviceIndex = this.serviceIdx
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_0.arg0 = s.payload___6805;
    r0 = s.arg0.fields["serviceIdx"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1229; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
// twins.ts(118,21): payload._sendCmd(this.parent.device)
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1459_mk(s);
    s.tmp_0.arg0 = s.payload___6805;
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["device"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1230; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
  case 6:
  case 7:
    r0 = (s.unnamed177___U3 + 1);
    s.unnamed177___U3 = (r0);
    { step = 1; continue; }
  case 8:
    s.unnamed176___U2 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_applyTwinUpdate__P2631.info = {"start":2975,"length":955,"line":99,"column":8,"endLine":120,"endColumn":9,"fileName":"twins.ts","functionName":"applyTwinUpdate","argumentNames":["this","upd"]}

function jacdac_twins_ServiceTwin_applyTwinUpdate__P2631_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_applyTwinUpdate__P2631, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  regs___6748: undefined,
  k___6755: undefined,
  unnamed176___U2: undefined,
  unnamed177___U3: undefined,
  rspec___6759: undefined,
  v___6774: undefined,
  payload___6805: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function rspec_inline__P6761(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = if_name_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "name");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["name"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["name"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 1221; s.pc = 1; return s.tmp_1; }
    }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
rspec_inline__P6761.info = {"start":3382,"length":16,"line":107,"column":55,"endLine":107,"endColumn":71,"fileName":"twins.ts","functionName":"inline","argumentNames":["r"]}

function rspec_inline__P6761_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: rspec_inline__P6761, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket__sendCmd__P1459(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(282,13): if (!dev) return
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(282,23): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(283,13): this._sendCmdId(dev.deviceId)
    s.tmp_2 = jacdac_JDPacket__sendCmdId__P1460_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = s.arg1.fields["deviceId"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 648; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCmd__P1459.info = {"start":8578,"length":104,"line":280,"column":8,"endLine":283,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCmd","argumentNames":["this","dev"]}

function jacdac_JDPacket__sendCmd__P1459_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCmd__P1459, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendCmdId__P1460(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(287,13): if (!devId) return
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(287,25): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(288,13): this.deviceIdentifier = devId
    s.tmp_2 = jacdac_JDPacket_deviceIdentifier__P1426_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 649; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
// jacdac/packet.ts(289,13): this._header[3] |= JD_FRAME_FLAG_COMMAND
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 3, s.tmp_1);
// jacdac/packet.ts(290,13): this._sendCore()
    s.tmp_0 = jacdac_JDPacket__sendCore__P1457_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 650; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCmdId__P1460.info = {"start":8692,"length":192,"line":285,"column":8,"endLine":290,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCmdId","argumentNames":["this","devId"]}

function jacdac_JDPacket__sendCmdId__P1460_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCmdId__P1460, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendCore__P1457(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(270,13): if (this._data.length != this._header[12]) throw "jdsize mismatch"
    r0 = s.arg0.fields["_data"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 12);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 != s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(270,56): throw "jdsize mismatch"
    r0 = pxsim_pxtcore.throwValue("jdsize mismatch");
  case 1:
  case 2:
// jacdac/packet.ts(271,13): jacdac.__physSendPacket(this._header, this._data)
    s.tmp_5 = jacdac___physSendPacket__P1367_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_5.arg0 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 644; s.pc = 3; return s.tmp_5;
  case 3:
    r0 = s.retval;
// jacdac/packet.ts(272,13): bus.processPacket(this)
    s.tmp_0 = jacdac_Bus_processPacket__P1821_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 645; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendCore__P1457.info = {"start":8188,"length":227,"line":268,"column":8,"endLine":272,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendCore","argumentNames":["this"]}

function jacdac_JDPacket__sendCore__P1457_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendCore__P1457, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_Bus_processPacket__P1821(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.devId___6865 = undefined;
    s.multiCommandClass___6868 = undefined;
    s.crc___6880 = undefined;
    s.ack___6883 = undefined;
    s.h___6904 = undefined;
    s.unnamed164___U5 = undefined;
    s.unnamed165___U6 = undefined;
    s.h___6933 = undefined;
    s.dev___6948 = undefined;
    s.pktRestartCounter___6966 = undefined;
    s.matches___7009 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(234,19): devId = pkt.deviceIdentifier
    s.tmp_0 = jacdac_JDPacket_deviceIdentifier__P1425_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 832; s.pc = 50; return s.tmp_0;
  case 50:
    r0 = s.retval;
    s.devId___6865 = (r0);
// jacdac/routing.ts(235,19): multiCommandClass = pkt.multicommandClass
    s.tmp_0 = jacdac_JDPacket_multicommandClass__P1428_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 833; s.pc = 51; return s.tmp_0;
  case 51:
    r0 = s.retval;
    s.multiCommandClass___6868 = (r0);
// jacdac/routing.ts(238,1): if (pkt.requiresAck) {...
    s.tmp_1 = jacdac_JDPacket_requiresAck__P1430_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 834; s.pc = 52; return s.tmp_1;
  case 52:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(240,17): pkt.requiresAck = false
    s.tmp_2 = jacdac_JDPacket_requiresAck__P1431_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_2.arg1 = false;
    s.callLocIdx = 835; s.pc = 53; return s.tmp_2;
  case 53:
    r0 = s.retval;
// jacdac/routing.ts(241,1): if (pkt.deviceIdentifier == this.selfDevice.deviceId) {
    s.tmp_2 = jacdac_JDPacket_deviceIdentifier__P1425_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 836; s.pc = 54; return s.tmp_2;
  case 54:
    r0 = s.retval;
    s.tmp_1 = r0;
    s.tmp_4 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 837; s.pc = 55; return s.tmp_4;
  case 55:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_3 = r0;
    r0 = (s.tmp_1 == s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(242,27): crc = pkt.crc
    s.tmp_5 = jacdac_JDPacket_crc__P1434_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.callLocIdx = 838; s.pc = 56; return s.tmp_5;
  case 56:
    r0 = s.retval;
    s.crc___6880 = (r0);
// jacdac/routing.ts(243,27): ack = JDPacket.onlyHeader(crc)
    s.tmp_0 = jacdac_JDPacket_onlyHeader__P1419_mk(s);
    s.tmp_0.arg0 = s.crc___6880;
    s.callLocIdx = 839; s.pc = 57; return s.tmp_0;
  case 57:
    r0 = s.retval;
    s.ack___6883 = (r0);
// jacdac/routing.ts(244,21): ack.serviceIndex = JD_SERVICE_INDEX_CRC_ACK
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_0.arg0 = s.ack___6883;
    s.tmp_0.arg1 = 63;
    s.callLocIdx = 840; s.pc = 58; return s.tmp_0;
  case 58:
    r0 = s.retval;
// jacdac/routing.ts(245,21): ack._sendReport(this.selfDevice)
    s.tmp_0 = jacdac_JDPacket__sendReport__P1458_mk(s);
    s.tmp_0.arg0 = s.ack___6883;
    s.tmp_1 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 841; s.pc = 60; return s.tmp_1;
  case 60:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 842; s.pc = 59; return s.tmp_0;
  case 59:
    r0 = s.retval;
  case 1:
  case 2:
  case 3:
  case 4:
// jacdac/routing.ts(249,13): this.emit(PACKET_PROCESS, pkt)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.PACKET_PROCESS___1794;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 843; s.pc = 61; return s.tmp_0;
  case 61:
    r0 = s.retval;
// jacdac/routing.ts(251,13): if (multiCommandClass != null) {...
    r0 = (s.multiCommandClass___6868 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// jacdac/routing.ts(252,17): if (!pkt.isCommand) return
    s.tmp_4 = jacdac_JDPacket_isCommand__P1453_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 844; s.pc = 62; return s.tmp_4;
  case 62:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
// jacdac/routing.ts(252,37): return
    { step = 49; continue; }
  case 5:
  case 6:
// jacdac/routing.ts(253,28): h
    s.h___6904 = (undefined);
    r0 = s.arg0.fields["hostServices"];
    s.unnamed164___U5 = (r0);
    s.unnamed165___U6 = (0);
// jacdac/routing.ts(253,1): for (const h of this.hostServices) {...
  case 7:
    s.tmp_0 = r0 = s.unnamed165___U6;
    r0 = pxsim_Array__length(s.unnamed164___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 12; continue; }
    r0 = pxsim_Array__getAt(s.unnamed164___U5, s.unnamed165___U6);
    s.h___6904 = (r0);
// jacdac/routing.ts(254,21): if (h.serviceClass == multiCommandClass && h.running) {
    r0 = s.h___6904.fields["serviceClass"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.multiCommandClass___6868);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_2;
    { step = 9; continue; }
  case 8:
    r0 = s.h___6904.fields["running"];
  case 9:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 10; continue; }
// jacdac/routing.ts(256,1): pkt.deviceIdentifier = this.selfDevice.deviceId
    s.tmp_5 = jacdac_JDPacket_deviceIdentifier__P1426_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.tmp_6 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.callLocIdx = 845; s.pc = 64; return s.tmp_6;
  case 64:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 846; s.pc = 63; return s.tmp_5;
  case 63:
    r0 = s.retval;
// jacdac/routing.ts(257,25): pkt.serviceIndex = h.serviceIndex
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = s.h___6904.fields["serviceIndex"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 847; s.pc = 65; return s.tmp_0;
  case 65:
    r0 = s.retval;
// jacdac/routing.ts(258,25): h.handlePacketOuter(pkt)
    s.tmp_0 = jacdac_Server__C1824_v0_2_mk(s);
    s.tmp_0.arg0 = s.h___6904;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacketOuter;
    s.pc = 66; return s.tmp_0;
  case 66:
    r0 = s.retval;
  case 10:
  case 11:
    r0 = (s.unnamed165___U6 + 1);
    s.unnamed165___U6 = (r0);
    { step = 7; continue; }
  case 12:
    s.unnamed164___U5 = (undefined);
    { step = 48; continue; }
  case 13:
// jacdac/routing.ts(261,20): if (devId == this.selfDevice.deviceId && pkt.isCommand) {...
    s.tmp_1 = r0 = s.devId___6865;
    s.tmp_3 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 848; s.pc = 67; return s.tmp_3;
  case 67:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_0;
    { step = 15; continue; }
  case 14:
    s.tmp_4 = jacdac_JDPacket_isCommand__P1453_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 849; s.pc = 68; return s.tmp_4;
  case 68:
    r0 = s.retval;
  case 15:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 20; continue; }
// jacdac/routing.ts(262,23): h = this.hostServices[pkt.serviceIndex]
    r0 = s.arg0.fields["hostServices"];
    s.tmp_6 = r0;
    s.tmp_8 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_8.arg0 = s.arg1;
    s.callLocIdx = 850; s.pc = 69; return s.tmp_8;
  case 69:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_Array__getAt(s.tmp_6, s.tmp_7);
    s.h___6933 = (r0);
// jacdac/routing.ts(263,17): if (h && h.running) {...
    s.tmp_0 = r0 = s.h___6933;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 16:
    r0 = s.h___6933.fields["running"];
  case 17:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 18; continue; }
// jacdac/routing.ts(265,1): h.handlePacketOuter(pkt)
    s.tmp_2 = jacdac_Server__C1824_v0_2_mk(s);
    s.tmp_2.arg0 = s.h___6933;
    s.tmp_2.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.handlePacketOuter;
    s.pc = 70; return s.tmp_2;
  case 70:
    r0 = s.retval;
  case 18:
  case 19:
    { step = 47; continue; }
  case 20:
// jacdac/routing.ts(268,17): if (pkt.isCommand) return
    s.tmp_1 = jacdac_JDPacket_isCommand__P1453_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 851; s.pc = 71; return s.tmp_1;
  case 71:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
// jacdac/routing.ts(268,36): return
    { step = 49; continue; }
  case 21:
  case 22:
// jacdac/routing.ts(270,21): dev = this.devices.find(d => d.deviceId == devId)
    r0 = pxsim_pxtcore_mkAction(1, dev_inline__P6952);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.devId___6865);
    s.tmp_3 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_2;
    s.callLocIdx = 852; s.pc = 72; return s.tmp_3;
  case 72:
    r0 = s.retval;
    s.dev___6948 = (r0);
// jacdac/routing.ts(272,17): if (pkt.serviceIndex == JD_SERVICE_INDEX_CTRL) {...
    s.tmp_2 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 853; s.pc = 73; return s.tmp_2;
  case 73:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 41; continue; }
// jacdac/routing.ts(273,21): if (pkt.serviceCommand == SystemCmd.Announce) {...
    s.tmp_5 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.callLocIdx = 854; s.pc = 74; return s.tmp_5;
  case 74:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == 0);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 37; continue; }
// jacdac/routing.ts(274,31): pktRestartCounter = pkt.data[0] & 0xf
    s.tmp_8 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_8.arg0 = s.arg1;
    s.callLocIdx = 855; s.pc = 75; return s.tmp_8;
  case 75:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_7, 0);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 15);
    s.pktRestartCounter___6966 = (r0);
// jacdac/routing.ts(275,25): if (dev && dev.restartCounter > pktRestartCounter) {
    s.tmp_0 = r0 = s.dev___6948;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 23; continue; }
    r0 = s.tmp_0;
    { step = 24; continue; }
  case 23:
    s.tmp_2 = jacdac_Device_restartCounter__P1877_mk(s);
    s.tmp_2.arg0 = s.dev___6948;
    s.callLocIdx = 856; s.pc = 76; return s.tmp_2;
  case 76:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > s.pktRestartCounter___6966);
  case 24:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 25; continue; }
// jacdac/routing.ts(277,1): // treat it as new device
    s.tmp_4 = jacdac_log__P2472_mk(s);
    s.tmp_12 = jacdac_Device_shortId__P1881_mk(s);
    s.tmp_12.arg0 = s.dev___6948;
    s.callLocIdx = 857; s.pc = 78; return s.tmp_12;
  case 78:
    r0 = s.retval;
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 79);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 79:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat("device ", s.tmp_10);
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_9, " resetted (");
    s.tmp_8 = r0;
    s.tmp_15 = jacdac_Device_restartCounter__P1877_mk(s);
    s.tmp_15.arg0 = s.dev___6948;
    s.callLocIdx = 858; s.pc = 80; return s.tmp_15;
  case 80:
    r0 = s.retval;
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 81);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 81:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_8, s.tmp_13);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " > ");
    s.tmp_6 = r0;
    if ((s.pktRestartCounter___6966) && (s.pktRestartCounter___6966).vtable) {
    setupResume(s, 82);
    pxsim_String__stringConv(s.pktRestartCounter___6966);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.pktRestartCounter___6966) + ""; }
  case 82:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_16);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, ")");
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 859; s.pc = 77; return s.tmp_4;
  case 77:
    r0 = s.retval;
// jacdac/routing.ts(281,29): this.devices.removeElement(dev)
    r0 = s.arg0.fields["devices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.removeElement(s.tmp_0, s.dev___6948);
// jacdac/routing.ts(282,29): dev._destroy()
    s.tmp_0 = jacdac_Device__destroy__P1894_mk(s);
    s.tmp_0.arg0 = s.dev___6948;
    s.callLocIdx = 860; s.pc = 83; return s.tmp_0;
  case 83:
    r0 = s.retval;
// jacdac/routing.ts(283,29): dev = null
    s.dev___6948 = (null);
// jacdac/routing.ts(284,29): this.emit(RESTART)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.RESTART___1797;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 861; s.pc = 84; return s.tmp_0;
  case 84:
    r0 = s.retval;
  case 25:
  case 26:
// jacdac/routing.ts(287,29): matches = false
    s.matches___7009 = (false);
// jacdac/routing.ts(288,25): if (!dev) {...
    r0 = pxsim_numops_toBoolDecr(s.dev___6948);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
// jacdac/routing.ts(289,29): dev = new Device(pkt.deviceIdentifier, pkt.data)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Device__C1870_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_Device_constructor__P1874_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_4 = jacdac_JDPacket_deviceIdentifier__P1425_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 862; s.pc = 86; return s.tmp_4;
  case 86:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.tmp_5 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.callLocIdx = 863; s.pc = 87; return s.tmp_5;
  case 87:
    r0 = s.retval;
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 864; s.pc = 85; return s.tmp_3;
  case 85:
    r0 = s.retval;
    s.dev___6948 = (s.tmp_2);
// jacdac/routing.ts(290,29): this.emit(DEVICE_CONNECT, dev)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_CONNECT___1789;
    s.tmp_0.arg2 = s.dev___6948;
    s.callLocIdx = 865; s.pc = 88; return s.tmp_0;
  case 88:
    r0 = s.retval;
    { step = 28; continue; }
  case 27:
// jacdac/routing.ts(292,29): matches = serviceMatches(dev, pkt.data)
    s.tmp_0 = jacdac_serviceMatches__P2494_mk(s);
    s.tmp_0.arg0 = s.dev___6948;
    s.tmp_1 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 866; s.pc = 90; return s.tmp_1;
  case 90:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 867; s.pc = 89; return s.tmp_0;
  case 89:
    r0 = s.retval;
    s.matches___7009 = (r0);
// jacdac/routing.ts(293,29): dev.services = pkt.data
    s.tmp_0 = r0 = s.dev___6948;
    s.tmp_2 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 868; s.pc = 91; return s.tmp_2;
  case 91:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["services"] = (s.tmp_1);
  case 28:
// jacdac/routing.ts(296,25): if (...
    s.tmp_1 = jacdac_Device_isBrain__P1875_mk(s);
    s.tmp_2 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 869; s.pc = 93; return s.tmp_2;
  case 93:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 870; s.pc = 92; return s.tmp_1;
  case 92:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 29; continue; }
    r0 = s.tmp_0;
    { step = 30; continue; }
  case 29:
    s.tmp_3 = jacdac_Device_isBrain__P1875_mk(s);
    s.tmp_3.arg0 = s.dev___6948;
    s.callLocIdx = 871; s.pc = 94; return s.tmp_3;
  case 94:
    r0 = s.retval;
  case 30:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 31; continue; }
    r0 = s.tmp_4;
    { step = 32; continue; }
  case 31:
    s.tmp_6 = jacdac_Device_restartCounter__P1877_mk(s);
    s.tmp_6.arg0 = s.dev___6948;
    s.callLocIdx = 872; s.pc = 95; return s.tmp_6;
  case 95:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = s.arg0.fields["restartCounter"];
    s.tmp_7 = r0;
    r0 = (s.tmp_5 < s.tmp_7);
  case 32:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 33; continue; }
// jacdac/routing.ts(302,1): log(`device ${dev.shortId} new proxy`)
    s.tmp_9 = jacdac_log__P2472_mk(s);
    s.tmp_13 = jacdac_Device_shortId__P1881_mk(s);
    s.tmp_13.arg0 = s.dev___6948;
    s.callLocIdx = 873; s.pc = 97; return s.tmp_13;
  case 97:
    r0 = s.retval;
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 98);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 98:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat("device ", s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_10, " new proxy");
    s.tmp_9.arg0 = r0;
    s.callLocIdx = 874; s.pc = 96; return s.tmp_9;
  case 96:
    r0 = s.retval;
// jacdac/routing.ts(303,29): resetToProxy()
    s.tmp_0 = jacdac_resetToProxy__P2514_mk(s);
    s.callLocIdx = 875; s.pc = 99; return s.tmp_0;
  case 99:
    r0 = s.retval;
  case 33:
  case 34:
// jacdac/routing.ts(306,25): if (!matches) this.reattach(dev)
    r0 = pxsim_numops_toBoolDecr(s.matches___7009);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 35; continue; }
// jacdac/routing.ts(306,39): this.reattach(dev)
    s.tmp_2 = jacdac_Bus_reattach__P1820_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.dev___6948;
    s.callLocIdx = 876; s.pc = 100; return s.tmp_2;
  case 100:
    r0 = s.retval;
  case 35:
  case 36:
  case 37:
  case 38:
// jacdac/routing.ts(308,21): if (dev) dev.processPacket(pkt)
    r0 = pxsim_numops_toBoolDecr(s.dev___6948);
    if (!r0) { step = 39; continue; }
// jacdac/routing.ts(308,30): dev.processPacket(pkt)
    s.tmp_0 = jacdac_Device_processPacket__P1890_mk(s);
    s.tmp_0.arg0 = s.dev___6948;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 877; s.pc = 101; return s.tmp_0;
  case 101:
    r0 = s.retval;
  case 39:
  case 40:
// jacdac/routing.ts(309,21): return
    { step = 49; continue; }
    { step = 44; continue; }
  case 41:
// jacdac/routing.ts(310,24): if (pkt.serviceIndex == JD_SERVICE_INDEX_CRC_ACK) {...
    s.tmp_2 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 878; s.pc = 102; return s.tmp_2;
  case 102:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 63);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 42; continue; }
// jacdac/routing.ts(311,21): _gotAck(pkt)
    s.tmp_3 = jacdac__gotAck__P1463_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 879; s.pc = 103; return s.tmp_3;
  case 103:
    r0 = s.retval;
  case 42:
  case 43:
  case 44:
// jacdac/routing.ts(314,17): if (!dev)...
    r0 = pxsim_numops_toBoolDecr(s.dev___6948);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 45; continue; }
// jacdac/routing.ts(316,1): // no announcement seen yet for this device
    { step = 49; continue; }
  case 45:
  case 46:
// jacdac/routing.ts(318,17): dev.processPacket(pkt)
    s.tmp_2 = jacdac_Device_processPacket__P1890_mk(s);
    s.tmp_2.arg0 = s.dev___6948;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 880; s.pc = 104; return s.tmp_2;
  case 104:
    r0 = s.retval;
  case 47:
  case 48:
  case 49:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_processPacket__P1821.info = {"start":7726,"length":3920,"line":231,"column":8,"endLine":319,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"processPacket","argumentNames":["this","pkt"]}

function jacdac_Bus_processPacket__P1821_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_processPacket__P1821, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  devId___6865: undefined,
  multiCommandClass___6868: undefined,
  crc___6880: undefined,
  ack___6883: undefined,
  h___6904: undefined,
  unnamed164___U5: undefined,
  unnamed165___U6: undefined,
  h___6933: undefined,
  dev___6948: undefined,
  pktRestartCounter___6966: undefined,
  matches___7009: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function dev_inline__P6952(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["deviceId"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
dev_inline__P6952.info = {"start":9460,"length":24,"line":269,"column":44,"endLine":269,"endColumn":68,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["d"]}

function dev_inline__P6952_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: dev_inline__P6952, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__gotAck__P1463(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numNotify___7076 = undefined;
    s.srcId___7077 = undefined;
    s.crc___7080 = undefined;
    s.a___7084 = undefined;
    s.unnamed136___U4 = undefined;
    s.unnamed137___U5 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/packet.ts(360,9): if (!ackAwaiters) return
    r0 = pxsim_numops_toBoolDecr(globals.ackAwaiters___2330);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(360,27): return
    { step = 11; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(361,13): numNotify = 0
    s.numNotify___7076 = (0);
// jacdac/packet.ts(362,15): srcId = pkt.deviceIdentifier
    s.tmp_0 = jacdac_JDPacket_deviceIdentifier__P1425_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 661; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.srcId___7077 = (r0);
// jacdac/packet.ts(363,15): crc = pkt.serviceCommand
    s.tmp_0 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 662; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.crc___7080 = (r0);
// jacdac/packet.ts(364,18): a
    s.a___7084 = (undefined);
    s.unnamed136___U4 = (globals.ackAwaiters___2330);
    s.unnamed137___U5 = (0);
// jacdac/packet.ts(364,9): for (let a of ackAwaiters) {...
  case 3:
    s.tmp_0 = r0 = s.unnamed137___U5;
    r0 = pxsim_Array__length(s.unnamed136___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed136___U4, s.unnamed137___U5);
    s.a___7084 = (r0);
// jacdac/packet.ts(365,13): if (a.crc == crc && a.srcId == srcId) {...
    r0 = s.a___7084.fields["crc"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.crc___7080);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.a___7084.fields["srcId"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.srcId___7077);
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 6; continue; }
// jacdac/packet.ts(366,17): a.nextRetry = 0
    r0 = (s.a___7084).fields["nextRetry"] = (0);
// jacdac/packet.ts(367,17): control.raiseEvent(DAL.DEVICE_ID_NOTIFY, a.eventId)
    r0 = s.a___7084.fields["eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(1023, s.tmp_0);
// jacdac/packet.ts(368,17): numNotify++
    r0 = (s.numNotify___7076 + 1);
    s.numNotify___7076 = (r0);
  case 6:
  case 7:
    r0 = (s.unnamed137___U5 + 1);
    s.unnamed137___U5 = (r0);
    { step = 3; continue; }
  case 8:
    s.unnamed136___U4 = (undefined);
// jacdac/packet.ts(371,9): if (numNotify) ackAwaiters = ackAwaiters.filter(a => a.nextRetry !== 0)
    r0 = pxsim_numops_toBoolDecr(s.numNotify___7076);
    if (!r0) { step = 9; continue; }
// jacdac/packet.ts(371,24): ackAwaiters = ackAwaiters.filter(a => a.nextRetry !== 0)
    s.tmp_0 = helpers_arrayFilter__P110_mk(s);
    s.tmp_0.arg0 = globals.ackAwaiters___2330;
    s.tmp_0.arg1 = jacdac__gotAck_inline__P7112;
    s.callLocIdx = 663; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    globals.ackAwaiters___2330 = (r0);
  case 9:
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__gotAck__P1463.info = {"start":11052,"length":508,"line":358,"column":4,"endLine":371,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_gotAck","argumentNames":["pkt"]}

function jacdac__gotAck__P1463_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__gotAck__P1463, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  numNotify___7076: undefined,
  srcId___7077: undefined,
  crc___7080: undefined,
  a___7084: undefined,
  unnamed136___U4: undefined,
  unnamed137___U5: undefined,
  arg0: undefined,
} }





function jacdac__gotAck_inline__P7112(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 !== 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac__gotAck_inline__P7112.info = {"start":11531,"length":22,"line":370,"column":56,"endLine":370,"endColumn":78,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function jacdac__gotAck_inline__P7112_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__gotAck_inline__P7112, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_processPacket__P1890(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.cmd___7135 = undefined;
    s.q___7146 = undefined;
    s.serviceIndex___7158 = undefined;
    s.q___7166 = undefined;
    s.serviceClass___7183 = undefined;
    s.ec___7194 = undefined;
    s.ahead___7207 = undefined;
    s.behind___7215 = undefined;
    s.client___7246 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1138,13): this.lastSeen = control.millis()
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.tmp_1);
// jacdac/routing.ts(1139,13): this.emit(PACKET_RECEIVE, pkt)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.PACKET_RECEIVE___1798;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 979; s.pc = 34; return s.tmp_0;
  case 34:
    r0 = s.retval;
// jacdac/routing.ts(1141,13): if (...
    s.tmp_2 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 980; s.pc = 35; return s.tmp_2;
  case 35:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["queries"];
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 7; continue; }
// jacdac/routing.ts(1145,23): cmd = pkt.getNumber(NumberFormat.UInt16LE, 0)
    s.tmp_4 = jacdac_JDPacket_getNumber__P1451_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.tmp_4.arg1 = 4;
    s.tmp_4.arg2 = 0;
    s.callLocIdx = 981; s.pc = 36; return s.tmp_4;
  case 36:
    r0 = s.retval;
    s.cmd___7135 = (r0);
// jacdac/routing.ts(1146,17): if (cmd >> 12 == CMD_GET_REG >> 12) {...
    r0 = (s.cmd___7135 >> 12);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// jacdac/routing.ts(1147,27): q = this.lookupQuery(...
    s.tmp_2 = jacdac_Device_lookupQuery__P2484_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = (s.cmd___7135 & 4095);
    s.tmp_2.arg1 = r0;
    s.tmp_3 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 982; s.pc = 38; return s.tmp_3;
  case 38:
    r0 = s.retval;
    s.tmp_2.arg2 = r0;
    s.callLocIdx = 983; s.pc = 37; return s.tmp_2;
  case 37:
    r0 = s.retval;
    s.q___7146 = (r0);
// jacdac/routing.ts(1151,21): if (q) q.notImplemented = true
    r0 = pxsim_numops_toBoolDecr(s.q___7146);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(1151,28): q.notImplemented = true
    r0 = (s.q___7146).fields["notImplemented"] = (true);
  case 3:
  case 4:
  case 5:
  case 6:
  case 7:
  case 8:
// jacdac/routing.ts(1155,19): serviceIndex = pkt.serviceIndex
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 984; s.pc = 39; return s.tmp_0;
  case 39:
    r0 = s.retval;
    s.serviceIndex___7158 = (r0);
// jacdac/routing.ts(1156,13): if (pkt.isRegGet && this.queries) {...
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1441_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 985; s.pc = 40; return s.tmp_1;
  case 40:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = s.tmp_0;
    { step = 10; continue; }
  case 9:
    r0 = s.arg0.fields["queries"];
  case 10:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 13; continue; }
// jacdac/routing.ts(1157,23): q = this.lookupQuery(pkt.regCode, serviceIndex)
    s.tmp_3 = jacdac_Device_lookupQuery__P2484_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_4 = jacdac_JDPacket_regCode__P1442_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 986; s.pc = 42; return s.tmp_4;
  case 42:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = s.serviceIndex___7158;
    s.callLocIdx = 987; s.pc = 41; return s.tmp_3;
  case 41:
    r0 = s.retval;
    s.q___7166 = (r0);
// jacdac/routing.ts(1158,17): if (q) {...
    r0 = pxsim_numops_toBoolDecr(s.q___7166);
    if (!r0) { step = 11; continue; }
// jacdac/routing.ts(1159,21): q.value = pkt.data
    s.tmp_0 = r0 = s.q___7166;
    s.tmp_2 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 988; s.pc = 43; return s.tmp_2;
  case 43:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["value"] = (s.tmp_1);
// jacdac/routing.ts(1160,21): q.lastReport = control.millis()
    s.tmp_0 = r0 = s.q___7166;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastReport"] = (s.tmp_1);
  case 11:
  case 12:
  case 13:
  case 14:
// jacdac/routing.ts(1164,19): serviceClass = this.serviceClassAt(serviceIndex)
    s.tmp_0 = jacdac_Device_serviceClassAt__P1885_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.serviceIndex___7158;
    s.callLocIdx = 989; s.pc = 44; return s.tmp_0;
  case 44:
    r0 = s.retval;
    s.serviceClass___7183 = (r0);
// jacdac/routing.ts(1165,13): if (!serviceClass || serviceClass == 0xffffffff) {...
    r0 = pxsim_numops_toBoolDecr(s.serviceClass___7183);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 15; continue; }
    r0 = s.tmp_0;
    { step = 16; continue; }
  case 15:
    r0 = (s.serviceClass___7183 == 4294967295);
  case 16:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 17; continue; }
// jacdac/routing.ts(1166,17): return
    { step = 33; continue; }
  case 17:
  case 18:
// jacdac/routing.ts(1169,13): if (pkt.isEvent) {...
    s.tmp_4 = jacdac_JDPacket_isEvent__P1437_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 990; s.pc = 45; return s.tmp_4;
  case 45:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 27; continue; }
// jacdac/routing.ts(1170,21): ec = this._eventCounter
    r0 = s.arg0.fields["_eventCounter"];
    s.ec___7194 = (r0);
// jacdac/routing.ts(1171,17): if (ec === undefined) ec = pkt.eventCounter - 1
    r0 = (s.ec___7194 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
// jacdac/routing.ts(1171,39): ec = pkt.eventCounter - 1
    s.tmp_2 = jacdac_JDPacket_eventCounter__P1439_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 991; s.pc = 46; return s.tmp_2;
  case 46:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - 1);
    s.ec___7194 = (r0);
  case 19:
  case 20:
// jacdac/routing.ts(1172,17): ec++
    r0 = (s.ec___7194 + 1);
    s.ec___7194 = (r0);
// jacdac/routing.ts(1174,23): ahead = (pkt.eventCounter - ec) & CMD_EVENT_COUNTER_MASK
    s.tmp_2 = jacdac_JDPacket_eventCounter__P1439_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 992; s.pc = 47; return s.tmp_2;
  case 47:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - s.ec___7194);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 127);
    s.ahead___7207 = (r0);
// jacdac/routing.ts(1175,23): behind = (ec - pkt.eventCounter) & CMD_EVENT_COUNTER_MASK
    s.tmp_1 = r0 = s.ec___7194;
    s.tmp_3 = jacdac_JDPacket_eventCounter__P1439_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 993; s.pc = 48; return s.tmp_3;
  case 48:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 127);
    s.behind___7215 = (r0);
// jacdac/routing.ts(1177,1): // behind < 60 means this is an old event (or retransmission of
    r0 = (s.ahead___7207 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 21; continue; }
    r0 = s.tmp_0;
    { step = 24; continue; }
  case 21:
    r0 = (s.behind___7215 < 60);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (!r0) { step = 22; continue; }
    r0 = s.tmp_1;
    { step = 23; continue; }
  case 22:
    r0 = (s.ahead___7207 < 5);
  case 23:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
  case 24:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 25; continue; }
// jacdac/routing.ts(1180,62): return
    { step = 33; continue; }
  case 25:
  case 26:
// jacdac/routing.ts(1182,1): this.emit(EVENT, pkt)
    s.tmp_4 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = globals.EVENT___1799;
    s.tmp_4.arg2 = s.arg1;
    s.callLocIdx = 994; s.pc = 49; return s.tmp_4;
  case 49:
    r0 = s.retval;
// jacdac/routing.ts(1183,17): bus.emit(EVENT, pkt)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = globals.EVENT___1799;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 995; s.pc = 50; return s.tmp_0;
  case 50:
    r0 = s.retval;
// jacdac/routing.ts(1184,17): this._eventCounter = pkt.eventCounter
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_JDPacket_eventCounter__P1439_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 996; s.pc = 51; return s.tmp_2;
  case 51:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_eventCounter"] = (s.tmp_1);
  case 27:
  case 28:
// jacdac/routing.ts(1187,13): if (!this.clients) return
    r0 = s.arg0.fields["clients"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 29; continue; }
// jacdac/routing.ts(1187,32): return
    { step = 33; continue; }
  case 29:
  case 30:
// jacdac/routing.ts(1189,19): client = this.clients.find(c =>...
    r0 = pxsim_pxtcore_mkAction(2, client_inline__P7248);
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_3, 0, s.serviceClass___7183);
    r0 = pxsim_pxtrt_stclo(s.tmp_3, 1, s.serviceIndex___7158);
    s.tmp_4 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["clients"];
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.tmp_3;
    s.callLocIdx = 997; s.pc = 52; return s.tmp_4;
  case 52:
    r0 = s.retval;
    s.client___7246 = (r0);
// jacdac/routing.ts(1194,13): if (client) {...
    r0 = pxsim_numops_toBoolDecr(s.client___7246);
    if (!r0) { step = 31; continue; }
// jacdac/routing.ts(1196,1): client.handlePacketOuter(pkt)
    s.tmp_0 = jacdac_Client_handlePacketOuter__P1858_mk(s);
    s.tmp_0.arg0 = s.client___7246;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 998; s.pc = 53; return s.tmp_0;
  case 53:
    r0 = s.retval;
  case 31:
  case 32:
  case 33:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_processPacket__P1890.info = {"start":37451,"length":2541,"line":1136,"column":8,"endLine":1197,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"processPacket","argumentNames":["this","pkt"]}

function jacdac_Device_processPacket__P1890_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_processPacket__P1890, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  cmd___7135: undefined,
  q___7146: undefined,
  serviceIndex___7158: undefined,
  q___7166: undefined,
  serviceClass___7183: undefined,
  ec___7194: undefined,
  ahead___7207: undefined,
  behind___7215: undefined,
  client___7246: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function client_inline__P7248(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["broadcast"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.caps[0]);
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
client_inline__P7248.info = {"start":39663,"length":138,"line":1188,"column":45,"endLine":1191,"endColumn":52,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["c"]}

function client_inline__P7248_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: client_inline__P7248, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_Client_handlePacketOuter__P1858(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.code___7281 = undefined;
    s.register___7314 = undefined;
    s.unnamed168___U2 = undefined;
    s.unnamed169___U3 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(806,13): if (pkt.serviceCommand == SystemCmd.Announce)...
    s.tmp_2 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 935; s.pc = 13; return s.tmp_2;
  case 13:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(807,17): this.advertisementData = pkt.data
    s.tmp_3 = r0 = s.arg0;
    s.tmp_5 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.callLocIdx = 936; s.pc = 14; return s.tmp_5;
  case 14:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["advertisementData"] = (s.tmp_4);
  case 1:
  case 2:
// jacdac/routing.ts(809,13): if (pkt.isEvent) {...
    s.tmp_1 = jacdac_JDPacket_isEvent__P1437_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 937; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// jacdac/routing.ts(810,23): code = pkt.eventCode
    s.tmp_2 = jacdac_JDPacket_eventCode__P1438_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 938; s.pc = 16; return s.tmp_2;
  case 16:
    r0 = s.retval;
    s.code___7281 = (r0);
// jacdac/routing.ts(811,17): if (code == SystemEvent.Active) this.systemActive = true...
    r0 = (s.code___7281 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(811,49): this.systemActive = true
    r0 = (s.arg0).fields["systemActive"] = (true);
    { step = 8; continue; }
  case 3:
// jacdac/routing.ts(812,22): if (code == SystemEvent.Inactive) this.systemActive = false...
    r0 = (s.code___7281 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// jacdac/routing.ts(812,56): this.systemActive = false
    r0 = (s.arg0).fields["systemActive"] = (false);
    { step = 7; continue; }
  case 4:
// jacdac/routing.ts(813,22): if (code == SystemEvent.Change)...
    r0 = (s.code___7281 == 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// jacdac/routing.ts(815,1): this.registers.forEach(r => r.reset())
    s.tmp_1 = helpers_arrayForEach__P109_mk(s);
    r0 = s.arg0.fields["registers"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = jacdac_Client_handlePacketOuter_inline__P7302;
    s.callLocIdx = 940; s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
  case 5:
  case 6:
  case 7:
  case 8:
// jacdac/routing.ts(816,17): this.emit(EVENT, pkt)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.EVENT___1799;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 941; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
// jacdac/routing.ts(817,17): this.raiseEvent(code, pkt.intData)
    s.tmp_0 = jacdac_Client_raiseEvent__P2377_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.code___7281;
    s.tmp_1 = jacdac_JDPacket_intData__P1445_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 942; s.pc = 20; return s.tmp_1;
  case 20:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 943; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    { step = 12; continue; }
  case 9:
// jacdac/routing.ts(819,28): register
    s.register___7314 = (undefined);
    r0 = s.arg0.fields["registers"];
    s.unnamed168___U2 = (r0);
    s.unnamed169___U3 = (0);
// jacdac/routing.ts(819,17): for (const register of this.registers)...
  case 10:
    s.tmp_0 = r0 = s.unnamed169___U3;
    r0 = pxsim_Array__length(s.unnamed168___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__getAt(s.unnamed168___U2, s.unnamed169___U3);
    s.register___7314 = (r0);
// jacdac/routing.ts(820,21): register.handlePacket(pkt)
    s.tmp_2 = jacdac_RegisterClient_handlePacket__P1843_mk(s);
    s.tmp_2.arg0 = s.register___7314;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 944; s.pc = 21; return s.tmp_2;
  case 21:
    r0 = s.retval;
    r0 = (s.unnamed169___U3 + 1);
    s.unnamed169___U3 = (r0);
    { step = 10; continue; }
  case 11:
    s.unnamed168___U2 = (undefined);
  case 12:
// jacdac/routing.ts(821,13): this.handlePacket(pkt)
    s.tmp_0 = jacdac_Client__C1844_v0_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Client__C1844_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacket;
    s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handlePacketOuter__P1858.info = {"start":26637,"length":793,"line":804,"column":8,"endLine":821,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_Client_handlePacketOuter__P1858_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handlePacketOuter__P1858, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  code___7281: undefined,
  register___7314: undefined,
  unnamed168___U2: undefined,
  unnamed169___U3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_handlePacketOuter_inline__P7302(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_RegisterClient_reset__P1837_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 939; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handlePacketOuter_inline__P7302.info = {"start":27160,"length":14,"line":814,"column":43,"endLine":814,"endColumn":57,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["r"]}

function jacdac_Client_handlePacketOuter_inline__P7302_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handlePacketOuter_inline__P7302, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Client_handlePacket__P1859(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handlePacket__P1859.info = {"start":27440,"length":30,"line":823,"column":8,"endLine":823,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_Client_handlePacket__P1859_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handlePacket__P1859, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_RegisterClient_handlePacket__P1843(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___7335 = undefined;
    s.changed___7338 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegisterClient__C1835_VT)) failedCast(r0);
// jacdac/routing.ts(691,13): if (packet.isRegGet && this.code == packet.regCode) {...
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1441_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 924; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["code"];
    s.tmp_2 = r0;
    s.tmp_4 = jacdac_JDPacket_regCode__P1442_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 925; s.pc = 12; return s.tmp_4;
  case 12:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 == s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 9; continue; }
// jacdac/routing.ts(692,23): d = packet.data
    s.tmp_6 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_6.arg0 = s.arg1;
    s.callLocIdx = 926; s.pc = 13; return s.tmp_6;
  case 13:
    r0 = s.retval;
    s.d___7335 = (r0);
// jacdac/routing.ts(693,23): changed =...
    r0 = pxsim_numops_toBoolDecr(s.d___7335);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = (s.tmp_1 != s.tmp_5);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_numops_toBoolDecr(s.d___7335);
    s.tmp_10 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_10);
  case 4:
    // jmp value (already in r0)
    s.tmp_11 = r0;
    r0 = pxsim_numops_toBool(s.tmp_11);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_11;
    { step = 6; continue; }
  case 5:
    s.tmp_14 = helpers_bufferEquals__P185_mk(s);
    s.tmp_14.arg0 = s.d___7335;
    r0 = s.arg0.fields["_data"];
    s.tmp_14.arg1 = r0;
    s.callLocIdx = 927; s.pc = 14; return s.tmp_14;
  case 14:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    s.tmp_12 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_12);
  case 6:
    // jmp value (already in r0)
    s.tmp_15 = r0;
    s.changed___7338 = (s.tmp_15);
// jacdac/routing.ts(695,17): this._data = d
    r0 = (s.arg0).fields["_data"] = (s.d___7335);
// jacdac/routing.ts(696,17): this._localTime = control.millis()
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
// jacdac/routing.ts(697,17): this.emit(REPORT_RECEIVE, this)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.REPORT_RECEIVE___1795;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 928; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
// jacdac/routing.ts(698,17): if (changed) {...
    r0 = pxsim_numops_toBoolDecr(s.changed___7338);
    if (!r0) { step = 7; continue; }
// jacdac/routing.ts(699,21): this.emit(REPORT_UPDATE, this)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.REPORT_UPDATE___1796;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 929; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
// jacdac/routing.ts(700,21): this.emit(CHANGE)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___1786;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 930; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
  case 7:
  case 8:
  case 9:
  case 10:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegisterClient_handlePacket__P1843.info = {"start":22836,"length":537,"line":689,"column":8,"endLine":702,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_RegisterClient_handlePacket__P1843_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegisterClient_handlePacket__P1843, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  d___7335: undefined,
  changed___7338: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_bufferEquals__P185(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___7396 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(141,9): if (!l || !r) return !!l == !!r;
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// base/buffer.ts(141,23): return !!l == !!r;
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_7 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_11 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_10);
    s.tmp_9 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_9);
    s.tmp_8 = r0;
    r0 = (s.tmp_4 == s.tmp_8);
    { step = 11; continue; }
  case 3:
  case 4:
// base/buffer.ts(142,9): if (l.length != r.length) return false;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_13 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_14 = r0;
    r0 = (s.tmp_13 != s.tmp_14);
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 5; continue; }
// base/buffer.ts(142,35): return false;
    r0 = false;
    { step = 11; continue; }
  case 5:
  case 6:
// base/buffer.ts(143,18): i = 0
    s.i___7396 = (0);
// base/buffer.ts(143,9): for (let i = 0; i < l.length; ++i) {...
  case 7:
// base/buffer.ts(143,25): i < l.length
    s.tmp_1 = r0 = s.i___7396;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// base/buffer.ts(144,13): if (l[i] != r[i])...
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___7396);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, s.i___7396);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 != s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 8; continue; }
// base/buffer.ts(145,17): return false;
    r0 = false;
    { step = 11; continue; }
  case 8:
  case 9:
// base/buffer.ts(143,39): ++i
    r0 = (s.i___7396 + 1);
    s.i___7396 = (r0);
    { step = 7; continue; }
  case 10:
// base/buffer.ts(147,9): return true;
    r0 = true;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferEquals__P185.info = {"start":3970,"length":283,"line":139,"column":4,"endLine":147,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferEquals","argumentNames":["l","r"]}

function helpers_bufferEquals__P185_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferEquals__P185, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  i___7396: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_intData__P1445(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(198,13): return intOfBuffer(this._data)
    s.tmp_0 = jacdac_intOfBuffer__P1464_mk(s);
    r0 = s.arg0.fields["_data"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 620; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_intData__P1445.info = {"start":6065,"length":68,"line":196,"column":8,"endLine":198,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"intData","argumentNames":["this"]}
jacdac_JDPacket_intData__P1445.isGetter = true;

function jacdac_JDPacket_intData__P1445_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_intData__P1445, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_intOfBuffer__P1464(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.fmt___7419 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/packet.ts(375,9): if (!data) return undefined
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(375,20): return undefined
    r0 = undefined;
    { step = 9; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(377,9): switch (data.length) {...
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_2);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(1, s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(2, s.tmp_2);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(3, s.tmp_2);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 3:
  case 4:
// jacdac/packet.ts(380,17): fmt = NumberFormat.Int8LE
    s.fmt___7419 = (1);
// jacdac/packet.ts(381,17): break
    { step = 8; continue; }
  case 5:
  case 6:
// jacdac/packet.ts(384,17): fmt = NumberFormat.Int16LE
    s.fmt___7419 = (3);
// jacdac/packet.ts(385,17): break
    { step = 8; continue; }
  case 7:
// jacdac/packet.ts(387,17): fmt = NumberFormat.Int32LE
    s.fmt___7419 = (5);
// jacdac/packet.ts(388,17): break
  case 8:
// jacdac/packet.ts(390,9): return data.getNumber(fmt, 0)
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.fmt___7419, 0);
  case 9:
    return leave(s, r0)
  default: oops()
} } }
jacdac_intOfBuffer__P1464.info = {"start":11566,"length":497,"line":373,"column":4,"endLine":390,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"intOfBuffer","argumentNames":["data"]}

function jacdac_intOfBuffer__P1464_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_intOfBuffer__P1464, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  fmt___7419: undefined,
  arg0: undefined,
} }





function jacdac_Client_raiseEvent__P2377(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.h___7445 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(946,13): control.raiseEvent(this.eventId, value)
    r0 = s.arg0.fields["eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, s.arg1);
// jacdac/routing.ts(947,13): if (this.handlers) {...
    r0 = s.arg0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(948,23): h = this.handlers[value + ""]
    r0 = s.arg0.fields["handlers"];
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, s.tmp_2);
    s.h___7445 = (r0);
// jacdac/routing.ts(949,17): if (h) h(argument)
    r0 = pxsim_numops_toBoolDecr(s.h___7445);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(949,24): h(argument)
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.h___7445;
    s.tmp_0.arg0 = s.arg2;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 963; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 1:
  case 2:
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_raiseEvent__P2377.info = {"start":31445,"length":251,"line":944,"column":8,"endLine":950,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"raiseEvent","argumentNames":["this","value","argument"]}

function jacdac_Client_raiseEvent__P2377_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_raiseEvent__P2377, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  h___7445: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_RegisterClient_reset__P1837(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegisterClient__C1835_VT)) failedCast(r0);
// jacdac/routing.ts(642,13): this._data = undefined
    r0 = (s.arg0).fields["_data"] = (undefined);
// jacdac/routing.ts(643,13): this._localTime = control.millis()
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegisterClient_reset__P1837.info = {"start":21326,"length":101,"line":640,"column":8,"endLine":643,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"reset","argumentNames":["this"]}

function jacdac_RegisterClient_reset__P1837_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegisterClient_reset__P1837, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_eventCode__P1438(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(163,13): return this.isEvent...
    s.tmp_1 = jacdac_JDPacket_isEvent__P1437_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 613; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_3 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 614; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_eventCode__P1438.info = {"start":5146,"length":147,"line":161,"column":8,"endLine":165,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"eventCode","argumentNames":["this"]}
jacdac_JDPacket_eventCode__P1438.isGetter = true;

function jacdac_JDPacket_eventCode__P1438_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_eventCode__P1438, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_eventCounter__P1439(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(169,13): return this.isEvent...
    s.tmp_1 = jacdac_JDPacket_isEvent__P1437_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 615; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_4 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 616; s.pc = 4; return s.tmp_4;
  case 4:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_3 >> 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 127);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_eventCounter__P1439.info = {"start":5303,"length":202,"line":167,"column":8,"endLine":172,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"eventCounter","argumentNames":["this"]}
jacdac_JDPacket_eventCounter__P1439.isGetter = true;

function jacdac_JDPacket_eventCounter__P1439_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_eventCounter__P1439, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isEvent__P1437(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(155,13): return (...
    s.tmp_1 = jacdac_JDPacket_isReport__P1454_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 610; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 611; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 <= 48);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_4;
    { step = 4; continue; }
  case 3:
    s.tmp_7 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.callLocIdx = 612; s.pc = 7; return s.tmp_7;
  case 7:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 32768);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 != 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = s.tmp_8;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isEvent__P1437.info = {"start":4938,"length":198,"line":153,"column":8,"endLine":159,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isEvent","argumentNames":["this"]}
jacdac_JDPacket_isEvent__P1437.isGetter = true;

function jacdac_JDPacket_isEvent__P1437_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isEvent__P1437, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isReport__P1454(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(248,13): return !(this.packetFlags & JD_FRAME_FLAG_COMMAND)
    s.tmp_3 = jacdac_JDPacket_packetFlags__P1427_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 626; s.pc = 1; return s.tmp_3;
  case 1:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isReport__P1454.info = {"start":7442,"length":89,"line":246,"column":8,"endLine":248,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isReport","argumentNames":["this"]}
jacdac_JDPacket_isReport__P1454.isGetter = true;

function jacdac_JDPacket_isReport__P1454_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isReport__P1454, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_packetFlags__P1427(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(113,13): return this._header[3]
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_packetFlags__P1427.info = {"start":3599,"length":64,"line":111,"column":8,"endLine":113,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"packetFlags","argumentNames":["this"]}
jacdac_JDPacket_packetFlags__P1427.isGetter = true;

function jacdac_JDPacket_packetFlags__P1427_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_packetFlags__P1427, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_regCode__P1442(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(184,13): return this.serviceCommand & CMD_REG_MASK
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 619; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 4095);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_regCode__P1442.info = {"start":5719,"length":79,"line":182,"column":8,"endLine":184,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"regCode","argumentNames":["this"]}
jacdac_JDPacket_regCode__P1442.isGetter = true;

function jacdac_JDPacket_regCode__P1442_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_regCode__P1442, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isRegGet__P1441(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(180,13): return this.serviceCommand >> 12 == CMD_GET_REG >> 12
    s.tmp_2 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 618; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 12);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 1);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isRegGet__P1441.info = {"start":5617,"length":92,"line":178,"column":8,"endLine":180,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isRegGet","argumentNames":["this"]}
jacdac_JDPacket_isRegGet__P1441.isGetter = true;

function jacdac_JDPacket_isRegGet__P1441_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isRegGet__P1441, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_Device_lookupQuery__P2484(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1075,13): if (!this.queries) this.queries = []
    r0 = s.arg0.fields["queries"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1075,32): this.queries = []
    s.tmp_3 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["queries"] = (s.tmp_4);
  case 1:
  case 2:
// jacdac/routing.ts(1076,13): return this.queries.find(q => q.reg == reg && q.serviceIdx == serv)
    r0 = pxsim_pxtcore_mkAction(2, jacdac_Device_lookupQuery_inline__P7523);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg2);
    s.tmp_1 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["queries"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 973; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_lookupQuery__P2484.info = {"start":35290,"length":183,"line":1073,"column":8,"endLine":1076,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"lookupQuery","argumentNames":["this","reg","serv"]}

function jacdac_Device_lookupQuery__P2484_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_lookupQuery__P2484, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Device_lookupQuery_inline__P7523(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["reg"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.caps[0]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["serviceIdx"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_lookupQuery_inline__P7523.info = {"start":35421,"length":41,"line":1075,"column":37,"endLine":1075,"endColumn":78,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["q"]}

function jacdac_Device_lookupQuery_inline__P7523_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_lookupQuery_inline__P7523, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_getNumber__P1451(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(236,13): return this._data.getNumber(fmt, offset)
    r0 = s.arg0.fields["_data"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, s.arg1, s.arg2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_getNumber__P1451.info = {"start":7126,"length":109,"line":234,"column":8,"endLine":236,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"getNumber","argumentNames":["this","fmt","offset"]}

function jacdac_JDPacket_getNumber__P1451_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_getNumber__P1451, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Bus_reattach__P1820(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.newClients___7571 = undefined;
    s.occupied___7573 = undefined;
    s.c___7581 = undefined;
    s.unnamed160___U3 = undefined;
    s.unnamed161___U4 = undefined;
    s.newClass___7588 = undefined;
    s.i___7630 = undefined;
    s.serviceClass___7640 = undefined;
    s.cc___7648 = undefined;
    s.unnamed162___U9 = undefined;
    s.unnamed163___U10 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(185,13): dev.lastSeen = control.millis()
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.tmp_1);
// jacdac/routing.ts(186,13): log(...
    s.tmp_0 = jacdac_log__P2472_mk(s);
    s.tmp_7 = jacdac_Device_toString__P1882_mk(s);
    s.tmp_7.arg0 = s.arg1;
    s.callLocIdx = 825; s.pc = 25; return s.tmp_7;
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("reattaching services to ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "; cl=");
    s.tmp_3 = r0;
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_10 = r0;
    r0 = pxsim_Array__length(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_8);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "/");
    s.tmp_1 = r0;
    r0 = s.arg0.fields["allClients"];
    s.tmp_13 = r0;
    r0 = pxsim_Array__length(s.tmp_13);
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_11);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 826; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
// jacdac/routing.ts(191,19): newClients: Client[] = []
    r0 = pxsim_Array__mk();
    s.newClients___7571 = (r0);
// jacdac/routing.ts(192,19): occupied = Buffer.create(dev.services.length >> 2)
    r0 = s.arg1.fields["services"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 2);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.occupied___7573 = (r0);
// jacdac/routing.ts(193,22): c
    s.c___7581 = (undefined);
    r0 = s.arg1.fields["clients"];
    s.unnamed160___U3 = (r0);
    s.unnamed161___U4 = (0);
// jacdac/routing.ts(193,13): for (let c of dev.clients) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed161___U4;
    r0 = pxsim_Array__length(s.unnamed160___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed160___U3, s.unnamed161___U4);
    s.c___7581 = (r0);
// jacdac/routing.ts(194,17): if (c.broadcast) {...
    r0 = s.c___7581.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(195,21): c._detach()
    s.tmp_3 = jacdac_Client__detach__P1861_mk(s);
    s.tmp_3.arg0 = s.c___7581;
    s.callLocIdx = 827; s.pc = 29; return s.tmp_3;
  case 29:
    r0 = s.retval;
// jacdac/routing.ts(196,21): continue
    { step = 8; continue; }
  case 2:
  case 3:
// jacdac/routing.ts(198,23): newClass = dev.services.getNumber(...
    r0 = s.arg1.fields["services"];
    s.tmp_0 = r0;
    r0 = s.c___7581.fields["serviceIndex"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 << 2);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 11, s.tmp_1);
    s.newClass___7588 = (r0);
// jacdac/routing.ts(202,17): if (...
    r0 = s.c___7581.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = (s.newClass___7588 == s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    s.tmp_2 = jacdac_Device_matchesRoleAt__P1883_mk(s);
    s.tmp_2.arg0 = s.arg1;
    r0 = s.c___7581.fields["role"];
    s.tmp_2.arg1 = r0;
    r0 = s.c___7581.fields["serviceIndex"];
    s.tmp_2.arg2 = r0;
    s.callLocIdx = 828; s.pc = 30; return s.tmp_2;
  case 30:
    r0 = s.retval;
  case 5:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
// jacdac/routing.ts(206,21): newClients.push(c)
    r0 = pxsim_Array__push(s.newClients___7571, s.c___7581);
// jacdac/routing.ts(207,21): occupied[c.serviceIndex] = 1
    r0 = s.c___7581.fields["serviceIndex"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setByte(s.occupied___7573, s.tmp_0, 1);
    { step = 7; continue; }
  case 6:
// jacdac/routing.ts(209,21): c._detach()
    s.tmp_0 = jacdac_Client__detach__P1861_mk(s);
    s.tmp_0.arg0 = s.c___7581;
    s.callLocIdx = 829; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.unnamed161___U4 + 1);
    s.unnamed161___U4 = (r0);
    { step = 1; continue; }
  case 9:
    s.unnamed160___U3 = (undefined);
// jacdac/routing.ts(212,13): dev.clients = newClients
    r0 = (s.arg1).fields["clients"] = (s.newClients___7571);
// jacdac/routing.ts(214,13): this.emit(DEVICE_ANNOUNCE, dev)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_ANNOUNCE___1792;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 830; s.pc = 32; return s.tmp_0;
  case 32:
    r0 = s.retval;
// jacdac/routing.ts(216,13): if (this.unattachedClients.length == 0) return
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// jacdac/routing.ts(216,53): return
    { step = 23; continue; }
  case 10:
  case 11:
// jacdac/routing.ts(218,22): i = 4
    s.i___7630 = (4);
// jacdac/routing.ts(218,13): for (let i = 4; i < dev.services.length; i += 4) {...
  case 12:
// jacdac/routing.ts(218,29): i < dev.services.length
    s.tmp_1 = r0 = s.i___7630;
    r0 = s.arg1.fields["services"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
// jacdac/routing.ts(219,17): if (occupied[i >> 2]) continue
    s.tmp_5 = r0 = s.occupied___7573;
    r0 = (s.i___7630 >> 2);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 13; continue; }
// jacdac/routing.ts(219,39): continue
    { step = 21; continue; }
  case 13:
  case 14:
// jacdac/routing.ts(220,23): serviceClass = dev.services.getNumber(...
    r0 = s.arg1.fields["services"];
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_7, 11, s.i___7630);
    s.serviceClass___7640 = (r0);
// jacdac/routing.ts(224,26): cc
    s.cc___7648 = (undefined);
    r0 = s.arg0.fields["unattachedClients"];
    s.unnamed162___U9 = (r0);
    s.unnamed163___U10 = (0);
// jacdac/routing.ts(224,17): for (let cc of this.unattachedClients) {...
  case 15:
    s.tmp_0 = r0 = s.unnamed163___U10;
    r0 = pxsim_Array__length(s.unnamed162___U9);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 20; continue; }
    r0 = pxsim_Array__getAt(s.unnamed162___U9, s.unnamed163___U10);
    s.cc___7648 = (r0);
// jacdac/routing.ts(225,21): if (cc.serviceClass == serviceClass) {...
    r0 = s.cc___7648.fields["serviceClass"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.serviceClass___7640);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 18; continue; }
// jacdac/routing.ts(226,25): if (cc._attach(dev, i >> 2)) break
    s.tmp_5 = jacdac_Client__attach__P1860_mk(s);
    s.tmp_5.arg0 = s.cc___7648;
    s.tmp_5.arg1 = s.arg1;
    r0 = (s.i___7630 >> 2);
    s.tmp_5.arg2 = r0;
    s.callLocIdx = 831; s.pc = 33; return s.tmp_5;
  case 33:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 16; continue; }
// jacdac/routing.ts(226,54): break
    { step = 20; continue; }
  case 16:
  case 17:
  case 18:
  case 19:
    r0 = (s.unnamed163___U10 + 1);
    s.unnamed163___U10 = (r0);
    { step = 15; continue; }
  case 20:
    s.unnamed162___U9 = (undefined);
  case 21:
// jacdac/routing.ts(218,54): i += 4
    r0 = (s.i___7630 + 4);
    s.i___7630 = (r0);
    { step = 12; continue; }
  case 22:
  case 23:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_reattach__P1820.info = {"start":6047,"length":1669,"line":183,"column":8,"endLine":229,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"reattach","argumentNames":["this","dev"]}

function jacdac_Bus_reattach__P1820_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_reattach__P1820, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  newClients___7571: undefined,
  occupied___7573: undefined,
  c___7581: undefined,
  unnamed160___U3: undefined,
  unnamed161___U4: undefined,
  newClass___7588: undefined,
  i___7630: undefined,
  serviceClass___7640: undefined,
  cc___7648: undefined,
  unnamed162___U9: undefined,
  unnamed163___U10: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client__attach__P1860(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(827,13): if (this.device) throw "Invalid attach"
    s.tmp_1 = jacdac_Client_device__P1850_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 945; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(827,30): throw "Invalid attach"
    r0 = pxsim_pxtcore.throwValue("Invalid attach");
  case 1:
  case 2:
// jacdac/routing.ts(828,13): if (!this.broadcast) {...
    r0 = s.arg0.fields["broadcast"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
// jacdac/routing.ts(829,17): if (!dev.matchesRoleAt(this.role, serviceNum)) return false
    s.tmp_8 = jacdac_Device_matchesRoleAt__P1883_mk(s);
    s.tmp_8.arg0 = s.arg1;
    r0 = s.arg0.fields["role"];
    s.tmp_8.arg1 = r0;
    s.tmp_8.arg2 = s.arg2;
    s.callLocIdx = 946; s.pc = 9; return s.tmp_8;
  case 9:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(829,64): return false
    r0 = false;
    { step = 7; continue; }
  case 3:
  case 4:
// jacdac/routing.ts(830,1): this.device = dev
    s.tmp_9 = jacdac_Client_device__P1851_mk(s);
    s.tmp_9.arg0 = s.arg0;
    s.tmp_9.arg1 = s.arg1;
    s.callLocIdx = 947; s.pc = 10; return s.tmp_9;
  case 10:
    r0 = s.retval;
// jacdac/routing.ts(831,17): this.serviceIndex = serviceNum
    r0 = (s.arg0).fields["serviceIndex"] = (s.arg2);
// jacdac/routing.ts(832,17): bus.attachClient(this)
    s.tmp_0 = jacdac_Bus_attachClient__P1817_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 948; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
  case 5:
  case 6:
// jacdac/routing.ts(834,13): log(...
    s.tmp_0 = jacdac_log__P2472_mk(s);
    s.tmp_7 = jacdac_Device_toString__P1882_mk(s);
    s.tmp_7.arg0 = s.arg1;
    s.callLocIdx = 949; s.pc = 13; return s.tmp_7;
  case 13:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("attached ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "/");
    s.tmp_3 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_8);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, " to client ");
    s.tmp_1 = r0;
    r0 = s.arg0.fields["role"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_9);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 950; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
// jacdac/routing.ts(839,13): dev.clients.push(this)
    r0 = s.arg1.fields["clients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
// jacdac/routing.ts(840,13): this.handleConnected()
    s.tmp_0 = jacdac_Client_handleConnected__P2375_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 951; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
// jacdac/routing.ts(841,13): return true
    r0 = true;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client__attach__P1860.info = {"start":27480,"length":610,"line":825,"column":8,"endLine":841,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_attach","argumentNames":["this","dev","serviceNum"]}

function jacdac_Client__attach__P1860_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client__attach__P1860, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Client_handleConnected__P2375(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(846,1): this.config.resend()
    s.tmp_0 = jacdac_ClientPacketQueue_resend__P2477_mk(s);
    r0 = s.arg0.fields["config"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 952; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// jacdac/routing.ts(848,1): // TODO: reenable this...
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CONNECT___1787;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 953; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_handleConnected__P2375.info = {"start":28100,"length":508,"line":843,"column":8,"endLine":854,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleConnected","argumentNames":["this"]}

function jacdac_Client_handleConnected__P2375_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_handleConnected__P2375, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_ClientPacketQueue_resend__P2477(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sn___7717 = undefined;
    s.hasNonSet___7731 = undefined;
    s.p___7733 = undefined;
    s.unnamed166___U3 = undefined;
    s.unnamed167___U4 = undefined;
    s.pkt___7747 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C2473_VT)) failedCast(r0);
// jacdac/routing.ts(600,19): sn = this.parent.serviceIndex
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["serviceIndex"];
    s.sn___7717 = (r0);
// jacdac/routing.ts(601,13): if (sn == null || this.pkts.length == 0) return
    r0 = (s.sn___7717 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["pkts"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(601,54): return
    { step = 11; continue; }
  case 3:
  case 4:
// jacdac/routing.ts(602,17): hasNonSet = false
    s.hasNonSet___7731 = (false);
// jacdac/routing.ts(603,24): p
    s.p___7733 = (undefined);
    r0 = s.arg0.fields["pkts"];
    s.unnamed166___U3 = (r0);
    s.unnamed167___U4 = (0);
// jacdac/routing.ts(603,13): for (const p of this.pkts) {...
  case 5:
    s.tmp_0 = r0 = s.unnamed167___U4;
    r0 = pxsim_Array__length(s.unnamed166___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed166___U3, s.unnamed167___U4);
    s.p___7733 = (r0);
// jacdac/routing.ts(604,17): p[1] = sn
    r0 = pxsim.BufferMethods.setByte(s.p___7733, 1, s.sn___7717);
// jacdac/routing.ts(605,17): if (p[3] >> 4 != CMD_SET_REG >> 12) hasNonSet = true
    r0 = pxsim.BufferMethods.getByte(s.p___7733, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 >> 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// jacdac/routing.ts(605,53): hasNonSet = true
    s.hasNonSet___7731 = (true);
  case 6:
  case 7:
    r0 = (s.unnamed167___U4 + 1);
    s.unnamed167___U4 = (r0);
    { step = 5; continue; }
  case 8:
    s.unnamed166___U3 = (undefined);
// jacdac/routing.ts(607,19): pkt = JDPacket.onlyHeader(0)
    s.tmp_0 = jacdac_JDPacket_onlyHeader__P1419_mk(s);
    s.tmp_0.arg0 = 0;
    s.callLocIdx = 918; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    s.pkt___7747 = (r0);
// jacdac/routing.ts(608,13): pkt.compress(this.pkts)
    s.tmp_0 = jacdac_JDPacket_compress__P1449_mk(s);
    s.tmp_0.arg0 = s.pkt___7747;
    r0 = s.arg0.fields["pkts"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 919; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
// jacdac/routing.ts(609,13): this.parent.sendCommand(pkt)
    s.tmp_0 = jacdac_Client_sendCommand__P1862_mk(s);
    r0 = s.arg0.fields["parent"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.pkt___7747;
    s.callLocIdx = 920; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
// jacdac/routing.ts(611,1): if (hasNonSet)...
    r0 = pxsim_numops_toBoolDecr(s.hasNonSet___7731);
    if (!r0) { step = 9; continue; }
// jacdac/routing.ts(612,17): this.pkts = this.pkts.filter(...
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = helpers_arrayFilter__P110_mk(s);
    r0 = s.arg0.fields["pkts"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = jacdac_ClientPacketQueue_resend_inline__P7765;
    s.callLocIdx = 921; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["pkts"] = (s.tmp_1);
  case 9:
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_resend__P2477.info = {"start":20035,"length":642,"line":598,"column":8,"endLine":614,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"resend","argumentNames":["this"]}

function jacdac_ClientPacketQueue_resend__P2477_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_resend__P2477, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  sn___7717: undefined,
  hasNonSet___7731: undefined,
  p___7733: undefined,
  unnamed166___U3: undefined,
  unnamed167___U4: undefined,
  pkt___7747: undefined,
  arg0: undefined,
} }





function jacdac_ClientPacketQueue_resend_inline__P7765(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim.BufferMethods.getByte(s.arg0, 3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 4);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 2);
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_resend_inline__P7765.info = {"start":20614,"length":35,"line":612,"column":20,"endLine":612,"endColumn":55,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["p"]}

function jacdac_ClientPacketQueue_resend_inline__P7765_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_resend_inline__P7765, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Client_sendCommand__P1862(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(920,13): this.start()
    s.tmp_0 = jacdac_Client_start__P1866_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 959; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// jacdac/routing.ts(921,13): if (this.serviceIndex == null) return
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(921,44): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(922,13): pkt.serviceIndex = this.serviceIndex
    s.tmp_2 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_2.arg0 = s.arg1;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 960; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
// jacdac/routing.ts(923,13): pkt._sendCmd(this.device)
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1459_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = jacdac_Client_device__P1850_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 961; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 962; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_sendCommand__P1862.info = {"start":30550,"length":200,"line":918,"column":8,"endLine":923,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendCommand","argumentNames":["this","pkt"]}

function jacdac_Client_sendCommand__P1862_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_sendCommand__P1862, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_start__P1866(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(978,13): if (this.started) return
    r0 = s.arg0.fields["started"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(978,31): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(979,13): this.started = true
    r0 = (s.arg0).fields["started"] = (true);
// jacdac/routing.ts(980,13): jacdac.start()
    s.tmp_0 = jacdac_start__P1900_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 964; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// jacdac/routing.ts(981,13): jacdac.bus.startClient(this)
    s.tmp_0 = jacdac_Bus_startClient__P1818_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 965; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_start__P1866.info = {"start":32515,"length":156,"line":976,"column":8,"endLine":981,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Client_start__P1866_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_start__P1866, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Bus_startClient__P1818(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(173,13): this.unattachedClients.push(client)
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
// jacdac/routing.ts(174,13): this.allClients.push(client)
    r0 = s.arg0.fields["allClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
// jacdac/routing.ts(175,13): this.clearAttachCache()
    s.tmp_0 = jacdac_Bus_clearAttachCache__P1813_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 824; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_startClient__P1818.info = {"start":5679,"length":164,"line":171,"column":8,"endLine":175,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"startClient","argumentNames":["this","client"]}

function jacdac_Bus_startClient__P1818_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_startClient__P1818, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_clearAttachCache__P1813(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___7812 = undefined;
    s.unnamed156___U1 = undefined;
    s.unnamed157___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(114,22): d
    s.d___7812 = (undefined);
    r0 = s.arg0.fields["devices"];
    s.unnamed156___U1 = (r0);
    s.unnamed157___U2 = (0);
// jacdac/routing.ts(114,13): for (let d of this.devices) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed157___U2;
    r0 = pxsim_Array__length(s.unnamed156___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed156___U1, s.unnamed157___U2);
    s.d___7812 = (r0);
// jacdac/routing.ts(116,1): if ((d.services.length & 3) == 0)...
    r0 = s.d___7812.fields["services"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_5);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 3);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(117,21): d.services = d.services.concat(Buffer.create(1))
    s.tmp_6 = r0 = s.d___7812;
    s.tmp_8 = helpers_bufferConcat__P184_mk(s);
    r0 = s.d___7812.fields["services"];
    s.tmp_8.arg0 = r0;
    r0 = pxsim.control.createBuffer(1);
    s.tmp_8.arg1 = r0;
    s.callLocIdx = 811; s.pc = 5; return s.tmp_8;
  case 5:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = (s.tmp_6).fields["services"] = (s.tmp_7);
  case 2:
  case 3:
    r0 = (s.unnamed157___U2 + 1);
    s.unnamed157___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed156___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_clearAttachCache__P1813.info = {"start":3464,"length":306,"line":112,"column":8,"endLine":118,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"clearAttachCache","argumentNames":["this"]}

function jacdac_Bus_clearAttachCache__P1813_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_clearAttachCache__P1813, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  d___7812: undefined,
  unnamed156___U1: undefined,
  unnamed157___U2: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_compress__P1449(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sz___7833 = undefined;
    s.s___7837 = undefined;
    s.unnamed130___U2 = undefined;
    s.unnamed131___U3 = undefined;
    s.data___7844 = undefined;
    s.s___7865 = undefined;
    s.unnamed132___U6 = undefined;
    s.unnamed133___U7 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(215,13): if (stripped.length == 0) return
    r0 = pxsim_Array__length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(215,39): return
    { step = 7; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(216,17): sz = -4
    s.sz___7833 = (-4);
// jacdac/packet.ts(217,22): s
    s.s___7837 = (undefined);
    s.unnamed130___U2 = (s.arg1);
    s.unnamed131___U3 = (0);
// jacdac/packet.ts(217,13): for (let s of stripped) {...
  case 3:
    s.tmp_0 = r0 = s.unnamed131___U3;
    r0 = pxsim_Array__length(s.unnamed130___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed130___U2, s.unnamed131___U3);
    s.s___7837 = (r0);
// jacdac/packet.ts(218,17): sz += s.length
    s.tmp_2 = r0 = s.sz___7833;
    r0 = pxsim.BufferMethods.length(s.s___7837);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.sz___7833 = (r0);
    r0 = (s.unnamed131___U3 + 1);
    s.unnamed131___U3 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed130___U2 = (undefined);
// jacdac/packet.ts(220,19): data = Buffer.create(sz)
    r0 = pxsim.control.createBuffer(s.sz___7833);
    s.data___7844 = (r0);
// jacdac/packet.ts(221,13): this._header.write(12, stripped[0])
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.arg1, 0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 12, s.tmp_1);
// jacdac/packet.ts(222,13): data.write(0, stripped[0].slice(4))
    s.tmp_0 = r0 = s.data___7844;
    r0 = pxsim_Array__getAt(s.arg1, 0);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 4, -1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 0, s.tmp_1);
// jacdac/packet.ts(223,13): sz = stripped[0].length - 4
    r0 = pxsim_Array__getAt(s.arg1, 0);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 - 4);
    s.sz___7833 = (r0);
// jacdac/packet.ts(224,22): s
    s.s___7865 = (undefined);
    s.tmp_0 = helpers_arraySlice__P115_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 622; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.unnamed132___U6 = (r0);
    s.unnamed133___U7 = (0);
// jacdac/packet.ts(224,13): for (let s of stripped.slice(1)) {...
  case 5:
    s.tmp_0 = r0 = s.unnamed133___U7;
    r0 = pxsim_Array__length(s.unnamed132___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed132___U6, s.unnamed133___U7);
    s.s___7865 = (r0);
// jacdac/packet.ts(225,17): data.write(sz, s)
    r0 = pxsim.BufferMethods.write(s.data___7844, s.sz___7833, s.s___7865);
// jacdac/packet.ts(226,17): sz += s.length
    s.tmp_0 = r0 = s.sz___7833;
    r0 = pxsim.BufferMethods.length(s.s___7865);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.sz___7833 = (r0);
    r0 = (s.unnamed133___U7 + 1);
    s.unnamed133___U7 = (r0);
    { step = 5; continue; }
  case 6:
    s.unnamed132___U6 = (undefined);
// jacdac/packet.ts(228,13): this.data = data
    s.tmp_0 = jacdac_JDPacket_data__P1444_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.data___7844;
    s.callLocIdx = 623; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_compress__P1449.info = {"start":6485,"length":526,"line":213,"column":8,"endLine":228,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"compress","argumentNames":["this","stripped"]}

function jacdac_JDPacket_compress__P1449_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_compress__P1449, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  sz___7833: undefined,
  s___7837: undefined,
  unnamed130___U2: undefined,
  unnamed131___U3: undefined,
  data___7844: undefined,
  s___7865: undefined,
  unnamed132___U6: undefined,
  unnamed133___U7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_data__P1444(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(192,13): if (buf.length > JD_SERIAL_MAX_PAYLOAD_SIZE) throw "Too big"
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 236);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(192,58): throw "Too big"
    r0 = pxsim_pxtcore.throwValue("Too big");
  case 1:
  case 2:
// jacdac/packet.ts(193,13): this._header[12] = buf.length
    r0 = s.arg0.fields["_header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, 12, s.tmp_3);
// jacdac/packet.ts(194,13): this._data = buf
    r0 = (s.arg0).fields["_data"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_data__P1444.info = {"start":5878,"length":177,"line":190,"column":8,"endLine":194,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"data","argumentNames":["this","buf"]}

function jacdac_JDPacket_data__P1444_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_data__P1444, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_attachClient__P1817(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(169,13): this.unattachedClients.removeElement(client)
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.removeElement(s.tmp_0, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_attachClient__P1817.info = {"start":5572,"length":97,"line":167,"column":8,"endLine":169,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"attachClient","argumentNames":["this","client"]}

function jacdac_Bus_attachClient__P1817_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_attachClient__P1817, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_device__P1851(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(733,13): if (this._device !== device) {...
    r0 = s.arg0.fields["_device"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(734,17): this._device = device
    r0 = (s.arg0).fields["_device"] = (s.arg1);
// jacdac/routing.ts(735,17): this.registers.forEach(reg => reg.reset())
    s.tmp_0 = helpers_arrayForEach__P109_mk(s);
    r0 = s.arg0.fields["registers"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = jacdac_Client_device_inline__P7915;
    s.callLocIdx = 934; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_device__P1851.info = {"start":24289,"length":192,"line":731,"column":8,"endLine":736,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"device","argumentNames":["this","device"]}

function jacdac_Client_device__P1851_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_device__P1851, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client_device_inline__P7915(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = jacdac_RegisterClient_reset__P1837_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 933; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_device_inline__P7915.info = {"start":24438,"length":18,"line":734,"column":39,"endLine":734,"endColumn":57,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["reg"]}

function jacdac_Client_device_inline__P7915_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_device_inline__P7915, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Client_device__P1850(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(729,13): return this._device
    r0 = s.arg0.fields["_device"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Client_device__P1850.info = {"start":24223,"length":56,"line":727,"column":8,"endLine":729,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"device","argumentNames":["this"]}
jacdac_Client_device__P1850.isGetter = true;

function jacdac_Client_device__P1850_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_device__P1850, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Device_matchesRoleAt__P1883(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1064,13): if (!role) return true
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1064,24): return true
    r0 = true;
    { step = 9; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(1066,13): if (role == this.deviceId) return true
    r0 = s.arg0.fields["deviceId"];
    s.tmp_3 = r0;
    r0 = (s.arg1 == s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(1066,40): return true
    r0 = true;
    { step = 9; continue; }
  case 3:
  case 4:
// jacdac/routing.ts(1067,13): if (role == this.deviceId + ":" + serviceIdx) return true
    s.tmp_5 = r0 = s.arg1;
    r0 = s.arg0.fields["deviceId"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_9, ":");
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_7 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_11);
    s.tmp_6 = r0;
    r0 = (s.tmp_5 == s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
// jacdac/routing.ts(1067,59): return true
    r0 = true;
    { step = 9; continue; }
  case 5:
  case 6:
// jacdac/routing.ts(1069,13): if (role.indexOf(":") >= 0) return false
    r0 = pxsim_String_.indexOf(s.arg1, ":", undefined);
    s.tmp_13 = r0;
    r0 = (s.tmp_13 >= 0);
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_12);
    if (!r0) { step = 7; continue; }
// jacdac/routing.ts(1069,41): return false
    r0 = false;
    { step = 9; continue; }
  case 7:
  case 8:
// jacdac/routing.ts(1071,13): return jacdac._rolemgr.getRole(this.deviceId, serviceIdx) == role
    s.tmp_15 = jacdac__rolemgr_getRole__P1724_mk(s);
    r0 = s.arg0.fields["deviceId"];
    s.tmp_15.arg0 = r0;
    s.tmp_15.arg1 = s.arg2;
    s.callLocIdx = 972; s.pc = 13; return s.tmp_15;
  case 13:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = (s.tmp_14 == s.arg1);
  case 9:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_matchesRoleAt__P1883.info = {"start":34931,"length":349,"line":1062,"column":8,"endLine":1071,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"matchesRoleAt","argumentNames":["this","role","serviceIdx"]}

function jacdac_Device_matchesRoleAt__P1883_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_matchesRoleAt__P1883, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_getRole__P1724(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/rolemgr.ts(10,9): return settings.readString(roleSettingPrefix + devid + ":" + servIdx)
    s.tmp_0 = settings_readString__P1087_mk(s);
    if ((globals.roleSettingPrefix___2448) && (globals.roleSettingPrefix___2448).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(globals.roleSettingPrefix___2448);
    checkResumeConsumed();
    return;
    } else { s.retval = (globals.roleSettingPrefix___2448) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, ":");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_7);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 726; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_getRole__P1724.info = {"start":217,"length":141,"line":8,"column":4,"endLine":10,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"getRole","argumentNames":["devid","servIdx"]}

function jacdac__rolemgr_getRole__P1724_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_getRole__P1724, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Client__detach__P1861(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
// jacdac/routing.ts(909,13): log(`dettached ${this.role}`)
    s.tmp_0 = jacdac_log__P2472_mk(s);
    r0 = s.arg0.fields["role"];
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("dettached ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 954; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
// jacdac/routing.ts(910,13): this.serviceIndex = null
    r0 = (s.arg0).fields["serviceIndex"] = (null);
// jacdac/routing.ts(911,13): if (!this.broadcast) {...
    r0 = s.arg0.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(912,17): if (!this.device) throw "Invalid detach"
    s.tmp_6 = jacdac_Client_device__P1850_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.callLocIdx = 955; s.pc = 7; return s.tmp_6;
  case 7:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(912,35): throw "Invalid detach"
    r0 = pxsim_pxtcore.throwValue("Invalid detach");
  case 1:
  case 2:
// jacdac/routing.ts(913,17): this.device = null
    s.tmp_7 = jacdac_Client_device__P1851_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.tmp_7.arg1 = null;
    s.callLocIdx = 956; s.pc = 8; return s.tmp_7;
  case 8:
    r0 = s.retval;
// jacdac/routing.ts(914,17): bus.detachClient(this)
    s.tmp_0 = jacdac_Bus_detachClient__P1816_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 957; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 3:
  case 4:
// jacdac/routing.ts(916,13): this.emit(DISCONNECT)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DISCONNECT___1788;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 958; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client__detach__P1861.info = {"start":30226,"length":314,"line":907,"column":8,"endLine":916,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_detach","argumentNames":["this"]}

function jacdac_Client__detach__P1861_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client__detach__P1861, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
} }





function jacdac_Bus_detachClient__P1816(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(162,13): if (this.unattachedClients.indexOf(client) < 0) {...
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_2 = r0;
    r0 = pxsim_Array_.indexOf(s.tmp_2, s.arg1, undefined);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(163,17): this.unattachedClients.push(client)
    r0 = s.arg0.fields["unattachedClients"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.arg1);
// jacdac/routing.ts(164,17): this.clearAttachCache()
    s.tmp_0 = jacdac_Bus_clearAttachCache__P1813_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 823; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_detachClient__P1816.info = {"start":5354,"length":208,"line":160,"column":8,"endLine":165,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"detachClient","argumentNames":["this","client"]}

function jacdac_Bus_detachClient__P1816_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_detachClient__P1816, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_toString__P1882(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1060,13): return this.shortId
    s.tmp_0 = jacdac_Device_shortId__P1881_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 971; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_toString__P1882.info = {"start":34867,"length":54,"line":1058,"column":8,"endLine":1060,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_Device_toString__P1882_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_toString__P1882, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_resetToProxy__P2514(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/routing.ts(1468,9): log(`reset into proxy mode`)
    s.tmp_0 = jacdac_log__P2472_mk(s);
    s.tmp_0.arg0 = "reset into proxy mode";
    s.callLocIdx = 1067; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// jacdac/routing.ts(1469,9): settings.writeNumber(JACDAC_PROXY_SETTING, 1)
    s.tmp_0 = settings_writeNumber__P1084_mk(s);
    s.tmp_0.arg0 = globals.JACDAC_PROXY_SETTING___1899;
    s.tmp_0.arg1 = 1;
    s.callLocIdx = 1068; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// jacdac/routing.ts(1470,9): control.reset()
    setupResume(s, 3);
    pxsim.control.reset();
    checkResumeConsumed();
    return;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_resetToProxy__P2514.info = {"start":49110,"length":146,"line":1466,"column":4,"endLine":1470,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"resetToProxy","argumentNames":[]}

function jacdac_resetToProxy__P2514_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_resetToProxy__P2514, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function settings_writeNumber__P1084(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(91,9): writeBuffer(key, msgpack.packNumberArray([value]))
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_1 = settings_writeBuffer__P1081_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_2 = msgpack_packNumberArray__P182_mk(s);
    s.tmp_2.arg0 = s.tmp_0;
    s.callLocIdx = 137; s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 138; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_writeNumber__P1084.info = {"start":2265,"length":122,"line":89,"column":4,"endLine":91,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"writeNumber","argumentNames":["key","value"]}

function settings_writeNumber__P1084_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_writeNumber__P1084, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function msgpack_packNumberArray__P182(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.off___8027 = undefined;
    s.n___8029 = undefined;
    s.unnamed106___U2 = undefined;
    s.unnamed107___U3 = undefined;
    s.buf___8039 = undefined;
    s.n___8045 = undefined;
    s.unnamed108___U6 = undefined;
    s.unnamed109___U7 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(119,13): off = 0
    s.off___8027 = (0);
// base/buffer.ts(120,18): n
    s.n___8029 = (undefined);
    s.unnamed106___U2 = (s.arg0);
    s.unnamed107___U3 = (0);
// base/buffer.ts(120,9): for (let n of nums) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed107___U3;
    r0 = pxsim_Array__length(s.unnamed106___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed106___U2, s.unnamed107___U3);
    s.n___8029 = (r0);
// base/buffer.ts(121,13): off += packNumberCore(null, off, n)
    s.tmp_2 = r0 = s.off___8027;
    s.tmp_4 = msgpack_packNumberCore__P2144_mk(s);
    s.tmp_4.arg0 = null;
    s.tmp_4.arg1 = s.off___8027;
    s.tmp_4.arg2 = s.n___8029;
    s.callLocIdx = 26; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.off___8027 = (r0);
    r0 = (s.unnamed107___U3 + 1);
    s.unnamed107___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed106___U2 = (undefined);
// base/buffer.ts(123,13): buf = Buffer.create(off)
    r0 = pxsim.control.createBuffer(s.off___8027);
    s.buf___8039 = (r0);
// base/buffer.ts(124,9): off = 0
    s.off___8027 = (0);
// base/buffer.ts(125,18): n
    s.n___8045 = (undefined);
    s.unnamed108___U6 = (s.arg0);
    s.unnamed109___U7 = (0);
// base/buffer.ts(125,9): for (let n of nums) {...
  case 3:
    s.tmp_0 = r0 = s.unnamed109___U7;
    r0 = pxsim_Array__length(s.unnamed108___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed108___U6, s.unnamed109___U7);
    s.n___8045 = (r0);
// base/buffer.ts(126,13): off += packNumberCore(buf, off, n)
    s.tmp_2 = r0 = s.off___8027;
    s.tmp_4 = msgpack_packNumberCore__P2144_mk(s);
    s.tmp_4.arg0 = s.buf___8039;
    s.tmp_4.arg1 = s.off___8027;
    s.tmp_4.arg2 = s.n___8045;
    s.callLocIdx = 27; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.off___8027 = (r0);
    r0 = (s.unnamed109___U7 + 1);
    s.unnamed109___U7 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed108___U6 = (undefined);
// base/buffer.ts(128,9): return buf
    r0 = s.buf___8039;
    return leave(s, r0)
  default: oops()
} } }
msgpack_packNumberArray__P182.info = {"start":3427,"length":330,"line":117,"column":4,"endLine":128,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"packNumberArray","argumentNames":["nums"]}

function msgpack_packNumberArray__P182_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_packNumberArray__P182, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  off___8027: undefined,
  n___8029: undefined,
  unnamed106___U2: undefined,
  unnamed107___U3: undefined,
  buf___8039: undefined,
  n___8045: undefined,
  unnamed108___U6: undefined,
  unnamed109___U7: undefined,
  arg0: undefined,
} }





function msgpack_packNumberCore__P2144(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tag___8059 = undefined;
    s.fmt___8102 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(58,13): tag = 0xCB
    s.tag___8059 = (203);
// base/buffer.ts(59,9): if (num == (num << 0) || num == (num >>> 0)) {...
    s.tmp_1 = r0 = s.arg2;
    r0 = (s.arg2 << 0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = r0 = s.arg2;
    r0 = (s.arg2 >>> 0);
    s.tmp_4 = r0;
    r0 = (s.tmp_3 == s.tmp_4);
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 19; continue; }
// base/buffer.ts(60,13): if (-31 <= num && num <= 127) {...
    r0 = (-31 <= s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBool(s.tmp_6);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_6;
    { step = 4; continue; }
  case 3:
    r0 = (s.arg2 <= 127);
  case 4:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 7; continue; }
// base/buffer.ts(61,17): if (buf) buf[offset] = num
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 5; continue; }
// base/buffer.ts(61,26): buf[offset] = num
    r0 = pxsim.BufferMethods.setByte(s.arg0, s.arg1, s.arg2);
  case 5:
  case 6:
// base/buffer.ts(62,17): return 1
    r0 = 1;
    { step = 23; continue; }
    { step = 18; continue; }
  case 7:
// base/buffer.ts(63,20): if (0 <= num) {...
    r0 = (0 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
// base/buffer.ts(64,17): if (num <= 0xff) {...
    r0 = (s.arg2 <= 255);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 8; continue; }
// base/buffer.ts(65,21): tag = 0xCC
    s.tag___8059 = (204);
    { step = 11; continue; }
  case 8:
// base/buffer.ts(66,24): if (num <= 0xffff) {...
    r0 = (s.arg2 <= 65535);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// base/buffer.ts(67,21): tag = 0xCD
    s.tag___8059 = (205);
    { step = 10; continue; }
  case 9:
// base/buffer.ts(69,21): tag = 0xCE
    s.tag___8059 = (206);
  case 10:
  case 11:
    { step = 17; continue; }
  case 12:
// base/buffer.ts(72,17): if (-0x7f <= num) {...
    r0 = (-127 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// base/buffer.ts(73,21): tag = 0xD0
    s.tag___8059 = (208);
    { step = 16; continue; }
  case 13:
// base/buffer.ts(74,24): if (-0x7fff <= num) {...
    r0 = (-32767 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// base/buffer.ts(75,21): tag = 0xD1
    s.tag___8059 = (209);
    { step = 15; continue; }
  case 14:
// base/buffer.ts(77,21): tag = 0xD2
    s.tag___8059 = (210);
  case 15:
  case 16:
  case 17:
  case 18:
  case 19:
  case 20:
// base/buffer.ts(81,13): fmt = tagFormat(tag)
    s.tmp_0 = msgpack_tagFormat__P2143_mk(s);
    s.tmp_0.arg0 = s.tag___8059;
    s.callLocIdx = 22; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
    s.fmt___8102 = (r0);
// base/buffer.ts(82,9): if (buf) {...
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    if (!r0) { step = 21; continue; }
// base/buffer.ts(83,13): buf[offset] = tag
    r0 = pxsim.BufferMethods.setByte(s.arg0, s.arg1, s.tag___8059);
// base/buffer.ts(84,13): buf.setNumber(fmt, offset + 1, num)
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.fmt___8102;
    r0 = (s.arg1 + 1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, s.tmp_1, s.tmp_2, s.arg2);
  case 21:
  case 22:
// base/buffer.ts(86,9): return pins.sizeOf(fmt) + 1
    s.tmp_1 = pins_sizeOf__P173_mk(s);
    s.tmp_1.arg0 = s.fmt___8102;
    s.callLocIdx = 23; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
  case 23:
    return leave(s, r0)
  default: oops()
} } }
msgpack_packNumberCore__P2144.info = {"start":1632,"length":951,"line":56,"column":4,"endLine":86,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"packNumberCore","argumentNames":["buf","offset","num"]}

function msgpack_packNumberCore__P2144_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_packNumberCore__P2144, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tag___8059: undefined,
  fmt___8102: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function pins_sizeOf__P173(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(4,9): return Buffer.sizeOfNumberFormat(format)
    s.tmp_0 = Buffer_sizeOfNumberFormat__P213_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 19; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
pins_sizeOf__P173.info = {"start":42,"length":101,"line":2,"column":4,"endLine":4,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"sizeOf","argumentNames":["format"]}

function pins_sizeOf__P173_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pins_sizeOf__P173, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function msgpack_tagFormat__P2143(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(44,9): switch (tag) {...
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq(203, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(204, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(205, s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq(206, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(208, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(209, s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq(210, s.tmp_0);
    if (r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 1:
// base/buffer.ts(45,24): return NumberFormat.Float64BE
    r0 = 16;
    { step = 9; continue; }
  case 2:
// base/buffer.ts(46,24): return NumberFormat.UInt8BE
    r0 = 7;
    { step = 9; continue; }
  case 3:
// base/buffer.ts(47,24): return NumberFormat.UInt16BE
    r0 = 9;
    { step = 9; continue; }
  case 4:
// base/buffer.ts(48,24): return NumberFormat.UInt32BE
    r0 = 12;
    { step = 9; continue; }
  case 5:
// base/buffer.ts(49,24): return NumberFormat.Int8BE
    r0 = 6;
    { step = 9; continue; }
  case 6:
// base/buffer.ts(50,24): return NumberFormat.Int16BE
    r0 = 8;
    { step = 9; continue; }
  case 7:
// base/buffer.ts(51,24): return NumberFormat.Int32BE
    r0 = 10;
    { step = 9; continue; }
  case 8:
// base/buffer.ts(53,17): return null
    r0 = null;
    { step = 9; continue; }
    r0 = undefined;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
msgpack_tagFormat__P2143.info = {"start":1145,"length":481,"line":42,"column":4,"endLine":54,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"tagFormat","argumentNames":["tag"]}

function msgpack_tagFormat__P2143_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_tagFormat__P2143, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_isBrain__P1875(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1028,13): return this.hasService(SRV_UNIQUE_BRAIN)
    s.tmp_0 = jacdac_Device_hasService__P1891_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 272387813;
    s.callLocIdx = 968; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_isBrain__P1875.info = {"start":34031,"length":78,"line":1026,"column":8,"endLine":1028,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"isBrain","argumentNames":["this"]}
jacdac_Device_isBrain__P1875.isGetter = true;

function jacdac_Device_isBrain__P1875_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_isBrain__P1875, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_hasService__P1891(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.n___8142 = undefined;
    s.i___8144 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1201,19): n = this.serviceClassLength
    s.tmp_0 = jacdac_Device_serviceClassLength__P1884_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 999; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.n___8142 = (r0);
// jacdac/routing.ts(1202,22): i = 0
    s.i___8144 = (0);
// jacdac/routing.ts(1202,13): for (let i = 0; i < n; ++i)...
  case 1:
// jacdac/routing.ts(1202,29): i < n
    r0 = (s.i___8144 < s.n___8142);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// jacdac/routing.ts(1203,17): if (this.serviceClassAt(i) === serviceClass) return true
    s.tmp_3 = jacdac_Device_serviceClassAt__P1885_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.i___8144;
    s.callLocIdx = 1000; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(1203,62): return true
    r0 = true;
    { step = 5; continue; }
  case 2:
  case 3:
// jacdac/routing.ts(1202,36): ++i
    r0 = (s.i___8144 + 1);
    s.i___8144 = (r0);
    { step = 1; continue; }
  case 4:
// jacdac/routing.ts(1204,13): return false
    r0 = false;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_hasService__P1891.info = {"start":40002,"length":228,"line":1199,"column":8,"endLine":1204,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"hasService","argumentNames":["this","serviceClass"]}

function jacdac_Device_hasService__P1891_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_hasService__P1891, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  n___8142: undefined,
  i___8144: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_serviceMatches__P2494(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ds___8159 = undefined;
    s.i___8170 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/routing.ts(1350,15): ds = dev.services
    r0 = s.arg0.fields["services"];
    s.ds___8159 = (r0);
// jacdac/routing.ts(1351,9): if (!ds || ds.length != serv.length) return false
    r0 = pxsim_numops_toBoolDecr(s.ds___8159);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.BufferMethods.length(s.ds___8159);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 != s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(1351,46): return false
    r0 = false;
    { step = 9; continue; }
  case 3:
  case 4:
// jacdac/routing.ts(1352,18): i = 4
    s.i___8170 = (4);
// jacdac/routing.ts(1352,9): for (let i = 4; i < serv.length; ++i) if (ds[i] != serv[i]) return false
  case 5:
// jacdac/routing.ts(1352,25): i < serv.length
    s.tmp_1 = r0 = s.i___8170;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// jacdac/routing.ts(1352,47): if (ds[i] != serv[i]) return false
    r0 = pxsim.BufferMethods.getByte(s.ds___8159, s.i___8170);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, s.i___8170);
    s.tmp_5 = r0;
    r0 = (s.tmp_4 != s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
// jacdac/routing.ts(1352,69): return false
    r0 = false;
    { step = 9; continue; }
  case 6:
  case 7:
// jacdac/routing.ts(1352,42): ++i
    r0 = (s.i___8170 + 1);
    s.i___8170 = (r0);
    { step = 5; continue; }
  case 8:
// jacdac/routing.ts(1353,9): return true
    r0 = true;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
jacdac_serviceMatches__P2494.info = {"start":45258,"length":249,"line":1348,"column":4,"endLine":1353,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceMatches","argumentNames":["dev","serv"]}

function jacdac_serviceMatches__P2494_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_serviceMatches__P2494, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  ds___8159: undefined,
  i___8170: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_constructor__P1874(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
    r0 = (s.arg0).fields["deviceId"] = (s.arg1);
    r0 = (s.arg0).fields["services"] = (s.arg2);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["clients"] = (s.tmp_3);
// jacdac/routing.ts(1023,13): super()
    s.tmp_4 = jacdac_EventSource_constructor__P1913_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 967; s.pc = 1; return s.tmp_4;
  case 1:
    r0 = s.retval;
// jacdac/routing.ts(1024,13): bus.devices.push(this)
    r0 = globals.bus___1822.fields["devices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_constructor__P1874.info = {"start":33893,"length":128,"line":1021,"column":8,"endLine":1024,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","deviceId","services"]}

function jacdac_Device_constructor__P1874_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_constructor__P1874, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_EventSource_constructor__P1913(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C1912_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_constructor__P1913.info = {"start":593,"length":16,"line":20,"column":8,"endLine":20,"endColumn":24,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_EventSource_constructor__P1913_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_constructor__P1913, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Device__destroy__P1894(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___8203 = undefined;
    s.unnamed170___U1 = undefined;
    s.unnamed171___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1223,13): log("destroy " + this.shortId)
    s.tmp_0 = jacdac_log__P2472_mk(s);
    s.tmp_3 = jacdac_Device_shortId__P1881_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 1001; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("destroy ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1002; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// jacdac/routing.ts(1224,22): c
    s.c___8203 = (undefined);
    r0 = s.arg0.fields["clients"];
    s.unnamed170___U1 = (r0);
    s.unnamed171___U2 = (0);
// jacdac/routing.ts(1224,13): for (let c of this.clients) c._detach()
  case 1:
    s.tmp_0 = r0 = s.unnamed171___U2;
    r0 = pxsim_Array__length(s.unnamed170___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed170___U1, s.unnamed171___U2);
    s.c___8203 = (r0);
// jacdac/routing.ts(1224,41): c._detach()
    s.tmp_2 = jacdac_Client__detach__P1861_mk(s);
    s.tmp_2.arg0 = s.c___8203;
    s.callLocIdx = 1003; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    r0 = (s.unnamed171___U2 + 1);
    s.unnamed171___U2 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed170___U1 = (undefined);
// jacdac/routing.ts(1225,13): this.clients = null
    r0 = (s.arg0).fields["clients"] = (null);
// jacdac/routing.ts(1226,13): this.emit(DEVICE_DISCONNECT)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_DISCONNECT___1790;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1004; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// jacdac/routing.ts(1227,13): bus.emit(DEVICE_DISCONNECT, this)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = globals.DEVICE_DISCONNECT___1790;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 1005; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device__destroy__P1894.info = {"start":40747,"length":236,"line":1221,"column":8,"endLine":1227,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"_destroy","argumentNames":["this"]}

function jacdac_Device__destroy__P1894_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device__destroy__P1894, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  c___8203: undefined,
  unnamed170___U1: undefined,
  unnamed171___U2: undefined,
  arg0: undefined,
} }





function jacdac_Device_shortId__P1881(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1055,1): if (!this._shortId) this._shortId = shortDeviceId(this.deviceId)
    r0 = s.arg0.fields["_shortId"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1055,33): this._shortId = shortDeviceId(this.deviceId)
    s.tmp_3 = r0 = s.arg0;
    s.tmp_5 = jacdac_shortDeviceId__P1869_mk(s);
    r0 = s.arg0.fields["deviceId"];
    s.tmp_5.arg0 = r0;
    s.callLocIdx = 970; s.pc = 3; return s.tmp_5;
  case 3:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["_shortId"] = (s.tmp_4);
  case 1:
  case 2:
// jacdac/routing.ts(1056,13): return this._shortId
    r0 = s.arg0.fields["_shortId"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_shortId__P1881.info = {"start":34671,"length":186,"line":1052,"column":8,"endLine":1056,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"shortId","argumentNames":["this"]}
jacdac_Device_shortId__P1881.isGetter = true;

function jacdac_Device_shortId__P1881_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_shortId__P1881, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_shortDeviceId__P1869(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.h___8231 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/routing.ts(996,15): h = Buffer.fromHex(devid).hash(30)
    s.tmp_1 = Buffer_fromHex__P204_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 966; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.hash(s.tmp_0, 30);
    s.h___8231 = (r0);
// jacdac/routing.ts(997,9): return (...
    r0 = (s.h___8231 % 26);
    s.tmp_7 = r0;
    r0 = (65 + s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_6);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim.Math_.idiv(s.h___8231, 26);
    s.tmp_12 = r0;
    r0 = (s.tmp_12 % 26);
    s.tmp_11 = r0;
    r0 = (65 + s.tmp_11);
    s.tmp_10 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_8);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.Math_.idiv(s.h___8231, 676);
    s.tmp_17 = r0;
    r0 = (s.tmp_17 % 10);
    s.tmp_16 = r0;
    r0 = (48 + s.tmp_16);
    s.tmp_15 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_15);
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_13);
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.Math_.idiv(s.h___8231, 6760);
    s.tmp_22 = r0;
    r0 = (s.tmp_22 % 10);
    s.tmp_21 = r0;
    r0 = (48 + s.tmp_21);
    s.tmp_20 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_20);
    s.tmp_19 = r0;
    if ((s.tmp_19) && (s.tmp_19).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_19);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_19) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_18 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_18);
    return leave(s, r0)
  default: oops()
} } }
jacdac_shortDeviceId__P1869.info = {"start":33025,"length":390,"line":994,"column":4,"endLine":1002,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"shortDeviceId","argumentNames":["devid"]}

function jacdac_shortDeviceId__P1869_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_shortDeviceId__P1869, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  h___8231: undefined,
  arg0: undefined,
} }





function Buffer_fromHex__P204(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.hexStr___8289 = undefined;
    s.res___8291 = undefined;
    s.i___8300 = undefined;
    s.p0___8306 = undefined;
    s.p1___8315 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(287,15): hexStr = "0123456789abcdef"
    s.hexStr___8289 = ("0123456789abcdef");
// base/buffer.ts(288,15): res = Buffer.create(hex.length >> 1)
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 1);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.res___8291 = (r0);
// base/buffer.ts(289,9): hex = hex.toLowerCase()
    s.tmp_0 = helpers_stringToLowerCase__P121_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 30; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.arg0 = (r0);
// base/buffer.ts(290,18): i = 0
    s.i___8300 = (0);
// base/buffer.ts(290,9): for (let i = 0; i < hex.length; i += 2) {...
  case 1:
// base/buffer.ts(290,25): i < hex.length
    s.tmp_1 = r0 = s.i___8300;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/buffer.ts(291,19): p0 = hexStr.indexOf(hex.charAt(i))
    s.tmp_3 = r0 = s.hexStr___8289;
    r0 = pxsim_String_.charAt(s.arg0, s.i___8300);
    s.tmp_4 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_3, s.tmp_4, undefined);
    s.p0___8306 = (r0);
// base/buffer.ts(292,19): p1 = hexStr.indexOf(hex.charAt(i + 1))
    s.tmp_0 = r0 = s.hexStr___8289;
    s.tmp_2 = r0 = s.arg0;
    r0 = (s.i___8300 + 1);
    s.tmp_3 = r0;
    r0 = pxsim_String_.charAt(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_0, s.tmp_1, undefined);
    s.p1___8315 = (r0);
// base/buffer.ts(293,13): if (p0 < 0 || p1 < 0)...
    r0 = (s.p0___8306 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.p1___8315 < 0);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
// base/buffer.ts(294,17): throw "Invalid hex"
    r0 = pxsim_pxtcore.throwValue("Invalid hex");
  case 4:
  case 5:
// base/buffer.ts(295,13): res[i >> 1] = (p0 << 4) | p1
    s.tmp_2 = r0 = s.res___8291;
    r0 = (s.i___8300 >> 1);
    s.tmp_3 = r0;
    r0 = (s.p0___8306 << 4);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 | s.p1___8315);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, s.tmp_3, s.tmp_4);
// base/buffer.ts(290,41): i += 2
    r0 = (s.i___8300 + 2);
    s.i___8300 = (r0);
    { step = 1; continue; }
  case 6:
// base/buffer.ts(297,9): return res
    r0 = s.res___8291;
    return leave(s, r0)
  default: oops()
} } }
Buffer_fromHex__P204.info = {"start":8064,"length":469,"line":285,"column":4,"endLine":297,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"fromHex","argumentNames":["hex"]}

function Buffer_fromHex__P204_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_fromHex__P204, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  hexStr___8289: undefined,
  res___8291: undefined,
  i___8300: undefined,
  p0___8306: undefined,
  p1___8315: undefined,
  arg0: undefined,
} }





function helpers_stringToLowerCase__P121(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___8346 = undefined;
    s.prev___8347 = undefined;
    s.i___8348 = undefined;
    s.c___8354 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(422,13): r = ""
    r0 = pxsim_String_.mkEmpty();
    s.r___8346 = (r0);
// base/pxt-helpers.ts(423,13): prev = 0
    s.prev___8347 = (0);
// base/pxt-helpers.ts(424,18): i = 0
    s.i___8348 = (0);
// base/pxt-helpers.ts(424,9): for (let i = 0; i < s.length; i++) {...
  case 1:
// base/pxt-helpers.ts(424,25): i < s.length
    s.tmp_1 = r0 = s.i___8348;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/pxt-helpers.ts(425,19): c = s.charCodeAt(i)
    r0 = pxsim_String_.charCodeAt(s.arg0, s.i___8348);
    s.c___8354 = (r0);
// base/pxt-helpers.ts(426,13): if (65 <= c && c <= 90) {...
    r0 = (65 <= s.c___8354);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.c___8354 <= 90);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(427,17): r += s.slice(prev, i) + String.fromCharCode(c + 32)
    if ((s.r___8346) && (s.r___8346).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.r___8346);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___8346) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_2 = r0;
    s.tmp_7 = helpers_stringSlice__P119_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.tmp_7.arg1 = s.prev___8347;
    s.tmp_7.arg2 = s.i___8348;
    s.callLocIdx = 13; s.pc = 8; return s.tmp_7;
  case 8:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = (s.c___8354 + 32);
    s.tmp_10 = r0;
    r0 = pxsim_String_.fromCharCode(s.tmp_10);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_8);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.r___8346 = (r0);
// base/pxt-helpers.ts(428,17): prev = i + 1
    r0 = (s.i___8348 + 1);
    s.prev___8347 = (r0);
  case 4:
  case 5:
// base/pxt-helpers.ts(424,39): i++
    r0 = (s.i___8348 + 1);
    s.i___8348 = (r0);
    { step = 1; continue; }
  case 6:
// base/pxt-helpers.ts(431,9): r += s.slice(prev)
    if ((s.r___8346) && (s.r___8346).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.r___8346);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___8346) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.prev___8347;
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 14; s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___8346 = (r0);
// base/pxt-helpers.ts(432,9): return r
    r0 = s.r___8346;
    return leave(s, r0)
  default: oops()
} } }
helpers_stringToLowerCase__P121.info = {"start":12527,"length":386,"line":420,"column":4,"endLine":432,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"stringToLowerCase","argumentNames":["s"]}

function helpers_stringToLowerCase__P121_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_stringToLowerCase__P121, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  r___8346: undefined,
  prev___8347: undefined,
  i___8348: undefined,
  c___8354: undefined,
  arg0: undefined,
} }





function jacdac_log__P2472(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/routing.ts(332,9): console.add(logPriority, msg)
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = globals.logPriority___1823;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 882; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_log__P2472.info = {"start":11846,"length":71,"line":330,"column":4,"endLine":332,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"log","argumentNames":["msg"]}

function jacdac_log__P2472_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_log__P2472, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Device_restartCounter__P1877(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1036,13): return (...
    s.tmp_1 = jacdac_Device_announceflags__P1876_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 969; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 15);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_restartCounter__P1877.info = {"start":34251,"length":146,"line":1034,"column":8,"endLine":1038,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"restartCounter","argumentNames":["this"]}
jacdac_Device_restartCounter__P1877.isGetter = true;

function jacdac_Device_restartCounter__P1877_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_restartCounter__P1877, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_Device_announceflags__P1876(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1032,13): return this.services.getNumber(NumberFormat.UInt16LE, 0)
    r0 = s.arg0.fields["services"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_announceflags__P1876.info = {"start":34119,"length":122,"line":1030,"column":8,"endLine":1032,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"announceflags","argumentNames":["this"]}
jacdac_Device_announceflags__P1876.isGetter = true;

function jacdac_Device_announceflags__P1876_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_announceflags__P1876, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_data__P1443(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(188,13): return this._data
    r0 = s.arg0.fields["_data"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_data__P1443.info = {"start":5808,"length":60,"line":186,"column":8,"endLine":188,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"data","argumentNames":["this"]}
jacdac_JDPacket_data__P1443.isGetter = true;

function jacdac_JDPacket_data__P1443_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_data__P1443, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDPacket_serviceCommand__P1435(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(148,13): return this._header.getNumber(NumberFormat.UInt16LE, 14)
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 14);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceCommand__P1435.info = {"start":4700,"length":109,"line":146,"column":8,"endLine":148,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceCommand","argumentNames":["this"]}
jacdac_JDPacket_serviceCommand__P1435.isGetter = true;

function jacdac_JDPacket_serviceCommand__P1435_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceCommand__P1435, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Server_handlePacketOuter__P1830(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(363,13): switch (pkt.serviceCommand) {...
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 884; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(4355, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(4361, s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 1:
// jacdac/routing.ts(365,21): this.handleStatusCode(pkt)
    s.tmp_2 = jacdac_Server_handleStatusCode__P2386_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 885; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
// jacdac/routing.ts(366,21): break
    { step = 4; continue; }
  case 2:
// jacdac/routing.ts(368,21): this.handleInstanceName(pkt)
    s.tmp_0 = jacdac_Server_handleInstanceName__P2387_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 886; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// jacdac/routing.ts(369,21): break
    { step = 4; continue; }
  case 3:
// jacdac/routing.ts(371,21): this.stateUpdated = false
    r0 = (s.arg0).fields["stateUpdated"] = (false);
// jacdac/routing.ts(372,21): this.handlePacket(pkt)
    s.tmp_0 = jacdac_Server__C1824_v1_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.handlePacket;
    s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// jacdac/routing.ts(373,21): break
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handlePacketOuter__P1830.info = {"start":12681,"length":524,"line":361,"column":8,"endLine":374,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_Server_handlePacketOuter__P1830_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handlePacketOuter__P1830, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handlePacket__P1831(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handlePacket__P1831.info = {"start":13215,"length":30,"line":376,"column":8,"endLine":376,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function jacdac_Server_handlePacket__P1831_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handlePacket__P1831, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleInstanceName__P2387(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(411,13): this.handleRegValue(...
    r0 = s.arg0.fields["instanceName"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.mkEmpty();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_2 = jacdac_Server_handleRegValue__P2389_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 265;
    s.tmp_2.arg3 = "s";
    s.tmp_2.arg4 = s.tmp_1;
    s.callLocIdx = 898; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleInstanceName__P2387.info = {"start":14208,"length":222,"line":409,"column":8,"endLine":416,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleInstanceName","argumentNames":["this","pkt"]}

function jacdac_Server_handleInstanceName__P2387_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleInstanceName__P2387, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleRegValue__P2389(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.getset___8459 = undefined;
    s.reg___8469 = undefined;
    s.v___8492 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(452,19): getset = pkt.serviceCommand >> 12
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 899; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 12);
    s.getset___8459 = (r0);
// jacdac/routing.ts(453,13): if (getset == 0 || getset > 2) return current
    r0 = (s.getset___8459 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.getset___8459 > 2);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(453,44): return current
    r0 = s.arg4;
    { step = 13; continue; }
  case 3:
  case 4:
// jacdac/routing.ts(454,19): reg = pkt.serviceCommand & 0xfff
    s.tmp_3 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 900; s.pc = 15; return s.tmp_3;
  case 15:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 4095);
    s.reg___8469 = (r0);
// jacdac/routing.ts(455,13): if (reg != register) return current
    r0 = (s.reg___8469 != s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// jacdac/routing.ts(455,34): return current
    r0 = s.arg4;
    { step = 13; continue; }
  case 5:
  case 6:
// jacdac/routing.ts(456,13): pkt.markHandled()
    s.tmp_1 = jacdac_JDPacket_markHandled__P1423_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 901; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
// jacdac/routing.ts(458,1): if (getset == 1) {...
    r0 = (s.getset___8459 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// jacdac/routing.ts(459,17): this.sendReport(...
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.arg4);
    s.tmp_2 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_3 = jacdac_JDPacket_jdpacked__P1420_mk(s);
    s.tmp_4 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 902; s.pc = 19; return s.tmp_4;
  case 19:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.arg3;
    s.tmp_3.arg2 = s.tmp_1;
    s.callLocIdx = 903; s.pc = 18; return s.tmp_3;
  case 18:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 904; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
    { step = 12; continue; }
  case 7:
// jacdac/routing.ts(463,17): if (register >> 8 == 0x1) return current
    r0 = (s.arg2 >> 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// jacdac/routing.ts(463,43): return current
    r0 = s.arg4;
    { step = 13; continue; }
  case 8:
  case 9:
// jacdac/routing.ts(464,23): v = pkt.jdunpack(fmt)
    s.tmp_2 = jacdac_JDPacket_jdunpack__P1448_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_2.arg1 = s.arg3;
    s.callLocIdx = 905; s.pc = 20; return s.tmp_2;
  case 20:
    r0 = s.retval;
    s.v___8492 = (r0);
// jacdac/routing.ts(465,17): if (v[0] !== current) {...
    r0 = pxsim_Array__getAt(s.v___8492, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.arg4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// jacdac/routing.ts(466,21): this.stateUpdated = true
    r0 = (s.arg0).fields["stateUpdated"] = (true);
// jacdac/routing.ts(467,21): current = v[0]
    r0 = pxsim_Array__getAt(s.v___8492, 0);
    s.arg4 = (r0);
  case 10:
  case 11:
  case 12:
// jacdac/routing.ts(470,13): return current
    r0 = s.arg4;
  case 13:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegValue__P2389.info = {"start":15378,"length":918,"line":445,"column":8,"endLine":470,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegValue","argumentNames":["this","pkt","register","fmt","current"]}

function jacdac_Server_handleRegValue__P2389_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegValue__P2389, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  getset___8459: undefined,
  reg___8469: undefined,
  v___8492: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_JDPacket_jdunpack__P1448(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___8508 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(210,19): p = this._data && fmt && jdunpack<T>(this._data, fmt)
    r0 = s.arg0.fields["_data"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg1;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_1;
    { step = 4; continue; }
  case 3:
    s.tmp_2 = jacdac_jdunpack__P1467_mk(s);
    r0 = s.arg0.fields["_data"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 621; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.p___8508 = (s.tmp_3);
// jacdac/packet.ts(211,13): return (p || []) as T
    s.tmp_0 = r0 = s.p___8508;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = pxsim_Array__mk();
  case 6:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_jdunpack__P1448.info = {"start":6316,"length":159,"line":208,"column":8,"endLine":211,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"jdunpack","argumentNames":["this","fmt"]}

function jacdac_JDPacket_jdunpack__P1448_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_jdunpack__P1448, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  p___8508: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdunpack__P1467(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/pack.ts(218,9): if (!buf || !fmt) return [] as T
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// jacdac/pack.ts(218,27): return [] as T
    r0 = pxsim_Array__mk();
    { step = 5; continue; }
  case 3:
  case 4:
// jacdac/pack.ts(221,1): //const storage = numberFormatOfType(fmt);...
    s.tmp_4 = jacdac_jdunpackCore__P2368_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg1;
    s.tmp_4.arg2 = 0;
    s.callLocIdx = 684; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdunpack__P1467.info = {"start":6986,"length":334,"line":216,"column":4,"endLine":225,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdunpack","argumentNames":["buf","fmt"]}

function jacdac_jdunpack__P1467_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdunpack__P1467, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdunpackCore__P2368(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.repeatRes___8535 = undefined;
    s.res___8540 = undefined;
    s.off___8542 = undefined;
    s.fp0___8543 = undefined;
    s.parser___8544 = undefined;
    s.sz___8579 = undefined;
    s.c0___8582 = undefined;
    s.endoff___8588 = undefined;
    s.fmt1___8617 = undefined;
    s.v___8624 = undefined;
    s.subbuf___8661 = undefined;
    s.zerop___8676 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// jacdac/pack.ts(142,15): repeatRes: any[][] = repeat ? [] : null
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 1; continue; }
    r0 = pxsim_Array__mk();
    { step = 2; continue; }
  case 1:
    r0 = null;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.repeatRes___8535 = (s.tmp_0);
// jacdac/pack.ts(143,13): res: any[] = []
    r0 = pxsim_Array__mk();
    s.res___8540 = (r0);
// jacdac/pack.ts(144,13): off = 0
    s.off___8542 = (0);
// jacdac/pack.ts(145,13): fp0 = 0
    s.fp0___8543 = (0);
// jacdac/pack.ts(146,15): parser = new TokenParser(fmt)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_TokenParser__C2365_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_TokenParser_constructor__P2367_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 674; s.pc = 58; return s.tmp_1;
  case 58:
    r0 = s.retval;
    s.parser___8544 = (s.tmp_0);
// jacdac/pack.ts(147,9): if (repeat && buf.length == 0) return []
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
// jacdac/pack.ts(147,40): return []
    r0 = pxsim_Array__mk();
    { step = 57; continue; }
  case 5:
  case 6:
// jacdac/pack.ts(148,9): while (parser.parse()) {...
  case 7:
// jacdac/pack.ts(148,16): parser.parse()
    s.tmp_4 = jacdac_TokenParser_parse__P2366_mk(s);
    s.tmp_4.arg0 = s.parser___8544;
    s.callLocIdx = 675; s.pc = 59; return s.tmp_4;
  case 59:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 52; continue; }
// jacdac/pack.ts(149,13): if (parser.isArray && !repeat) {...
    r0 = s.parser___8544.fields["isArray"];
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_5;
    { step = 9; continue; }
  case 8:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
  case 9:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 10; continue; }
// jacdac/pack.ts(150,17): res.push(...
    s.tmp_8 = r0 = s.res___8540;
    s.tmp_10 = jacdac_jdunpackCore__P2368_mk(s);
    s.tmp_11 = jacdac_bufferSlice__P2364_mk(s);
    s.tmp_11.arg0 = s.arg0;
    s.tmp_11.arg1 = s.off___8542;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_11.arg2 = r0;
    s.callLocIdx = 676; s.pc = 61; return s.tmp_11;
  case 61:
    r0 = s.retval;
    s.tmp_10.arg0 = r0;
    s.tmp_12 = helpers_stringSlice__P119_mk(s);
    s.tmp_12.arg0 = s.arg1;
    s.tmp_12.arg1 = s.fp0___8543;
    s.tmp_12.arg2 = undefined;
    s.callLocIdx = 677; s.pc = 62; return s.tmp_12;
  case 62:
    r0 = s.retval;
    s.tmp_10.arg1 = r0;
    s.tmp_10.arg2 = 1;
    s.callLocIdx = 678; s.pc = 60; return s.tmp_10;
  case 60:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_Array__push(s.tmp_8, s.tmp_9);
// jacdac/pack.ts(157,17): return res
    r0 = s.res___8540;
    { step = 57; continue; }
  case 10:
  case 11:
// jacdac/pack.ts(160,13): fp0 = parser.fp
    r0 = s.parser___8544.fields["fp"];
    s.fp0___8543 = (r0);
// jacdac/pack.ts(161,17): sz = parser.size
    r0 = s.parser___8544.fields["size"];
    s.sz___8579 = (r0);
// jacdac/pack.ts(162,19): c0 = parser.c0
    r0 = s.parser___8544.fields["c0"];
    s.c0___8582 = (r0);
// jacdac/pack.ts(163,13): if (c0 == ch_z) {...
    r0 = (s.c0___8582 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
// jacdac/pack.ts(164,21): endoff = off
    s.endoff___8588 = (s.off___8542);
// jacdac/pack.ts(165,17): while (endoff < buf.length && buf[endoff] != 0) endoff++
  case 12:
// jacdac/pack.ts(165,24): endoff < buf.length && buf[endoff] != 0
    s.tmp_1 = r0 = s.endoff___8588;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_0;
    { step = 14; continue; }
  case 13:
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.endoff___8588);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 0);
  case 14:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 15; continue; }
// jacdac/pack.ts(165,65): endoff++
    r0 = (s.endoff___8588 + 1);
    s.endoff___8588 = (r0);
    { step = 12; continue; }
  case 15:
// jacdac/pack.ts(166,17): sz = endoff - off
    r0 = (s.endoff___8588 - s.off___8542);
    s.sz___8579 = (r0);
    { step = 19; continue; }
  case 16:
// jacdac/pack.ts(167,20): if (sz < 0) {...
    r0 = (s.sz___8579 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
// jacdac/pack.ts(168,17): sz = buf.length - off
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - s.off___8542);
    s.sz___8579 = (r0);
  case 17:
  case 18:
  case 19:
// jacdac/pack.ts(171,13): if (parser.nfmt !== null) {...
    r0 = s.parser___8544.fields["nfmt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 26; continue; }
// jacdac/pack.ts(172,23): fmt1 = parser.nfmt2 ? NumberFormat.UInt32LE : parser.nfmt
    r0 = s.parser___8544.fields["nfmt2"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
    r0 = 11;
    { step = 21; continue; }
  case 20:
    r0 = s.parser___8544.fields["nfmt"];
  case 21:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.fmt1___8617 = (s.tmp_3);
// jacdac/pack.ts(173,21): v = buf.getNumber(fmt1, off)
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.fmt1___8617, s.off___8542);
    s.v___8624 = (r0);
// jacdac/pack.ts(174,17): if (parser.nfmt2)...
    r0 = s.parser___8544.fields["nfmt2"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
// jacdac/pack.ts(175,21): v += buf.getNumber(parser.nfmt, off + 4) * 4294967296
    s.tmp_1 = r0 = s.v___8624;
    s.tmp_4 = r0 = s.arg0;
    r0 = s.parser___8544.fields["nfmt"];
    s.tmp_5 = r0;
    r0 = (s.off___8542 + 4);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_4, s.tmp_5, s.tmp_6);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 * 4294967296);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 + s.tmp_2);
    s.v___8624 = (r0);
  case 22:
  case 23:
// jacdac/pack.ts(176,17): if (parser.div != 1) v /= parser.div
    r0 = s.parser___8544.fields["div"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 24; continue; }
// jacdac/pack.ts(176,38): v /= parser.div
    r0 = s.parser___8544.fields["div"];
    s.tmp_2 = r0;
    r0 = (s.v___8624 / s.tmp_2);
    s.v___8624 = (r0);
  case 24:
  case 25:
// jacdac/pack.ts(177,17): res.push(v)
    r0 = pxsim_Array__push(s.res___8540, s.v___8624);
// jacdac/pack.ts(178,17): off += parser.size
    r0 = s.parser___8544.fields["size"];
    s.tmp_0 = r0;
    r0 = (s.off___8542 + s.tmp_0);
    s.off___8542 = (r0);
    { step = 43; continue; }
  case 26:
// jacdac/pack.ts(180,23): subbuf = bufferSlice(buf, off, off + sz)
    s.tmp_0 = jacdac_bufferSlice__P2364_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.off___8542;
    r0 = (s.off___8542 + s.sz___8579);
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 679; s.pc = 63; return s.tmp_0;
  case 63:
    r0 = s.retval;
    s.subbuf___8661 = (r0);
// jacdac/pack.ts(181,17): if (c0 == ch_z || c0 == ch_s) {...
    r0 = (s.c0___8582 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 27; continue; }
    r0 = s.tmp_0;
    { step = 28; continue; }
  case 27:
    r0 = (s.c0___8582 == 115);
  case 28:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 33; continue; }
// jacdac/pack.ts(182,25): zerop = 0
    s.zerop___8676 = (0);
// jacdac/pack.ts(183,21): while (zerop < subbuf.length && subbuf[zerop] != 0) zerop++
  case 29:
// jacdac/pack.ts(183,28): zerop < subbuf.length && subbuf[zerop] != 0
    s.tmp_1 = r0 = s.zerop___8676;
    r0 = pxsim.BufferMethods.length(s.subbuf___8661);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 30; continue; }
    r0 = s.tmp_0;
    { step = 31; continue; }
  case 30:
    r0 = pxsim.BufferMethods.getByte(s.subbuf___8661, s.zerop___8676);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 != 0);
  case 31:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 32; continue; }
// jacdac/pack.ts(183,73): zerop++
    r0 = (s.zerop___8676 + 1);
    s.zerop___8676 = (r0);
    { step = 29; continue; }
  case 32:
// jacdac/pack.ts(184,21): res.push(bufferToString(bufferSlice(subbuf, 0, zerop)))
    s.tmp_0 = r0 = s.res___8540;
    s.tmp_2 = jacdac_bufferToString__P2362_mk(s);
    s.tmp_3 = jacdac_bufferSlice__P2364_mk(s);
    s.tmp_3.arg0 = s.subbuf___8661;
    s.tmp_3.arg1 = 0;
    s.tmp_3.arg2 = s.zerop___8676;
    s.callLocIdx = 680; s.pc = 65; return s.tmp_3;
  case 65:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 681; s.pc = 64; return s.tmp_2;
  case 64:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    { step = 40; continue; }
  case 33:
// jacdac/pack.ts(185,24): if (c0 == ch_b) {...
    r0 = (s.c0___8582 == 98);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 34; continue; }
// jacdac/pack.ts(186,21): res.push(subbuf)
    r0 = pxsim_Array__push(s.res___8540, s.subbuf___8661);
    { step = 39; continue; }
  case 34:
// jacdac/pack.ts(187,24): if (c0 == ch_x) {...
    r0 = (s.c0___8582 == 120);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 35; continue; }
    { step = 38; continue; }
  case 35:
// jacdac/pack.ts(189,24): if (c0 == ch_r) {...
    r0 = (s.c0___8582 == 114);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 36; continue; }
// jacdac/pack.ts(190,21): res.push(jdunpackCore(subbuf, fmt.slice(fp0), 2))
    s.tmp_2 = r0 = s.res___8540;
    s.tmp_4 = jacdac_jdunpackCore__P2368_mk(s);
    s.tmp_4.arg0 = s.subbuf___8661;
    s.tmp_5 = helpers_stringSlice__P119_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.tmp_5.arg1 = s.fp0___8543;
    s.tmp_5.arg2 = undefined;
    s.callLocIdx = 682; s.pc = 67; return s.tmp_5;
  case 67:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    s.tmp_4.arg2 = 2;
    s.callLocIdx = 683; s.pc = 66; return s.tmp_4;
  case 66:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.tmp_3);
// jacdac/pack.ts(191,21): break
    { step = 52; continue; }
    { step = 37; continue; }
  case 36:
// jacdac/pack.ts(193,21): throw `whoops`
    r0 = pxsim_pxtcore.throwValue("whoops");
  case 37:
  case 38:
  case 39:
  case 40:
// jacdac/pack.ts(195,17): off += subbuf.length
    s.tmp_0 = r0 = s.off___8542;
    r0 = pxsim.BufferMethods.length(s.subbuf___8661);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.off___8542 = (r0);
// jacdac/pack.ts(196,17): if (c0 == ch_z) off++
    r0 = (s.c0___8582 == 122);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 41; continue; }
// jacdac/pack.ts(196,33): off++
    r0 = (s.off___8542 + 1);
    s.off___8542 = (r0);
  case 41:
  case 42:
  case 43:
// jacdac/pack.ts(199,13): if (repeat && parser.fp >= fmt.length) {...
    s.tmp_0 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 44; continue; }
    r0 = s.tmp_0;
    { step = 45; continue; }
  case 44:
    r0 = s.parser___8544.fields["fp"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 >= s.tmp_2);
  case 45:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 50; continue; }
// jacdac/pack.ts(200,17): parser.fp = 0
    r0 = (s.parser___8544).fields["fp"] = (0);
// jacdac/pack.ts(201,17): if (repeat == 2) {...
    r0 = (s.arg2 == 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 46; continue; }
// jacdac/pack.ts(202,21): repeatRes.push(res)
    r0 = pxsim_Array__push(s.repeatRes___8535, s.res___8540);
// jacdac/pack.ts(203,21): res = []
    r0 = pxsim_Array__mk();
    s.res___8540 = (r0);
  case 46:
  case 47:
// jacdac/pack.ts(205,17): if (off >= buf.length) break
    s.tmp_1 = r0 = s.off___8542;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 >= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 48; continue; }
// jacdac/pack.ts(205,40): break
    { step = 52; continue; }
  case 48:
  case 49:
  case 50:
  case 51:
    { step = 7; continue; }
  case 52:
// jacdac/pack.ts(209,9): if (repeat == 2) {...
    r0 = (s.arg2 == 2);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 55; continue; }
// jacdac/pack.ts(210,13): if (res.length) repeatRes.push(res)
    r0 = pxsim_Array__length(s.res___8540);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 53; continue; }
// jacdac/pack.ts(210,29): repeatRes.push(res)
    r0 = pxsim_Array__push(s.repeatRes___8535, s.res___8540);
  case 53:
  case 54:
// jacdac/pack.ts(211,13): return repeatRes
    r0 = s.repeatRes___8535;
    { step = 57; continue; }
    { step = 56; continue; }
  case 55:
// jacdac/pack.ts(213,13): return res
    r0 = s.res___8540;
    { step = 57; continue; }
  case 56:
    r0 = undefined;
  case 57:
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdunpackCore__P2368.info = {"start":4395,"length":2585,"line":140,"column":4,"endLine":214,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"jdunpackCore","argumentNames":["buf","fmt","repeat"]}

function jacdac_jdunpackCore__P2368_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdunpackCore__P2368, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  repeatRes___8535: undefined,
  res___8540: undefined,
  off___8542: undefined,
  fp0___8543: undefined,
  parser___8544: undefined,
  sz___8579: undefined,
  c0___8582: undefined,
  endoff___8588: undefined,
  fmt1___8617: undefined,
  v___8624: undefined,
  subbuf___8661: undefined,
  zerop___8676: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_bufferToString__P2362(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/pack.ts(44,9): return buf.toString()
    r0 = pxsim.BufferMethods.toString(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_bufferToString__P2362.info = {"start":1197,"length":74,"line":42,"column":4,"endLine":44,"endColumn":5,"fileName":"pxt_modules/jacdac/pack.ts","functionName":"bufferToString","argumentNames":["buf"]}

function jacdac_bufferToString__P2362_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_bufferToString__P2362, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Server_sendReport__P2383(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(384,13): if (this.serviceIndex == null) return
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(384,44): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(385,13): pkt.serviceIndex = this.serviceIndex
    s.tmp_2 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_2.arg0 = s.arg1;
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 887; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
// jacdac/routing.ts(386,13): pkt._sendReport(bus.selfDevice)
    s.tmp_0 = jacdac_JDPacket__sendReport__P1458_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_1.arg0 = globals.bus___1822;
    s.callLocIdx = 888; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 889; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendReport__P2383.info = {"start":13322,"length":190,"line":382,"column":8,"endLine":386,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendReport","argumentNames":["this","pkt"]}

function jacdac_Server_sendReport__P2383_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendReport__P2383, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_markHandled__P1423(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(83,13): this._handled = true
    r0 = (s.arg0).fields["_handled"] = (true);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_markHandled__P1423.info = {"start":2693,"length":58,"line":81,"column":8,"endLine":83,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"markHandled","argumentNames":["this"]}

function jacdac_JDPacket_markHandled__P1423_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_markHandled__P1423, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Server_handleStatusCode__P2386(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(407,13): this.handleRegUInt32(pkt, SystemReg.StatusCode, this._statusCode)
    s.tmp_0 = jacdac_Server_handleRegUInt32__P2392_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 259;
    r0 = s.arg0.fields["_statusCode"];
    s.tmp_0.arg3 = r0;
    s.callLocIdx = 897; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleStatusCode__P2386.info = {"start":14069,"length":129,"line":405,"column":8,"endLine":407,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleStatusCode","argumentNames":["this","pkt"]}

function jacdac_Server_handleStatusCode__P2386_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleStatusCode__P2386, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_handleRegUInt32__P2392(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___8792 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(501,19): res = this.handleRegValue(pkt, register, "u32", current >>> 0)
    s.tmp_0 = jacdac_Server_handleRegValue__P2389_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = "u32";
    r0 = (s.arg3 >>> 0);
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 907; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.res___8792 = (r0);
// jacdac/routing.ts(502,13): return res
    r0 = s.res___8792;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegUInt32__P2392.info = {"start":16895,"length":245,"line":495,"column":8,"endLine":502,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegUInt32","argumentNames":["this","pkt","register","current"]}

function jacdac_Server_handleRegUInt32__P2392_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegUInt32__P2392, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  res___8792: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_JDPacket_isCommand__P1453(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(244,13): return !!(this.packetFlags & JD_FRAME_FLAG_COMMAND)
    s.tmp_5 = jacdac_JDPacket_packetFlags__P1427_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 625; s.pc = 1; return s.tmp_5;
  case 1:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isCommand__P1453.info = {"start":7341,"length":91,"line":242,"column":8,"endLine":244,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isCommand","argumentNames":["this"]}
jacdac_JDPacket_isCommand__P1453.isGetter = true;

function jacdac_JDPacket_isCommand__P1453_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isCommand__P1453, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_EventSource_emit__P1917(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.someOnce___8812 = undefined;
    s.useTry___8813 = undefined;
    s.listener___8815 = undefined;
    s.unnamed172___U3 = undefined;
    s.unnamed173___U4 = undefined;
    s.listener___8826 = undefined;
    s.unnamed174___U6 = undefined;
    s.unnamed175___U7 = undefined;
    s.handler___8837 = undefined;
    s.e___8845 = undefined;
    s.i___8852 = undefined;
    s.listener___8859 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C1912_VT)) failedCast(r0);
// jacdac/eventsource.ts(86,13): if (!eventName) return false
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/eventsource.ts(86,29): return false
    r0 = false;
    { step = 25; continue; }
  case 1:
  case 2:
// jacdac/eventsource.ts(89,17): someOnce = false
    s.someOnce___8812 = (false);
// jacdac/eventsource.ts(90,17): useTry = false
    s.useTry___8813 = (false);
// jacdac/eventsource.ts(92,24): listener
    s.listener___8815 = (undefined);
    r0 = s.arg0.fields["listeners"];
    s.unnamed172___U3 = (r0);
    s.unnamed173___U4 = (0);
// jacdac/eventsource.ts(92,13): for (const listener of this.listeners) {...
  case 3:
    s.tmp_0 = r0 = s.unnamed173___U4;
    r0 = pxsim_Array__length(s.unnamed172___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed172___U3, s.unnamed173___U4);
    s.listener___8815 = (r0);
// jacdac/eventsource.ts(93,17): if (listener.key == ERROR) useTry = true
    r0 = s.listener___8815.fields["key"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == globals.ERROR___1911);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
// jacdac/eventsource.ts(93,44): useTry = true
    s.useTry___8813 = (true);
  case 4:
  case 5:
    r0 = (s.unnamed173___U4 + 1);
    s.unnamed173___U4 = (r0);
    { step = 3; continue; }
  case 6:
    s.unnamed172___U3 = (undefined);
// jacdac/eventsource.ts(96,24): listener
    s.listener___8826 = (undefined);
    r0 = s.arg0.fields["listeners"];
    s.unnamed174___U6 = (r0);
    s.unnamed175___U7 = (0);
// jacdac/eventsource.ts(96,13): for (const listener of this.listeners) {...
  case 7:
    s.tmp_0 = r0 = s.unnamed175___U7;
    r0 = pxsim_Array__length(s.unnamed174___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 16; continue; }
    r0 = pxsim_Array__getAt(s.unnamed174___U6, s.unnamed175___U7);
    s.listener___8826 = (r0);
// jacdac/eventsource.ts(97,17): if (listener.key === eventName) {...
    r0 = s.listener___8826.fields["key"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 === s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 14; continue; }
// jacdac/eventsource.ts(98,21): if (listener.once) someOnce = true
    r0 = s.listener___8826.fields["once"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 8; continue; }
// jacdac/eventsource.ts(98,40): someOnce = true
    s.someOnce___8812 = (true);
  case 8:
  case 9:
// jacdac/eventsource.ts(99,27): handler = listener.handler
    r0 = s.listener___8826.fields["handler"];
    s.handler___8837 = (r0);
// jacdac/eventsource.ts(100,21): if (useTry)...
    r0 = pxsim_numops_toBoolDecr(s.useTry___8813);
    if (!r0) { step = 12; continue; }
// jacdac/eventsource.ts(101,25): try {...
    r0 = pxsim_pxtcore.beginTry(10);
// jacdac/eventsource.ts(102,29): handler(arg)
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.handler___8837;
    s.tmp_0.arg0 = s.arg2;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 1107; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 11; continue; }
  case 10:
// jacdac/eventsource.ts(103,34): e
    s.e___8845 = (undefined);
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___8845 = (r0);
// jacdac/eventsource.ts(104,29): this.emit(ERROR, e)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.ERROR___1911;
    s.tmp_0.arg2 = s.e___8845;
    s.callLocIdx = 1108; s.pc = 27; return s.tmp_0;
  case 27:
    r0 = s.retval;
  case 11:
    { step = 13; continue; }
  case 12:
// jacdac/eventsource.ts(106,26): handler(arg)
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.handler___8837;
    s.tmp_0.arg0 = s.arg2;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 1109; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
  case 13:
  case 14:
  case 15:
    r0 = (s.unnamed175___U7 + 1);
    s.unnamed175___U7 = (r0);
    { step = 7; continue; }
  case 16:
    s.unnamed174___U6 = (undefined);
// jacdac/eventsource.ts(111,1): // TODO this will not work if handler() above just added a new "once
    r0 = pxsim_numops_toBoolDecr(s.someOnce___8812);
    if (!r0) { step = 23; continue; }
// jacdac/eventsource.ts(113,21): i = 0
    s.i___8852 = (0);
// jacdac/eventsource.ts(114,17): while (i < this.listeners.length) {...
  case 17:
// jacdac/eventsource.ts(114,24): i < this.listeners.length
    s.tmp_1 = r0 = s.i___8852;
    r0 = s.arg0.fields["listeners"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
// jacdac/eventsource.ts(115,27): listener = this.listeners[i]
    r0 = s.arg0.fields["listeners"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.tmp_4, s.i___8852);
    s.listener___8859 = (r0);
// jacdac/eventsource.ts(116,21): if (listener.once && listener.key === eventName) {...
    r0 = s.listener___8859.fields["once"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 18; continue; }
    r0 = s.tmp_0;
    { step = 19; continue; }
  case 18:
    r0 = s.listener___8859.fields["key"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === s.arg1);
  case 19:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 20; continue; }
// jacdac/eventsource.ts(117,25): this.listeners.splice(i, 1)
    s.tmp_3 = helpers_arraySplice__P100_mk(s);
    r0 = s.arg0.fields["listeners"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.i___8852;
    s.tmp_3.arg2 = 1;
    s.callLocIdx = 1110; s.pc = 29; return s.tmp_3;
  case 29:
    r0 = s.retval;
    { step = 21; continue; }
  case 20:
// jacdac/eventsource.ts(120,25): i++
    r0 = (s.i___8852 + 1);
    s.i___8852 = (r0);
  case 21:
    { step = 17; continue; }
  case 22:
  case 23:
  case 24:
// jacdac/eventsource.ts(125,13): return true
    r0 = true;
  case 25:
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_emit__P1917.info = {"start":2537,"length":1407,"line":84,"column":8,"endLine":125,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"emit","argumentNames":["this","eventName","arg"]}

function jacdac_EventSource_emit__P1917_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_emit__P1917, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  someOnce___8812: undefined,
  useTry___8813: undefined,
  listener___8815: undefined,
  unnamed172___U3: undefined,
  unnamed173___U4: undefined,
  listener___8826: undefined,
  unnamed174___U6: undefined,
  unnamed175___U7: undefined,
  handler___8837: undefined,
  e___8845: undefined,
  i___8852: undefined,
  listener___8859: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arraySplice__P100(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___8882 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(139,9): if (start < 0) {...
    r0 = (s.arg1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/pxt-helpers.ts(140,13): return;
    { step = 5; continue; }
  case 1:
  case 2:
// base/pxt-helpers.ts(142,18): i = 0
    s.i___8882 = (0);
// base/pxt-helpers.ts(142,9): for (let i = 0; i < len; ++i) {...
  case 3:
// base/pxt-helpers.ts(142,25): i < len
    r0 = (s.i___8882 < s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(143,13): arr.removeAt(start)
    r0 = pxsim_Array_.removeAt(s.arg0, s.arg1);
// base/pxt-helpers.ts(142,34): ++i
    r0 = (s.i___8882 + 1);
    s.i___8882 = (r0);
    { step = 3; continue; }
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySplice__P100.info = {"start":3642,"length":213,"line":137,"column":4,"endLine":144,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySplice","argumentNames":["arr","start","len"]}

function helpers_arraySplice__P100_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySplice__P100, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  i___8882: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket__sendReport__P1458(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(276,13): if (!dev) return
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(276,23): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(277,13): this.deviceIdentifier = dev.deviceId
    s.tmp_2 = jacdac_JDPacket_deviceIdentifier__P1426_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = s.arg1.fields["deviceId"];
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 646; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
// jacdac/packet.ts(278,13): this._sendCore()
    s.tmp_0 = jacdac_JDPacket__sendCore__P1457_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 647; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendReport__P1458.info = {"start":8425,"length":143,"line":274,"column":8,"endLine":278,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendReport","argumentNames":["this","dev"]}

function jacdac_JDPacket__sendReport__P1458_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendReport__P1458, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_onlyHeader__P1419(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/packet.ts(63,13): return JDPacket.from(serviceCommand, Buffer.create(0))
    s.tmp_0 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 592; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_onlyHeader__P1419.info = {"start":2005,"length":120,"line":61,"column":8,"endLine":63,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"onlyHeader","argumentNames":["serviceCommand"]}

function jacdac_JDPacket_onlyHeader__P1419_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_onlyHeader__P1419, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_from__P1418(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___8909 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/packet.ts(55,19): p = new JDPacket()
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C1412_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDPacket_constructor__P2333_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 589; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.p___8909 = (s.tmp_0);
// jacdac/packet.ts(56,13): p._header = Buffer.create(JD_SERIAL_HEADER_SIZE)
    s.tmp_0 = r0 = s.p___8909;
    r0 = pxsim.control.createBuffer(16);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_header"] = (s.tmp_1);
// jacdac/packet.ts(57,13): p.data = data
    s.tmp_0 = jacdac_JDPacket_data__P1444_mk(s);
    s.tmp_0.arg0 = s.p___8909;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 590; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// jacdac/packet.ts(58,13): p.serviceCommand = serviceCommand
    s.tmp_0 = jacdac_JDPacket_serviceCommand__P1436_mk(s);
    s.tmp_0.arg0 = s.p___8909;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 591; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// jacdac/packet.ts(59,13): return p
    r0 = s.p___8909;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_from__P1418.info = {"start":1743,"length":252,"line":53,"column":8,"endLine":59,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"from","argumentNames":["serviceCommand","data"]}

function jacdac_JDPacket_from__P1418_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_from__P1418, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  p___8909: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_serviceCommand__P1436(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(151,13): this._header.setNumber(NumberFormat.UInt16LE, 14, cmd)
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 4, 14, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceCommand__P1436.info = {"start":4818,"length":110,"line":149,"column":8,"endLine":151,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceCommand","argumentNames":["this","cmd"]}

function jacdac_JDPacket_serviceCommand__P1436_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceCommand__P1436, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_constructor__P2333(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(44,13): this.timestamp = control.millis()
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["timestamp"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_constructor__P2333.info = {"start":1414,"length":79,"line":42,"column":8,"endLine":44,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_JDPacket_constructor__P2333_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_constructor__P2333, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_crc__P1434(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(144,13): return this._header.getNumber(NumberFormat.UInt16LE, 0)
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_0, 4, 0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_crc__P1434.info = {"start":4593,"length":97,"line":142,"column":8,"endLine":144,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"crc","argumentNames":["this"]}
jacdac_JDPacket_crc__P1434.isGetter = true;

function jacdac_JDPacket_crc__P1434_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_crc__P1434, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Bus_selfDevice__P1811(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(92,13): if (!this._myDevice) {...
    r0 = s.arg0.fields["_myDevice"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(93,17): this._myDevice = new Device(...
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_Device__C1870_VT);
    s.tmp_3 = r0;
    s.tmp_4 = jacdac_Device_constructor__P1874_mk(s);
    s.tmp_4.arg0 = s.tmp_3;
    r0 = pxsim.control.deviceLongSerialNumber();
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_5);
    s.tmp_4.arg1 = r0;
    r0 = pxsim.control.createBuffer(4);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 810; s.pc = 3; return s.tmp_4;
  case 3:
    r0 = s.retval;
    r0 = (s.arg0).fields["_myDevice"] = (s.tmp_3);
  case 1:
  case 2:
// jacdac/routing.ts(98,13): return this._myDevice
    r0 = s.arg0.fields["_myDevice"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Bus_selfDevice__P1811.info = {"start":2767,"length":273,"line":90,"column":8,"endLine":98,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"selfDevice","argumentNames":["this"]}
jacdac_Bus_selfDevice__P1811.isGetter = true;

function jacdac_Bus_selfDevice__P1811_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_selfDevice__P1811, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_requiresAck__P1431(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(130,13): if (ack != this.requiresAck)...
    s.tmp_1 = r0 = s.arg1;
    s.tmp_3 = jacdac_JDPacket_requiresAck__P1430_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 609; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(131,17): this._header[3] ^= JD_FRAME_FLAG_ACK_REQUESTED
    r0 = s.arg0.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 3);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 ^ 2);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_4, 3, s.tmp_5);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_requiresAck__P1431.info = {"start":4101,"length":145,"line":128,"column":8,"endLine":131,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"requiresAck","argumentNames":["this","ack"]}

function jacdac_JDPacket_requiresAck__P1431_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_requiresAck__P1431, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_requiresAck__P1430(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(127,13): return this.packetFlags & JD_FRAME_FLAG_ACK_REQUESTED ? true : false
    s.tmp_2 = jacdac_JDPacket_packetFlags__P1427_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 608; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = true;
    { step = 2; continue; }
  case 1:
    r0 = false;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_requiresAck__P1430.info = {"start":3973,"length":119,"line":125,"column":8,"endLine":127,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"requiresAck","argumentNames":["this"]}
jacdac_JDPacket_requiresAck__P1430.isGetter = true;

function jacdac_JDPacket_requiresAck__P1430_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_requiresAck__P1430, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_multicommandClass__P1428(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(117,13): if (this.packetFlags & JD_FRAME_FLAG_IDENTIFIER_IS_SERVICE_CLASS)
    s.tmp_2 = jacdac_JDPacket_packetFlags__P1427_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 607; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(118,17): return this._header.getNumber(NumberFormat.UInt32LE, 4)
    r0 = s.arg0.fields["_header"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_3, 11, 4);
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(119,13): return undefined
    r0 = undefined;
  case 3:
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_multicommandClass__P1428.info = {"start":3673,"length":214,"line":115,"column":8,"endLine":119,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"multicommandClass","argumentNames":["this"]}
jacdac_JDPacket_multicommandClass__P1428.isGetter = true;

function jacdac_JDPacket_multicommandClass__P1428_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_multicommandClass__P1428, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac___physSendPacket__P1367(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.payload___8987 = undefined;
    s.tailend___8991 = undefined;
    s.crc___9011 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/jdsim.ts(30,13): payload = header.concat(data)
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 578; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.payload___8987 = (r0);
// jacdac/jdsim.ts(31,15): tailend = payload.length & 3
    r0 = pxsim.BufferMethods.length(s.payload___8987);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 3);
    s.tailend___8991 = (r0);
// jacdac/jdsim.ts(32,9): if (tailend) payload = payload.concat(Buffer.create(4 - tailend))
    r0 = pxsim_numops_toBoolDecr(s.tailend___8991);
    if (!r0) { step = 1; continue; }
// jacdac/jdsim.ts(32,22): payload = payload.concat(Buffer.create(4 - tailend))
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    s.tmp_0.arg0 = s.payload___8987;
    r0 = (4 - s.tailend___8991);
    s.tmp_1 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 579; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.payload___8987 = (r0);
  case 1:
  case 2:
// jacdac/jdsim.ts(33,9): header[2] = payload[2] = payload.length - 12
    s.tmp_0 = r0 = s.payload___8987;
    r0 = pxsim.BufferMethods.length(s.payload___8987);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 2, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 2, s.tmp_1);
// jacdac/jdsim.ts(34,15): crc = jdCrc16(payload.slice(2))
    s.tmp_0 = jacdac_jdCrc16__P2307_mk(s);
    r0 = pxsim.BufferMethods.slice(s.payload___8987, 2, -1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 580; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.crc___9011 = (r0);
// jacdac/jdsim.ts(35,9): header[0] = payload[0] = (crc >> 0) & 0xff
    s.tmp_0 = r0 = s.payload___8987;
    r0 = (s.crc___9011 >> 0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 0, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 0, s.tmp_1);
// jacdac/jdsim.ts(36,9): header[1] = payload[1] = (crc >> 8) & 0xff
    s.tmp_0 = r0 = s.payload___8987;
    r0 = (s.crc___9011 >> 8);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 255);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 1, s.tmp_1);
    r0 = pxsim.BufferMethods.setByte(s.arg0, 1, s.tmp_1);
// jacdac/jdsim.ts(37,9): control.simmessages.send("jacdac", payload)
    r0 = pxsim_pxtcore.sendMessage("jacdac", s.payload___8987, undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physSendPacket__P1367.info = {"start":625,"length":540,"line":27,"column":4,"endLine":37,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physSendPacket","argumentNames":["header","data"]}

function jacdac___physSendPacket__P1367_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physSendPacket__P1367, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  payload___8987: undefined,
  tailend___8991: undefined,
  crc___9011: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_jdCrc16__P2307(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.crc___9040 = undefined;
    s.i___9041 = undefined;
    s.data___9047 = undefined;
    s.x___9051 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/jdsim.ts(13,13): crc = 0xffff
    s.crc___9040 = (65535);
// jacdac/jdsim.ts(14,18): i = 0
    s.i___9041 = (0);
// jacdac/jdsim.ts(14,9): for (let i = 0; i < p.length; ++i) {...
  case 1:
// jacdac/jdsim.ts(14,25): i < p.length
    s.tmp_1 = r0 = s.i___9041;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// jacdac/jdsim.ts(15,19): data = p[i]
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___9041);
    s.data___9047 = (r0);
// jacdac/jdsim.ts(16,17): x = (crc >> 8) ^ data
    r0 = (s.crc___9040 >> 8);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 ^ s.data___9047);
    s.x___9051 = (r0);
// jacdac/jdsim.ts(17,13): x ^= x >> 4
    s.tmp_0 = r0 = s.x___9051;
    r0 = (s.x___9051 >> 4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 ^ s.tmp_1);
    s.x___9051 = (r0);
// jacdac/jdsim.ts(18,13): crc = (crc << 8) ^ (x << 12) ^ (x << 5) ^ x
    r0 = (s.crc___9040 << 8);
    s.tmp_2 = r0;
    r0 = (s.x___9051 << 12);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 ^ s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.x___9051 << 5);
    s.tmp_4 = r0;
    r0 = (s.tmp_1 ^ s.tmp_4);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 ^ s.x___9051);
    s.crc___9040 = (r0);
// jacdac/jdsim.ts(19,13): crc &= 0xffff
    r0 = (s.crc___9040 & 65535);
    s.crc___9040 = (r0);
// jacdac/jdsim.ts(14,39): ++i
    r0 = (s.i___9041 + 1);
    s.i___9041 = (r0);
    { step = 1; continue; }
  case 2:
// jacdac/jdsim.ts(21,9): return crc
    r0 = s.crc___9040;
    return leave(s, r0)
  default: oops()
} } }
jacdac_jdCrc16__P2307.info = {"start":204,"length":308,"line":11,"column":4,"endLine":21,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"jdCrc16","argumentNames":["p"]}

function jacdac_jdCrc16__P2307_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_jdCrc16__P2307, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  crc___9040: undefined,
  i___9041: undefined,
  data___9047: undefined,
  x___9051: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_deviceIdentifier__P1426(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idb___9083 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(107,19): idb = Buffer.fromHex(id)
    s.tmp_0 = Buffer_fromHex__P204_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 605; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.idb___9083 = (r0);
// jacdac/packet.ts(108,13): if (idb.length != 8) error("Invalid id")
    r0 = pxsim.BufferMethods.length(s.idb___9083);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(108,34): error("Invalid id")
    s.tmp_2 = jacdac_error__P2331_mk(s);
    s.tmp_2.arg0 = "Invalid id";
    s.callLocIdx = 606; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
// jacdac/packet.ts(109,13): this._header.write(4, idb)
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 4, s.idb___9083);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_deviceIdentifier__P1426.info = {"start":3410,"length":179,"line":105,"column":8,"endLine":109,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"deviceIdentifier","argumentNames":["this","id"]}

function jacdac_JDPacket_deviceIdentifier__P1426_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_deviceIdentifier__P1426, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  idb___9083: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_error__P2331(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/packet.ts(25,9): throw msg
    r0 = pxsim_pxtcore.throwValue(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_error__P2331.info = {"start":992,"length":53,"line":23,"column":4,"endLine":25,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"error","argumentNames":["msg"]}

function jacdac_error__P2331_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_error__P2331, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDPacket_deviceIdentifier__P1425(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(104,1): return this._header.slice(4, 8).toHex()
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 4, 8);
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_deviceIdentifier__P1425.info = {"start":3287,"length":114,"line":101,"column":8,"endLine":104,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"deviceIdentifier","argumentNames":["this"]}
jacdac_JDPacket_deviceIdentifier__P1425.isGetter = true;

function jacdac_JDPacket_deviceIdentifier__P1425_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_deviceIdentifier__P1425, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_serviceIndex__P1433(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(138,13): if (serviceIdx == null) throw "serviceIndex not set"
    r0 = (s.arg1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(138,37): throw "serviceIndex not set"
    r0 = pxsim_pxtcore.throwValue("serviceIndex not set");
  case 1:
  case 2:
// jacdac/packet.ts(139,13): this._header[13] =...
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["_header"];
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, 13);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 & 192);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 | s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, 13, s.tmp_2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceIndex__P1433.info = {"start":4363,"length":220,"line":136,"column":8,"endLine":140,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceIndex","argumentNames":["this","serviceIdx"]}

function jacdac_JDPacket_serviceIndex__P1433_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceIndex__P1433, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_serviceIndex__P1432(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(135,13): return this._header[13] & JD_SERVICE_INDEX_MASK
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_1, 13);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & 63);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_serviceIndex__P1432.info = {"start":4256,"length":98,"line":133,"column":8,"endLine":135,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"serviceIndex","argumentNames":["this"]}
jacdac_JDPacket_serviceIndex__P1432.isGetter = true;

function jacdac_JDPacket_serviceIndex__P1432_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_serviceIndex__P1432, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_jdpacked__P1420(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// jacdac/packet.ts(67,13): return JDPacket.from(serviceCommand, jdpack(fmt, nums))
    s.tmp_0 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_jdpack__P1468_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = s.arg2;
    s.callLocIdx = 593; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 594; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_jdpacked__P1420.info = {"start":2135,"length":145,"line":65,"column":8,"endLine":67,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"jdpacked","argumentNames":["serviceCommand","fmt","nums"]}

function jacdac_JDPacket_jdpacked__P1420_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_jdpacked__P1420, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arrayFind__P111(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___9137 = undefined;
    s.i___9140 = undefined;
    s.v___9145 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(273,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___9137 = (r0);
// base/pxt-helpers.ts(274,18): i = 0
    s.i___9140 = (0);
// base/pxt-helpers.ts(274,9): for (let i = 0; i < len; ++i) {...
  case 1:
// base/pxt-helpers.ts(274,25): i < len
    r0 = (s.i___9140 < s.len___9137);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(275,17): v = arr[i]
    r0 = pxsim_Array__getAt(s.arg0, s.i___9140);
    s.v___9145 = (r0);
// base/pxt-helpers.ts(276,1): if (callbackfn(v, i)) return v;
    s.tmp_1 = lambda_3_mk(s);
    s.tmp_1.argL = s.arg1;
    s.tmp_1.arg0 = s.v___9145;
    s.tmp_1.arg1 = s.i___9140;
    setupLambda(s.tmp_1, s.tmp_1.argL);
    s.callLocIdx = 9; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(276,35): return v;
    r0 = s.v___9145;
    { step = 5; continue; }
  case 2:
  case 3:
// base/pxt-helpers.ts(274,34): ++i
    r0 = (s.i___9140 + 1);
    s.i___9140 = (r0);
    { step = 1; continue; }
  case 4:
// base/pxt-helpers.ts(278,9): return undefined;
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayFind__P111.info = {"start":8018,"length":292,"line":271,"column":4,"endLine":278,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayFind","argumentNames":["arr","callbackfn"]}

function helpers_arrayFind__P111_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayFind__P111, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  len___9137: undefined,
  i___9140: undefined,
  v___9145: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_onTwinUpdate__P1363(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___9157 = undefined;
    s.currTwin___9161 = undefined;
    s.lastVersion___9163 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(431,15): c = mqttClient()
    s.tmp_0 = azureiot_mqttClient__P1343_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 566; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.c___9157 = (r0);
    r0 = pxsim_pxtrt.mklocRef();
    s.currTwin___9161 = (r0);
// azureiot/azureiot.ts(432,13): currTwin: Json = null
    r0 = pxsim_pxtrt_stlocRef(s.currTwin___9161, null);
    r0 = pxsim_pxtrt.mklocRef();
    s.lastVersion___9163 = (r0);
// azureiot/azureiot.ts(434,9): c.subscribe("$iothub/twin/PATCH/properties/desired/#", msg => {...
    r0 = pxsim_pxtcore_mkAction(3, azureiot_onTwinUpdate_inline__P9167);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.currTwin___9161);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.lastVersion___9163);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.arg0);
    s.tmp_1 = mqtt_Client_subscribe__P1333_mk(s);
    s.tmp_1.arg0 = s.c___9157;
    s.tmp_1.arg1 = "$iothub/twin/PATCH/properties/desired/#";
    s.tmp_1.arg2 = s.tmp_0;
    s.tmp_1.arg3 = 0;
    s.callLocIdx = 575; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
// azureiot/azureiot.ts(447,9): currTwin = getTwin()
    s.tmp_0 = r0 = s.currTwin___9161;
    s.tmp_2 = azureiot_getTwin__P1359_mk(s);
    s.callLocIdx = 576; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
// azureiot/azureiot.ts(448,9): lastVersion = currTwin["desired"]["$version"]
    s.tmp_0 = r0 = s.lastVersion___9163;
    r0 = pxsim_pxtrt_ldlocRef(s.currTwin___9161);
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_3, "desired");
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_2, "$version");
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
// azureiot/azureiot.ts(449,9): handler(currTwin, currTwin["desired"])
    s.tmp_0 = lambda_3_mk(s);
    s.tmp_0.argL = s.arg0;
    r0 = pxsim_pxtrt_ldlocRef(s.currTwin___9161);
    s.tmp_0.arg0 = r0;
    r0 = pxsim_pxtrt_ldlocRef(s.currTwin___9161);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, "desired");
    s.tmp_0.arg1 = r0;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 577; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_onTwinUpdate__P1363.info = {"start":13674,"length":829,"line":429,"column":4,"endLine":449,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"onTwinUpdate","argumentNames":["handler"]}

function azureiot_onTwinUpdate__P1363_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_onTwinUpdate__P1363, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  c___9157: undefined,
  currTwin___9161: undefined,
  lastVersion___9163: undefined,
  arg0: undefined,
} }





function azureiot_onTwinUpdate_inline__P9167(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sysProps___9171 = undefined;
    s.ver___9176 = undefined;
    s.update___9190 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(435,13): if (!currTwin)...
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(436,17): return
    { step = 5; continue; }
  case 1:
  case 2:
// azureiot/azureiot.ts(437,19): sysProps = parseTopicArgs(msg.topic)
    s.tmp_3 = azureiot_parseTopicArgs__P2301_mk(s);
    s.tmp_4 = if_topic_1_mk(s);
    s.tmp_4.arg0 = s.arg0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "topic");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["topic"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["topic"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 567; s.pc = 7; return s.tmp_4; }
    }
  case 7:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 568; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.sysProps___9171 = (r0);
// azureiot/azureiot.ts(438,19): ver = parseInt(sysProps["$version"])
    s.tmp_0 = parseInt__P97_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.sysProps___9171, "$version");
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 569; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.ver___9176 = (r0);
// azureiot/azureiot.ts(439,13): if (ver <= lastVersion) {...
    s.tmp_1 = r0 = s.ver___9176;
    r0 = pxsim_pxtrt_ldlocRef(s.caps[1]);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 <= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(440,17): log(`skipping twin update: ${ver}`)
    s.tmp_3 = azureiot_log__P2292_mk(s);
    if ((s.ver___9176) && (s.ver___9176).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.ver___9176);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.ver___9176) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("skipping twin update: ", s.tmp_4);
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 570; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
// azureiot/azureiot.ts(441,17): return
    { step = 5; continue; }
  case 3:
  case 4:
// azureiot/azureiot.ts(443,19): update = JSON.parse(msg.content.toString())
    s.tmp_0 = JSON_parse__P386_mk(s);
    s.tmp_2 = if_content_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "content");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["content"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["content"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 571; s.pc = 12; return s.tmp_2; }
    }
  case 12:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 572; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.update___9190 = (r0);
// azureiot/azureiot.ts(444,13): applyPatch(currTwin["desired"], update)
    s.tmp_0 = azureiot_applyPatch__P1362_mk(s);
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, "desired");
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.update___9190;
    s.callLocIdx = 573; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
// azureiot/azureiot.ts(445,13): handler(currTwin, update)
    s.tmp_0 = lambda_3_mk(s);
    s.tmp_0.argL = s.caps[2];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.update___9190;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 574; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_onTwinUpdate_inline__P9167.info = {"start":13909,"length":457,"line":433,"column":63,"endLine":445,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["msg"]}

function azureiot_onTwinUpdate_inline__P9167_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_onTwinUpdate_inline__P9167, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  sysProps___9171: undefined,
  ver___9176: undefined,
  update___9190: undefined,
  arg0: undefined,
} }





function azureiot_applyPatch__P1362(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.k___9214 = undefined;
    s.unnamed128___U1 = undefined;
    s.unnamed129___U2 = undefined;
    s.v___9218 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(417,20): k
    s.k___9214 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.arg1);
    s.unnamed128___U1 = (r0);
    s.unnamed129___U2 = (0);
// azureiot/azureiot.ts(417,9): for (const k of Object.keys(patch)) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed129___U2;
    r0 = pxsim_Array__length(s.unnamed128___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed128___U1, s.unnamed129___U2);
    s.k___9214 = (r0);
// azureiot/azureiot.ts(418,19): v = patch[k]
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.k___9214);
    s.v___9218 = (r0);
// azureiot/azureiot.ts(419,13): if (v === null) {...
    r0 = (s.v___9218 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// azureiot/azureiot.ts(420,17): delete trg[k]
    r0 = pxsim_pxtrt.mapDeleteByString(s.arg0, s.k___9214);
    { step = 7; continue; }
  case 2:
// azureiot/azureiot.ts(421,20): if (typeof v == "object") {...
    r0 = pxsim_pxtcore.typeOf(s.v___9218);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "object");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// azureiot/azureiot.ts(422,17): if (!trg[k]) trg[k] = {}
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.k___9214);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(422,30): trg[k] = {}
    s.tmp_5 = r0 = s.arg0;
    s.tmp_6 = r0 = s.k___9214;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_7 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_5, s.tmp_6, s.tmp_7);
  case 3:
  case 4:
// azureiot/azureiot.ts(423,17): applyPatch(trg[k], v)
    s.tmp_0 = azureiot_applyPatch__P1362_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.k___9214);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.v___9218;
    s.callLocIdx = 565; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    { step = 6; continue; }
  case 5:
// azureiot/azureiot.ts(425,17): trg[k] = v
    r0 = pxsim_pxtrt.mapSetGeneric(s.arg0, s.k___9214, s.v___9218);
  case 6:
  case 7:
    r0 = (s.unnamed129___U2 + 1);
    s.unnamed129___U2 = (r0);
    { step = 1; continue; }
  case 8:
    s.unnamed128___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_applyPatch__P1362.info = {"start":13275,"length":393,"line":415,"column":4,"endLine":427,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"applyPatch","argumentNames":["trg","patch"]}

function azureiot_applyPatch__P1362_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_applyPatch__P1362, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  k___9214: undefined,
  unnamed128___U1: undefined,
  unnamed129___U2: undefined,
  v___9218: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_parseTopicArgs__P2301(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.qidx___9246 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(284,15): qidx = topic.indexOf("?")
    r0 = pxsim_String_.indexOf(s.arg0, "?", undefined);
    s.qidx___9246 = (r0);
// azureiot/azureiot.ts(285,9): if (qidx >= 0)...
    r0 = (s.qidx___9246 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(286,13): return parsePropertyBag(topic.slice(qidx + 1))
    s.tmp_1 = azureiot_parsePropertyBag__P2297_mk(s);
    s.tmp_2 = helpers_stringSlice__P119_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = (s.qidx___9246 + 1);
    s.tmp_2.arg1 = r0;
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 539; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = undefined;
    s.callLocIdx = 540; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    { step = 3; continue; }
  case 1:
  case 2:
// azureiot/azureiot.ts(287,9): return {}
    r0 = pxsim_pxtrt.mkMap();
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_parseTopicArgs__P2301.info = {"start":8785,"length":186,"line":282,"column":4,"endLine":287,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"parseTopicArgs","argumentNames":["topic"]}

function azureiot_parseTopicArgs__P2301_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_parseTopicArgs__P2301, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  qidx___9246: undefined,
  arg0: undefined,
} }





function mqtt_Client_subscribe__P1333(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(528,13): this.subscribeCore(topic, handler, qos)
    s.tmp_0 = mqtt_Client_subscribeCore__P2281_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = s.arg3;
    s.callLocIdx = 432; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_subscribe__P1333.info = {"start":17033,"length":172,"line":526,"column":8,"endLine":528,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"subscribe","argumentNames":["this","topic","handler","qos"]}

function mqtt_Client_subscribe__P1333_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_subscribe__P1333, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function mqtt_Client_subscribeCore__P2281(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sub___9279 = undefined;
    s.h___9310 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(510,13): this.log(`subscribe: ${topic}`)
    s.tmp_0 = mqtt_Client_log__P2276_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("subscribe: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 427; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// mqtt/mqtt.ts(511,19): sub = Protocol.createSubscribe(topic, qos)
    s.tmp_0 = mqtt_Protocol_createSubscribe__P1311_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = s.arg3;
    s.callLocIdx = 428; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.sub___9279 = (r0);
// mqtt/mqtt.ts(512,13): this.subs.push(sub)
    r0 = s.arg0.fields["subs"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.sub___9279);
// mqtt/mqtt.ts(513,13): this.send1(sub)
    s.tmp_0 = mqtt_Client_send1__P2284_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.sub___9279;
    s.callLocIdx = 429; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
// mqtt/mqtt.ts(514,13): if (handler) {...
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 5; continue; }
// mqtt/mqtt.ts(515,17): if (topic[topic.length - 1] == "#")...
    s.tmp_2 = r0 = s.arg1;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - 1);
    s.tmp_3 = r0;
    r0 = pxsim_String_.charAt(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "#");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// mqtt/mqtt.ts(516,21): topic = topic.slice(0, topic.length - 1)
    s.tmp_5 = helpers_stringSlice__P119_mk(s);
    s.tmp_5.arg0 = s.arg1;
    s.tmp_5.arg1 = 0;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 - 1);
    s.tmp_5.arg2 = r0;
    s.callLocIdx = 430; s.pc = 12; return s.tmp_5;
  case 12:
    r0 = s.retval;
    s.arg1 = (r0);
  case 1:
  case 2:
// mqtt/mqtt.ts(517,17): if (!this.mqttHandlers) this.mqttHandlers = []
    r0 = s.arg0.fields["mqttHandlers"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// mqtt/mqtt.ts(517,41): this.mqttHandlers = []
    s.tmp_3 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["mqttHandlers"] = (s.tmp_4);
  case 3:
  case 4:
// mqtt/mqtt.ts(518,23): h = new MQTTHandler(topic, handler)
    r0 = pxsim_pxtcore_mkClassInstance(mqtt_MQTTHandler__C2273_VT);
    s.tmp_0 = r0;
    s.tmp_1 = mqtt_MQTTHandler_constructor__P2274_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.callLocIdx = 431; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.h___9310 = (s.tmp_0);
// mqtt/mqtt.ts(519,17): this.mqttHandlers.push(h)
    r0 = s.arg0.fields["mqttHandlers"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.h___9310);
// mqtt/mqtt.ts(520,17): return h
    r0 = s.h___9310;
    { step = 7; continue; }
    { step = 6; continue; }
  case 5:
// mqtt/mqtt.ts(522,17): return null
    r0 = null;
    { step = 7; continue; }
  case 6:
    r0 = undefined;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_subscribeCore__P2281.info = {"start":16305,"length":688,"line":508,"column":8,"endLine":523,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"subscribeCore","argumentNames":["this","topic","handler","qos"]}

function mqtt_Client_subscribeCore__P2281_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_subscribeCore__P2281, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  sub___9279: undefined,
  h___9310: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function mqtt_MQTTHandler_constructor__P2274(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_MQTTHandler__C2273_VT)) failedCast(r0);
    r0 = (s.arg0).fields["topic"] = (s.arg1);
    r0 = (s.arg0).fields["handler"] = (s.arg2);
// mqtt/mqtt.ts(315,13): this.status = HandlerStatus.Normal
    r0 = (s.arg0).fields["status"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_MQTTHandler_constructor__P2274.info = {"start":9871,"length":165,"line":310,"column":8,"endLine":315,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"inline","argumentNames":["this","topic","handler"]}

function mqtt_MQTTHandler_constructor__P2274_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_MQTTHandler_constructor__P2274, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function mqtt_Protocol_createSubscribe__P1311(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pid___9335 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// mqtt/mqtt.ts(269,19): pid = strChr(getBytes(Constants.FixedPackedId))
    s.tmp_0 = mqtt_Protocol_strChr__P2265_mk(s);
    s.tmp_1 = mqtt_Protocol_getBytes__P2268_mk(s);
    s.tmp_1.arg0 = 1;
    s.callLocIdx = 358; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 359; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.pid___9335 = (r0);
// mqtt/mqtt.ts(271,13): return createPacket(byte1,...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg1);
    s.tmp_1 = mqtt_Protocol_createPacket__P2271_mk(s);
    s.tmp_1.arg0 = 130;
    s.tmp_1.arg1 = s.pid___9335;
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_3 = mqtt_Protocol_pack__P2269_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 360; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_4 = mqtt_Protocol_strChr__P2265_mk(s);
    s.tmp_4.arg0 = s.tmp_0;
    s.callLocIdx = 361; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 362; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 363; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Protocol_createSubscribe__P1311.info = {"start":8579,"length":330,"line":266,"column":8,"endLine":273,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"createSubscribe","argumentNames":["topic","qos"]}

function mqtt_Protocol_createSubscribe__P1311_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Protocol_createSubscribe__P1311, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  pid___9335: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_runInBackground__P289(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/control.ts(12,9): control.runInParallel(a)
    r0 = pxsim.control.runInParallel(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_runInBackground__P289.info = {"start":384,"length":88,"line":10,"column":4,"endLine":12,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"runInBackground","argumentNames":["a"]}

function control_runInBackground__P289_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_runInBackground__P289, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function azureiot_patchTwin__P1360(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___9355 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(378,15): p = JSON.stringify(patch)
    s.tmp_0 = JSON_stringify__P385_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = null;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 559; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.p___9355 = (r0);
// azureiot/azureiot.ts(379,9): if (p == "{}")...
    r0 = (s.p___9355 == "{}");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(380,13): log("skipping empty twin patch")
    s.tmp_1 = azureiot_log__P2292_mk(s);
    s.tmp_1.arg0 = "skipping empty twin patch";
    s.callLocIdx = 560; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
// azureiot/azureiot.ts(382,13): log(`twin patch: ${JSON.stringify(patch)}`)
    s.tmp_0 = azureiot_log__P2292_mk(s);
    s.tmp_3 = JSON_stringify__P385_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = null;
    s.tmp_3.arg2 = 0;
    s.callLocIdx = 561; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("twin patch: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 562; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
// azureiot/azureiot.ts(383,13): twinReq("PATCH/properties/reported", p)
    s.tmp_0 = azureiot_twinReq__P2305_mk(s);
    s.tmp_0.arg0 = "PATCH/properties/reported";
    s.tmp_0.arg1 = s.p___9355;
    s.callLocIdx = 563; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_patchTwin__P1360.info = {"start":12030,"length":287,"line":376,"column":4,"endLine":384,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"patchTwin","argumentNames":["patch"]}

function azureiot_patchTwin__P1360_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_patchTwin__P1360, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  p___9355: undefined,
  arg0: undefined,
} }





function azureiot_twinReq__P2305(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___9372 = undefined;
    s.rid___9382 = undefined;
    s.va___9389 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(354,15): c = mqttClient()
    s.tmp_0 = azureiot_mqttClient__P1343_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 549; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.c___9372 = (r0);
// azureiot/azureiot.ts(355,9): if (!twinRespHandlers) {...
    r0 = pxsim_numops_toBoolDecr(globals.twinRespHandlers___2291);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(356,13): twinRespHandlers = {}
    r0 = pxsim_pxtrt.mkMap();
    globals.twinRespHandlers___2291 = (r0);
// azureiot/azureiot.ts(357,13): c.subscribe("$iothub/twin/res/#", twinResponse)
    s.tmp_0 = mqtt_Client_subscribe__P1333_mk(s);
    s.tmp_0.arg0 = s.c___9372;
    s.tmp_0.arg1 = "$iothub/twin/res/#";
    s.tmp_0.arg2 = azureiot_twinResponse__P2304;
    s.tmp_0.arg3 = 0;
    s.callLocIdx = 550; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
// azureiot/azureiot.ts(359,15): rid = Math.randomRange(100000000, 900000000) + ""
    r0 = pxsim.Math_.randomRange(100000000, 900000000);
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_2);
    s.rid___9382 = (r0);
// azureiot/azureiot.ts(360,15): va = new ValueAwaiter()
    r0 = pxsim_pxtcore_mkClassInstance(azureiot_ValueAwaiter__C1355_VT);
    s.tmp_0 = r0;
    s.tmp_1 = azureiot_ValueAwaiter_constructor__P1356_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 551; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.va___9389 = (s.tmp_0);
// azureiot/azureiot.ts(361,9): twinRespHandlers[rid] = (status, body) => {...
    r0 = pxsim_pxtcore_mkAction(1, azureiot_twinReq_inline__P9395);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.va___9389);
    r0 = pxsim_pxtrt.mapSetGeneric(globals.twinRespHandlers___2291, s.rid___9382, s.tmp_0);
// azureiot/azureiot.ts(369,9): c.publish(`$iothub/twin/${path}/?$rid=${rid}`, msg)
    s.tmp_0 = mqtt_Client_publish__P1329_mk(s);
    s.tmp_0.arg0 = s.c___9372;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("$iothub/twin/", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, "/?$rid=");
    s.tmp_1 = r0;
    if ((s.rid___9382) && (s.rid___9382).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.rid___9382);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.rid___9382) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_4);
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = 0;
    s.tmp_0.arg4 = false;
    s.callLocIdx = 556; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// azureiot/azureiot.ts(370,9): return va.wait()
    s.tmp_0 = azureiot_ValueAwaiter_wait__P1358_mk(s);
    s.tmp_0.arg0 = s.va___9389;
    s.callLocIdx = 557; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
azureiot_twinReq__P2305.info = {"start":11249,"length":700,"line":352,"column":4,"endLine":370,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"twinReq","argumentNames":["path","msg"]}

function azureiot_twinReq__P2305_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_twinReq__P2305, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  c___9372: undefined,
  rid___9382: undefined,
  va___9389: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_twinReq_inline__P9395(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(362,13): if (status == 204 || status == 200) {...
    r0 = (s.arg0 == 204);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.arg0 == 200);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(363,17): va.setValue(body)
    s.tmp_2 = azureiot_ValueAwaiter_setValue__P1357_mk(s);
    s.tmp_2.arg0 = s.caps[0];
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 552; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
// azureiot/azureiot.ts(365,17): log(`twin error -> ${status} ${JSON.stringify(body)}`)
    s.tmp_0 = azureiot_log__P2292_mk(s);
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("twin error -> ", s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, " ");
    s.tmp_1 = r0;
    s.tmp_6 = JSON_stringify__P385_mk(s);
    s.tmp_6.arg0 = s.arg1;
    s.tmp_6.arg1 = null;
    s.tmp_6.arg2 = 0;
    s.callLocIdx = 553; s.pc = 8; return s.tmp_6;
  case 8:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_4);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 554; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
// azureiot/azureiot.ts(366,17): va.setValue(null)
    s.tmp_0 = azureiot_ValueAwaiter_setValue__P1357_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = null;
    s.callLocIdx = 555; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_twinReq_inline__P9395.info = {"start":11605,"length":253,"line":360,"column":32,"endLine":367,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["status","body"]}

function azureiot_twinReq_inline__P9395_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_twinReq_inline__P9395, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_ValueAwaiter_wait__P1358(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, azureiot_ValueAwaiter__C1355_VT)) failedCast(r0);
// azureiot/azureiot.ts(347,13): if (this.evid < 0) return this.value
    r0 = s.arg0.fields["evid"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// azureiot/azureiot.ts(347,32): return this.value
    r0 = s.arg0.fields["value"];
    { step = 3; continue; }
  case 1:
  case 2:
// azureiot/azureiot.ts(348,13): control.waitForEvent(DAL.DEVICE_ID_NOTIFY, this.evid)
    r0 = s.arg0.fields["evid"];
    s.tmp_2 = r0;
    setupResume(s, 4);
    pxsim.control.waitForEvent(1023, s.tmp_2);
    checkResumeConsumed();
    return;
  case 4:
    r0 = s.retval;
// azureiot/azureiot.ts(349,13): return this.value
    r0 = s.arg0.fields["value"];
  case 3:
    return leave(s, r0)
  default: oops()
} } }
azureiot_ValueAwaiter_wait__P1358.info = {"start":11074,"length":163,"line":345,"column":8,"endLine":349,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"wait","argumentNames":["this"]}

function azureiot_ValueAwaiter_wait__P1358_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_ValueAwaiter_wait__P1358, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function mqtt_Client_publish__P1329(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___9455 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, mqtt_Client__C1320_VT)) failedCast(r0);
// mqtt/mqtt.ts(484,19): buf = typeof message == "string" ? control.createBufferFromUTF8(message) : messa
    r0 = pxsim_pxtcore.typeOf(s.arg2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.control.createBufferFromUTF8(s.arg2);
    { step = 2; continue; }
  case 1:
    r0 = s.arg2;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.buf___9455 = (s.tmp_2);
// mqtt/mqtt.ts(485,13): message = null
    s.arg2 = (null);
// mqtt/mqtt.ts(486,13): if (this.startPublish(topic, buf ? buf.length : 0, qos, retained)) {
    r0 = pxsim_numops_toBoolDecr(s.buf___9455);
    if (!r0) { step = 3; continue; }
    r0 = pxsim.BufferMethods.length(s.buf___9455);
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.tmp_2 = mqtt_Client_startPublish__P1330_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = s.tmp_0;
    s.tmp_2.arg3 = s.arg3;
    s.tmp_2.arg4 = s.arg4;
    s.callLocIdx = 417; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
// mqtt/mqtt.ts(487,17): if (buf)...
    r0 = pxsim_numops_toBoolDecr(s.buf___9455);
    if (!r0) { step = 5; continue; }
// mqtt/mqtt.ts(488,21): this.send(buf)
    s.tmp_3 = mqtt_Client_send__P2282_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.buf___9455;
    s.callLocIdx = 418; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
  case 5:
  case 6:
// mqtt/mqtt.ts(489,17): this.finishPublish()
    s.tmp_0 = mqtt_Client_finishPublish__P1332_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 419; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
mqtt_Client_publish__P1329.info = {"start":15286,"length":458,"line":482,"column":8,"endLine":490,"endColumn":9,"fileName":"pxt_modules/mqtt/mqtt.ts","functionName":"publish","argumentNames":["this","topic","message","qos","retained"]}

function mqtt_Client_publish__P1329_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: mqtt_Client_publish__P1329, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buf___9455: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function azureiot_ValueAwaiter_setValue__P1357(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, azureiot_ValueAwaiter__C1355_VT)) failedCast(r0);
// azureiot/azureiot.ts(342,13): this.value = v
    r0 = (s.arg0).fields["value"] = (s.arg1);
// azureiot/azureiot.ts(343,13): control.raiseEvent(DAL.DEVICE_ID_NOTIFY, this.evid)
    r0 = s.arg0.fields["evid"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(1023, s.tmp_0);
// azureiot/azureiot.ts(344,13): this.evid = -1
    r0 = (s.arg0).fields["evid"] = (-1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_ValueAwaiter_setValue__P1357.info = {"start":10919,"length":146,"line":340,"column":8,"endLine":344,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"setValue","argumentNames":["this","v"]}

function azureiot_ValueAwaiter_setValue__P1357_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_ValueAwaiter_setValue__P1357, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_ValueAwaiter_constructor__P1356(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, azureiot_ValueAwaiter__C1355_VT)) failedCast(r0);
// azureiot/azureiot.ts(339,13): this.evid = control.allocateNotifyEvent()
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["evid"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_ValueAwaiter_constructor__P1356.info = {"start":10831,"length":79,"line":337,"column":8,"endLine":339,"endColumn":9,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"inline","argumentNames":["this"]}

function azureiot_ValueAwaiter_constructor__P1356_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_ValueAwaiter_constructor__P1356, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function azureiot_twinResponse__P2304(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.args___9497 = undefined;
    s.h___9502 = undefined;
    s.status___9506 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(325,15): args = parseTopicArgs(msg.topic)
    s.tmp_0 = azureiot_parseTopicArgs__P2301_mk(s);
    s.tmp_1 = if_topic_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "topic");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["topic"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["topic"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 541; s.pc = 6; return s.tmp_1; }
    }
  case 6:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 542; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.args___9497 = (r0);
// azureiot/azureiot.ts(326,15): h = twinRespHandlers[args["$rid"]]
    s.tmp_0 = r0 = globals.twinRespHandlers___2291;
    r0 = pxsim_pxtrt.mapGetGeneric(s.args___9497, "$rid");
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_0, s.tmp_1);
    s.h___9502 = (r0);
// azureiot/azureiot.ts(327,15): status = parseInt(msg.topic.slice(17))
    s.tmp_0 = parseInt__P97_mk(s);
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_2 = if_topic_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "topic");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["topic"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["topic"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 543; s.pc = 9; return s.tmp_2; }
    }
  case 9:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 17;
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 544; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 545; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.status___9506 = (r0);
// azureiot/azureiot.ts(329,1): if (h) {...
    r0 = pxsim_numops_toBoolDecr(s.h___9502);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(330,13): delete twinRespHandlers[args["$rid"]]
    s.tmp_0 = r0 = globals.twinRespHandlers___2291;
    r0 = pxsim_pxtrt.mapGetGeneric(s.args___9497, "$rid");
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapDeleteByString(s.tmp_0, s.tmp_1);
// azureiot/azureiot.ts(331,13): h(status, JSON.parse(msg.content.toString() || "{}"))
    s.tmp_2 = if_content_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "content");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["content"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["content"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 546; s.pc = 10; return s.tmp_2; }
    }
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = "{}";
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = lambda_3_mk(s);
    s.tmp_4.argL = s.h___9502;
    s.tmp_4.arg0 = s.status___9506;
    s.tmp_5 = JSON_parse__P386_mk(s);
    s.tmp_5.arg0 = s.tmp_3;
    s.callLocIdx = 547; s.pc = 12; return s.tmp_5;
  case 12:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    setupLambda(s.tmp_4, s.tmp_4.argL);
    s.callLocIdx = 548; s.pc = 11; return s.tmp_4;
  case 11:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_twinResponse__P2304.info = {"start":10304,"length":429,"line":323,"column":4,"endLine":332,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"twinResponse","argumentNames":["msg"]}

function azureiot_twinResponse__P2304_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_twinResponse__P2304, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  args___9497: undefined,
  h___9502: undefined,
  status___9506: undefined,
  arg0: undefined,
} }





function azureiot_computePatch__P1361(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.patch___9529 = undefined;
    s.k___9532 = undefined;
    s.unnamed124___U2 = undefined;
    s.unnamed125___U3 = undefined;
    s.vt___9536 = undefined;
    s.vc___9550 = undefined;
    s.p0___9560 = undefined;
    s.k___9586 = undefined;
    s.unnamed126___U8 = undefined;
    s.unnamed127___U9 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(388,15): patch: Json = {}
    r0 = pxsim_pxtrt.mkMap();
    s.patch___9529 = (r0);
// azureiot/azureiot.ts(389,20): k
    s.k___9532 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.arg0);
    s.unnamed124___U2 = (r0);
    s.unnamed125___U3 = (0);
// azureiot/azureiot.ts(389,9): for (const k of Object.keys(curr)) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed125___U3;
    r0 = pxsim_Array__length(s.unnamed124___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 15; continue; }
    r0 = pxsim_Array__getAt(s.unnamed124___U2, s.unnamed125___U3);
    s.k___9532 = (r0);
// azureiot/azureiot.ts(390,19): vt = target[k]
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.k___9532);
    s.vt___9536 = (r0);
// azureiot/azureiot.ts(391,13): if (k[0] == "$")...
    r0 = pxsim_String_.charAt(s.k___9532, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "$");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// azureiot/azureiot.ts(392,17): continue
    { step = 14; continue; }
  case 2:
  case 3:
// azureiot/azureiot.ts(393,13): if (vt === undefined) {...
    r0 = (s.vt___9536 === undefined);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
// azureiot/azureiot.ts(394,17): patch[k] = null
    r0 = pxsim_pxtrt.mapSetGeneric(s.patch___9529, s.k___9532, null);
    { step = 13; continue; }
  case 4:
// azureiot/azureiot.ts(396,23): vc = curr[k]
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.k___9532);
    s.vc___9550 = (r0);
// azureiot/azureiot.ts(397,17): if (typeof vt == "object")...
    r0 = pxsim_pxtcore.typeOf(s.vt___9536);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "object");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// azureiot/azureiot.ts(398,21): if (typeof vc == "object") {...
    r0 = pxsim_pxtcore.typeOf(s.vc___9550);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == "object");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 7; continue; }
// azureiot/azureiot.ts(399,31): p0 = computePatch(vc, vt)
    s.tmp_4 = azureiot_computePatch__P1361_mk(s);
    s.tmp_4.arg0 = s.vc___9550;
    s.tmp_4.arg1 = s.vt___9536;
    s.callLocIdx = 564; s.pc = 22; return s.tmp_4;
  case 22:
    r0 = s.retval;
    s.p0___9560 = (r0);
// azureiot/azureiot.ts(400,25): if (Object.keys(p0).length > 0)...
    r0 = pxsim_pxtrt.keysOf(s.p0___9560);
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// azureiot/azureiot.ts(401,29): patch[k] = p0
    r0 = pxsim_pxtrt.mapSetGeneric(s.patch___9529, s.k___9532, s.p0___9560);
  case 5:
  case 6:
    { step = 8; continue; }
  case 7:
// azureiot/azureiot.ts(403,25): patch[k] = vt
    r0 = pxsim_pxtrt.mapSetGeneric(s.patch___9529, s.k___9532, s.vt___9536);
  case 8:
    { step = 12; continue; }
  case 9:
// azureiot/azureiot.ts(405,22): if (vc != vt)...
    r0 = (s.vc___9550 != s.vt___9536);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// azureiot/azureiot.ts(406,21): patch[k] = vt
    r0 = pxsim_pxtrt.mapSetGeneric(s.patch___9529, s.k___9532, s.vt___9536);
  case 10:
  case 11:
  case 12:
  case 13:
  case 14:
    r0 = (s.unnamed125___U3 + 1);
    s.unnamed125___U3 = (r0);
    { step = 1; continue; }
  case 15:
    s.unnamed124___U2 = (undefined);
// azureiot/azureiot.ts(409,20): k
    s.k___9586 = (undefined);
    r0 = pxsim_pxtrt.keysOf(s.arg1);
    s.unnamed126___U8 = (r0);
    s.unnamed127___U9 = (0);
// azureiot/azureiot.ts(409,9): for (const k of Object.keys(target)) {...
  case 16:
    s.tmp_0 = r0 = s.unnamed127___U9;
    r0 = pxsim_Array__length(s.unnamed126___U8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 21; continue; }
    r0 = pxsim_Array__getAt(s.unnamed126___U8, s.unnamed127___U9);
    s.k___9586 = (r0);
// azureiot/azureiot.ts(410,13): if (curr[k] === undefined && k[0] != "$")...
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg0, s.k___9586);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 === undefined);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 17; continue; }
    r0 = s.tmp_2;
    { step = 18; continue; }
  case 17:
    r0 = pxsim_String_.charAt(s.k___9586, 0);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 != "$");
  case 18:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 19; continue; }
// azureiot/azureiot.ts(411,17): patch[k] = target[k]
    s.tmp_6 = r0 = s.patch___9529;
    s.tmp_7 = r0 = s.k___9586;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.k___9586);
    s.tmp_8 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_6, s.tmp_7, s.tmp_8);
  case 19:
  case 20:
    r0 = (s.unnamed127___U9 + 1);
    s.unnamed127___U9 = (r0);
    { step = 16; continue; }
  case 21:
    s.unnamed126___U8 = (undefined);
// azureiot/azureiot.ts(413,9): return patch
    r0 = s.patch___9529;
    return leave(s, r0)
  default: oops()
} } }
azureiot_computePatch__P1361.info = {"start":12323,"length":946,"line":386,"column":4,"endLine":413,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"computePatch","argumentNames":["curr","target"]}

function azureiot_computePatch__P1361_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_computePatch__P1361, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  patch___9529: undefined,
  k___9532: undefined,
  unnamed124___U2: undefined,
  unnamed125___U3: undefined,
  vt___9536: undefined,
  vc___9550: undefined,
  p0___9560: undefined,
  k___9586: undefined,
  unnamed126___U8: undefined,
  unnamed127___U9: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_getTwin__P1359(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// azureiot/azureiot.ts(374,9): return twinReq("GET")
    s.tmp_0 = azureiot_twinReq__P2305_mk(s);
    s.tmp_0.arg0 = "GET";
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 558; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
azureiot_getTwin__P1359.info = {"start":11955,"length":69,"line":372,"column":4,"endLine":374,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"getTwin","argumentNames":[]}

function azureiot_getTwin__P1359_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_getTwin__P1359, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function JSON_stringify__P385(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ss___9610 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/json.ts(290,15): ss = new Stringifier()
    r0 = pxsim_pxtcore_mkClassInstance(JSON_Stringifier__C2196_VT);
    s.ss___9610 = (r0);
// base/json.ts(291,9): ss.currIndent = ""
    s.tmp_0 = r0 = s.ss___9610;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["currIndent"] = (s.tmp_1);
// base/json.ts(292,9): indent |= 0
    r0 = (s.arg2 | 0);
    s.arg2 = (r0);
// base/json.ts(293,9): if (indent < 0) indent = 0
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/json.ts(293,25): indent = 0
    s.arg2 = (0);
  case 1:
  case 2:
// base/json.ts(294,9): if (indent > 10) indent = 10
    r0 = (s.arg2 > 10);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// base/json.ts(294,26): indent = 10
    s.arg2 = (10);
  case 3:
  case 4:
// base/json.ts(295,9): ss.indentStep = ""
    s.tmp_0 = r0 = s.ss___9610;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["indentStep"] = (s.tmp_1);
// base/json.ts(296,9): ss.currIndent = ""
    s.tmp_0 = r0 = s.ss___9610;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["currIndent"] = (s.tmp_1);
// base/json.ts(297,9): ss.indent = indent
    r0 = (s.ss___9610).fields["indent"] = (s.arg2);
// base/json.ts(298,9): while (indent-- > 0)...
  case 5:
// base/json.ts(298,16): indent-- > 0
    s.tmp_0 = r0 = s.arg2;
    r0 = (s.tmp_0 - 1);
    s.arg2 = (r0);
    r0 = (s.tmp_0 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 6; continue; }
// base/json.ts(299,13): ss.indentStep += " "
    s.tmp_2 = r0 = s.ss___9610;
    r0 = s.tmp_2.fields["indentStep"];
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, " ");
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["indentStep"] = (s.tmp_3);
    { step = 5; continue; }
  case 6:
// base/json.ts(300,9): return ss.go(value)
    s.tmp_0 = JSON_Stringifier_go__P2198_mk(s);
    s.tmp_0.arg0 = s.ss___9610;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 112; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
JSON_stringify__P385.info = {"start":8773,"length":414,"line":288,"column":4,"endLine":300,"endColumn":5,"fileName":"pxt_modules/base/json.ts","functionName":"stringify","argumentNames":["value","replacer","indent"]}

function JSON_stringify__P385_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_stringify__P385, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  ss___9610: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function JSON_Stringifier_go__P2198(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.t___9651 = undefined;
    s.arr___9675 = undefined;
    s.r___9681 = undefined;
    s.i___9698 = undefined;
    s.keys___9762 = undefined;
    s.r___9769 = undefined;
    s.i___9786 = undefined;
    s.k___9792 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Stringifier__C2196_VT)) failedCast(r0);
// base/json.ts(225,19): t = typeof v
    r0 = pxsim_pxtcore.typeOf(s.arg1);
    s.t___9651 = (r0);
// base/json.ts(226,13): if (t == "string")...
    r0 = (s.t___9651 == "string");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/json.ts(227,17): return this.doString(v)
    s.tmp_1 = JSON_Stringifier_doString__P2197_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 106; s.pc = 38; return s.tmp_1;
  case 38:
    r0 = s.retval;
    { step = 37; continue; }
    { step = 36; continue; }
  case 1:
// base/json.ts(228,18): if (t == "boolean" || t == "number" || v == null)...
    r0 = (s.t___9651 == "boolean");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = (s.t___9651 == "number");
  case 3:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_3;
    { step = 5; continue; }
  case 4:
    r0 = (s.arg1 == null);
  case 5:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 6; continue; }
// base/json.ts(229,17): return "" + v
    r0 = pxsim_String_.mkEmpty();
    s.tmp_5 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 39);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 39:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_6);
    { step = 37; continue; }
    { step = 35; continue; }
  case 6:
// base/json.ts(230,18): if (Array.isArray(v)) {...
    r0 = pxsim_Array_.isArray(s.arg1);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 19; continue; }
// base/json.ts(231,23): arr = v as any[]
    s.arr___9675 = (s.arg1);
// base/json.ts(232,17): if (arr.length == 0)...
    r0 = pxsim_Array__length(s.arr___9675);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// base/json.ts(233,21): return "[]"
    r0 = "[]";
    { step = 37; continue; }
    { step = 18; continue; }
  case 7:
// base/json.ts(235,25): r = "["
    s.r___9681 = ("[");
// base/json.ts(236,21): if (this.indent) {...
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// base/json.ts(237,25): this.currIndent += this.indentStep
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 40);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 40:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.arg0.fields["indentStep"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 41);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 41:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_5);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["currIndent"] = (s.tmp_2);
// base/json.ts(238,25): r += "\n"
    if ((s.r___9681) && (s.r___9681).vtable) {
    setupResume(s, 42);
    pxsim_String__stringConv(s.r___9681);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9681) + ""; }
  case 42:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\n");
    s.r___9681 = (r0);
  case 8:
  case 9:
// base/json.ts(240,30): i = 0
    s.i___9698 = (0);
// base/json.ts(240,21): for (let i = 0; i < arr.length; ++i) {...
  case 10:
// base/json.ts(240,37): i < arr.length
    s.tmp_1 = r0 = s.i___9698;
    r0 = pxsim_Array__length(s.arr___9675);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
// base/json.ts(241,25): r += this.currIndent + this.go(arr[i])
    if ((s.r___9681) && (s.r___9681).vtable) {
    setupResume(s, 43);
    pxsim_String__stringConv(s.r___9681);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9681) + ""; }
  case 43:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.arg0.fields["currIndent"];
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 44);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 44:
    r0 = s.retval;
    s.tmp_6 = r0;
    s.tmp_10 = JSON_Stringifier_go__P2198_mk(s);
    s.tmp_10.arg0 = s.arg0;
    r0 = pxsim_Array__getAt(s.arr___9675, s.i___9698);
    s.tmp_10.arg1 = r0;
    s.callLocIdx = 107; s.pc = 45; return s.tmp_10;
  case 45:
    r0 = s.retval;
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 46);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 46:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_8);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 47);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 47:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.r___9681 = (r0);
// base/json.ts(242,25): if (i != arr.length - 1)...
    s.tmp_1 = r0 = s.i___9698;
    r0 = pxsim_Array__length(s.arr___9675);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// base/json.ts(243,29): r += ","
    if ((s.r___9681) && (s.r___9681).vtable) {
    setupResume(s, 48);
    pxsim_String__stringConv(s.r___9681);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9681) + ""; }
  case 48:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ",");
    s.r___9681 = (r0);
  case 11:
  case 12:
// base/json.ts(244,25): if (this.indent)...
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// base/json.ts(245,29): r += "\n"
    if ((s.r___9681) && (s.r___9681).vtable) {
    setupResume(s, 49);
    pxsim_String__stringConv(s.r___9681);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9681) + ""; }
  case 49:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "\n");
    s.r___9681 = (r0);
  case 13:
  case 14:
// base/json.ts(240,53): ++i
    r0 = (s.i___9698 + 1);
    s.i___9698 = (r0);
    { step = 10; continue; }
  case 15:
// base/json.ts(247,21): if (this.indent)...
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
// base/json.ts(248,25): this.currIndent = this.currIndent.slice(this.indent)
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["currIndent"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["indent"];
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 108; s.pc = 50; return s.tmp_3;
  case 50:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["currIndent"] = (s.tmp_2);
  case 16:
  case 17:
// base/json.ts(249,21): r += this.currIndent + "]"
    if ((s.r___9681) && (s.r___9681).vtable) {
    setupResume(s, 51);
    pxsim_String__stringConv(s.r___9681);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9681) + ""; }
  case 51:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = s.arg0.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 52);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 52:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "]");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 53);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 53:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9681 = (r0);
// base/json.ts(250,21): return r
    r0 = s.r___9681;
    { step = 37; continue; }
  case 18:
    { step = 34; continue; }
  case 19:
// base/json.ts(253,23): keys = Object.keys(v)
    r0 = pxsim_pxtrt.keysOf(s.arg1);
    s.keys___9762 = (r0);
// base/json.ts(254,17): if (keys.length == 0)...
    r0 = pxsim_Array__length(s.keys___9762);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
// base/json.ts(255,21): return "{}"
    r0 = "{}";
    { step = 37; continue; }
  case 20:
  case 21:
// base/json.ts(257,21): r = "{"
    s.r___9769 = ("{");
// base/json.ts(258,17): if (this.indent) {...
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 22; continue; }
// base/json.ts(259,21): this.currIndent += this.indentStep
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 54);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 54:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = s.arg0.fields["indentStep"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 55);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 55:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_5);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["currIndent"] = (s.tmp_2);
// base/json.ts(260,21): r += "\n"
    if ((s.r___9769) && (s.r___9769).vtable) {
    setupResume(s, 56);
    pxsim_String__stringConv(s.r___9769);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9769) + ""; }
  case 56:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\n");
    s.r___9769 = (r0);
  case 22:
  case 23:
// base/json.ts(262,26): i = 0
    s.i___9786 = (0);
// base/json.ts(262,17): for (let i = 0; i < keys.length; ++i) {...
  case 24:
// base/json.ts(262,33): i < keys.length
    s.tmp_1 = r0 = s.i___9786;
    r0 = pxsim_Array__length(s.keys___9762);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 31; continue; }
// base/json.ts(263,27): k = keys[i]
    r0 = pxsim_Array__getAt(s.keys___9762, s.i___9786);
    s.k___9792 = (r0);
// base/json.ts(264,21): r += this.currIndent + this.doString(k)
    if ((s.r___9769) && (s.r___9769).vtable) {
    setupResume(s, 57);
    pxsim_String__stringConv(s.r___9769);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9769) + ""; }
  case 57:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = s.arg0.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 58);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 58:
    r0 = s.retval;
    s.tmp_3 = r0;
    s.tmp_7 = JSON_Stringifier_doString__P2197_mk(s);
    s.tmp_7.arg0 = s.arg0;
    s.tmp_7.arg1 = s.k___9792;
    s.callLocIdx = 109; s.pc = 59; return s.tmp_7;
  case 59:
    r0 = s.retval;
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 60);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 60:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_5);
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 61);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 61:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9769 = (r0);
// base/json.ts(265,21): if (this.indent)...
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 25; continue; }
// base/json.ts(266,25): r += ": "
    if ((s.r___9769) && (s.r___9769).vtable) {
    setupResume(s, 62);
    pxsim_String__stringConv(s.r___9769);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9769) + ""; }
  case 62:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, ": ");
    s.r___9769 = (r0);
    { step = 26; continue; }
  case 25:
// base/json.ts(268,25): r += ":"
    if ((s.r___9769) && (s.r___9769).vtable) {
    setupResume(s, 63);
    pxsim_String__stringConv(s.r___9769);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9769) + ""; }
  case 63:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, ":");
    s.r___9769 = (r0);
  case 26:
// base/json.ts(269,21): r += this.go(v[k])
    if ((s.r___9769) && (s.r___9769).vtable) {
    setupResume(s, 64);
    pxsim_String__stringConv(s.r___9769);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9769) + ""; }
  case 64:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_3 = JSON_Stringifier_go__P2198_mk(s);
    s.tmp_3.arg0 = s.arg0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.arg1, s.k___9792);
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 110; s.pc = 65; return s.tmp_3;
  case 65:
    r0 = s.retval;
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 66);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 66:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9769 = (r0);
// base/json.ts(270,21): if (i != keys.length - 1)...
    s.tmp_1 = r0 = s.i___9786;
    r0 = pxsim_Array__length(s.keys___9762);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 - 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 != s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
// base/json.ts(271,25): r += ","
    if ((s.r___9769) && (s.r___9769).vtable) {
    setupResume(s, 67);
    pxsim_String__stringConv(s.r___9769);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9769) + ""; }
  case 67:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, ",");
    s.r___9769 = (r0);
  case 27:
  case 28:
// base/json.ts(272,21): if (this.indent)...
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 29; continue; }
// base/json.ts(273,25): r += "\n"
    if ((s.r___9769) && (s.r___9769).vtable) {
    setupResume(s, 68);
    pxsim_String__stringConv(s.r___9769);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9769) + ""; }
  case 68:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "\n");
    s.r___9769 = (r0);
  case 29:
  case 30:
// base/json.ts(262,50): ++i
    r0 = (s.i___9786 + 1);
    s.i___9786 = (r0);
    { step = 24; continue; }
  case 31:
// base/json.ts(275,17): if (this.indent)...
    r0 = s.arg0.fields["indent"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 32; continue; }
// base/json.ts(276,21): this.currIndent = this.currIndent.slice(this.indent)
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["currIndent"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["indent"];
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = undefined;
    s.callLocIdx = 111; s.pc = 69; return s.tmp_3;
  case 69:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["currIndent"] = (s.tmp_2);
  case 32:
  case 33:
// base/json.ts(277,17): r += this.currIndent + "}"
    if ((s.r___9769) && (s.r___9769).vtable) {
    setupResume(s, 70);
    pxsim_String__stringConv(s.r___9769);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9769) + ""; }
  case 70:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = s.arg0.fields["currIndent"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 71);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 71:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "}");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 72);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 72:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9769 = (r0);
// base/json.ts(278,17): return r
    r0 = s.r___9769;
    { step = 37; continue; }
  case 34:
  case 35:
  case 36:
    r0 = undefined;
  case 37:
    return leave(s, r0)
  default: oops()
} } }
JSON_Stringifier_go__P2198.info = {"start":6319,"length":2076,"line":223,"column":8,"endLine":279,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"go","argumentNames":["this","v"]}

function JSON_Stringifier_go__P2198_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Stringifier_go__P2198, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  t___9651: undefined,
  arr___9675: undefined,
  r___9681: undefined,
  i___9698: undefined,
  keys___9762: undefined,
  r___9769: undefined,
  i___9786: undefined,
  k___9792: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function JSON_Stringifier_doString__P2197(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___9878 = undefined;
    s.i___9879 = undefined;
    s.c___9885 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, JSON_Stringifier__C2196_VT)) failedCast(r0);
// base/json.ts(210,17): r = "\""
    s.r___9878 = ("\"");
// base/json.ts(211,22): i = 0
    s.i___9879 = (0);
// base/json.ts(211,13): for (let i = 0; i < s.length; ++i) {...
  case 1:
// base/json.ts(211,29): i < s.length
    s.tmp_1 = r0 = s.i___9879;
    r0 = pxsim_String_.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// base/json.ts(212,21): c = s[i]
    r0 = pxsim_String_.charAt(s.arg1, s.i___9879);
    s.c___9885 = (r0);
// base/json.ts(213,17): if (c == "\n") c = "\\n"...
    r0 = (s.c___9885 == "\n");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/json.ts(213,32): c = "\\n"
    s.c___9885 = ("\\n");
    { step = 13; continue; }
  case 2:
// base/json.ts(214,22): if (c == "\r") c = "\\r"...
    r0 = (s.c___9885 == "\r");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// base/json.ts(214,37): c = "\\r"
    s.c___9885 = ("\\r");
    { step = 12; continue; }
  case 3:
// base/json.ts(215,22): if (c == "\t") c = "\\t"...
    r0 = (s.c___9885 == "\t");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/json.ts(215,37): c = "\\t"
    s.c___9885 = ("\\t");
    { step = 11; continue; }
  case 4:
// base/json.ts(216,22): if (c == "\b") c = "\\b"...
    r0 = (s.c___9885 == "\b");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// base/json.ts(216,37): c = "\\b"
    s.c___9885 = ("\\b");
    { step = 10; continue; }
  case 5:
// base/json.ts(217,22): if (c == "\\") c = "\\\\"...
    r0 = (s.c___9885 == "\\");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/json.ts(217,37): c = "\\\\"
    s.c___9885 = ("\\\\");
    { step = 9; continue; }
  case 6:
// base/json.ts(218,22): if (c == "\"") c = "\\\""
    r0 = (s.c___9885 == "\"");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// base/json.ts(218,37): c = "\\\""
    s.c___9885 = ("\\\"");
  case 7:
  case 8:
  case 9:
  case 10:
  case 11:
  case 12:
  case 13:
// base/json.ts(219,17): r += c
    if ((s.r___9878) && (s.r___9878).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.r___9878);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9878) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.c___9885) && (s.c___9885).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.c___9885);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.c___9885) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.r___9878 = (r0);
// base/json.ts(211,43): ++i
    r0 = (s.i___9879 + 1);
    s.i___9879 = (r0);
    { step = 1; continue; }
  case 14:
// base/json.ts(221,13): return r + "\""
    if ((s.r___9878) && (s.r___9878).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.r___9878);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___9878) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_String__concat(s.tmp_0, "\"");
    return leave(s, r0)
  default: oops()
} } }
JSON_Stringifier_doString__P2197.info = {"start":5837,"length":472,"line":208,"column":8,"endLine":221,"endColumn":9,"fileName":"pxt_modules/base/json.ts","functionName":"doString","argumentNames":["this","s"]}

function JSON_Stringifier_doString__P2197_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: JSON_Stringifier_doString__P2197, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  r___9878: undefined,
  i___9879: undefined,
  c___9885: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function console_debug__P375(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/console.ts(40,9): add(ConsolePriority.Debug, text)
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = 0;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 69; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_debug__P375.info = {"start":955,"length":82,"line":38,"column":4,"endLine":40,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"debug","argumentNames":["text"]}

function console_debug__P375_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_debug__P375, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_computeTwin__P2653(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.twin___9926 = undefined;
    s.serv___9929 = undefined;
    s.unnamed188___U2 = undefined;
    s.unnamed189___U3 = undefined;
    s.res___9933 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2649_VT)) failedCast(r0);
// twins.ts(313,19): twin: Json = {}
    r0 = pxsim_pxtrt.mkMap();
    s.twin___9926 = (r0);
// twins.ts(314,24): serv
    s.serv___9929 = (undefined);
    r0 = s.arg0.fields["services"];
    s.unnamed188___U2 = (r0);
    s.unnamed189___U3 = (0);
// twins.ts(314,13): for (const serv of this.services) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed189___U3;
    r0 = pxsim_Array__length(s.unnamed188___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed188___U2, s.unnamed189___U3);
    s.serv___9929 = (r0);
// twins.ts(315,17): if (serv) {...
    r0 = pxsim_numops_toBoolDecr(s.serv___9929);
    if (!r0) { step = 4; continue; }
// twins.ts(316,27): res = serv.computeTwin(forReal)
    s.tmp_2 = jacdac_twins_ServiceTwin_computeTwin__P2632_mk(s);
    s.tmp_2.arg0 = s.serv___9929;
    s.tmp_2.arg1 = s.arg1;
    s.callLocIdx = 1283; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.res___9933 = (r0);
// twins.ts(317,21): if (forReal) twin[serv.id] = res
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 2; continue; }
// twins.ts(317,34): twin[serv.id] = res
    r0 = s.serv___9929.fields["id"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.twin___9926, s.tmp_0, s.res___9933);
  case 2:
  case 3:
  case 4:
  case 5:
    r0 = (s.unnamed189___U3 + 1);
    s.unnamed189___U3 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed188___U2 = (undefined);
// twins.ts(320,13): return forReal ? twin : undefined
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 7; continue; }
    r0 = s.twin___9926;
    { step = 8; continue; }
  case 7:
    r0 = undefined;
  case 8:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_computeTwin__P2653.info = {"start":10226,"length":338,"line":311,"column":8,"endLine":320,"endColumn":9,"fileName":"twins.ts","functionName":"computeTwin","argumentNames":["this","forReal"]}

function jacdac_twins_DeviceTwin_computeTwin__P2653_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_computeTwin__P2653, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  twin___9926: undefined,
  serv___9929: undefined,
  unnamed188___U2: undefined,
  unnamed189___U3: undefined,
  res___9933: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_ServiceTwin_computeTwin__P2632(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.registers___9949 = undefined;
    s.res___9951 = undefined;
    s.d___9964 = undefined;
    s.r___9969 = undefined;
    s.unnamed178___U4 = undefined;
    s.unnamed179___U5 = undefined;
    s.buf___9995 = undefined;
    s.vals___10013 = undefined;
    s.rv___10019 = undefined;
    s.i___10024 = undefined;
    s.f___10026 = undefined;
    s.unnamed180___U11 = undefined;
    s.unnamed181___U12 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2628_VT)) failedCast(r0);
// twins.ts(124,19): registers: any = {}
    r0 = pxsim_pxtrt.mkMap();
    s.registers___9949 = (r0);
// twins.ts(125,19): res = {...
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "registers", s.registers___9949);
    s.res___9951 = (s.tmp_0);
// twins.ts(128,13): if (forReal && this.enabled !== undefined) {...
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["enabled"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
// twins.ts(129,17): registers["streaming"] = this.enabled
    r0 = s.arg0.fields["enabled"];
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.registers___9949, "streaming", s.tmp_3);
  case 3:
  case 4:
// twins.ts(131,19): d = this.parent.device
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["device"];
    s.d___9964 = (r0);
// twins.ts(132,24): r
    s.r___9969 = (undefined);
    s.tmp_0 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_0.arg0 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "registers");
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["registers"];
      if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["registers"]; }
      else if (!s.tmp_0.fn.isGetter) { s.retval = bind(s.tmp_0); }
     else { s.callLocIdx = 1231; s.pc = 22; return s.tmp_0; }
    }
  case 22:
    r0 = s.retval;
    s.unnamed178___U4 = (r0);
    s.unnamed179___U5 = (0);
// twins.ts(132,13): for (const r of this.spec.registers) {...
  case 5:
    s.tmp_0 = r0 = s.unnamed179___U5;
    r0 = pxsim_Array__length(s.unnamed178___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 21; continue; }
    r0 = pxsim_Array__getAt(s.unnamed178___U4, s.unnamed179___U5);
    s.r___9969 = (r0);
// twins.ts(133,17): if (exclusions.indexOf(this.spec.name + "." + r.name) >= 0)
    s.tmp_4 = r0 = globals.exclusions___2610;
    s.tmp_10 = if_name_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_10.arg0 = r0;
    if (!s.tmp_10.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_10.arg0, "name");
    } else {
      s.tmp_10.fn = s.tmp_10.arg0.vtable.iface["name"];
      if (s.tmp_10.fn == null) { s.retval = s.tmp_10.arg0.fields["name"]; }
      else if (!s.tmp_10.fn.isGetter) { s.retval = bind(s.tmp_10); }
     else { s.callLocIdx = 1232; s.pc = 23; return s.tmp_10; }
    }
  case 23:
    r0 = s.retval;
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_8, ".");
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 25);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    s.tmp_13 = if_name_1_mk(s);
    s.tmp_13.arg0 = s.r___9969;
    if (!s.tmp_13.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_13.arg0, "name");
    } else {
      s.tmp_13.fn = s.tmp_13.arg0.vtable.iface["name"];
      if (s.tmp_13.fn == null) { s.retval = s.tmp_13.arg0.fields["name"]; }
      else if (!s.tmp_13.fn.isGetter) { s.retval = bind(s.tmp_13); }
     else { s.callLocIdx = 1233; s.pc = 26; return s.tmp_13; }
    }
  case 26:
    r0 = s.retval;
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_11);
    s.tmp_5 = r0;
    r0 = pxsim_Array_.indexOf(s.tmp_4, s.tmp_5, undefined);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 >= 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 6; continue; }
// twins.ts(134,21): continue
    { step = 20; continue; }
  case 6:
  case 7:
// twins.ts(135,17): if (r.code == SystemReg.Reading) continue
    s.tmp_16 = if_code_1_mk(s);
    s.tmp_16.arg0 = s.r___9969;
    if (!s.tmp_16.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_16.arg0, "code");
    } else {
      s.tmp_16.fn = s.tmp_16.arg0.vtable.iface["code"];
      if (s.tmp_16.fn == null) { s.retval = s.tmp_16.arg0.fields["code"]; }
      else if (!s.tmp_16.fn.isGetter) { s.retval = bind(s.tmp_16); }
     else { s.callLocIdx = 1234; s.pc = 28; return s.tmp_16; }
    }
  case 28:
    r0 = s.retval;
    s.tmp_15 = r0;
    r0 = (s.tmp_15 == 257);
    s.tmp_14 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_14);
    if (!r0) { step = 8; continue; }
// twins.ts(135,50): continue
    { step = 20; continue; }
  case 8:
  case 9:
// twins.ts(137,23): buf = d.query(...
    s.tmp_19 = if_flags_1_mk(s);
    s.tmp_19.arg0 = s.r___9969;
    if (!s.tmp_19.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_19.arg0, "flags");
    } else {
      s.tmp_19.fn = s.tmp_19.arg0.vtable.iface["flags"];
      if (s.tmp_19.fn == null) { s.retval = s.tmp_19.arg0.fields["flags"]; }
      else if (!s.tmp_19.fn.isGetter) { s.retval = bind(s.tmp_19); }
     else { s.callLocIdx = 1236; s.pc = 29; return s.tmp_19; }
    }
  case 29:
    r0 = s.retval;
    s.tmp_18 = r0;
    r0 = (s.tmp_18 & 1);
    s.tmp_17 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_17);
    if (!r0) { step = 10; continue; }
    r0 = null;
    { step = 11; continue; }
  case 10:
    r0 = 500;
  case 11:
    // jmp value (already in r0)
    s.tmp_20 = r0;
    s.tmp_21 = jacdac_Device_query__P1886_mk(s);
    s.tmp_21.arg0 = s.d___9964;
    s.tmp_22 = if_code_1_mk(s);
    s.tmp_22.arg0 = s.r___9969;
    if (!s.tmp_22.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_22.arg0, "code");
    } else {
      s.tmp_22.fn = s.tmp_22.arg0.vtable.iface["code"];
      if (s.tmp_22.fn == null) { s.retval = s.tmp_22.arg0.fields["code"]; }
      else if (!s.tmp_22.fn.isGetter) { s.retval = bind(s.tmp_22); }
     else { s.callLocIdx = 1235; s.pc = 31; return s.tmp_22; }
    }
  case 31:
    r0 = s.retval;
    s.tmp_21.arg1 = r0;
    s.tmp_21.arg2 = s.tmp_20;
    r0 = s.arg0.fields["serviceIdx"];
    s.tmp_21.arg3 = r0;
    s.callLocIdx = 1237; s.pc = 30; return s.tmp_21;
  case 30:
    r0 = s.retval;
    s.buf___9995 = (r0);
// twins.ts(142,17): if (forReal && buf) {...
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = s.tmp_0;
    { step = 13; continue; }
  case 12:
    r0 = s.buf___9995;
  case 13:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 18; continue; }
// twins.ts(143,27): vals = jdunpack(buf, r.packf)
    s.tmp_2 = jacdac_jdunpack__P1467_mk(s);
    s.tmp_2.arg0 = s.buf___9995;
    s.tmp_3 = if_packf_1_mk(s);
    s.tmp_3.arg0 = s.r___9969;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "packf");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["packf"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["packf"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 1238; s.pc = 33; return s.tmp_3; }
    }
  case 33:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 1239; s.pc = 32; return s.tmp_2;
  case 32:
    r0 = s.retval;
    s.vals___10013 = (r0);
// twins.ts(144,25): rv: any
    s.rv___10019 = (undefined);
// twins.ts(145,21): if (r.fields) {...
    s.tmp_1 = if_fields_1_mk(s);
    s.tmp_1.arg0 = s.r___9969;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "fields");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["fields"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["fields"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 1240; s.pc = 34; return s.tmp_1; }
    }
  case 34:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 16; continue; }
// twins.ts(146,25): rv = {}
    r0 = pxsim_pxtrt.mkMap();
    s.rv___10019 = (r0);
// twins.ts(147,29): i = 0
    s.i___10024 = (0);
// twins.ts(148,36): f
    s.f___10026 = (undefined);
    s.tmp_0 = if_fields_1_mk(s);
    s.tmp_0.arg0 = s.r___9969;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "fields");
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["fields"];
      if (s.tmp_0.fn == null) { s.retval = s.tmp_0.arg0.fields["fields"]; }
      else if (!s.tmp_0.fn.isGetter) { s.retval = bind(s.tmp_0); }
     else { s.callLocIdx = 1241; s.pc = 35; return s.tmp_0; }
    }
  case 35:
    r0 = s.retval;
    s.unnamed180___U11 = (r0);
    s.unnamed181___U12 = (0);
// twins.ts(148,25): for (const f of r.fields) {...
  case 14:
    s.tmp_0 = r0 = s.unnamed181___U12;
    r0 = pxsim_Array__length(s.unnamed180___U11);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 15; continue; }
    r0 = pxsim_Array__getAt(s.unnamed180___U11, s.unnamed181___U12);
    s.f___10026 = (r0);
// twins.ts(149,29): rv[f] = vals[i++]
    s.tmp_2 = r0 = s.i___10024;
    r0 = (s.tmp_2 + 1);
    s.i___10024 = (r0);
    s.tmp_3 = r0 = s.rv___10019;
    s.tmp_4 = r0 = s.f___10026;
    r0 = pxsim_Array__getAt(s.vals___10013, s.tmp_2);
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_3, s.tmp_4, s.tmp_5);
    r0 = (s.unnamed181___U12 + 1);
    s.unnamed181___U12 = (r0);
    { step = 14; continue; }
  case 15:
    s.unnamed180___U11 = (undefined);
    { step = 17; continue; }
  case 16:
// twins.ts(152,25): rv = vals[0]
    r0 = pxsim_Array__getAt(s.vals___10013, 0);
    s.rv___10019 = (r0);
  case 17:
// twins.ts(154,21): registers[r.name] = rv
    s.tmp_0 = r0 = s.registers___9949;
    s.tmp_2 = if_name_1_mk(s);
    s.tmp_2.arg0 = s.r___9969;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "name");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["name"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["name"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 1242; s.pc = 36; return s.tmp_2; }
    }
  case 36:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_0, s.tmp_1, s.rv___10019);
  case 18:
  case 19:
  case 20:
    r0 = (s.unnamed179___U5 + 1);
    s.unnamed179___U5 = (r0);
    { step = 5; continue; }
  case 21:
    s.unnamed178___U4 = (undefined);
// twins.ts(158,13): return res
    r0 = s.res___9951;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_computeTwin__P2632.info = {"start":3940,"length":1259,"line":122,"column":8,"endLine":158,"endColumn":9,"fileName":"twins.ts","functionName":"computeTwin","argumentNames":["this","forReal"]}

function jacdac_twins_ServiceTwin_computeTwin__P2632_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_computeTwin__P2632, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  registers___9949: undefined,
  res___9951: undefined,
  d___9964: undefined,
  r___9969: undefined,
  unnamed178___U4: undefined,
  unnamed179___U5: undefined,
  buf___9995: undefined,
  vals___10013: undefined,
  rv___10019: undefined,
  i___10024: undefined,
  f___10026: undefined,
  unnamed180___U11: undefined,
  unnamed181___U12: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_query__P1886(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.q___10048 = undefined;
    s.now___10066 = undefined;
    s.pkt___10098 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1093,17): q = this.lookupQuery(reg, servIdx)
    s.tmp_0 = jacdac_Device_lookupQuery__P2484_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg3;
    s.callLocIdx = 974; s.pc = 16; return s.tmp_0;
  case 16:
    r0 = s.retval;
    s.q___10048 = (r0);
// jacdac/routing.ts(1094,13): if (!q) this.queries.push((q = new RegQuery(reg, servIdx)))
    r0 = pxsim_numops_toBoolDecr(s.q___10048);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1094,21): this.queries.push((q = new RegQuery(reg, servIdx)))
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_RegQuery__C2481_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_RegQuery_constructor__P2482_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.arg1;
    s.tmp_3.arg2 = s.arg3;
    s.callLocIdx = 975; s.pc = 17; return s.tmp_3;
  case 17:
    r0 = s.retval;
    s.q___10048 = (s.tmp_2);
    r0 = s.arg0.fields["queries"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_4, s.tmp_2);
  case 1:
  case 2:
// jacdac/routing.ts(1096,13): if (q.notImplemented) return undefined
    r0 = s.q___10048.fields["notImplemented"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(1096,35): return undefined
    r0 = undefined;
    { step = 15; continue; }
  case 3:
  case 4:
// jacdac/routing.ts(1098,19): now = control.millis()
    r0 = pxsim.control.millis();
    s.now___10066 = (r0);
// jacdac/routing.ts(1099,13): if (...
    r0 = s.q___10048.fields["lastQuery"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 5:
    r0 = s.q___10048.fields["value"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 === undefined);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_3;
    { step = 7; continue; }
  case 6:
    r0 = s.q___10048.fields["lastQuery"];
    s.tmp_6 = r0;
    r0 = (s.now___10066 - s.tmp_6);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 > 500);
  case 7:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 8:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBool(s.tmp_8);
    if (!r0) { step = 9; continue; }
    r0 = s.tmp_8;
    { step = 12; continue; }
  case 9:
    r0 = (s.arg2 != null);
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBool(s.tmp_9);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_9;
    { step = 11; continue; }
  case 10:
    r0 = s.q___10048.fields["lastQuery"];
    s.tmp_11 = r0;
    r0 = (s.now___10066 - s.tmp_11);
    s.tmp_10 = r0;
    r0 = (s.tmp_10 > s.arg2);
  case 11:
    // jmp value (already in r0)
    s.tmp_12 = r0;
    r0 = s.tmp_12;
  case 12:
    // jmp value (already in r0)
    s.tmp_13 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_13);
    if (!r0) { step = 13; continue; }
// jacdac/routing.ts(1107,17): q.lastQuery = now
    r0 = (s.q___10048).fields["lastQuery"] = (s.now___10066);
// jacdac/routing.ts(1108,23): pkt = JDPacket.onlyHeader(CMD_GET_REG | reg)
    s.tmp_0 = jacdac_JDPacket_onlyHeader__P1419_mk(s);
    r0 = (4096 | s.arg1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 976; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.pkt___10098 = (r0);
// jacdac/routing.ts(1109,17): pkt.serviceIndex = servIdx
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_0.arg0 = s.pkt___10098;
    s.tmp_0.arg1 = s.arg3;
    s.callLocIdx = 977; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
// jacdac/routing.ts(1110,17): pkt._sendCmd(this)
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1459_mk(s);
    s.tmp_0.arg0 = s.pkt___10098;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 978; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
  case 13:
  case 14:
// jacdac/routing.ts(1112,13): return q.value
    r0 = s.q___10048.fields["value"];
  case 15:
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_query__P1886.info = {"start":35837,"length":868,"line":1091,"column":8,"endLine":1112,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"query","argumentNames":["this","reg","refreshRate","servIdx"]}

function jacdac_Device_query__P1886_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_query__P1886, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  q___10048: undefined,
  now___10066: undefined,
  pkt___10098: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_RegQuery_constructor__P2482(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegQuery__C2481_VT)) failedCast(r0);
    r0 = (s.arg0).fields["reg"] = (s.arg1);
    r0 = (s.arg0).fields["serviceIdx"] = (s.arg2);
    r0 = (s.arg0).fields["lastQuery"] = (0);
    r0 = (s.arg0).fields["lastReport"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegQuery_constructor__P2482.info = {"start":33545,"length":61,"line":1009,"column":8,"endLine":1009,"endColumn":69,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","reg","serviceIdx"]}

function jacdac_RegQuery_constructor__P2482_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegQuery_constructor__P2482, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function azureiot_isConnected__P1350(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___10113 = undefined;
// azureiot/azureiot.ts(202,9): try {...
    r0 = pxsim_pxtcore.beginTry(3);
// azureiot/azureiot.ts(203,19): c = mqttClient(true)
    s.tmp_0 = azureiot_mqttClient__P1343_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 529; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.c___10113 = (r0);
// azureiot/azureiot.ts(204,13): return !!c && !!c.connected;
    r0 = pxsim_numops_toBoolDecr(s.c___10113);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_8 = mqtt_Client_connected__P1325_mk(s);
    s.tmp_8.arg0 = s.c___10113;
    s.callLocIdx = 530; s.pc = 7; return s.tmp_8;
  case 7:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
  case 2:
    // jmp value (already in r0)
    s.tmp_9 = r0;
    r0 = pxsim_pxtcore.endTry();
    r0 = s.tmp_9;
    { step = 5; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
// azureiot/azureiot.ts(207,13): return false
    r0 = false;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
azureiot_isConnected__P1350.info = {"start":6385,"length":202,"line":200,"column":4,"endLine":208,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"isConnected","argumentNames":[]}

function azureiot_isConnected__P1350_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_isConnected__P1350, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  c___10113: undefined,
} }





function jacdac_twins_DeviceTwin_tick__P2651(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.serv___10127 = undefined;
    s.unnamed184___U1 = undefined;
    s.unnamed185___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2649_VT)) failedCast(r0);
// twins.ts(301,24): serv
    s.serv___10127 = (undefined);
    r0 = s.arg0.fields["services"];
    s.unnamed184___U1 = (r0);
    s.unnamed185___U2 = (0);
// twins.ts(301,13): for (const serv of this.services) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed185___U2;
    r0 = pxsim_Array__length(s.unnamed184___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed184___U1, s.unnamed185___U2);
    s.serv___10127 = (r0);
// twins.ts(302,17): if (serv) serv.tick()
    r0 = pxsim_numops_toBoolDecr(s.serv___10127);
    if (!r0) { step = 2; continue; }
// twins.ts(302,27): serv.tick()
    s.tmp_2 = jacdac_twins_ServiceTwin_tick__P2630_mk(s);
    s.tmp_2.arg0 = s.serv___10127;
    s.callLocIdx = 1281; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
  case 2:
  case 3:
    r0 = (s.unnamed185___U2 + 1);
    s.unnamed185___U2 = (r0);
    { step = 1; continue; }
  case 4:
    s.unnamed184___U1 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_tick__P2651.info = {"start":9946,"length":118,"line":299,"column":8,"endLine":303,"endColumn":9,"fileName":"twins.ts","functionName":"tick","argumentNames":["this"]}

function jacdac_twins_DeviceTwin_tick__P2651_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_tick__P2651, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  serv___10127: undefined,
  unnamed184___U1: undefined,
  unnamed185___U2: undefined,
  arg0: undefined,
} }





function jacdac_twins_ServiceTwin_tick__P2630(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.payload___10136 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2628_VT)) failedCast(r0);
// twins.ts(89,13): if (this.enabled) {...
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// twins.ts(90,23): payload = JDPacket.jdpacked(...
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_1, 254);
    s.tmp_2 = jacdac_JDPacket_jdpacked__P1420_mk(s);
    s.tmp_2.arg0 = 8195;
    s.tmp_2.arg1 = "u8";
    s.tmp_2.arg2 = s.tmp_1;
    s.callLocIdx = 1215; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.payload___10136 = (r0);
// twins.ts(95,17): payload.serviceIndex = this.serviceIdx
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_0.arg0 = s.payload___10136;
    r0 = s.arg0.fields["serviceIdx"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1216; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// twins.ts(96,17): payload._sendCmd(this.parent.device)
    s.tmp_0 = jacdac_JDPacket__sendCmd__P1459_mk(s);
    s.tmp_0.arg0 = s.payload___10136;
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["device"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1217; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_tick__P2630.info = {"start":2610,"length":355,"line":87,"column":8,"endLine":97,"endColumn":9,"fileName":"twins.ts","functionName":"tick","argumentNames":["this"]}

function jacdac_twins_ServiceTwin_tick__P2630_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_tick__P2630, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  payload___10136: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_constructor__P2654(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.d___10196 = undefined;
    s.servIdx___10199 = undefined;
    s.cl___10205 = undefined;
    s.spec___10210 = undefined;
    s.newServ___10216 = undefined;
    s.i___10233 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_DeviceTwin__C2649_VT)) failedCast(r0);
    r0 = (s.arg0).fields["device"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["services"] = (s.tmp_1);
// twins.ts(265,13): this.device.on(jacdac.DEVICE_DISCONNECT, () => {...
    r0 = pxsim_pxtcore_mkAction(1, jacdac_twins_DeviceTwin_inline__P10158);
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_2, 0, s.arg0);
    s.tmp_3 = jacdac_EventSource_on__P1914_mk(s);
    r0 = s.arg0.fields["device"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = globals.DEVICE_DISCONNECT___1790;
    s.tmp_3.arg2 = s.tmp_2;
    s.callLocIdx = 1269; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
// twins.ts(268,13): this.id = this.device.shortId + "_" + this.device.deviceId
    s.tmp_0 = r0 = s.arg0;
    s.tmp_6 = jacdac_Device_shortId__P1881_mk(s);
    r0 = s.arg0.fields["device"];
    s.tmp_6.arg0 = r0;
    s.callLocIdx = 1270; s.pc = 11; return s.tmp_6;
  case 11:
    r0 = s.retval;
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "_");
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_7);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["id"] = (s.tmp_1);
// twins.ts(269,13): twins.push(this)
    r0 = pxsim_Array__push(globals.twins___2609, s.arg0);
// twins.ts(270,13): this.device.on(jacdac.PACKET_RECEIVE, (pkt: JDPacket) => {...
    r0 = pxsim_pxtcore_mkAction(1, jacdac_twins_DeviceTwin_inline__P10184);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = jacdac_EventSource_on__P1914_mk(s);
    r0 = s.arg0.fields["device"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = globals.PACKET_RECEIVE___1798;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1273; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
// twins.ts(275,19): d = this.device
    r0 = s.arg0.fields["device"];
    s.d___10196 = (r0);
// twins.ts(276,22): servIdx = 0
    s.servIdx___10199 = (0);
// twins.ts(276,13): for (let servIdx = 0; servIdx < d.serviceClassLength; ++servIdx) {
  case 1:
// twins.ts(276,35): servIdx < d.serviceClassLength
    s.tmp_1 = r0 = s.servIdx___10199;
    s.tmp_3 = jacdac_Device_serviceClassLength__P1884_mk(s);
    s.tmp_3.arg0 = s.d___10196;
    s.callLocIdx = 1274; s.pc = 16; return s.tmp_3;
  case 16:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// twins.ts(277,23): cl = d.serviceClassAt(servIdx)
    s.tmp_4 = jacdac_Device_serviceClassAt__P1885_mk(s);
    s.tmp_4.arg0 = s.d___10196;
    s.tmp_4.arg1 = s.servIdx___10199;
    s.callLocIdx = 1275; s.pc = 17; return s.tmp_4;
  case 17:
    r0 = s.retval;
    s.cl___10205 = (r0);
// twins.ts(278,23): spec = getServiceTwinSpec(cl)
    s.tmp_0 = jacdac_twins_getServiceTwinSpec__P2648_mk(s);
    s.tmp_0.arg0 = s.cl___10205;
    s.callLocIdx = 1276; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
    s.spec___10210 = (r0);
// twins.ts(279,17): if (!spec) continue
    r0 = pxsim_numops_toBoolDecr(s.spec___10210);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// twins.ts(279,28): continue
    { step = 8; continue; }
  case 2:
  case 3:
// twins.ts(281,23): newServ = new ServiceTwin(this, servIdx, spec)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_twins_ServiceTwin__C2628_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_twins_ServiceTwin_constructor__P2634_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.arg0;
    s.tmp_3.arg2 = s.servIdx___10199;
    s.tmp_3.arg3 = s.spec___10210;
    s.callLocIdx = 1277; s.pc = 19; return s.tmp_3;
  case 19:
    r0 = s.retval;
    s.newServ___10216 = (s.tmp_2);
// twins.ts(282,17): if (this.services.find(s => s && s.id == newServ.id)) {...
    r0 = pxsim_pxtcore_mkAction(1, jacdac_twins_DeviceTwin_inline__P10224);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.newServ___10216);
    s.tmp_2 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["services"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 1278; s.pc = 20; return s.tmp_2;
  case 20:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_pxtrt.mklocRef();
    s.i___10233 = (r0);
// twins.ts(283,25): i = 2
    r0 = pxsim_pxtrt_stlocRef(s.i___10233, 2);
// twins.ts(284,21): while (...
  case 4:
// twins.ts(285,25): this.services.find(s => s.id == newServ.id + "_" + i)
    r0 = pxsim_pxtcore_mkAction(2, jacdac_twins_DeviceTwin_inline__P10238);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.newServ___10216);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.i___10233);
    s.tmp_2 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["services"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 1279; s.pc = 21; return s.tmp_2;
  case 21:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
// twins.ts(287,25): i++
    s.tmp_3 = r0 = s.i___10233;
    r0 = pxsim_pxtrt_ldlocRef(s.i___10233);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 + 1);
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_3, s.tmp_4);
    { step = 4; continue; }
  case 5:
// twins.ts(288,21): newServ.id += "_" + i
    s.tmp_0 = r0 = s.newServ___10216;
    r0 = s.tmp_0.fields["id"];
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_ldlocRef(s.i___10233);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat("_", s.tmp_6);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["id"] = (s.tmp_1);
  case 6:
  case 7:
// twins.ts(291,17): this.services[servIdx] = newServ
    r0 = s.arg0.fields["services"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, s.servIdx___10199, s.newServ___10216);
  case 8:
// twins.ts(276,67): ++servIdx
    r0 = (s.servIdx___10199 + 1);
    s.servIdx___10199 = (r0);
    { step = 1; continue; }
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_constructor__P2654.info = {"start":8614,"length":1166,"line":263,"column":8,"endLine":292,"endColumn":9,"fileName":"twins.ts","functionName":"inline","argumentNames":["this","device"]}

function jacdac_twins_DeviceTwin_constructor__P2654_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_constructor__P2654, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  d___10196: undefined,
  servIdx___10199: undefined,
  cl___10205: undefined,
  spec___10210: undefined,
  newServ___10216: undefined,
  i___10233: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_DeviceTwin_inline__P10158(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// twins.ts(266,17): twins.removeElement(this)
    r0 = pxsim_Array_.removeElement(globals.twins___2609, s.caps[0]);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_inline__P10158.info = {"start":8711,"length":63,"line":264,"column":53,"endLine":266,"endColumn":13,"fileName":"twins.ts","functionName":"inline","argumentNames":[]}

function jacdac_twins_DeviceTwin_inline__P10158_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_inline__P10158, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_twins_DeviceTwin_inline__P10184(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.srv___10186 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// twins.ts(271,23): srv = this.services[pkt.serviceIndex]
    r0 = s.caps[0].fields["services"];
    s.tmp_0 = r0;
    s.tmp_2 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 1271; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, s.tmp_1);
    s.srv___10186 = (r0);
// twins.ts(272,17): if (srv) srv.process(pkt)
    r0 = pxsim_numops_toBoolDecr(s.srv___10186);
    if (!r0) { step = 1; continue; }
// twins.ts(272,26): srv.process(pkt)
    s.tmp_0 = jacdac_twins_ServiceTwin_process__P2633_mk(s);
    s.tmp_0.arg0 = s.srv___10186;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 1272; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_inline__P10184.info = {"start":8926,"length":136,"line":269,"column":50,"endLine":272,"endColumn":13,"fileName":"twins.ts","functionName":"inline","argumentNames":["pkt"]}

function jacdac_twins_DeviceTwin_inline__P10184_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_inline__P10184, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  srv___10186: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_inline__P10224(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["id"];
    s.tmp_1 = r0;
    r0 = s.caps[0].fields["id"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 == s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_inline__P10224.info = {"start":9428,"length":28,"line":281,"column":39,"endLine":281,"endColumn":67,"fileName":"twins.ts","functionName":"inline","argumentNames":["s"]}

function jacdac_twins_DeviceTwin_inline__P10224_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_inline__P10224, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_twins_DeviceTwin_inline__P10238(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["id"];
    s.tmp_0 = r0;
    r0 = s.caps[0].fields["id"];
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 1);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 1:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "_");
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt_ldlocRef(s.caps[1]);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 == s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_DeviceTwin_inline__P10238.info = {"start":9562,"length":33,"line":284,"column":43,"endLine":284,"endColumn":76,"fileName":"twins.ts","functionName":"inline","argumentNames":["s"]}

function jacdac_twins_DeviceTwin_inline__P10238_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_DeviceTwin_inline__P10238, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arg0: undefined,
} }





function jacdac_twins_ServiceTwin_constructor__P2634(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2628_VT)) failedCast(r0);
    r0 = (s.arg0).fields["parent"] = (s.arg1);
    r0 = (s.arg0).fields["serviceIdx"] = (s.arg2);
    r0 = (s.arg0).fields["spec"] = (s.arg3);
    r0 = (s.arg0).fields["readingPtr"] = (0);
// twins.ts(60,13): this.id = spec.name
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_name_1_mk(s);
    s.tmp_2.arg0 = s.arg3;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "name");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["name"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["name"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 1206; s.pc = 5; return s.tmp_2; }
    }
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["id"] = (s.tmp_1);
// twins.ts(61,13): if (this.spec.registers.some(r => r.code == SystemReg.Reading)) {
    s.tmp_1 = helpers_arraySome__P107_mk(s);
    s.tmp_2 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_2.arg0 = r0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "registers");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["registers"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["registers"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 1207; s.pc = 7; return s.tmp_2; }
    }
  case 7:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = jacdac_twins_ServiceTwin_inline__P10283;
    s.callLocIdx = 1209; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// twins.ts(62,17): this.spec.registers.push(streamingIntervalSpec)
    s.tmp_4 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_4.arg0 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "registers");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["registers"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["registers"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 1210; s.pc = 8; return s.tmp_4; }
    }
  case 8:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, globals.streamingIntervalSpec___2624);
// twins.ts(63,17): this.enabled = true
    r0 = (s.arg0).fields["enabled"] = (true);
  case 1:
  case 2:
// twins.ts(65,13): this.header = Buffer.fromUTF8(...
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["id"];
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, ":");
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = s.arg0.fields["id"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_9);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "\u0000");
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["header"] = (s.tmp_1);
// twins.ts(68,13): if (this.header.length > MAX_HEADER_SIZE - 8)...
    r0 = s.arg0.fields["header"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 192);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// twins.ts(69,17): throw "header too large"
    r0 = pxsim_pxtcore.throwValue("header too large");
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_constructor__P2634.info = {"start":1376,"length":591,"line":54,"column":8,"endLine":69,"endColumn":9,"fileName":"twins.ts","functionName":"inline","argumentNames":["this","parent","serviceIdx","spec"]}

function jacdac_twins_ServiceTwin_constructor__P2634_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_constructor__P2634, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_twins_ServiceTwin_inline__P10283(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = if_code_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "code");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["code"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["code"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 1208; s.pc = 1; return s.tmp_1; }
    }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 257);
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_inline__P10283.info = {"start":1593,"length":32,"line":60,"column":41,"endLine":60,"endColumn":73,"fileName":"twins.ts","functionName":"inline","argumentNames":["r"]}

function jacdac_twins_ServiceTwin_inline__P10283_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_inline__P10283, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_twins_ServiceTwin_process__P2633(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.rspec___10336 = undefined;
    s.v___10348 = undefined;
    s.scaleToPercent___10355 = undefined;
    s.prev___10378 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_twins_ServiceTwin__C2628_VT)) failedCast(r0);
// twins.ts(162,13): if (...
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1441_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 1243; s.pc = 19; return s.tmp_1;
  case 19:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 3:
    s.tmp_4 = jacdac_JDPacket_regCode__P1442_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 1244; s.pc = 20; return s.tmp_4;
  case 20:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 257);
  case 4:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 17; continue; }
// twins.ts(167,23): rspec = this.spec.registers.find(...
    s.tmp_6 = helpers_arrayFind__P111_mk(s);
    s.tmp_7 = if_registers_1_mk(s);
    r0 = s.arg0.fields["spec"];
    s.tmp_7.arg0 = r0;
    if (!s.tmp_7.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_7.arg0, "registers");
    } else {
      s.tmp_7.fn = s.tmp_7.arg0.vtable.iface["registers"];
      if (s.tmp_7.fn == null) { s.retval = s.tmp_7.arg0.fields["registers"]; }
      else if (!s.tmp_7.fn.isGetter) { s.retval = bind(s.tmp_7); }
     else { s.callLocIdx = 1245; s.pc = 22; return s.tmp_7; }
    }
  case 22:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = rspec_inline__P10338;
    s.callLocIdx = 1247; s.pc = 21; return s.tmp_6;
  case 21:
    r0 = s.retval;
    s.rspec___10336 = (r0);
// twins.ts(170,21): v = jdunpack(pkt.data, rspec.packf)[0]
    s.tmp_1 = jacdac_jdunpack__P1467_mk(s);
    s.tmp_2 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 1248; s.pc = 24; return s.tmp_2;
  case 24:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_3 = if_packf_1_mk(s);
    s.tmp_3.arg0 = s.rspec___10336;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "packf");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["packf"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["packf"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 1249; s.pc = 25; return s.tmp_3; }
    }
  case 25:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 1250; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.v___10348 = (r0);
// twins.ts(171,23): scaleToPercent =...
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    s.tmp_2 = if_packf_1_mk(s);
    s.tmp_2.arg0 = s.rspec___10336;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "packf");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["packf"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["packf"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 1251; s.pc = 27; return s.tmp_2; }
    }
  case 27:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    r0 = pxsim_String_.length("u0.");
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 1252; s.pc = 26; return s.tmp_1;
  case 26:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == "u0.");
    s.scaleToPercent___10355 = (r0);
// twins.ts(173,17): if (scaleToPercent) v *= 100
    r0 = pxsim_numops_toBoolDecr(s.scaleToPercent___10355);
    if (!r0) { step = 5; continue; }
// twins.ts(173,37): v *= 100
    r0 = (s.v___10348 * 100);
    s.v___10348 = (r0);
  case 5:
  case 6:
// twins.ts(175,17): if (...
    r0 = s.arg0.fields["readingBuffer"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    r0 = s.arg0.fields["readingPtr"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 8);
    s.tmp_3 = r0;
    r0 = s.arg0.fields["readingBuffer"];
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_6);
    s.tmp_5 = r0;
    r0 = (s.tmp_3 > s.tmp_5);
  case 8:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    if (!r0) { step = 13; continue; }
// twins.ts(179,27): prev = this.readingBuffer
    r0 = s.arg0.fields["readingBuffer"];
    s.prev___10378 = (r0);
// twins.ts(180,21): this.readingBuffer = Buffer.create(...
    r0 = s.arg0.fields["readingBuffer"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
    r0 = s.arg0.fields["readingPtr"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 + 32);
    { step = 10; continue; }
  case 9:
    r0 = 16;
  case 10:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = r0 = s.arg0;
    r0 = pxsim.control.createBuffer(s.tmp_2);
    s.tmp_4 = r0;
    r0 = (s.tmp_3).fields["readingBuffer"] = (s.tmp_4);
// twins.ts(183,21): if (prev) this.readingBuffer.write(0, prev)
    r0 = pxsim_numops_toBoolDecr(s.prev___10378);
    if (!r0) { step = 11; continue; }
// twins.ts(183,31): this.readingBuffer.write(0, prev)
    r0 = s.arg0.fields["readingBuffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 0, s.prev___10378);
  case 11:
  case 12:
  case 13:
  case 14:
// twins.ts(185,17): this.readingBuffer.setNumber(...
    r0 = s.arg0.fields["readingBuffer"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["readingPtr"];
    s.tmp_1 = r0;
    r0 = pxsim.control.millis();
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, s.tmp_1, s.tmp_2);
// twins.ts(190,17): this.readingBuffer.setNumber(...
    r0 = s.arg0.fields["readingBuffer"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["readingPtr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 4);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 13, s.tmp_1, s.v___10348);
// twins.ts(195,17): if (this.readingPtr == 0)...
    r0 = s.arg0.fields["readingPtr"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
// twins.ts(196,21): pendingMessageSize += this.header.length
    s.tmp_2 = r0 = globals.pendingMessageSize___2615;
    r0 = s.arg0.fields["header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_4);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    globals.pendingMessageSize___2615 = (r0);
  case 15:
  case 16:
// twins.ts(197,17): this.readingPtr += 8
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["readingPtr"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["readingPtr"] = (s.tmp_1);
// twins.ts(198,17): pendingReadings++
    r0 = (globals.pendingReadings___2613 + 1);
    globals.pendingReadings___2613 = (r0);
// twins.ts(199,17): pendingMessageSize += 8
    r0 = (globals.pendingMessageSize___2615 + 8);
    globals.pendingMessageSize___2615 = (r0);
// twins.ts(200,17): checkPendingReadings()
    s.tmp_0 = jacdac_twins_checkPendingReadings__P2657_mk(s);
    s.tmp_0.arg0 = false;
    s.callLocIdx = 1253; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
  case 17:
  case 18:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_ServiceTwin_process__P2633.info = {"start":5209,"length":1569,"line":160,"column":8,"endLine":201,"endColumn":9,"fileName":"twins.ts","functionName":"process","argumentNames":["this","pkt"]}

function jacdac_twins_ServiceTwin_process__P2633_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_ServiceTwin_process__P2633, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  rspec___10336: undefined,
  v___10348: undefined,
  scaleToPercent___10355: undefined,
  prev___10378: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function rspec_inline__P10338(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_1 = if_code_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "code");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["code"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["code"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 1246; s.pc = 1; return s.tmp_1; }
    }
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 257);
    return leave(s, r0)
  default: oops()
} } }
rspec_inline__P10338.info = {"start":5456,"length":32,"line":167,"column":20,"endLine":167,"endColumn":52,"fileName":"twins.ts","functionName":"inline","argumentNames":["r"]}

function rspec_inline__P10338_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: rspec_inline__P10338, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_EventSource_on__P1914(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C1912_VT)) failedCast(r0);
// jacdac/eventsource.ts(24,13): this.addListenerInternal(eventName, handler, false)
    s.tmp_0 = jacdac_EventSource_addListenerInternal__P2372_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = false;
    s.callLocIdx = 1104; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// jacdac/eventsource.ts(25,13): return this
    r0 = s.arg0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_on__P1914.info = {"start":619,"length":144,"line":22,"column":8,"endLine":25,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"on","argumentNames":["this","eventName","handler"]}

function jacdac_EventSource_on__P1914_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_on__P1914, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_EventSource_addListenerInternal__P2372(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.previous___10452 = undefined;
    s.listener___10469 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventSource__C1912_VT)) failedCast(r0);
// jacdac/eventsource.ts(42,13): if (!eventName || !handler) {...
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// jacdac/eventsource.ts(43,17): return
    { step = 7; continue; }
  case 3:
  case 4:
// jacdac/eventsource.ts(47,19): previous = this.listeners.find(...
    r0 = pxsim_pxtcore_mkAction(2, previous_inline__P10454);
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_4, 0, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_4, 1, s.arg2);
    s.tmp_5 = helpers_arrayFind__P111_mk(s);
    r0 = s.arg0.fields["listeners"];
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = s.tmp_4;
    s.callLocIdx = 1105; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
    s.previous___10452 = (r0);
// jacdac/eventsource.ts(50,13): if (previous) {...
    r0 = pxsim_numops_toBoolDecr(s.previous___10452);
    if (!r0) { step = 5; continue; }
// jacdac/eventsource.ts(51,17): return
    { step = 7; continue; }
  case 5:
  case 6:
// jacdac/eventsource.ts(55,19): listener = new EventListener(eventName, handler, once)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_EventListener__C1909_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_EventListener_constructor__P1910_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.tmp_1.arg3 = s.arg3;
    s.callLocIdx = 1106; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.listener___10469 = (s.tmp_0);
// jacdac/eventsource.ts(56,13): this.listeners.push(listener)
    r0 = s.arg0.fields["listeners"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.listener___10469);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventSource_addListenerInternal__P2372.info = {"start":1055,"length":596,"line":36,"column":8,"endLine":56,"endColumn":9,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"addListenerInternal","argumentNames":["this","eventName","handler","once"]}

function jacdac_EventSource_addListenerInternal__P2372_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventSource_addListenerInternal__P2372, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  previous___10452: undefined,
  listener___10469: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function previous_inline__P10454(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["key"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === s.caps[0]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["handler"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 === s.caps[1]);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
previous_inline__P10454.info = {"start":1367,"length":49,"line":47,"column":16,"endLine":47,"endColumn":65,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["l"]}

function previous_inline__P10454_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: previous_inline__P10454, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_EventListener_constructor__P1910(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_EventListener__C1909_VT)) failedCast(r0);
    r0 = (s.arg0).fields["key"] = (s.arg1);
    r0 = (s.arg0).fields["handler"] = (s.arg2);
    r0 = (s.arg0).fields["once"] = (s.arg3);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_EventListener_constructor__P1910.info = {"start":178,"length":204,"line":5,"column":8,"endLine":10,"endColumn":12,"fileName":"pxt_modules/jacdac/eventsource.ts","functionName":"inline","argumentNames":["this","key","handler","once"]}

function jacdac_EventListener_constructor__P1910_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_EventListener_constructor__P1910, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function helpers_arraySome__P107(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___10483 = undefined;
    s.i___10486 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(240,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___10483 = (r0);
// base/pxt-helpers.ts(241,18): i = 0
    s.i___10486 = (0);
// base/pxt-helpers.ts(241,1): for (let i = 0; i < len; ++i)...
  case 1:
// base/pxt-helpers.ts(241,25): i < len
    r0 = (s.i___10486 < s.len___10483);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(242,13): if (callbackfn(arr[i], i))...
    s.tmp_2 = lambda_3_mk(s);
    s.tmp_2.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___10486);
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.i___10486;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.callLocIdx = 5; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(243,17): return true;
    r0 = true;
    { step = 5; continue; }
  case 2:
  case 3:
// base/pxt-helpers.ts(241,34): ++i
    r0 = (s.i___10486 + 1);
    s.i___10486 = (r0);
    { step = 1; continue; }
  case 4:
// base/pxt-helpers.ts(244,9): return false;
    r0 = false;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySome__P107.info = {"start":6833,"length":296,"line":238,"column":4,"endLine":244,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySome","argumentNames":["arr","callbackfn"]}

function helpers_arraySome__P107_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySome__P107, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  len___10483: undefined,
  i___10486: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_twins_connect__P2660(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.e___10504 = undefined;
// twins.ts(422,9): if (!net.Net.instance.controller.isConnected) return false
    s.tmp_3 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_4 = net_Net_controller__P1207_mk(s);
    s.tmp_4.arg0 = globals.net_Net_instance___1206;
    s.callLocIdx = 1320; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    if (!checkSubtype(s.tmp_3.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.isConnected;
    s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// twins.ts(422,55): return false
    r0 = false;
    { step = 5; continue; }
  case 1:
  case 2:
// twins.ts(424,9): try {...
    r0 = pxsim_pxtcore.beginTry(3);
// twins.ts(426,1): azureiot.connect()
    s.tmp_0 = azureiot_connect__P1348_mk(s);
    s.callLocIdx = 1321; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// twins.ts(427,13): return true
    r0 = pxsim_pxtcore.endTry();
    r0 = true;
    { step = 5; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___10504 = (r0);
// twins.ts(429,13): console.error(e)
    s.tmp_0 = console_error__P377_mk(s);
    s.tmp_0.arg0 = s.e___10504;
    s.callLocIdx = 1322; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// twins.ts(430,13): return false
    r0 = false;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_connect__P2660.info = {"start":13810,"length":294,"line":420,"column":4,"endLine":431,"endColumn":5,"fileName":"twins.ts","functionName":"connect","argumentNames":[]}

function jacdac_twins_connect__P2660_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_connect__P2660, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  e___10504: undefined,
} }





function azureiot_connect__P1348(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___10507 = undefined;
    s.start___10516 = undefined;
// azureiot/azureiot.ts(168,15): c = mqttClient()
    s.tmp_0 = azureiot_mqttClient__P1343_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 519; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.c___10507 = (r0);
// azureiot/azureiot.ts(169,9): if (!c.connected) {...
    s.tmp_3 = mqtt_Client_connected__P1325_mk(s);
    s.tmp_3.arg0 = s.c___10507;
    s.callLocIdx = 520; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// azureiot/azureiot.ts(170,13): c.connect()
    s.tmp_4 = mqtt_Client_connect__P1328_mk(s);
    s.tmp_4.arg0 = s.c___10507;
    s.callLocIdx = 521; s.pc = 11; return s.tmp_4;
  case 11:
    r0 = s.retval;
// azureiot/azureiot.ts(172,19): start = control.millis()
    r0 = pxsim.control.millis();
    s.start___10516 = (r0);
// azureiot/azureiot.ts(174,13): while (!c.connected && control.millis() - start < timeout) {...
  case 1:
// azureiot/azureiot.ts(174,20): !c.connected && control.millis() - start < timeout
    s.tmp_3 = mqtt_Client_connected__P1325_mk(s);
    s.tmp_3.arg0 = s.c___10507;
    s.callLocIdx = 522; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim.control.millis();
    s.tmp_5 = r0;
    r0 = (s.tmp_5 - s.start___10516);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 < 30000);
  case 3:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    if (!r0) { step = 4; continue; }
// azureiot/azureiot.ts(175,17): pause(1000)
    s.tmp_7 = pause__P411_mk(s);
    s.tmp_7.arg0 = 1000;
    s.callLocIdx = 523; s.pc = 13; return s.tmp_7;
  case 13:
    r0 = s.retval;
    { step = 1; continue; }
  case 4:
// azureiot/azureiot.ts(177,13): if (!c.connected)...
    s.tmp_3 = mqtt_Client_connected__P1325_mk(s);
    s.tmp_3.arg0 = s.c___10507;
    s.callLocIdx = 524; s.pc = 14; return s.tmp_3;
  case 14:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// azureiot/azureiot.ts(178,17): throw "connection failed"
    r0 = pxsim_pxtcore.throwValue("connection failed");
  case 5:
  case 6:
  case 7:
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_connect__P1348.info = {"start":5331,"length":467,"line":166,"column":4,"endLine":179,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"connect","argumentNames":[]}

function azureiot_connect__P1348_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_connect__P1348, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  c___10507: undefined,
  start___10516: undefined,
} }





function jacdac_twins_getServiceTwinSpec__P2648(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.key___10547 = undefined;
    s.cached___10553 = undefined;
    s.url___10560 = undefined;
    s.json___10576 = undefined;
    s.head___10577 = undefined;
    s.statusCode___10582 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// twins.ts(227,9): if (ignoredServices.indexOf(serviceClass) > -1) return null
    r0 = pxsim_Array_.indexOf(globals.ignoredServices___2647, s.arg0, undefined);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > -1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// twins.ts(227,57): return null
    r0 = null;
    { step = 11; continue; }
  case 1:
  case 2:
// twins.ts(228,15): key = "x7-" + serviceClass
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("x7-", s.tmp_2);
    s.key___10547 = (r0);
// twins.ts(229,15): cached = settings.readString(key)
    s.tmp_0 = settings_readString__P1087_mk(s);
    s.tmp_0.arg0 = s.key___10547;
    s.callLocIdx = 1254; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.cached___10553 = (r0);
// twins.ts(230,9): if (cached) return JSON.parse(cached)
    r0 = pxsim_numops_toBoolDecr(s.cached___10553);
    if (!r0) { step = 3; continue; }
// twins.ts(230,21): return JSON.parse(cached)
    s.tmp_0 = JSON_parse__P386_mk(s);
    s.tmp_0.arg0 = s.cached___10553;
    s.callLocIdx = 1255; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    { step = 11; continue; }
  case 3:
  case 4:
// twins.ts(232,15): url = `https://microsoft.github.io/jacdac-docs/services/twin/x${toHexNum(
    s.tmp_4 = jacdac_twins_toHexNum__P2635_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 1256; s.pc = 15; return s.tmp_4;
  case 15:
    r0 = s.retval;
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("https://microsoft.github.io/jacdac-docs/services/twin/x", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, ".json");
    s.url___10560 = (r0);
// twins.ts(236,9): if (azureiot.isConnected()) {...
    s.tmp_1 = azureiot_isConnected__P1350_mk(s);
    s.callLocIdx = 1257; s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// twins.ts(237,13): console.log(`disconnecting MQTT to fetch ${url}`)
    s.tmp_2 = console_log__P378_mk(s);
    if ((s.url___10560) && (s.url___10560).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.url___10560);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.url___10560) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("disconnecting MQTT to fetch ", s.tmp_3);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 1258; s.pc = 18; return s.tmp_2;
  case 18:
    r0 = s.retval;
// twins.ts(238,13): azureiot.disconnect()
    s.tmp_0 = azureiot_disconnect__P1347_mk(s);
    s.callLocIdx = 1259; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
  case 5:
  case 6:
// twins.ts(243,15): head = net.request("HEAD", url)
    s.tmp_0 = net_request__P1242_mk(s);
    s.tmp_0.arg0 = "HEAD";
    s.tmp_0.arg1 = s.url___10560;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1260; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
    s.head___10577 = (r0);
// twins.ts(244,15): statusCode = head.status_code
    r0 = s.head___10577.fields["status_code"];
    s.statusCode___10582 = (r0);
// twins.ts(245,9): head.close()
    s.tmp_0 = net_Response_close__P1230_mk(s);
    s.tmp_0.arg0 = s.head___10577;
    s.callLocIdx = 1261; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
// twins.ts(246,9): if (statusCode !== 200) {...
    r0 = (s.statusCode___10582 !== 200);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// twins.ts(247,13): console.log(`service spec not found at ${url} (${statusCode})`)
    s.tmp_1 = console_log__P378_mk(s);
    if ((s.url___10560) && (s.url___10560).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.url___10560);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.url___10560) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("service spec not found at ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, " (");
    s.tmp_3 = r0;
    if ((s.statusCode___10582) && (s.statusCode___10582).vtable) {
    setupResume(s, 25);
    pxsim_String__stringConv(s.statusCode___10582);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.statusCode___10582) + ""; }
  case 25:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_6);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ")");
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 1262; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
// twins.ts(248,13): json = null
    s.json___10576 = (null);
    { step = 10; continue; }
  case 7:
// twins.ts(250,13): json = net.getJSON(url)
    s.tmp_0 = net_getJSON__P1246_mk(s);
    s.tmp_0.arg0 = s.url___10560;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 1263; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
    s.json___10576 = (r0);
// twins.ts(251,13): if (!json) {...
    r0 = pxsim_numops_toBoolDecr(s.json___10576);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// twins.ts(252,17): console.warn("failed to get serv: " + url)
    s.tmp_2 = console_warn__P376_mk(s);
    if ((s.url___10560) && (s.url___10560).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.url___10560);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.url___10560) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("failed to get serv: ", s.tmp_3);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 1264; s.pc = 27; return s.tmp_2;
  case 27:
    r0 = s.retval;
// twins.ts(253,17): json = null
    s.json___10576 = (null);
  case 8:
  case 9:
// twins.ts(255,13): console.log(`got serv: ${url} ${JSON.stringify(json).length} bytes`)
    s.tmp_0 = console_log__P378_mk(s);
    if ((s.url___10560) && (s.url___10560).vtable) {
    setupResume(s, 30);
    pxsim_String__stringConv(s.url___10560);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.url___10560) + ""; }
  case 30:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("got serv: ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " ");
    s.tmp_2 = r0;
    s.tmp_8 = JSON_stringify__P385_mk(s);
    s.tmp_8.arg0 = s.json___10576;
    s.tmp_8.arg1 = null;
    s.tmp_8.arg2 = 0;
    s.callLocIdx = 1265; s.pc = 31; return s.tmp_8;
  case 31:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String_.length(s.tmp_7);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 32);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 32:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " bytes");
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1266; s.pc = 29; return s.tmp_0;
  case 29:
    r0 = s.retval;
  case 10:
// twins.ts(257,9): settings.writeString(key, JSON.stringify(json))
    s.tmp_0 = settings_writeString__P1082_mk(s);
    s.tmp_0.arg0 = s.key___10547;
    s.tmp_1 = JSON_stringify__P385_mk(s);
    s.tmp_1.arg0 = s.json___10576;
    s.tmp_1.arg1 = null;
    s.tmp_1.arg2 = 0;
    s.callLocIdx = 1267; s.pc = 34; return s.tmp_1;
  case 34:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1268; s.pc = 33; return s.tmp_0;
  case 33:
    r0 = s.retval;
// twins.ts(258,9): return json
    r0 = s.json___10576;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_getServiceTwinSpec__P2648.info = {"start":7298,"length":1227,"line":225,"column":4,"endLine":258,"endColumn":5,"fileName":"twins.ts","functionName":"getServiceTwinSpec","argumentNames":["serviceClass"]}

function jacdac_twins_getServiceTwinSpec__P2648_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_getServiceTwinSpec__P2648, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  key___10547: undefined,
  cached___10553: undefined,
  url___10560: undefined,
  json___10576: undefined,
  head___10577: undefined,
  statusCode___10582: undefined,
  arg0: undefined,
} }





function console_warn__P376(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/console.ts(44,9): add(ConsolePriority.Warning, text)
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = 2;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 70; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_warn__P376.info = {"start":1043,"length":83,"line":42,"column":4,"endLine":44,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"warn","argumentNames":["text"]}

function console_warn__P376_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_warn__P376, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function net_getJSON__P1246(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___10657 = undefined;
    s.rv___10662 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// net/requests.ts(278,9): options = options || {}
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtrt.mkMap();
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.arg1 = (s.tmp_1);
// net/requests.ts(279,9): options.headers = options.headers || {}
    s.tmp_1 = if_headers_1_mk(s);
    s.tmp_1.arg0 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "headers");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["headers"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["headers"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 298; s.pc = 9; return s.tmp_1; }
    }
  case 9:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtrt.mkMap();
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = if_headers_2_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = s.tmp_2;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_3.arg0, "headers", s.tmp_3.arg1);
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["set/headers"];
      if (s.tmp_3.fn === null) { s.tmp_3.arg0.fields["headers"] = s.tmp_3.arg1; }
      else if (s.tmp_3.fn === undefined) { failedCast(s.tmp_3.arg0) } 
     else { s.callLocIdx = 299; s.pc = 10; return s.tmp_3; }
    }
  case 10:
    r0 = s.retval;
// net/requests.ts(280,9): options.headers["accept"] = options.headers["accept"] || "application/json"
    s.tmp_2 = if_headers_1_mk(s);
    s.tmp_2.arg0 = s.arg1;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "headers");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["headers"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["headers"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 301; s.pc = 11; return s.tmp_2; }
    }
  case 11:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, "accept");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = "application/json";
  case 6:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_5 = if_headers_1_mk(s);
    s.tmp_5.arg0 = s.arg1;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "headers");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["headers"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["headers"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 300; s.pc = 12; return s.tmp_5; }
    }
  case 12:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_4, "accept", s.tmp_3);
// net/requests.ts(281,15): res = get(url, options)
    s.tmp_0 = net_get__P1244_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 302; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    s.res___10657 = (r0);
// net/requests.ts(282,15): rv = res.status_code == 200 ? res.json : undefined
    r0 = s.res___10657.fields["status_code"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 200);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
    s.tmp_2 = net_Response_json__P1233_mk(s);
    s.tmp_2.arg0 = s.res___10657;
    s.callLocIdx = 303; s.pc = 14; return s.tmp_2;
  case 14:
    r0 = s.retval;
    { step = 8; continue; }
  case 7:
    r0 = undefined;
  case 8:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.rv___10662 = (s.tmp_3);
// net/requests.ts(283,9): res.close()
    s.tmp_0 = net_Response_close__P1230_mk(s);
    s.tmp_0.arg0 = s.res___10657;
    s.callLocIdx = 304; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
// net/requests.ts(284,9): return rv
    r0 = s.rv___10662;
    return leave(s, r0)
  default: oops()
} } }
net_getJSON__P1246.info = {"start":7990,"length":385,"line":276,"column":4,"endLine":284,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"getJSON","argumentNames":["url","options"]}

function net_getJSON__P1246_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_getJSON__P1246, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  res___10657: undefined,
  rv___10662: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Response_json__P1233(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1223_VT)) failedCast(r0);
// net/requests.ts(75,13): return JSON.parse(this.text)
    s.tmp_0 = JSON_parse__P386_mk(s);
    s.tmp_1 = net_Response_text__P1232_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 242; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 243; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Response_json__P1233.info = {"start":2050,"length":63,"line":73,"column":8,"endLine":75,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"json","argumentNames":["this"]}
net_Response_json__P1233.isGetter = true;

function net_Response_json__P1233_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_json__P1233, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_Response_text__P1232(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.b___10677 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1223_VT)) failedCast(r0);
// net/requests.ts(70,19): b = this.content
    s.tmp_0 = net_Response_content__P1231_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 241; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.b___10677 = (r0);
// net/requests.ts(71,13): return b ? b.toString() : undefined;
    r0 = pxsim_numops_toBoolDecr(s.b___10677);
    if (!r0) { step = 1; continue; }
    r0 = pxsim.BufferMethods.toString(s.b___10677);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    r0 = s.tmp_0;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Response_text__P1232.info = {"start":1933,"length":107,"line":68,"column":8,"endLine":71,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"text","argumentNames":["this"]}
net_Response_text__P1232.isGetter = true;

function net_Response_text__P1232_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_text__P1232, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  b___10677: undefined,
  arg0: undefined,
} }





function net_Response_content__P1231(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.content_length___10693 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1223_VT)) failedCast(r0);
// net/requests.ts(55,1): if (this._cached === null && this.socket) {...
    r0 = s.arg0.fields["_cached"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["socket"];
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
// net/requests.ts(56,23): content_length = parseInt(this.headers["content-length"]) || 0
    s.tmp_4 = parseInt__P97_mk(s);
    r0 = s.arg0.fields["headers"];
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_5, "content-length");
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = undefined;
    s.callLocIdx = 238; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_3;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    s.content_length___10693 = (s.tmp_6);
// net/requests.ts(57,17): this._cached = this.socket.read(content_length)
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_read_2_mk(s);
    r0 = s.arg0.fields["socket"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.content_length___10693;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "read"), 2);
      s.callLocIdx = 239; s.pc = 8; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["read"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["read"], 2); s.callLocIdx = 239; s.pc = 8; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 239; s.pc = 8; return s.tmp_2;; }
     else { s.callLocIdx = 239; s.pc = 8; return s.tmp_2; }
    }
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_cached"] = (s.tmp_1);
// net/requests.ts(58,17): this.socket.close()
    s.tmp_0 = if_close_1_mk(s);
    r0 = s.arg0.fields["socket"];
    s.tmp_0.arg0 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "close"), 1);
      s.callLocIdx = 240; s.pc = 9; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["close"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["close"], 1); s.callLocIdx = 240; s.pc = 9; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 240; s.pc = 9; return s.tmp_0;; }
     else { s.callLocIdx = 240; s.pc = 9; return s.tmp_0; }
    }
  case 9:
    r0 = s.retval;
// net/requests.ts(59,17): this.socket = null
    r0 = (s.arg0).fields["socket"] = (null);
  case 5:
  case 6:
// net/requests.ts(63,1): return this._cached
    r0 = s.arg0.fields["_cached"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Response_content__P1231.info = {"start":1348,"length":462,"line":52,"column":8,"endLine":63,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"content","argumentNames":["this"]}
net_Response_content__P1231.isGetter = true;

function net_Response_content__P1231_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_content__P1231, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  content_length___10693: undefined,
  arg0: undefined,
} }





function net_get__P1244(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// net/requests.ts(259,9): return request("GET", url, options)
    s.tmp_0 = net_request__P1242_mk(s);
    s.tmp_0.arg0 = "GET";
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 297; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_get__P1244.info = {"start":7417,"length":110,"line":257,"column":4,"endLine":259,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"get","argumentNames":["url","options"]}

function net_get__P1244_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_get__P1244, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Response_close__P1230(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1223_VT)) failedCast(r0);
// net/requests.ts(43,13): if (this.socket) {...
    r0 = s.arg0.fields["socket"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/requests.ts(44,17): this.socket.close()
    s.tmp_1 = if_close_1_mk(s);
    r0 = s.arg0.fields["socket"];
    s.tmp_1.arg0 = r0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "close"), 1);
      s.callLocIdx = 237; s.pc = 3; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["close"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["close"], 1); s.callLocIdx = 237; s.pc = 3; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 237; s.pc = 3; return s.tmp_1;; }
     else { s.callLocIdx = 237; s.pc = 3; return s.tmp_1; }
    }
  case 3:
    r0 = s.retval;
// net/requests.ts(45,17): this.socket = null
    r0 = (s.arg0).fields["socket"] = (null);
  case 1:
  case 2:
// net/requests.ts(47,13): this._cached = null
    r0 = (s.arg0).fields["_cached"] = (null);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Response_close__P1230.info = {"start":1077,"length":174,"line":41,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"close","argumentNames":["this"]}

function net_Response_close__P1230_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_close__P1230, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_request__P1242(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___10748 = undefined;
    s.e___10762 = undefined;
    s.r___10763 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// net/requests.ts(121,9): net.log(`${method} ${url}`)
    s.tmp_0 = net_log__P1169_mk(s);
    r0 = pxsim_String_.mkEmpty();
    s.tmp_3 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, " ");
    s.tmp_1 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_5);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 249; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
// net/requests.ts(123,9): if (!net.instance().controller) {...
    s.tmp_3 = net_Net_controller__P1207_mk(s);
    s.tmp_4 = net_instance__P1211_mk(s);
    s.callLocIdx = 250; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 251; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/requests.ts(125,19): r = new net.Response(null)
    r0 = pxsim_pxtcore_mkClassInstance(net_Response__C1223_VT);
    s.tmp_5 = r0;
    s.tmp_6 = net_Response_constructor__P1229_mk(s);
    s.tmp_6.arg0 = s.tmp_5;
    s.tmp_6.arg1 = null;
    s.callLocIdx = 252; s.pc = 11; return s.tmp_6;
  case 11:
    r0 = s.retval;
    s.r___10748 = (s.tmp_5);
// net/requests.ts(126,13): r.status_code = 418
    r0 = (s.r___10748).fields["status_code"] = (418);
// net/requests.ts(127,1): r.reason = "net controller not configured"
    r0 = (s.r___10748).fields["reason"] = ("net controller not configured");
// net/requests.ts(128,13): return r;
    r0 = s.r___10748;
    { step = 5; continue; }
  case 1:
  case 2:
// net/requests.ts(131,9): try {...
    r0 = pxsim_pxtcore.beginTry(3);
// net/requests.ts(132,13): return internalRequest(method, url, options);
    r0 = pxsim_pxtcore.endTry();
    s.tmp_0 = net_internalRequest__P2264_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.callLocIdx = 253; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
    { step = 5; continue; }
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___10762 = (r0);
// net/requests.ts(134,19): r = new net.Response(null)
    r0 = pxsim_pxtcore_mkClassInstance(net_Response__C1223_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_Response_constructor__P1229_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = null;
    s.callLocIdx = 254; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.r___10763 = (s.tmp_0);
// net/requests.ts(135,13): r.status_code = 418
    r0 = (s.r___10763).fields["status_code"] = (418);
// net/requests.ts(136,1): r.reason = "" + e
    s.tmp_0 = r0 = s.r___10763;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2 = r0;
    if ((s.e___10762) && (s.e___10762).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.e___10762);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.e___10762) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["reason"] = (s.tmp_1);
// net/requests.ts(137,13): return r;
    r0 = s.r___10763;
    { step = 5; continue; }
  case 4:
    r0 = undefined;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
net_request__P1242.info = {"start":3455,"length":633,"line":119,"column":4,"endLine":138,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"request","argumentNames":["method","url","options"]}

function net_request__P1242_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_request__P1242, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  r___10748: undefined,
  e___10762: undefined,
  r___10763: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_internalRequest__P2264(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp___10788 = undefined;
    s.proto___10792 = undefined;
    s.host___10794 = undefined;
    s.path___10796 = undefined;
    s.port___10800 = undefined;
    s.tmp___10819 = undefined;
    s.sock___10831 = undefined;
    s.resp___10844 = undefined;
    s.k___10886 = undefined;
    s.unnamed118___U9 = undefined;
    s.unnamed119___U10 = undefined;
    s.dataBuf___10922 = undefined;
    s.line___10942 = undefined;
    s.line2___10945 = undefined;
    s.status___10948 = undefined;
    s.reason___10952 = undefined;
    s.tmp___10967 = undefined;
    s.title___10971 = undefined;
    s.content___10973 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// net/requests.ts(142,9): if (!options) options = {};
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/requests.ts(142,23): options = {}
    r0 = pxsim_pxtrt.mkMap();
    s.arg2 = (r0);
  case 1:
  case 2:
// net/requests.ts(143,9): if (!options.headers) {...
    s.tmp_3 = if_headers_1_mk(s);
    s.tmp_3.arg0 = s.arg2;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "headers");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["headers"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["headers"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 255; s.pc = 43; return s.tmp_3; }
    }
  case 43:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// net/requests.ts(144,13): options.headers = {}
    s.tmp_4 = if_headers_2_mk(s);
    s.tmp_4.arg0 = s.arg2;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_4.arg1 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_4.arg0, "headers", s.tmp_4.arg1);
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["set/headers"];
      if (s.tmp_4.fn === null) { s.tmp_4.arg0.fields["headers"] = s.tmp_4.arg1; }
      else if (s.tmp_4.fn === undefined) { failedCast(s.tmp_4.arg0) } 
     else { s.callLocIdx = 256; s.pc = 44; return s.tmp_4; }
    }
  case 44:
    r0 = s.retval;
  case 3:
  case 4:
// net/requests.ts(147,15): tmp = pysplit(url, "/", 3)
    s.tmp_0 = net_pysplit__P2263_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = "/";
    s.tmp_0.arg2 = 3;
    s.callLocIdx = 257; s.pc = 45; return s.tmp_0;
  case 45:
    r0 = s.retval;
    s.tmp___10788 = (r0);
// net/requests.ts(148,13): proto = tmp[0]
    r0 = pxsim_Array__getAt(s.tmp___10788, 0);
    s.proto___10792 = (r0);
// net/requests.ts(149,13): host = tmp[2]
    r0 = pxsim_Array__getAt(s.tmp___10788, 2);
    s.host___10794 = (r0);
// net/requests.ts(150,13): path = tmp[3] || ""
    r0 = pxsim_Array__getAt(s.tmp___10788, 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = pxsim_String_.mkEmpty();
  case 6:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.path___10796 = (s.tmp_1);
// net/requests.ts(155,13): port = 0
    s.port___10800 = (0);
// net/requests.ts(156,9): if (proto == "http:") {...
    r0 = (s.proto___10792 == "http:");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// net/requests.ts(157,13): port = 80
    s.port___10800 = (80);
    { step = 10; continue; }
  case 7:
// net/requests.ts(158,16): if (proto == "https:") {...
    r0 = (s.proto___10792 == "https:");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// net/requests.ts(159,13): port = 443
    s.port___10800 = (443);
    { step = 9; continue; }
  case 8:
// net/requests.ts(161,13): control.fail("Unsupported protocol: " + proto)
    s.tmp_0 = control_fail__P331_mk(s);
    if ((s.proto___10792) && (s.proto___10792).vtable) {
    setupResume(s, 47);
    pxsim_String__stringConv(s.proto___10792);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.proto___10792) + ""; }
  case 47:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("Unsupported protocol: ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 258; s.pc = 46; return s.tmp_0;
  case 46:
    r0 = s.retval;
  case 9:
  case 10:
// net/requests.ts(164,9): if (host.indexOf(":") >= 0) {...
    r0 = pxsim_String_.indexOf(s.host___10794, ":", undefined);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// net/requests.ts(165,19): tmp = host.split(":")
    s.tmp_2 = helpers_stringSplit__P122_mk(s);
    s.tmp_2.arg0 = s.host___10794;
    s.tmp_2.arg1 = ":";
    s.tmp_2.arg2 = undefined;
    s.callLocIdx = 259; s.pc = 48; return s.tmp_2;
  case 48:
    r0 = s.retval;
    s.tmp___10819 = (r0);
// net/requests.ts(166,13): host = tmp[0]
    r0 = pxsim_Array__getAt(s.tmp___10819, 0);
    s.host___10794 = (r0);
// net/requests.ts(167,13): port = parseInt(tmp[1])
    s.tmp_0 = parseInt__P97_mk(s);
    r0 = pxsim_Array__getAt(s.tmp___10819, 1);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 260; s.pc = 49; return s.tmp_0;
  case 49:
    r0 = s.retval;
    s.port___10800 = (r0);
  case 11:
  case 12:
// net/requests.ts(171,9): if (proto == "https:") {...
    r0 = (s.proto___10792 == "https:");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// net/requests.ts(173,1): sock = net.instance().createSocket(host, port, true)
    s.tmp_1 = net_Net_createSocket__P1209_mk(s);
    s.tmp_2 = net_instance__P1211_mk(s);
    s.callLocIdx = 261; s.pc = 51; return s.tmp_2;
  case 51:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.host___10794;
    s.tmp_1.arg2 = s.port___10800;
    s.tmp_1.arg3 = true;
    s.callLocIdx = 262; s.pc = 50; return s.tmp_1;
  case 50:
    r0 = s.retval;
    s.sock___10831 = (r0);
    { step = 14; continue; }
  case 13:
// net/requests.ts(175,13): sock = net.instance().createSocket(host, port, false)
    s.tmp_0 = net_Net_createSocket__P1209_mk(s);
    s.tmp_1 = net_instance__P1211_mk(s);
    s.callLocIdx = 263; s.pc = 53; return s.tmp_1;
  case 53:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.host___10794;
    s.tmp_0.arg2 = s.port___10800;
    s.tmp_0.arg3 = false;
    s.callLocIdx = 264; s.pc = 52; return s.tmp_0;
  case 52:
    r0 = s.retval;
    s.sock___10831 = (r0);
  case 14:
// net/requests.ts(178,13): resp = new Response(sock)
    r0 = pxsim_pxtcore_mkClassInstance(net_Response__C1223_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_Response_constructor__P1229_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.sock___10831;
    s.callLocIdx = 265; s.pc = 54; return s.tmp_1;
  case 54:
    r0 = s.retval;
    s.resp___10844 = (s.tmp_0);
// net/requests.ts(180,1): sock.setTimeout(options.timeout)
    s.tmp_0 = if_setTimeout_2_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    s.tmp_1 = if_timeout_1_mk(s);
    s.tmp_1.arg0 = s.arg2;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "timeout");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["timeout"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["timeout"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 266; s.pc = 56; return s.tmp_1; }
    }
  case 56:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "setTimeout"), 2);
      s.callLocIdx = 267; s.pc = 55; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["setTimeout"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["setTimeout"], 2); s.callLocIdx = 267; s.pc = 55; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 267; s.pc = 55; return s.tmp_0;; }
     else { s.callLocIdx = 267; s.pc = 55; return s.tmp_0; }
    }
  case 55:
    r0 = s.retval;
// net/requests.ts(182,9): sock.connect()
    s.tmp_0 = if_connect_1_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "connect"), 1);
      s.callLocIdx = 268; s.pc = 57; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["connect"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["connect"], 1); s.callLocIdx = 268; s.pc = 57; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 268; s.pc = 57; return s.tmp_0;; }
     else { s.callLocIdx = 268; s.pc = 57; return s.tmp_0; }
    }
  case 57:
    r0 = s.retval;
// net/requests.ts(183,9): sock.send(`${method} /${path} HTTP/1.0\r\n`)
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 59);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 59:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " /");
    s.tmp_2 = r0;
    if ((s.path___10796) && (s.path___10796).vtable) {
    setupResume(s, 60);
    pxsim_String__stringConv(s.path___10796);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.path___10796) + ""; }
  case 60:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_6);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " HTTP/1.0\r\n");
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 269; s.pc = 58; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 269; s.pc = 58; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 269; s.pc = 58; return s.tmp_0;; }
     else { s.callLocIdx = 269; s.pc = 58; return s.tmp_0; }
    }
  case 58:
    r0 = s.retval;
// net/requests.ts(185,9): if (!options.headers["Host"])...
    s.tmp_4 = if_headers_1_mk(s);
    s.tmp_4.arg0 = s.arg2;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "headers");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["headers"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["headers"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 270; s.pc = 61; return s.tmp_4; }
    }
  case 61:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_3, "Host");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
// net/requests.ts(186,13): sock.send(`Host: ${host}\r\n`)
    s.tmp_5 = if_send_2_mk(s);
    s.tmp_5.arg0 = s.sock___10831;
    if ((s.host___10794) && (s.host___10794).vtable) {
    setupResume(s, 63);
    pxsim_String__stringConv(s.host___10794);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.host___10794) + ""; }
  case 63:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat("Host: ", s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, "\r\n");
    s.tmp_5.arg1 = r0;
    if (!s.tmp_5.arg0.vtable.iface) {
      setupLambda(s.tmp_5, pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "send"), 2);
      s.callLocIdx = 271; s.pc = 62; return s.tmp_5;
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["send"];
      if (s.tmp_5.fn == null) { setupLambda(s.tmp_5, s.tmp_5.arg0.fields["send"], 2); s.callLocIdx = 271; s.pc = 62; return s.tmp_5; }
      else if (s.tmp_5.fn.isGetter) { s.tmp_5.stage2Call = true; s.callLocIdx = 271; s.pc = 62; return s.tmp_5;; }
     else { s.callLocIdx = 271; s.pc = 62; return s.tmp_5; }
    }
  case 62:
    r0 = s.retval;
  case 15:
  case 16:
// net/requests.ts(188,9): if (!options.headers["User-Agent"])...
    s.tmp_4 = if_headers_1_mk(s);
    s.tmp_4.arg0 = s.arg2;
    if (!s.tmp_4.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "headers");
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["headers"];
      if (s.tmp_4.fn == null) { s.retval = s.tmp_4.arg0.fields["headers"]; }
      else if (!s.tmp_4.fn.isGetter) { s.retval = bind(s.tmp_4); }
     else { s.callLocIdx = 272; s.pc = 64; return s.tmp_4; }
    }
  case 64:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_3, "User-Agent");
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
// net/requests.ts(189,13): sock.send("User-Agent: MakeCode ESP32\r\n")
    s.tmp_5 = if_send_2_mk(s);
    s.tmp_5.arg0 = s.sock___10831;
    s.tmp_5.arg1 = "User-Agent: MakeCode ESP32\r\n";
    if (!s.tmp_5.arg0.vtable.iface) {
      setupLambda(s.tmp_5, pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "send"), 2);
      s.callLocIdx = 273; s.pc = 65; return s.tmp_5;
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["send"];
      if (s.tmp_5.fn == null) { setupLambda(s.tmp_5, s.tmp_5.arg0.fields["send"], 2); s.callLocIdx = 273; s.pc = 65; return s.tmp_5; }
      else if (s.tmp_5.fn.isGetter) { s.tmp_5.stage2Call = true; s.callLocIdx = 273; s.pc = 65; return s.tmp_5;; }
     else { s.callLocIdx = 273; s.pc = 65; return s.tmp_5; }
    }
  case 65:
    r0 = s.retval;
  case 17:
  case 18:
// net/requests.ts(192,18): k
    s.k___10886 = (undefined);
    s.tmp_1 = if_headers_1_mk(s);
    s.tmp_1.arg0 = s.arg2;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "headers");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["headers"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["headers"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 274; s.pc = 66; return s.tmp_1; }
    }
  case 66:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.keysOf(s.tmp_0);
    s.unnamed118___U9 = (r0);
    s.unnamed119___U10 = (0);
// net/requests.ts(192,1): for (let k of Object.keys(options.headers))...
  case 19:
    s.tmp_0 = r0 = s.unnamed119___U10;
    r0 = pxsim_Array__length(s.unnamed118___U9);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 20; continue; }
    r0 = pxsim_Array__getAt(s.unnamed118___U9, s.unnamed119___U10);
    s.k___10886 = (r0);
// net/requests.ts(193,13): sock.send(`${k}: ${options.headers[k]}\r\n`)
    s.tmp_2 = if_send_2_mk(s);
    s.tmp_2.arg0 = s.sock___10831;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_6 = r0;
    if ((s.k___10886) && (s.k___10886).vtable) {
    setupResume(s, 68);
    pxsim_String__stringConv(s.k___10886);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.k___10886) + ""; }
  case 68:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_7);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, ": ");
    s.tmp_4 = r0;
    s.tmp_11 = if_headers_1_mk(s);
    s.tmp_11.arg0 = s.arg2;
    if (!s.tmp_11.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_11.arg0, "headers");
    } else {
      s.tmp_11.fn = s.tmp_11.arg0.vtable.iface["headers"];
      if (s.tmp_11.fn == null) { s.retval = s.tmp_11.arg0.fields["headers"]; }
      else if (!s.tmp_11.fn.isGetter) { s.retval = bind(s.tmp_11); }
     else { s.callLocIdx = 275; s.pc = 69; return s.tmp_11; }
    }
  case 69:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_10, s.k___10886);
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 70);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 70:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_8);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "\r\n");
    s.tmp_2.arg1 = r0;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "send"), 2);
      s.callLocIdx = 276; s.pc = 67; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["send"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["send"], 2); s.callLocIdx = 276; s.pc = 67; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 276; s.pc = 67; return s.tmp_2;; }
     else { s.callLocIdx = 276; s.pc = 67; return s.tmp_2; }
    }
  case 67:
    r0 = s.retval;
    r0 = (s.unnamed119___U10 + 1);
    s.unnamed119___U10 = (r0);
    { step = 19; continue; }
  case 20:
    s.unnamed118___U9 = (undefined);
// net/requests.ts(195,9): if (options.json != null) {...
    s.tmp_2 = if_json_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "json");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["json"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["json"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 277; s.pc = 71; return s.tmp_2; }
    }
  case 71:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 21; continue; }
// net/requests.ts(196,13): control.assert(options.data == null, 100)
    s.tmp_3 = control_assert__P330_mk(s);
    s.tmp_5 = if_data_1_mk(s);
    s.tmp_5.arg0 = s.arg2;
    if (!s.tmp_5.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_5.arg0, "data");
    } else {
      s.tmp_5.fn = s.tmp_5.arg0.vtable.iface["data"];
      if (s.tmp_5.fn == null) { s.retval = s.tmp_5.arg0.fields["data"]; }
      else if (!s.tmp_5.fn.isGetter) { s.retval = bind(s.tmp_5); }
     else { s.callLocIdx = 278; s.pc = 73; return s.tmp_5; }
    }
  case 73:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == null);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = 100;
    s.callLocIdx = 279; s.pc = 72; return s.tmp_3;
  case 72:
    r0 = s.retval;
// net/requests.ts(197,13): options.data = JSON.stringify(options.json)
    s.tmp_0 = if_data_2_mk(s);
    s.tmp_0.arg0 = s.arg2;
    s.tmp_1 = JSON_stringify__P385_mk(s);
    s.tmp_2 = if_json_1_mk(s);
    s.tmp_2.arg0 = s.arg2;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "json");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["json"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["json"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 280; s.pc = 76; return s.tmp_2; }
    }
  case 76:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = null;
    s.tmp_1.arg2 = 0;
    s.callLocIdx = 281; s.pc = 75; return s.tmp_1;
  case 75:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_0.arg0, "data", s.tmp_0.arg1);
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["set/data"];
      if (s.tmp_0.fn === null) { s.tmp_0.arg0.fields["data"] = s.tmp_0.arg1; }
      else if (s.tmp_0.fn === undefined) { failedCast(s.tmp_0.arg0) } 
     else { s.callLocIdx = 282; s.pc = 74; return s.tmp_0; }
    }
  case 74:
    r0 = s.retval;
// net/requests.ts(198,13): sock.send("Content-Type: application/json\r\n")
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    s.tmp_0.arg1 = "Content-Type: application/json\r\n";
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 283; s.pc = 77; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 283; s.pc = 77; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 283; s.pc = 77; return s.tmp_0;; }
     else { s.callLocIdx = 283; s.pc = 77; return s.tmp_0; }
    }
  case 77:
    r0 = s.retval;
  case 21:
  case 22:
// net/requests.ts(201,13): dataBuf = dataAsBuffer(options.data)
    s.tmp_0 = net_dataAsBuffer__P1241_mk(s);
    s.tmp_1 = if_data_1_mk(s);
    s.tmp_1.arg0 = s.arg2;
    if (!s.tmp_1.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "data");
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["data"];
      if (s.tmp_1.fn == null) { s.retval = s.tmp_1.arg0.fields["data"]; }
      else if (!s.tmp_1.fn.isGetter) { s.retval = bind(s.tmp_1); }
     else { s.callLocIdx = 284; s.pc = 79; return s.tmp_1; }
    }
  case 79:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 285; s.pc = 78; return s.tmp_0;
  case 78:
    r0 = s.retval;
    s.dataBuf___10922 = (r0);
// net/requests.ts(203,9): if (dataBuf)...
    r0 = pxsim_numops_toBoolDecr(s.dataBuf___10922);
    if (!r0) { step = 23; continue; }
// net/requests.ts(204,13): sock.send(`Content-Length: ${dataBuf.length}\r\n`)
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    r0 = pxsim.BufferMethods.length(s.dataBuf___10922);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 81);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 81:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("Content-Length: ", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "\r\n");
    s.tmp_0.arg1 = r0;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 286; s.pc = 80; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 286; s.pc = 80; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 286; s.pc = 80; return s.tmp_0;; }
     else { s.callLocIdx = 286; s.pc = 80; return s.tmp_0; }
    }
  case 80:
    r0 = s.retval;
  case 23:
  case 24:
// net/requests.ts(206,9): sock.send("\r\n")
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    s.tmp_0.arg1 = "\r\n";
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 287; s.pc = 82; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 287; s.pc = 82; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 287; s.pc = 82; return s.tmp_0;; }
     else { s.callLocIdx = 287; s.pc = 82; return s.tmp_0; }
    }
  case 82:
    r0 = s.retval;
// net/requests.ts(207,9): if (dataBuf)...
    r0 = pxsim_numops_toBoolDecr(s.dataBuf___10922);
    if (!r0) { step = 25; continue; }
// net/requests.ts(208,13): sock.send(dataBuf)
    s.tmp_0 = if_send_2_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    s.tmp_0.arg1 = s.dataBuf___10922;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "send"), 2);
      s.callLocIdx = 288; s.pc = 83; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["send"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["send"], 2); s.callLocIdx = 288; s.pc = 83; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 288; s.pc = 83; return s.tmp_0;; }
     else { s.callLocIdx = 288; s.pc = 83; return s.tmp_0; }
    }
  case 83:
    r0 = s.retval;
  case 25:
  case 26:
// net/requests.ts(210,13): line = sock.readLine()
    s.tmp_0 = if_readLine_1_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "readLine"), 1);
      s.callLocIdx = 289; s.pc = 84; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["readLine"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["readLine"], 1); s.callLocIdx = 289; s.pc = 84; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 289; s.pc = 84; return s.tmp_0;; }
     else { s.callLocIdx = 289; s.pc = 84; return s.tmp_0; }
    }
  case 84:
    r0 = s.retval;
    s.line___10942 = (r0);
// net/requests.ts(212,13): line2 = pysplit(line, " ", 2)
    s.tmp_0 = net_pysplit__P2263_mk(s);
    s.tmp_0.arg0 = s.line___10942;
    s.tmp_0.arg1 = " ";
    s.tmp_0.arg2 = 2;
    s.callLocIdx = 290; s.pc = 85; return s.tmp_0;
  case 85:
    r0 = s.retval;
    s.line2___10945 = (r0);
// net/requests.ts(213,13): status = parseInt(line2[1])
    s.tmp_0 = parseInt__P97_mk(s);
    r0 = pxsim_Array__getAt(s.line2___10945, 1);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = undefined;
    s.callLocIdx = 291; s.pc = 86; return s.tmp_0;
  case 86:
    r0 = s.retval;
    s.status___10948 = (r0);
// net/requests.ts(214,13): reason = ""
    r0 = pxsim_String_.mkEmpty();
    s.reason___10952 = (r0);
// net/requests.ts(215,9): if (line2.length > 2) {...
    r0 = pxsim_Array__length(s.line2___10945);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 27; continue; }
// net/requests.ts(216,13): reason = line2[2]
    r0 = pxsim_Array__getAt(s.line2___10945, 2);
    s.reason___10952 = (r0);
  case 27:
  case 28:
// net/requests.ts(219,9): while (true) {...
  case 29:
// net/requests.ts(219,16): true
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 38; continue; }
// net/requests.ts(220,13): line = sock.readLine()
    s.tmp_0 = if_readLine_1_mk(s);
    s.tmp_0.arg0 = s.sock___10831;
    if (!s.tmp_0.arg0.vtable.iface) {
      setupLambda(s.tmp_0, pxsim_pxtrt.mapGetByString(s.tmp_0.arg0, "readLine"), 1);
      s.callLocIdx = 292; s.pc = 87; return s.tmp_0;
    } else {
      s.tmp_0.fn = s.tmp_0.arg0.vtable.iface["readLine"];
      if (s.tmp_0.fn == null) { setupLambda(s.tmp_0, s.tmp_0.arg0.fields["readLine"], 1); s.callLocIdx = 292; s.pc = 87; return s.tmp_0; }
      else if (s.tmp_0.fn.isGetter) { s.tmp_0.stage2Call = true; s.callLocIdx = 292; s.pc = 87; return s.tmp_0;; }
     else { s.callLocIdx = 292; s.pc = 87; return s.tmp_0; }
    }
  case 87:
    r0 = s.retval;
    s.line___10942 = (r0);
// net/requests.ts(221,13): if (!line || line == "\r\n") {...
    r0 = pxsim_numops_toBoolDecr(s.line___10942);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 30; continue; }
    r0 = s.tmp_0;
    { step = 31; continue; }
  case 30:
    r0 = (s.line___10942 == "\r\n");
  case 31:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 32; continue; }
// net/requests.ts(222,17): break
    { step = 38; continue; }
  case 32:
  case 33:
// net/requests.ts(226,19): tmp = pysplit(line, ": ", 1)
    s.tmp_3 = net_pysplit__P2263_mk(s);
    s.tmp_3.arg0 = s.line___10942;
    s.tmp_3.arg1 = ": ";
    s.tmp_3.arg2 = 1;
    s.callLocIdx = 293; s.pc = 88; return s.tmp_3;
  case 88:
    r0 = s.retval;
    s.tmp___10967 = (r0);
// net/requests.ts(227,17): title = tmp[0]
    r0 = pxsim_Array__getAt(s.tmp___10967, 0);
    s.title___10971 = (r0);
// net/requests.ts(228,17): content = tmp[1]
    r0 = pxsim_Array__getAt(s.tmp___10967, 1);
    s.content___10973 = (r0);
// net/requests.ts(229,13): if (title && content) {...
    s.tmp_0 = r0 = s.title___10971;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 34; continue; }
    r0 = s.tmp_0;
    { step = 35; continue; }
  case 34:
    r0 = s.content___10973;
  case 35:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 36; continue; }
// net/requests.ts(230,17): resp.headers[title.toLowerCase()] = content.toLowerCase()
    r0 = s.resp___10844.fields["headers"];
    s.tmp_2 = r0;
    s.tmp_4 = helpers_stringToLowerCase__P121_mk(s);
    s.tmp_4.arg0 = s.title___10971;
    s.callLocIdx = 294; s.pc = 89; return s.tmp_4;
  case 89:
    r0 = s.retval;
    s.tmp_3 = r0;
    s.tmp_6 = helpers_stringToLowerCase__P121_mk(s);
    s.tmp_6.arg0 = s.content___10973;
    s.callLocIdx = 295; s.pc = 90; return s.tmp_6;
  case 90:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_2, s.tmp_3, s.tmp_5);
  case 36:
  case 37:
    { step = 29; continue; }
  case 38:
// net/requests.ts(234,9): /*...
    r0 = s.resp___10844.fields["headers"];
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.tmp_1, "transfer-encoding");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 39; continue; }
    r0 = s.tmp_0;
    { step = 40; continue; }
  case 39:
    r0 = pxsim_String_.mkEmpty();
  case 40:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_2, "chunked", undefined);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 >= 0);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 41; continue; }
// net/requests.ts(241,13): control.fail("not supported chunked encoding")
    s.tmp_5 = control_fail__P331_mk(s);
    s.tmp_5.arg0 = "not supported chunked encoding";
    s.callLocIdx = 296; s.pc = 91; return s.tmp_5;
  case 91:
    r0 = s.retval;
  case 41:
  case 42:
// net/requests.ts(243,9): resp.status_code = status
    r0 = (s.resp___10844).fields["status_code"] = (s.status___10948);
// net/requests.ts(244,9): resp.reason = reason
    r0 = (s.resp___10844).fields["reason"] = (s.reason___10952);
// net/requests.ts(245,9): return resp
    r0 = s.resp___10844;
    return leave(s, r0)
  default: oops()
} } }
net_internalRequest__P2264.info = {"start":4094,"length":3102,"line":140,"column":4,"endLine":245,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"internalRequest","argumentNames":["method","url","options"]}

function net_internalRequest__P2264_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_internalRequest__P2264, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp___10788: undefined,
  proto___10792: undefined,
  host___10794: undefined,
  path___10796: undefined,
  port___10800: undefined,
  tmp___10819: undefined,
  sock___10831: undefined,
  resp___10844: undefined,
  k___10886: undefined,
  unnamed118___U9: undefined,
  unnamed119___U10: undefined,
  dataBuf___10922: undefined,
  line___10942: undefined,
  line2___10945: undefined,
  status___10948: undefined,
  reason___10952: undefined,
  tmp___10967: undefined,
  title___10971: undefined,
  content___10973: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_dataAsBuffer__P1241(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// net/requests.ts(92,9): if (data == null)...
    r0 = (s.arg0 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/requests.ts(93,13): return null
    r0 = null;
    { step = 5; continue; }
  case 1:
  case 2:
// net/requests.ts(94,9): if (typeof data == "string")...
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == "string");
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// net/requests.ts(95,13): return control.createBufferFromUTF8(data)
    r0 = pxsim.control.createBufferFromUTF8(s.arg0);
    { step = 5; continue; }
  case 3:
  case 4:
// net/requests.ts(96,9): return data
    r0 = s.arg0;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
net_dataAsBuffer__P1241.info = {"start":2530,"length":228,"line":90,"column":4,"endLine":96,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"dataAsBuffer","argumentNames":["data"]}

function net_dataAsBuffer__P1241_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_dataAsBuffer__P1241, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function control_assert__P330(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/control.ts(73,9): if (!cond) {...
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/control.ts(74,13): fail("Assertion failed, code=" + code)
    s.tmp_2 = control_fail__P331_mk(s);
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("Assertion failed, code=", s.tmp_3);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 50; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_assert__P330.info = {"start":2193,"length":141,"line":71,"column":4,"endLine":75,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"assert","argumentNames":["cond","code"]}

function control_assert__P330_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_assert__P330, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_fail__P331(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/control.ts(79,9): console.log("Fatal failure: ")
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_0.arg0 = "Fatal failure: ";
    s.callLocIdx = 51; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// base/control.ts(80,9): console.log(message)
    s.tmp_0 = console_log__P378_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 52; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// base/control.ts(81,9): dmesg(message)
    r0 = pxsim.control.dmesg(s.arg0);
// base/control.ts(82,9): panic(108)
    r0 = pxsim_pxtrt.panic(108);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_fail__P331.info = {"start":2340,"length":155,"line":77,"column":4,"endLine":82,"endColumn":5,"fileName":"pxt_modules/base/control.ts","functionName":"fail","argumentNames":["message"]}

function control_fail__P331_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_fail__P331, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function net_pysplit__P2263(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.arr___11036 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// net/requests.ts(104,15): arr = str.split(sep)
    s.tmp_0 = helpers_stringSplit__P122_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 244; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    s.arr___11036 = (r0);
// net/requests.ts(105,9): if (arr.length >= limit) {...
    r0 = pxsim_Array__length(s.arr___11036);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/requests.ts(106,13): return arr.slice(0, limit).concat([arr.slice(limit).join(sep)])
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    s.tmp_4 = helpers_arrayJoin__P103_mk(s);
    s.tmp_5 = helpers_arraySlice__P115_mk(s);
    s.tmp_5.arg0 = s.arr___11036;
    s.tmp_5.arg1 = s.arg2;
    s.tmp_5.arg2 = undefined;
    s.callLocIdx = 246; s.pc = 6; return s.tmp_5;
  case 6:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.arg1;
    s.callLocIdx = 247; s.pc = 5; return s.tmp_4;
  case 5:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.tmp_3);
    s.tmp_6 = helpers_arrayConcat__P113_mk(s);
    s.tmp_7 = helpers_arraySlice__P115_mk(s);
    s.tmp_7.arg0 = s.arr___11036;
    s.tmp_7.arg1 = 0;
    s.tmp_7.arg2 = s.arg2;
    s.callLocIdx = 245; s.pc = 8; return s.tmp_7;
  case 8:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_6.arg1 = s.tmp_2;
    s.callLocIdx = 248; s.pc = 7; return s.tmp_6;
  case 7:
    r0 = s.retval;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
// net/requests.ts(108,13): return arr
    r0 = s.arr___11036;
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
net_pysplit__P2263.info = {"start":2836,"length":261,"line":102,"column":4,"endLine":109,"endColumn":5,"fileName":"pxt_modules/net/requests.ts","functionName":"pysplit","argumentNames":["str","sep","limit"]}

function net_pysplit__P2263_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_pysplit__P2263, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  arr___11036: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function helpers_arrayConcat__P113(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.out___11060 = undefined;
    s.value___11063 = undefined;
    s.unnamed102___U2 = undefined;
    s.unnamed103___U3 = undefined;
    s.value___11070 = undefined;
    s.unnamed104___U5 = undefined;
    s.unnamed105___U6 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(290,13): out: T[] = []
    r0 = pxsim_Array__mk();
    s.out___11060 = (r0);
// base/pxt-helpers.ts(291,18): value
    s.value___11063 = (undefined);
    s.unnamed102___U2 = (s.arg0);
    s.unnamed103___U3 = (0);
// base/pxt-helpers.ts(291,9): for (let value of arr) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed103___U3;
    r0 = pxsim_Array__length(s.unnamed102___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed102___U2, s.unnamed103___U3);
    s.value___11063 = (r0);
// base/pxt-helpers.ts(292,13): out.push(value)
    r0 = pxsim_Array__push(s.out___11060, s.value___11063);
    r0 = (s.unnamed103___U3 + 1);
    s.unnamed103___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed102___U2 = (undefined);
// base/pxt-helpers.ts(294,18): value
    s.value___11070 = (undefined);
    s.unnamed104___U5 = (s.arg1);
    s.unnamed105___U6 = (0);
// base/pxt-helpers.ts(294,9): for (let value of otherArr) {...
  case 3:
    s.tmp_0 = r0 = s.unnamed105___U6;
    r0 = pxsim_Array__length(s.unnamed104___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed104___U5, s.unnamed105___U6);
    s.value___11070 = (r0);
// base/pxt-helpers.ts(295,13): out.push(value)
    r0 = pxsim_Array__push(s.out___11060, s.value___11070);
    r0 = (s.unnamed105___U6 + 1);
    s.unnamed105___U6 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed104___U5 = (undefined);
// base/pxt-helpers.ts(297,9): return out;
    r0 = s.out___11060;
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayConcat__P113.info = {"start":8639,"length":264,"line":288,"column":4,"endLine":297,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayConcat","argumentNames":["arr","otherArr"]}

function helpers_arrayConcat__P113_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayConcat__P113, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  out___11060: undefined,
  value___11063: undefined,
  unnamed102___U2: undefined,
  unnamed103___U3: undefined,
  value___11070: undefined,
  unnamed104___U5: undefined,
  unnamed105___U6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Response_constructor__P1229(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1223_VT)) failedCast(r0);
    r0 = (s.arg0).fields["socket"] = (s.arg1);
// net/requests.ts(32,13): this._cached = null
    r0 = (s.arg0).fields["_cached"] = (null);
// net/requests.ts(33,13): this.status_code = null
    r0 = (s.arg0).fields["status_code"] = (null);
// net/requests.ts(34,13): this.reason = null
    r0 = (s.arg0).fields["reason"] = (null);
// net/requests.ts(35,13): this._read_so_far = 0
    r0 = (s.arg0).fields["_read_so_far"] = (0);
// net/requests.ts(36,13): this.headers = {}
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["headers"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Response_constructor__P1229.info = {"start":776,"length":210,"line":30,"column":8,"endLine":36,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"inline","argumentNames":["this","socket"]}

function net_Response_constructor__P1229_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_constructor__P1229, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_log__P1169(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// net/net.ts(13,9): console.add(logPriority, "net:" + msg)
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = globals.logPriority___1168;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 2);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("net:", s.tmp_1);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 213; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_log__P1169.info = {"start":238,"length":88,"line":11,"column":4,"endLine":13,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"log","argumentNames":["msg"]}

function net_log__P1169_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_log__P1169, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function azureiot_disconnect__P1347(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.c___11099 = undefined;
// azureiot/azureiot.ts(153,15): c = mqttClient(true)
    s.tmp_0 = azureiot_mqttClient__P1343_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 517; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.c___11099 = (r0);
// azureiot/azureiot.ts(154,9): if (c) {...
    r0 = pxsim_numops_toBoolDecr(s.c___11099);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(155,13): try {...
    r0 = pxsim_pxtcore.beginTry(1);
// azureiot/azureiot.ts(156,17): c.disconnect()
    s.tmp_0 = mqtt_Client_disconnect__P1327_mk(s);
    s.tmp_0.arg0 = s.c___11099;
    s.callLocIdx = 518; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
  case 1:
  case 2:
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_disconnect__P1347.info = {"start":5031,"length":247,"line":151,"column":4,"endLine":161,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"disconnect","argumentNames":[]}

function azureiot_disconnect__P1347_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_disconnect__P1347, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  c___11099: undefined,
} }





function jacdac_twins_toHexNum__P2635(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___11110 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// twins.ts(206,9): if (n == 0) return "0"
    r0 = (s.arg0 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// twins.ts(206,21): return "0"
    r0 = "0";
    { step = 3; continue; }
  case 1:
  case 2:
// twins.ts(207,15): buf = control.createBuffer(4)
    r0 = pxsim.control.createBuffer(4);
    s.buf___11110 = (r0);
// twins.ts(208,9): buf.setNumber(NumberFormat.UInt32BE, 0, n)
    r0 = pxsim.BufferMethods.setNumber(s.buf___11110, 12, 0, s.arg0);
// twins.ts(209,9): return buf.toHex()
    r0 = pxsim.BufferMethods.toHex(s.buf___11110);
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_toHexNum__P2635.info = {"start":6790,"length":189,"line":204,"column":4,"endLine":209,"endColumn":5,"fileName":"twins.ts","functionName":"toHexNum","argumentNames":["n"]}

function jacdac_twins_toHexNum__P2635_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_toHexNum__P2635, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  buf___11110: undefined,
  arg0: undefined,
} }





function jacdac_Device_serviceClassAt__P1885(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1084,13): return serviceIndex == 0...
    r0 = (s.arg1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = 0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = (s.arg1 << 2);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 11, s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Device_serviceClassAt__P1885.info = {"start":35574,"length":253,"line":1082,"column":8,"endLine":1089,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceClassAt","argumentNames":["this","serviceIndex"]}

function jacdac_Device_serviceClassAt__P1885_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_serviceClassAt__P1885, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Device_serviceClassLength__P1884(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Device__C1870_VT)) failedCast(r0);
// jacdac/routing.ts(1080,13): return this.services.length >> 2
    r0 = s.arg0.fields["services"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 2);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Device_serviceClassLength__P1884.info = {"start":35483,"length":81,"line":1078,"column":8,"endLine":1080,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"serviceClassLength","argumentNames":["this"]}
jacdac_Device_serviceClassLength__P1884.isGetter = true;

function jacdac_Device_serviceClassLength__P1884_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Device_serviceClassLength__P1884, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_Net_controller__P1207(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Net__C1204_VT)) failedCast(r0);
// net/net.ts(103,13): if (this._controller === undefined) {...
    r0 = s.arg0.fields["_controller"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// net/net.ts(104,17): net.log(`init controller`)
    s.tmp_2 = net_log__P1169_mk(s);
    s.tmp_2.arg0 = "init controller";
    s.callLocIdx = 221; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
// net/net.ts(105,17): this._controller = this.factory()
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = if_factory_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      setupLambda(s.tmp_2, pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "factory"), 1);
      s.callLocIdx = 222; s.pc = 6; return s.tmp_2;
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["factory"];
      if (s.tmp_2.fn == null) { setupLambda(s.tmp_2, s.tmp_2.arg0.fields["factory"], 1); s.callLocIdx = 222; s.pc = 6; return s.tmp_2; }
      else if (s.tmp_2.fn.isGetter) { s.tmp_2.stage2Call = true; s.callLocIdx = 222; s.pc = 6; return s.tmp_2;; }
     else { s.callLocIdx = 222; s.pc = 6; return s.tmp_2; }
    }
  case 6:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_controller"] = (s.tmp_1);
// net/net.ts(106,17): if (!this._controller) {...
    r0 = s.arg0.fields["_controller"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/net.ts(107,21): net.log(`controller not found`)
    s.tmp_3 = net_log__P1169_mk(s);
    s.tmp_3.arg0 = "controller not found";
    s.callLocIdx = 223; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
// net/net.ts(108,21): this._controller = null
    r0 = (s.arg0).fields["_controller"] = (null);
  case 1:
  case 2:
  case 3:
  case 4:
// net/net.ts(111,13): return this._controller;
    r0 = s.arg0.fields["_controller"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Net_controller__P1207.info = {"start":3165,"length":395,"line":101,"column":8,"endLine":111,"endColumn":9,"fileName":"pxt_modules/net/net.ts","functionName":"controller","argumentNames":["this"]}
net_Net_controller__P1207.isGetter = true;

function net_Net_controller__P1207_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Net_controller__P1207, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function net_Controller_isConnected__P1126(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(72,38): return this._isConnected;
    r0 = s.arg0.fields["_isConnected"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Controller_isConnected__P1126.info = {"start":1998,"length":56,"line":71,"column":8,"endLine":71,"endColumn":64,"fileName":"pxt_modules/net/controller.ts","functionName":"isConnected","argumentNames":["this"]}
net_Controller_isConnected__P1126.isGetter = true;

function net_Controller_isConnected__P1126_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_isConnected__P1126, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function pauseUntil__P365(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/poll.ts(75,5): if (!condition || condition()) return;
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_2 = lambda_1_mk(s);
    s.tmp_2.argL = s.arg0;
    setupLambda(s.tmp_2, s.tmp_2.argL);
    s.callLocIdx = 65; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// base/poll.ts(75,36): return;
    { step = 7; continue; }
  case 3:
  case 4:
// base/poll.ts(76,1): if (!timeOut) timeOut = 0;
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
// base/poll.ts(76,19): timeOut = 0
    s.arg1 = (0);
  case 5:
  case 6:
// base/poll.ts(77,5): control.__queuePollEvent(timeOut, condition, undefined)
    s.tmp_0 = control___queuePollEvent__P364_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 66; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
pauseUntil__P365.info = {"start":2224,"length":227,"line":73,"column":0,"endLine":77,"endColumn":1,"fileName":"pxt_modules/base/poll.ts","functionName":"pauseUntil","argumentNames":["condition","timeOut"]}

function pauseUntil__P365_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pauseUntil__P365, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control___queuePollEvent__P364(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ev___11178 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/poll.ts(41,15): ev = new PollEvent(...
    r0 = pxsim_pxtcore_mkClassInstance(control_PollEvent__C2178_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_PollEvent_constructor__P2179_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = 1023;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1.arg2 = r0;
    r0 = pxsim.control.millis();
    s.tmp_1.arg3 = r0;
    s.tmp_1.arg4 = s.arg0;
    s.tmp_1.arg5 = s.arg1;
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1.arg6 = r0;
    s.callLocIdx = 63; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.ev___11178 = (s.tmp_0);
// base/poll.ts(51,1): if (!_pollEventQueue) {...
    r0 = pxsim_numops_toBoolDecr(globals._pollEventQueue___2181);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/poll.ts(52,13): _pollEventQueue = [ev]
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.ev___11178);
    globals._pollEventQueue___2181 = (s.tmp_2);
// base/poll.ts(53,13): control.runInParallel(pollEvents)
    r0 = pxsim.control.runInParallel(control_pollEvents__P2182);
    { step = 2; continue; }
  case 1:
// base/poll.ts(57,1): _pollEventQueue.push(ev)
    r0 = pxsim_Array__push(globals._pollEventQueue___2181, s.ev___11178);
  case 2:
// base/poll.ts(61,1): if (handler)...
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 3; continue; }
// base/poll.ts(62,13): control.onEvent(ev.eid, ev.vid, handler)
    s.tmp_0 = control_onEvent__P389_mk(s);
    r0 = s.ev___11178.fields["eid"];
    s.tmp_0.arg0 = r0;
    r0 = s.ev___11178.fields["vid"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = 16;
    s.callLocIdx = 64; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
// base/poll.ts(64,1): control.waitForEvent(ev.eid, ev.vid)
    r0 = s.ev___11178.fields["eid"];
    s.tmp_0 = r0;
    r0 = s.ev___11178.fields["vid"];
    s.tmp_1 = r0;
    setupResume(s, 7);
    pxsim.control.waitForEvent(s.tmp_0, s.tmp_1);
    checkResumeConsumed();
    return;
  case 7:
    r0 = s.retval;
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control___queuePollEvent__P364.info = {"start":1262,"length":758,"line":39,"column":4,"endLine":64,"endColumn":5,"fileName":"pxt_modules/base/poll.ts","functionName":"__queuePollEvent","argumentNames":["timeOut","condition","handler"]}

function control___queuePollEvent__P364_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control___queuePollEvent__P364, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  ev___11178: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function control_onEvent__P389(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ctx___11221 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
// base/eventcontext.ts(11,15): ctx = control.eventContext()
    s.tmp_0 = control_eventContext__P406_mk(s);
    s.callLocIdx = 116; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.ctx___11221 = (r0);
// base/eventcontext.ts(12,9): if (!ctx)...
    r0 = pxsim_numops_toBoolDecr(s.ctx___11221);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/eventcontext.ts(13,13): control.internalOnEvent(src, value, handler, flags)
    r0 = pxsim.control.internalOnEvent(s.arg0, s.arg1, s.arg2, s.arg3);
    { step = 2; continue; }
  case 1:
// base/eventcontext.ts(15,13): ctx.registerHandler(src, value, handler, flags)
    s.tmp_0 = control_EventContext_registerHandler__P403_mk(s);
    s.tmp_0.arg0 = s.ctx___11221;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = s.arg2;
    s.tmp_0.arg4 = s.arg3;
    s.callLocIdx = 117; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_onEvent__P389.info = {"start":336,"length":325,"line":9,"column":4,"endLine":15,"endColumn":5,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"onEvent","argumentNames":["src","value","handler","flags"]}

function control_onEvent__P389_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_onEvent__P389, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  ctx___11221: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function control_EventContext_registerHandler__P403(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.h___11244 = undefined;
    s.unnamed114___U1 = undefined;
    s.unnamed115___U2 = undefined;
    s.hn___11267 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventContext__C393_VT)) failedCast(r0);
// base/eventcontext.ts(172,24): h
    s.h___11244 = (undefined);
    r0 = s.arg0.fields["handlers"];
    s.unnamed114___U1 = (r0);
    s.unnamed115___U2 = (0);
// base/eventcontext.ts(172,1): for (const h of this.handlers) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed115___U2;
    r0 = pxsim_Array__length(s.unnamed114___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed114___U1, s.unnamed115___U2);
    s.h___11244 = (r0);
// base/eventcontext.ts(173,17): if (h.src == src && h.value == value) {...
    r0 = s.h___11244.fields["src"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_2;
    { step = 3; continue; }
  case 2:
    r0 = s.h___11244.fields["value"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.arg2);
  case 3:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 4; continue; }
// base/eventcontext.ts(174,21): h.flags = flags
    r0 = (s.h___11244).fields["flags"] = (s.arg4);
// base/eventcontext.ts(175,21): h.handler = handler
    r0 = (s.h___11244).fields["handler"] = (s.arg3);
// base/eventcontext.ts(176,21): return;
    { step = 7; continue; }
  case 4:
  case 5:
    r0 = (s.unnamed115___U2 + 1);
    s.unnamed115___U2 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed114___U1 = (undefined);
// base/eventcontext.ts(180,19): hn = new EventHandler(src, value, handler, flags)
    r0 = pxsim_pxtcore_mkClassInstance(control_EventHandler__C2199_VT);
    s.tmp_0 = r0;
    s.tmp_1 = control_EventHandler_constructor__P2202_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.tmp_1.arg3 = s.arg3;
    s.tmp_1.arg4 = s.arg4;
    s.callLocIdx = 119; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.hn___11267 = (s.tmp_0);
// base/eventcontext.ts(181,13): this.handlers.push(hn)
    r0 = s.arg0.fields["handlers"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.hn___11267);
// base/eventcontext.ts(182,13): hn.register()
    s.tmp_0 = control_EventHandler_register__P2200_mk(s);
    s.tmp_0.arg0 = s.hn___11267;
    s.callLocIdx = 120; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventContext_registerHandler__P403.info = {"start":5573,"length":525,"line":169,"column":8,"endLine":182,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"registerHandler","argumentNames":["this","src","value","handler","flags"]}

function control_EventContext_registerHandler__P403_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventContext_registerHandler__P403, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  h___11244: undefined,
  unnamed114___U1: undefined,
  unnamed115___U2: undefined,
  hn___11267: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function control_EventHandler_register__P2200(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventHandler__C2199_VT)) failedCast(r0);
// base/eventcontext.ts(32,13): control.internalOnEvent(this.src, this.value, () => {...
    r0 = pxsim_pxtcore_mkAction(1, control_EventHandler_register_inline__P11288);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = s.arg0.fields["src"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["value"];
    s.tmp_2 = r0;
    r0 = s.arg0.fields["flags"];
    s.tmp_3 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, s.tmp_2, s.tmp_0, s.tmp_3);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventHandler_register__P2200.info = {"start":961,"length":165,"line":30,"column":8,"endLine":34,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"register","argumentNames":["this"]}

function control_EventHandler_register__P2200_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventHandler_register__P2200, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function control_EventHandler_register_inline__P11288(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// base/eventcontext.ts(33,17): if (this.handler) this.handler();
    r0 = s.caps[0].fields["handler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/eventcontext.ts(33,35): this.handler()
    s.tmp_1 = if_handler_1_mk(s);
    s.tmp_1.arg0 = s.caps[0];
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "handler"), 1);
      s.callLocIdx = 118; s.pc = 3; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["handler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["handler"], 1); s.callLocIdx = 118; s.pc = 3; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 118; s.pc = 3; return s.tmp_1;; }
     else { s.callLocIdx = 118; s.pc = 3; return s.tmp_1; }
    }
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventHandler_register_inline__P11288.info = {"start":1032,"length":71,"line":31,"column":58,"endLine":33,"endColumn":13,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":[]}

function control_EventHandler_register_inline__P11288_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventHandler_register_inline__P11288, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function control_EventHandler_constructor__P2202(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventHandler__C2199_VT)) failedCast(r0);
    r0 = (s.arg0).fields["src"] = (s.arg1);
    r0 = (s.arg0).fields["value"] = (s.arg2);
    r0 = (s.arg0).fields["handler"] = (s.arg3);
    r0 = (s.arg0).fields["flags"] = (s.arg4);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventHandler_constructor__P2202.info = {"start":786,"length":165,"line":23,"column":8,"endLine":28,"endColumn":13,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":["this","src","value","handler","flags"]}

function control_EventHandler_constructor__P2202_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventHandler_constructor__P2202, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function control_eventContext__P406(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// base/eventcontext.ts(211,9): return eventContexts ? eventContexts[eventContexts.length - 1] : undefined;
    r0 = pxsim_numops_toBoolDecr(globals.eventContexts___2207);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = r0 = globals.eventContexts___2207;
    r0 = pxsim_Array__length(globals.eventContexts___2207);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 1);
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, s.tmp_1);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
control_eventContext__P406.info = {"start":6907,"length":136,"line":209,"column":4,"endLine":211,"endColumn":5,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"eventContext","argumentNames":[]}

function control_eventContext__P406_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_eventContext__P406, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function control_pollEvents__P2182(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___11305 = undefined;
    s.i___11308 = undefined;
    s.ev___11314 = undefined;
// base/poll.ts(22,9): while (_pollEventQueue.length > 0) {...
  case 1:
// base/poll.ts(22,16): _pollEventQueue.length > 0
    r0 = pxsim_Array__length(globals._pollEventQueue___2181);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
// base/poll.ts(23,19): now = control.millis()
    r0 = pxsim.control.millis();
    s.now___11305 = (r0);
// base/poll.ts(24,22): i = 0
    s.i___11308 = (0);
// base/poll.ts(24,13): for (let i = 0; i < _pollEventQueue.length; ++i) {...
  case 2:
// base/poll.ts(24,29): i < _pollEventQueue.length
    s.tmp_1 = r0 = s.i___11308;
    r0 = pxsim_Array__length(globals._pollEventQueue___2181);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// base/poll.ts(25,23): ev = _pollEventQueue[i]
    r0 = pxsim_Array__getAt(globals._pollEventQueue___2181, s.i___11308);
    s.ev___11314 = (r0);
// base/poll.ts(26,17): if (ev.condition() || (ev.timeOut > 0 && now - ev.start > ev.timeOut)) {
    s.tmp_1 = if_condition_1_mk(s);
    s.tmp_1.arg0 = s.ev___11314;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "condition"), 1);
      s.callLocIdx = 60; s.pc = 13; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["condition"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["condition"], 1); s.callLocIdx = 60; s.pc = 13; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 60; s.pc = 13; return s.tmp_1;; }
     else { s.callLocIdx = 60; s.pc = 13; return s.tmp_1; }
    }
  case 13:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 3:
    r0 = s.ev___11314.fields["timeOut"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 > 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 5; continue; }
  case 4:
    r0 = s.ev___11314.fields["start"];
    s.tmp_5 = r0;
    r0 = (s.now___11305 - s.tmp_5);
    s.tmp_4 = r0;
    r0 = s.ev___11314.fields["timeOut"];
    s.tmp_6 = r0;
    r0 = (s.tmp_4 > s.tmp_6);
  case 5:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 6:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 9; continue; }
// base/poll.ts(27,21): control.raiseEvent(ev.eid, ev.vid)
    r0 = s.ev___11314.fields["eid"];
    s.tmp_9 = r0;
    r0 = s.ev___11314.fields["vid"];
    s.tmp_10 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_9, s.tmp_10);
// base/poll.ts(28,21): if (ev.once) {...
    r0 = s.ev___11314.fields["once"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// base/poll.ts(29,25): _pollEventQueue.splice(i, 1)
    s.tmp_1 = helpers_arraySplice__P100_mk(s);
    s.tmp_1.arg0 = globals._pollEventQueue___2181;
    s.tmp_1.arg1 = s.i___11308;
    s.tmp_1.arg2 = 1;
    s.callLocIdx = 61; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
// base/poll.ts(30,25): --i
    r0 = (s.i___11308 - 1);
    s.i___11308 = (r0);
  case 7:
  case 8:
  case 9:
  case 10:
// base/poll.ts(24,57): ++i
    r0 = (s.i___11308 + 1);
    s.i___11308 = (r0);
    { step = 2; continue; }
  case 11:
// base/poll.ts(34,13): pause(50)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 50;
    s.callLocIdx = 62; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    { step = 1; continue; }
  case 12:
// base/poll.ts(37,1): _pollEventQueue = undefined
    globals._pollEventQueue___2181 = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_pollEvents__P2182.info = {"start":618,"length":638,"line":20,"column":4,"endLine":37,"endColumn":5,"fileName":"pxt_modules/base/poll.ts","functionName":"pollEvents","argumentNames":[]}

function control_pollEvents__P2182_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_pollEvents__P2182, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  now___11305: undefined,
  i___11308: undefined,
  ev___11314: undefined,
} }





function control_PollEvent_constructor__P2179(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.arg5 = (s.lambdaArgs[5]);
      s.arg6 = (s.lambdaArgs[6]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_PollEvent__C2178_VT)) failedCast(r0);
// base/poll.ts(10,13): this.eid = eid
    r0 = (s.arg0).fields["eid"] = (s.arg1);
// base/poll.ts(11,13): this.vid = vid
    r0 = (s.arg0).fields["vid"] = (s.arg2);
// base/poll.ts(12,13): this.start = start
    r0 = (s.arg0).fields["start"] = (s.arg3);
// base/poll.ts(13,13): this.timeOut = timeOut
    r0 = (s.arg0).fields["timeOut"] = (s.arg4);
// base/poll.ts(14,13): this.condition = condition
    r0 = (s.arg0).fields["condition"] = (s.arg5);
// base/poll.ts(15,13): this.once = once
    r0 = (s.arg0).fields["once"] = (s.arg6);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_PollEvent_constructor__P2179.info = {"start":239,"length":316,"line":8,"column":8,"endLine":15,"endColumn":9,"fileName":"pxt_modules/base/poll.ts","functionName":"inline","argumentNames":["this","eid","vid","start","timeOut","condition","once"]}

function control_PollEvent_constructor__P2179_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_PollEvent_constructor__P2179, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
  arg5: undefined,
  arg6: undefined,
} }





function pause__P411(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/pause.ts(9,5): loops.pause(ms)
    setupResume(s, 1);
    pxsim.loops.pause(s.arg0);
    checkResumeConsumed();
    return;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
pause__P411.info = {"start":246,"length":57,"line":7,"column":0,"endLine":9,"endColumn":1,"fileName":"pxt_modules/base/pause.ts","functionName":"pause","argumentNames":["ms"]}

function pause__P411_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pause__P411, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function console_log__P378(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/console.ts(60,9): add(ConsolePriority.Log, value)
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = 1;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 72; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_log__P378.info = {"start":1450,"length":86,"line":58,"column":4,"endLine":60,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"log","argumentNames":["value"]}

function console_log__P378_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_log__P378, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_twins_statusLight__P2669(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.controller___11390 = undefined;
    s.phase___11397 = undefined;
    s.r___11399 = undefined;
    s.g___11400 = undefined;
    s.b___11401 = undefined;
// twins.ts(439,15): controller = net.instance().controller
    s.tmp_0 = net_Net_controller__P1207_mk(s);
    s.tmp_1 = net_instance__P1211_mk(s);
    s.callLocIdx = 1323; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1324; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.controller___11390 = (r0);
// twins.ts(441,9): statusPhase += 4
    r0 = (globals.statusPhase___2662 + 4);
    globals.statusPhase___2662 = (r0);
// twins.ts(443,13): phase = statusPhase
    s.phase___11397 = (globals.statusPhase___2662);
// twins.ts(444,13): r = 0
    s.r___11399 = (0);
// twins.ts(445,13): g = 0
    s.g___11400 = (0);
// twins.ts(446,13): b = 0
    s.b___11401 = (0);
// twins.ts(448,9): if (controller.isConnected) {...
    s.tmp_1 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_1.arg0 = s.controller___11390;
    if (!checkSubtype(s.tmp_1.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.isConnected;
    s.pc = 17; return s.tmp_1;
  case 17:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// twins.ts(449,13): g = sim ? 0xf000 : 0x0800
    r0 = pxsim_numops_toBoolDecr(globals.sim___2667);
    if (!r0) { step = 1; continue; }
    r0 = 61440;
    { step = 2; continue; }
  case 1:
    r0 = 2048;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.g___11400 = (s.tmp_2);
// twins.ts(450,13): if (azureiot.isConnected()) {...
    s.tmp_1 = azureiot_isConnected__P1350_mk(s);
    s.callLocIdx = 1325; s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// twins.ts(451,17): phase >>= 2
    r0 = (s.phase___11397 >> 2);
    s.phase___11397 = (r0);
  case 3:
  case 4:
    { step = 8; continue; }
  case 5:
// twins.ts(456,13): r = sim ? 0xf000 : 0x2000
    r0 = pxsim_numops_toBoolDecr(globals.sim___2667);
    if (!r0) { step = 6; continue; }
    r0 = 61440;
    { step = 7; continue; }
  case 6:
    r0 = 8192;
  case 7:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.r___11399 = (s.tmp_0);
  case 8:
// twins.ts(459,9): phase = Math.abs((phase & 31) - 16)
    s.tmp_0 = Math_abs__P128_mk(s);
    r0 = (s.phase___11397 & 31);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - 16);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1326; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    s.phase___11397 = (r0);
// twins.ts(460,9): if (phase > 15) phase = 15
    r0 = (s.phase___11397 > 15);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// twins.ts(460,25): phase = 15
    s.phase___11397 = (15);
  case 9:
  case 10:
// twins.ts(461,9): r = (r * phase) >> 4
    r0 = (s.r___11399 * s.phase___11397);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.r___11399 = (r0);
// twins.ts(462,9): g = (g * phase) >> 4
    r0 = (s.g___11400 * s.phase___11397);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.g___11400 = (r0);
// twins.ts(463,9): b = (b * phase) >> 4
    r0 = (s.b___11401 * s.phase___11397);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.b___11401 = (r0);
// twins.ts(465,9): if (sendTick) {...
    r0 = pxsim_numops_toBoolDecr(globals.sendTick___2664);
    if (!r0) { step = 13; continue; }
// twins.ts(466,13): sendTick--
    r0 = (globals.sendTick___2664 - 1);
    globals.sendTick___2664 = (r0);
// twins.ts(467,13): r = 0
    s.r___11399 = (0);
// twins.ts(468,13): g = 0
    s.g___11400 = (0);
// twins.ts(469,13): b = sim ? 0xf000 : 0x2000
    r0 = pxsim_numops_toBoolDecr(globals.sim___2667);
    if (!r0) { step = 11; continue; }
    r0 = 61440;
    { step = 12; continue; }
  case 11:
    r0 = 8192;
  case 12:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.b___11401 = (s.tmp_0);
  case 13:
  case 14:
// twins.ts(472,9): jacdac.setLed(r, g, b)
    s.tmp_0 = jacdac_setLed__P1906_mk(s);
    s.tmp_0.arg0 = s.r___11399;
    s.tmp_0.arg1 = s.g___11400;
    s.tmp_0.arg2 = s.b___11401;
    s.callLocIdx = 1327; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_twins_statusLight__P2669.info = {"start":14208,"length":815,"line":437,"column":4,"endLine":472,"endColumn":5,"fileName":"twins.ts","functionName":"statusLight","argumentNames":[]}

function jacdac_twins_statusLight__P2669_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_twins_statusLight__P2669, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  controller___11390: undefined,
  phase___11397: undefined,
  r___11399: undefined,
  g___11400: undefined,
  b___11401: undefined,
} }





function Math_abs__P128(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(540,9): return x < 0 ? -x : x;
    r0 = (s.arg0 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = (0 - s.arg0);
    { step = 2; continue; }
  case 1:
    r0 = s.arg0;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
Math_abs__P128.info = {"start":16095,"length":77,"line":538,"column":4,"endLine":540,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"abs","argumentNames":["x"]}

function Math_abs__P128_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Math_abs__P128, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function setInterval__P422(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/scheduling.ts(8,5): delay = Math.max(10, delay | 0)
    s.tmp_0 = Math_max__P130_mk(s);
    s.tmp_0.arg0 = 10;
    r0 = (s.arg1 | 0);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 121; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.arg1 = (r0);
// base/scheduling.ts(9,5): return control.setInterval(func, delay, control.IntervalMode.Interval);
    s.tmp_0 = control_setInterval__P352_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 122; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
setInterval__P422.info = {"start":125,"length":178,"line":6,"column":0,"endLine":9,"endColumn":1,"fileName":"pxt_modules/base/scheduling.ts","functionName":"setInterval","argumentNames":["func","delay"]}

function setInterval__P422_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: setInterval__P422, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_AzureIotHubHealthServer_constructor__P1942(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.hasPub___11476 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
// jacdac-azure-iot-hub-health-server/server.ts(5,13): super(dev, jacdac.SRV_AZURE_IOT_HUB_HEALTH)
    s.tmp_2 = jacdac_Server_constructor__P1827_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 342028028;
    s.callLocIdx = 1111; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(6,13): this._connectionStatus =...
    r0 = (s.arg0).fields["_connectionStatus"] = (2);
    r0 = pxsim_pxtrt.mklocRef();
    s.hasPub___11476 = (r0);
// jacdac-azure-iot-hub-health-server/server.ts(8,17): hasPub = false
    r0 = pxsim_pxtrt_stlocRef(s.hasPub___11476, false);
// jacdac-azure-iot-hub-health-server/server.ts(9,13): azureiot.onEvent(AzureIotEvent.Connected, () => {...
    r0 = pxsim_pxtcore_mkAction(2, servers_AzureIotHubHealthServer_inline__P11479);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.hasPub___11476);
    s.tmp_1 = azureiot_onEvent__P1349_mk(s);
    s.tmp_1.arg0 = 1;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 1116; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(22,13): azureiot.onEvent(AzureIotEvent.Disconnected, () =>...
    r0 = pxsim_pxtcore_mkAction(1, servers_AzureIotHubHealthServer_inline__P11494);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = azureiot_onEvent__P1349_mk(s);
    s.tmp_1.arg0 = 2;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 1118; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_constructor__P1942.info = {"start":169,"length":957,"line":3,"column":8,"endLine":26,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"inline","argumentNames":["this","dev"]}

function servers_AzureIotHubHealthServer_constructor__P1942_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_constructor__P1942, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  hasPub___11476: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_AzureIotHubHealthServer_inline__P11479(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac-azure-iot-hub-health-server/server.ts(10,17): this.setConnectionStatus(...
    s.tmp_0 = servers_AzureIotHubHealthServer_setConnectionStatus__P2528_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 1;
    s.callLocIdx = 1112; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(13,17): if (!hasPub) {...
    r0 = pxsim_pxtrt_ldlocRef(s.caps[1]);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac-azure-iot-hub-health-server/server.ts(14,21): hasPub = true
    r0 = pxsim_pxtrt_stlocRef(s.caps[1], true);
// jacdac-azure-iot-hub-health-server/server.ts(15,21): azureiot.mqttClient().on("published", () => {...
    r0 = pxsim_pxtcore_mkAction(1, servers_AzureIotHubHealthServer_inline__P11488);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.caps[0]);
    s.tmp_1 = mqtt_EventEmitter_on__P1314_mk(s);
    s.tmp_2 = azureiot_mqttClient__P1343_mk(s);
    s.tmp_2.arg0 = undefined;
    s.callLocIdx = 1113; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = "published";
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1115; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_inline__P11479.info = {"start":444,"length":460,"line":8,"column":54,"endLine":20,"endColumn":13,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"inline","argumentNames":[]}

function servers_AzureIotHubHealthServer_inline__P11479_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_inline__P11479, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function servers_AzureIotHubHealthServer_inline__P11488(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac-azure-iot-hub-health-server/server.ts(16,25): this.sendEvent(...
    s.tmp_0 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 128;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1114; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_inline__P11488.info = {"start":706,"length":165,"line":14,"column":58,"endLine":18,"endColumn":21,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"inline","argumentNames":[]}

function servers_AzureIotHubHealthServer_inline__P11488_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_inline__P11488, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_AzureIotHubHealthServer_inline__P11494(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = servers_AzureIotHubHealthServer_setConnectionStatus__P2528_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 2;
    s.callLocIdx = 1117; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_inline__P11494.info = {"start":963,"length":139,"line":21,"column":57,"endLine":24,"endColumn":17,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"inline","argumentNames":[]}

function servers_AzureIotHubHealthServer_inline__P11494_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_inline__P11494, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_Server_sendEvent__P2384(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pkt___11504 = undefined;
    s.now___11516 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(390,13): if (this.serviceIndex == null) return
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(390,44): return
    { step = 5; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(391,19): pkt = JDPacket.from(...
    s.tmp_2 = r0 = s.arg2;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 3:
    r0 = pxsim.control.createBuffer(0);
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    s.tmp_4 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_5 = jacdac_Bus_mkEventCmd__P1812_mk(s);
    s.tmp_5.arg0 = globals.bus___1822;
    s.tmp_5.arg1 = s.arg1;
    s.callLocIdx = 890; s.pc = 7; return s.tmp_5;
  case 7:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.tmp_3;
    s.callLocIdx = 891; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.pkt___11504 = (r0);
// jacdac/routing.ts(395,13): this.sendReport(pkt)
    s.tmp_0 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.pkt___11504;
    s.callLocIdx = 892; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// jacdac/routing.ts(396,19): now = control.millis()
    r0 = pxsim.control.millis();
    s.now___11516 = (r0);
// jacdac/routing.ts(397,13): delayedSend(pkt, now + 20)
    s.tmp_0 = jacdac_delayedSend__P1513_mk(s);
    s.tmp_0.arg0 = s.pkt___11504;
    r0 = (s.now___11516 + 20);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 893; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// jacdac/routing.ts(398,13): delayedSend(pkt, now + 100)
    s.tmp_0 = jacdac_delayedSend__P1513_mk(s);
    s.tmp_0.arg0 = s.pkt___11504;
    r0 = (s.now___11516 + 100);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 894; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendEvent__P2384.info = {"start":13522,"length":405,"line":388,"column":8,"endLine":398,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendEvent","argumentNames":["this","eventCode","data"]}

function jacdac_Server_sendEvent__P2384_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendEvent__P2384, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  pkt___11504: undefined,
  now___11516: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_delayedSend__P1513(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dp___11538 = undefined;
    s.i___11543 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/eventqueue.ts(15,9): if (!delayedPackets) {...
    r0 = pxsim_numops_toBoolDecr(globals.delayedPackets___2410);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/eventqueue.ts(16,13): delayedPackets = []
    r0 = pxsim_Array__mk();
    globals.delayedPackets___2410 = (r0);
// jacdac/eventqueue.ts(17,13): control.runInParallel(processDelayedPackets)
    r0 = pxsim.control.runInParallel(jacdac_processDelayedPackets__P2413);
  case 1:
  case 2:
// jacdac/eventqueue.ts(19,15): dp = new DelayedPacket(timestamp, pkt)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_DelayedPacket__C2411_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_DelayedPacket_constructor__P2412_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg0;
    s.callLocIdx = 708; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.dp___11538 = (s.tmp_0);
// jacdac/eventqueue.ts(20,18): i = 0
    s.i___11543 = (0);
// jacdac/eventqueue.ts(20,9): for (let i = 0; i < delayedPackets.length; ++i) {...
  case 3:
// jacdac/eventqueue.ts(20,25): i < delayedPackets.length
    s.tmp_1 = r0 = s.i___11543;
    r0 = pxsim_Array__length(globals.delayedPackets___2410);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// jacdac/eventqueue.ts(21,13): if (delayedPackets[i].timestamp > timestamp) {...
    r0 = pxsim_Array__getAt(globals.delayedPackets___2410, s.i___11543);
    r0 = r0.fields["timestamp"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 > s.arg1);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 4; continue; }
// jacdac/eventqueue.ts(22,17): delayedPackets.insertAt(i, dp)
    r0 = pxsim_Array_.insertAt(globals.delayedPackets___2410, s.i___11543, s.dp___11538);
// jacdac/eventqueue.ts(23,17): return
    { step = 7; continue; }
  case 4:
  case 5:
// jacdac/eventqueue.ts(20,52): ++i
    r0 = (s.i___11543 + 1);
    s.i___11543 = (r0);
    { step = 3; continue; }
  case 6:
// jacdac/eventqueue.ts(26,9): delayedPackets.push(dp)
    r0 = pxsim_Array__push(globals.delayedPackets___2410, s.dp___11538);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_delayedSend__P1513.info = {"start":252,"length":495,"line":13,"column":4,"endLine":26,"endColumn":5,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"delayedSend","argumentNames":["pkt","timestamp"]}

function jacdac_delayedSend__P1513_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_delayedSend__P1513, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  dp___11538: undefined,
  i___11543: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_DelayedPacket_constructor__P2412(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_DelayedPacket__C2411_VT)) failedCast(r0);
    r0 = (s.arg0).fields["timestamp"] = (s.arg1);
    r0 = (s.arg0).fields["pkt"] = (s.arg2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_DelayedPacket_constructor__P2412.info = {"start":126,"length":114,"line":7,"column":8,"endLine":10,"endColumn":12,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"inline","argumentNames":["this","timestamp","pkt"]}

function jacdac_DelayedPacket_constructor__P2412_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_DelayedPacket_constructor__P2412, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_processDelayedPackets__P2413(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___11572 = undefined;
    s.curr___11576 = undefined;
// jacdac/eventqueue.ts(30,9): while (true) {...
  case 1:
// jacdac/eventqueue.ts(30,16): true
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 10; continue; }
// jacdac/eventqueue.ts(31,13): pause(10)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 10;
    s.callLocIdx = 709; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
// jacdac/eventqueue.ts(32,19): now = control.millis()
    r0 = pxsim.control.millis();
    s.now___11572 = (r0);
// jacdac/eventqueue.ts(33,13): for (;;) {...
  case 2:
// jacdac/eventqueue.ts(34,23): curr = delayedPackets[0]
    r0 = pxsim_Array__getAt(globals.delayedPackets___2410, 0);
    s.curr___11576 = (r0);
// jacdac/eventqueue.ts(35,17): if (!curr || curr.timestamp > now) break
    r0 = pxsim_numops_toBoolDecr(s.curr___11576);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = s.curr___11576.fields["timestamp"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > s.now___11572);
  case 4:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 5; continue; }
// jacdac/eventqueue.ts(35,52): break
    { step = 7; continue; }
  case 5:
  case 6:
// jacdac/eventqueue.ts(36,17): delayedPackets.shift()
    s.tmp_4 = helpers_arrayShift__P102_mk(s);
    s.tmp_4.arg0 = globals.delayedPackets___2410;
    s.callLocIdx = 710; s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
// jacdac/eventqueue.ts(37,17): curr.pkt._sendCore()
    s.tmp_0 = jacdac_JDPacket__sendCore__P1457_mk(s);
    r0 = s.curr___11576.fields["pkt"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 711; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
    { step = 2; continue; }
  case 7:
// jacdac/eventqueue.ts(39,13): if (!delayedPackets.length) {...
    r0 = pxsim_Array__length(globals.delayedPackets___2410);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// jacdac/eventqueue.ts(40,17): delayedPackets = null
    globals.delayedPackets___2410 = (null);
// jacdac/eventqueue.ts(41,17): return
    { step = 11; continue; }
  case 8:
  case 9:
    { step = 1; continue; }
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_processDelayedPackets__P2413.info = {"start":753,"length":470,"line":28,"column":4,"endLine":43,"endColumn":5,"fileName":"pxt_modules/jacdac/eventqueue.ts","functionName":"processDelayedPackets","argumentNames":[]}

function jacdac_processDelayedPackets__P2413_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_processDelayedPackets__P2413, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  now___11572: undefined,
  curr___11576: undefined,
} }





function helpers_arrayShift__P102(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(155,9): return arr.removeAt(0);
    r0 = pxsim_Array_.removeAt(s.arg0, 0);
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayShift__P102.info = {"start":4045,"length":82,"line":153,"column":4,"endLine":155,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayShift","argumentNames":["arr"]}

function helpers_arrayShift__P102_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayShift__P102, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Bus_mkEventCmd__P1812(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(102,13): if (!this._eventCounter) this._eventCounter = 0
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(102,38): this._eventCounter = 0
    r0 = (s.arg0).fields["_eventCounter"] = (0);
  case 1:
  case 2:
// jacdac/routing.ts(103,13): this._eventCounter =...
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 127);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_eventCounter"] = (s.tmp_1);
// jacdac/routing.ts(105,13): if (evCode >> 8) throw "invalid evcode"
    r0 = (s.arg1 >> 8);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(105,30): throw "invalid evcode"
    r0 = pxsim_pxtcore.throwValue("invalid evcode");
  case 3:
  case 4:
// jacdac/routing.ts(106,13): return (...
    r0 = s.arg0.fields["_eventCounter"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 << 8);
    s.tmp_2 = r0;
    r0 = (32768 | s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | s.arg1);
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_mkEventCmd__P1812.info = {"start":3050,"length":404,"line":100,"column":8,"endLine":110,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"mkEventCmd","argumentNames":["this","evCode"]}

function jacdac_Bus_mkEventCmd__P1812_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_mkEventCmd__P1812, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_AzureIotHubHealthServer_setConnectionStatus__P2528(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
// jacdac-azure-iot-hub-health-server/server.ts(44,13): if (status !== this._connectionStatus) {...
    r0 = s.arg0.fields["_connectionStatus"];
    s.tmp_1 = r0;
    r0 = (s.arg1 !== s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac-azure-iot-hub-health-server/server.ts(45,17): this._connectionStatus = status
    r0 = (s.arg0).fields["_connectionStatus"] = (s.arg1);
// jacdac-azure-iot-hub-health-server/server.ts(46,17): this.log(`conn status: ${this._connectionStatus}`)
    s.tmp_0 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = s.arg0.fields["_connectionStatus"];
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("conn status: ", s.tmp_1);
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(47,17): this.sendEvent(...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = s.arg0.fields["_connectionStatus"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    s.tmp_2 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = 3;
    s.tmp_3 = jacdac_jdpack__P1468_mk(s);
    s.tmp_3.arg0 = "u8";
    s.tmp_3.arg1 = s.tmp_0;
    s.callLocIdx = 1121; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2.arg2 = r0;
    s.callLocIdx = 1122; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_setConnectionStatus__P2528.info = {"start":1376,"length":493,"line":40,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"setConnectionStatus","argumentNames":["this","status"]}

function servers_AzureIotHubHealthServer_setConnectionStatus__P2528_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_setConnectionStatus__P2528, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_log__P2394(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dev___11657 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(557,1): if (this.supressLog) return
    r0 = s.arg0.fields["supressLog"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(557,34): return
    { step = 7; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(558,13): if (jacdac.logPriority < console.minPriority) return
    r0 = (globals.logPriority___1823 < globals.minPriority___373);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(558,59): return
    { step = 7; continue; }
  case 3:
  case 4:
// jacdac/routing.ts(561,19): dev = bus.selfDevice.toString()
    s.tmp_2 = jacdac_Device_toString__P1882_mk(s);
    s.tmp_3 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_3.arg0 = globals.bus___1822;
    s.callLocIdx = 909; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 910; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.dev___11657 = (r0);
// jacdac/routing.ts(562,13): console.add(...
    r0 = s.arg0.fields["instanceName"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.arg0.fields["instanceName"];
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(".", s.tmp_1);
    { step = 6; continue; }
  case 5:
    r0 = s.arg0.fields["serviceIndex"];
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 11);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 11:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("[", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "]");
  case 6:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    s.tmp_7 = console_add__P374_mk(s);
    s.tmp_7.arg0 = globals.logPriority___1823;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_11 = r0;
    if ((s.dev___11657) && (s.dev___11657).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.dev___11657);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.dev___11657) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_12 = r0;
    r0 = pxsim_String__concat(s.tmp_11, s.tmp_12);
    s.tmp_10 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_10, s.tmp_13);
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_9, ">");
    s.tmp_8 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_8, s.tmp_14);
    s.tmp_7.arg1 = r0;
    s.callLocIdx = 911; s.pc = 12; return s.tmp_7;
  case 12:
    r0 = s.retval;
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_log__P2394.info = {"start":18722,"length":527,"line":554,"column":8,"endLine":569,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"log","argumentNames":["this","text"]}

function jacdac_Server_log__P2394_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_log__P2394, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  dev___11657: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_onEvent__P1349(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.evid___11691 = undefined;
    s.c___11699 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(188,15): evid = messageBusId()
    s.tmp_0 = azureiot_messageBusId__P2294_mk(s);
    s.callLocIdx = 525; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.evid___11691 = (r0);
// azureiot/azureiot.ts(189,9): control.onEvent(evid, event, handler)
    s.tmp_0 = control_onEvent__P389_mk(s);
    s.tmp_0.arg0 = s.evid___11691;
    s.tmp_0.arg1 = s.arg0;
    s.tmp_0.arg2 = s.arg1;
    s.tmp_0.arg3 = 16;
    s.callLocIdx = 526; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// azureiot/azureiot.ts(190,9): try {...
    r0 = pxsim_pxtcore.beginTry(5);
// azureiot/azureiot.ts(191,19): c = mqttClient(true)
    s.tmp_0 = azureiot_mqttClient__P1343_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 527; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    s.c___11699 = (r0);
// azureiot/azureiot.ts(192,13): if (c && c.connected) // raise connected event by default...
    s.tmp_0 = r0 = s.c___11699;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_1 = mqtt_Client_connected__P1325_mk(s);
    s.tmp_1.arg0 = s.c___11699;
    s.callLocIdx = 528; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
// azureiot/azureiot.ts(193,1): control.raiseEvent(evid, AzureIotEvent.Connected)
    r0 = pxsim.control.raiseEvent(s.evid___11691, 1);
  case 3:
  case 4:
    r0 = pxsim_pxtcore.endTry();
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_onEvent__P1349.info = {"start":5938,"length":368,"line":186,"column":4,"endLine":194,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"onEvent","argumentNames":["event","handler"]}

function azureiot_onEvent__P1349_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_onEvent__P1349, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  evid___11691: undefined,
  c___11699: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Server_constructor__P1827(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
    r0 = (s.arg0).fields["instanceName"] = (s.arg1);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg2);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
// jacdac/routing.ts(347,13): super()
    s.tmp_2 = jacdac_EventSource_constructor__P1913_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 883; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_constructor__P1827.info = {"start":12173,"length":153,"line":342,"column":8,"endLine":347,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","instanceName","serviceClass"]}

function jacdac_Server_constructor__P1827_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_constructor__P1827, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function servers_WiFiServer_constructor__P2113(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.controller___11719 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_WiFiServer__C2111_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["enabled"] = (true);
// jacdac-wifi-server/server.ts(6,13): super(dev, jacdac.SRV_WIFI)
    s.tmp_2 = jacdac_Server_constructor__P1827_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 413852154;
    s.callLocIdx = 1160; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(7,19): controller = net.instance().controller
    s.tmp_0 = net_Net_controller__P1207_mk(s);
    s.tmp_1 = net_instance__P1211_mk(s);
    s.callLocIdx = 1161; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1162; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    s.controller___11719 = (r0);
// jacdac-wifi-server/server.ts(8,13): controller.onConnectSSIDFailed = (ssid: string) =>...
    r0 = pxsim_pxtcore_mkAction(1, servers_WiFiServer_inline__P11724);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = (s.controller___11719).fields["onConnectSSIDFailed"] = (s.tmp_0);
// jacdac-wifi-server/server.ts(13,13): controller.onEvent(net.ControllerEvent.GotIP, () =>...
    r0 = pxsim_pxtcore_mkAction(1, servers_WiFiServer_inline__P11734);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = net_Controller_onEvent__P1116_mk(s);
    s.tmp_1.arg0 = s.controller___11719;
    s.tmp_1.arg1 = 2;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1166; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(16,13): controller.onEvent(net.ControllerEvent.LostIP, () =>...
    r0 = pxsim_pxtcore_mkAction(1, servers_WiFiServer_inline__P11741);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = net_Controller_onEvent__P1116_mk(s);
    s.tmp_1.arg0 = s.controller___11719;
    s.tmp_1.arg1 = 3;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1168; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(19,13): controller.onEvent(net.ControllerEvent.NewScan, () => {...
    r0 = pxsim_pxtcore_mkAction(2, servers_WiFiServer_inline__P11748);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.controller___11719);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg0);
    s.tmp_1 = net_Controller_onEvent__P1116_mk(s);
    s.tmp_1.arg0 = s.controller___11719;
    s.tmp_1.arg1 = 1;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1173; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(30,13): controller.autoconnect()
    s.tmp_0 = net_Controller_autoconnect__P1130_mk(s);
    s.tmp_0.arg0 = s.controller___11719;
    s.callLocIdx = 1174; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_constructor__P2113.info = {"start":104,"length":1161,"line":4,"column":8,"endLine":30,"endColumn":9,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":["this","dev"]}

function servers_WiFiServer_constructor__P2113_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_constructor__P2113, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  controller___11719: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_WiFiServer_inline__P11724(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
    s.tmp_1 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_1.arg0 = s.caps[0];
    s.tmp_1.arg1 = 130;
    s.tmp_2 = jacdac_jdpack__P1468_mk(s);
    s.tmp_2.arg0 = "s";
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 1163; s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 1164; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_inline__P11724.info = {"start":273,"length":169,"line":7,"column":45,"endLine":11,"endColumn":17,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":["ssid"]}

function servers_WiFiServer_inline__P11724_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_inline__P11724, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function servers_WiFiServer_inline__P11734(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1165; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_inline__P11734.info = {"start":501,"length":60,"line":12,"column":58,"endLine":13,"endColumn":54,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":[]}

function servers_WiFiServer_inline__P11734_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_inline__P11734, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_WiFiServer_inline__P11741(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = 2;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1167; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_inline__P11741.info = {"start":635,"length":61,"line":15,"column":59,"endLine":16,"endColumn":55,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":[]}

function servers_WiFiServer_inline__P11741_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_inline__P11741, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_WiFiServer_inline__P11748(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.wifis___11749 = undefined;
    s.total___11752 = undefined;
    s.known___11756 = undefined;
// jacdac-wifi-server/server.ts(20,23): wifis = net.knownAccessPoints()
    s.tmp_0 = net_knownAccessPoints__P1212_mk(s);
    s.callLocIdx = 1169; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.wifis___11749 = (r0);
// jacdac-wifi-server/server.ts(21,23): total = controller.lastScanResults.length
    r0 = s.caps[0].fields["lastScanResults"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__length(s.tmp_0);
    s.total___11752 = (r0);
// jacdac-wifi-server/server.ts(22,23): known = controller.lastScanResults.filter(...
    r0 = pxsim_pxtcore_mkAction(1, length_inline__P11761);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.wifis___11749);
    s.tmp_2 = helpers_arrayFilter__P110_mk(s);
    r0 = s.caps[0].fields["lastScanResults"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 1170; s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__length(s.tmp_1);
    s.known___11756 = (r0);
// jacdac-wifi-server/server.ts(25,17): this.sendEvent(...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.total___11752);
    r0 = pxsim_Array__push(s.tmp_0, s.known___11756);
    s.tmp_1 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_1.arg0 = s.caps[1];
    s.tmp_1.arg1 = 128;
    s.tmp_2 = jacdac_jdpack__P1468_mk(s);
    s.tmp_2.arg0 = "u16 u16";
    s.tmp_2.arg1 = s.tmp_0;
    s.callLocIdx = 1171; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 1172; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_inline__P11748.info = {"start":771,"length":446,"line":18,"column":60,"endLine":28,"endColumn":13,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":[]}

function servers_WiFiServer_inline__P11748_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_inline__P11748, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  wifis___11749: undefined,
  total___11752: undefined,
  known___11756: undefined,
} }





function length_inline__P11761(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["ssid"];
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.tmp_1);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 !== undefined);
    return leave(s, r0)
  default: oops()
} } }
length_inline__P11761.info = {"start":982,"length":34,"line":22,"column":20,"endLine":22,"endColumn":54,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":["ap"]}

function length_inline__P11761_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: length_inline__P11761, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_Controller_autoconnect__P1130(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.myReconn___11782 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(80,13): if (this.reconnectRunning)...
    r0 = s.arg0.fields["reconnectRunning"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/controller.ts(81,17): return
    { step = 3; continue; }
  case 1:
  case 2:
// net/controller.ts(82,19): myReconn = {}
    r0 = pxsim_pxtrt.mkMap();
    s.myReconn___11782 = (r0);
// net/controller.ts(83,13): this.reconnectRunning = myReconn
    r0 = (s.arg0).fields["reconnectRunning"] = (s.myReconn___11782);
// net/controller.ts(84,13): this.emitEvent(ControllerEvent.Connecting)
    s.tmp_0 = net_Controller_emitEvent__P2248_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 6;
    s.callLocIdx = 164; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// net/controller.ts(85,13): control.runInParallel(() => {...
    r0 = pxsim_pxtcore_mkAction(2, net_Controller_autoconnect_inline__P11791);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.myReconn___11782);
    r0 = pxsim.control.runInParallel(s.tmp_0);
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_autoconnect__P1130.info = {"start":2242,"length":563,"line":78,"column":8,"endLine":94,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"autoconnect","argumentNames":["this"]}

function net_Controller_autoconnect__P1130_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_autoconnect__P1130, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  myReconn___11782: undefined,
  arg0: undefined,
} }





function net_Controller_autoconnect_inline__P11791(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// net/controller.ts(86,17): while (this.reconnectRunning == myReconn) {...
  case 1:
// net/controller.ts(86,24): this.reconnectRunning == myReconn
    r0 = s.caps[0].fields["reconnectRunning"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.caps[1]);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// net/controller.ts(87,21): if (this.isConnected) {...
    s.tmp_3 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_3.arg0 = s.caps[0];
    if (!checkSubtype(s.tmp_3.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.isConnected;
    s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
// net/controller.ts(88,25): pause(1000)
    s.tmp_4 = pause__P411_mk(s);
    s.tmp_4.arg0 = 1000;
    s.callLocIdx = 165; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    { step = 3; continue; }
  case 2:
// net/controller.ts(90,25): this.connectCore()
    s.tmp_0 = net_Controller_connectCore__P2250_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 166; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// net/controller.ts(91,25): pause(500)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 500;
    s.callLocIdx = 167; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 3:
    { step = 1; continue; }
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_autoconnect_inline__P11791.info = {"start":2486,"length":308,"line":84,"column":34,"endLine":93,"endColumn":13,"fileName":"pxt_modules/net/controller.ts","functionName":"inline","argumentNames":[]}

function net_Controller_autoconnect_inline__P11791_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_autoconnect_inline__P11791, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
} }





function net_Controller_connectCore__P2250(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.wifis___11821 = undefined;
    s.ssids___11824 = undefined;
    s.networks___11828 = undefined;
    s.priorities___11850 = undefined;
    s.network___11880 = undefined;
    s.unnamed116___U5 = undefined;
    s.unnamed117___U6 = undefined;
    s.pwd___11890 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(103,13): if (control.deviceDalVersion() == "sim") {...
    r0 = pxsim.control.deviceDalVersion();
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "sim");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/controller.ts(104,17): this.connectAP("", "")
    s.tmp_2 = net_Controller__C1112_v9_3_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2.arg1 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2.arg2 = r0;
    if (!checkSubtype(s.tmp_2.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.connectAP;
    s.pc = 20; return s.tmp_2;
  case 20:
    r0 = s.retval;
// net/controller.ts(105,17): return true
    r0 = true;
    { step = 19; continue; }
  case 1:
  case 2:
// net/controller.ts(108,13): this.scanNetworks()
    s.tmp_0 = net_Controller__C1112_v0_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.scanNetworks;
    s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
// net/controller.ts(109,13): if (!this.lastScanResults || this.lastScanResults.length == 0) {
    r0 = s.arg0.fields["lastScanResults"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = s.arg0.fields["lastScanResults"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__length(s.tmp_4);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 5; continue; }
// net/controller.ts(110,17): net.log(`no networks detected`)
    s.tmp_6 = net_log__P1169_mk(s);
    s.tmp_6.arg0 = "no networks detected";
    s.callLocIdx = 168; s.pc = 22; return s.tmp_6;
  case 22:
    r0 = s.retval;
// net/controller.ts(111,17): this.emitEvent(ControllerEvent.NoScannedNetworks)
    s.tmp_0 = net_Controller_emitEvent__P2248_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 4;
    s.callLocIdx = 169; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
// net/controller.ts(112,17): return false
    r0 = false;
    { step = 19; continue; }
  case 5:
  case 6:
// net/controller.ts(115,13): if (!this.reconnectRunning)...
    r0 = s.arg0.fields["reconnectRunning"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// net/controller.ts(116,17): return false
    r0 = false;
    { step = 19; continue; }
  case 7:
  case 8:
// net/controller.ts(118,19): wifis = net.knownAccessPoints()
    s.tmp_3 = net_knownAccessPoints__P1212_mk(s);
    s.callLocIdx = 170; s.pc = 24; return s.tmp_3;
  case 24:
    r0 = s.retval;
    s.wifis___11821 = (r0);
// net/controller.ts(119,19): ssids = Object.keys(wifis)
    r0 = pxsim_pxtrt.keysOf(s.wifis___11821);
    s.ssids___11824 = (r0);
// net/controller.ts(120,19): networks = this.lastScanResults...
    r0 = pxsim_pxtcore_mkAction(1, networks_inline__P11830);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.ssids___11824);
    s.tmp_1 = helpers_arrayFilter__P110_mk(s);
    r0 = s.arg0.fields["lastScanResults"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 171; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    s.networks___11828 = (r0);
// net/controller.ts(123,13): if (!networks.length) {...
    r0 = pxsim_Array__length(s.networks___11828);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// net/controller.ts(124,17): net.log(`no known networks`)
    s.tmp_3 = net_log__P1169_mk(s);
    s.tmp_3.arg0 = "no known networks";
    s.callLocIdx = 172; s.pc = 26; return s.tmp_3;
  case 26:
    r0 = s.retval;
// net/controller.ts(125,17): this.emitEvent(ControllerEvent.NoKnownNetworks)
    s.tmp_0 = net_Controller_emitEvent__P2248_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 5;
    s.callLocIdx = 173; s.pc = 27; return s.tmp_0;
  case 27:
    r0 = s.retval;
// net/controller.ts(126,17): return false
    r0 = false;
    { step = 19; continue; }
  case 9:
  case 10:
// net/controller.ts(129,19): priorities = net.accessPointPriorities()
    s.tmp_0 = net_accessPointPriorities__P1216_mk(s);
    s.callLocIdx = 174; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
    s.priorities___11850 = (r0);
// net/controller.ts(130,13): networks.sort((a, b) => {...
    r0 = pxsim_pxtcore_mkAction(1, net_Controller_connectCore_inline__P11855);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.priorities___11850);
    s.tmp_1 = helpers_arraySort__P105_mk(s);
    s.tmp_1.arg0 = s.networks___11828;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 175; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
// net/controller.ts(137,24): network
    s.network___11880 = (undefined);
    s.unnamed116___U5 = (s.networks___11828);
    s.unnamed117___U6 = (0);
// net/controller.ts(137,1): for (const network of networks) {...
  case 11:
    s.tmp_0 = r0 = s.unnamed117___U6;
    r0 = pxsim_Array__length(s.unnamed116___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 18; continue; }
    r0 = pxsim_Array__getAt(s.unnamed116___U5, s.unnamed117___U6);
    s.network___11880 = (r0);
// net/controller.ts(138,17): net.log(`connecting to ${network.ssid}...`)
    s.tmp_2 = net_log__P1169_mk(s);
    r0 = s.network___11880.fields["ssid"];
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 31);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 31:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("connecting to ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "...");
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 176; s.pc = 30; return s.tmp_2;
  case 30:
    r0 = s.retval;
// net/controller.ts(139,23): pwd = wifis[network.ssid]
    r0 = s.network___11880.fields["ssid"];
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.wifis___11821, s.tmp_0);
    s.pwd___11890 = (r0);
// net/controller.ts(140,17): if (this.connectAP(network.ssid, pwd)) {...
    s.tmp_1 = net_Controller__C1112_v9_3_mk(s);
    s.tmp_1.arg0 = s.arg0;
    r0 = s.network___11880.fields["ssid"];
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.pwd___11890;
    if (!checkSubtype(s.tmp_1.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.connectAP;
    s.pc = 32; return s.tmp_1;
  case 32:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
// net/controller.ts(141,21): net.log(`connected to ${network.ssid}`)
    s.tmp_2 = net_log__P1169_mk(s);
    r0 = s.network___11880.fields["ssid"];
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 34);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 34:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat("connected to ", s.tmp_3);
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 177; s.pc = 33; return s.tmp_2;
  case 33:
    r0 = s.retval;
// net/controller.ts(142,21): return true
    r0 = true;
    { step = 19; continue; }
  case 12:
  case 13:
// net/controller.ts(144,17): if (!this.reconnectRunning)...
    r0 = s.arg0.fields["reconnectRunning"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// net/controller.ts(145,21): return false
    r0 = false;
    { step = 19; continue; }
  case 14:
  case 15:
// net/controller.ts(147,17): if (this.onConnectSSIDFailed)...
    r0 = s.arg0.fields["onConnectSSIDFailed"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 16; continue; }
// net/controller.ts(148,21): this.onConnectSSIDFailed(network.ssid)
    s.tmp_4 = if_onConnectSSIDFailed_2_mk(s);
    s.tmp_4.arg0 = s.arg0;
    r0 = s.network___11880.fields["ssid"];
    s.tmp_4.arg1 = r0;
    if (!s.tmp_4.arg0.vtable.iface) {
      setupLambda(s.tmp_4, pxsim_pxtrt.mapGetByString(s.tmp_4.arg0, "onConnectSSIDFailed"), 2);
      s.callLocIdx = 178; s.pc = 35; return s.tmp_4;
    } else {
      s.tmp_4.fn = s.tmp_4.arg0.vtable.iface["onConnectSSIDFailed"];
      if (s.tmp_4.fn == null) { setupLambda(s.tmp_4, s.tmp_4.arg0.fields["onConnectSSIDFailed"], 2); s.callLocIdx = 178; s.pc = 35; return s.tmp_4; }
      else if (s.tmp_4.fn.isGetter) { s.tmp_4.stage2Call = true; s.callLocIdx = 178; s.pc = 35; return s.tmp_4;; }
     else { s.callLocIdx = 178; s.pc = 35; return s.tmp_4; }
    }
  case 35:
    r0 = s.retval;
  case 16:
  case 17:
    r0 = (s.unnamed117___U6 + 1);
    s.unnamed117___U6 = (r0);
    { step = 11; continue; }
  case 18:
    s.unnamed116___U5 = (undefined);
// net/controller.ts(151,13): net.log(`connection failed`)
    s.tmp_0 = net_log__P1169_mk(s);
    s.tmp_0.arg0 = "connection failed";
    s.callLocIdx = 179; s.pc = 36; return s.tmp_0;
  case 36:
    r0 = s.retval;
// net/controller.ts(152,13): this.emitEvent(ControllerEvent.ConnectionFailed)
    s.tmp_0 = net_Controller_emitEvent__P2248_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 7;
    s.callLocIdx = 180; s.pc = 37; return s.tmp_0;
  case 37:
    r0 = s.retval;
// net/controller.ts(153,13): return false
    r0 = false;
  case 19:
    return leave(s, r0)
  default: oops()
} } }
net_Controller_connectCore__P2250.info = {"start":2922,"length":1884,"line":101,"column":8,"endLine":153,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"connectCore","argumentNames":["this"]}

function net_Controller_connectCore__P2250_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_connectCore__P2250, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  wifis___11821: undefined,
  ssids___11824: undefined,
  networks___11828: undefined,
  priorities___11850: undefined,
  network___11880: undefined,
  unnamed116___U5: undefined,
  unnamed117___U6: undefined,
  pwd___11890: undefined,
  arg0: undefined,
} }





function networks_inline__P11830(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["ssid"];
    s.tmp_1 = r0;
    r0 = pxsim_Array_.indexOf(s.caps[0], s.tmp_1, undefined);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > -1);
    return leave(s, r0)
  default: oops()
} } }
networks_inline__P11830.info = {"start":3602,"length":43,"line":120,"column":24,"endLine":120,"endColumn":67,"fileName":"pxt_modules/net/controller.ts","functionName":"inline","argumentNames":["network"]}

function networks_inline__P11830_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: networks_inline__P11830, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_Controller_connectCore_inline__P11855(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pa___11858 = undefined;
    s.pb___11864 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// net/controller.ts(131,23): pa = priorities[a.ssid] || 0
    r0 = s.arg0.fields["ssid"];
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.pa___11858 = (s.tmp_2);
// net/controller.ts(132,23): pb = priorities[b.ssid] || 0
    r0 = s.arg1.fields["ssid"];
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.pb___11864 = (s.tmp_2);
// net/controller.ts(133,17): return pb - pa || b.rssi - a.rssi
    r0 = (s.pb___11864 - s.pa___11858);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 5:
    r0 = s.arg1.fields["rssi"];
    s.tmp_1 = r0;
    r0 = s.arg0.fields["rssi"];
    s.tmp_2 = r0;
    r0 = (s.tmp_1 - s.tmp_2);
  case 6:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_connectCore_inline__P11855.info = {"start":3923,"length":177,"line":129,"column":26,"endLine":133,"endColumn":13,"fileName":"pxt_modules/net/controller.ts","functionName":"inline","argumentNames":["a","b"]}

function net_Controller_connectCore_inline__P11855_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_connectCore_inline__P11855, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  pa___11858: undefined,
  pb___11864: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arraySort__P105(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(209,9): if (!callbackfn && arr.length > 1) {...
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 1);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// base/pxt-helpers.ts(210,13): callbackfn = (a, b) => {...
    s.arg1 = (helpers_arraySort_inline__P11925);
  case 3:
  case 4:
// base/pxt-helpers.ts(227,9): return sortHelper(arr, callbackfn);
    s.tmp_0 = helpers_sortHelper__P2128_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 3; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySort__P105.info = {"start":5663,"length":859,"line":207,"column":4,"endLine":227,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arraySort","argumentNames":["arr","callbackfn"]}

function helpers_arraySort__P105_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySort__P105, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arraySort_inline__P11925(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.aIsUndef___11928 = undefined;
    s.bIsUndef___11932 = undefined;
    s.aIsNull___11943 = undefined;
    s.bIsNull___11947 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(212,23): aIsUndef = a === undefined
    r0 = (s.arg0 === undefined);
    s.aIsUndef___11928 = (r0);
// base/pxt-helpers.ts(213,23): bIsUndef = b === undefined
    r0 = (s.arg1 === undefined);
    s.bIsUndef___11932 = (r0);
// base/pxt-helpers.ts(214,17): if (aIsUndef && bIsUndef) return 0;...
    s.tmp_0 = r0 = s.aIsUndef___11928;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.bIsUndef___11932;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// base/pxt-helpers.ts(214,43): return 0;
    r0 = 0;
    { step = 17; continue; }
    { step = 8; continue; }
  case 3:
// base/pxt-helpers.ts(215,22): if (aIsUndef) return 1;...
    r0 = pxsim_numops_toBoolDecr(s.aIsUndef___11928);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(215,36): return 1;
    r0 = 1;
    { step = 17; continue; }
    { step = 7; continue; }
  case 4:
// base/pxt-helpers.ts(216,22): if (bIsUndef) return -1;
    r0 = pxsim_numops_toBoolDecr(s.bIsUndef___11932);
    if (!r0) { step = 5; continue; }
// base/pxt-helpers.ts(216,36): return -1;
    r0 = -1;
    { step = 17; continue; }
  case 5:
  case 6:
  case 7:
  case 8:
// base/pxt-helpers.ts(218,23): aIsNull = a === null
    r0 = (s.arg0 === null);
    s.aIsNull___11943 = (r0);
// base/pxt-helpers.ts(219,23): bIsNull = b === null
    r0 = (s.arg1 === null);
    s.bIsNull___11947 = (r0);
// base/pxt-helpers.ts(220,17): if (aIsNull && bIsNull) return 0;...
    s.tmp_0 = r0 = s.aIsNull___11943;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = s.tmp_0;
    { step = 10; continue; }
  case 9:
    r0 = s.bIsNull___11947;
  case 10:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 11; continue; }
// base/pxt-helpers.ts(220,41): return 0;
    r0 = 0;
    { step = 17; continue; }
    { step = 16; continue; }
  case 11:
// base/pxt-helpers.ts(221,22): if (aIsNull) return 1;...
    r0 = pxsim_numops_toBoolDecr(s.aIsNull___11943);
    if (!r0) { step = 12; continue; }
// base/pxt-helpers.ts(221,35): return 1;
    r0 = 1;
    { step = 17; continue; }
    { step = 15; continue; }
  case 12:
// base/pxt-helpers.ts(222,22): if (bIsNull) return -1;
    r0 = pxsim_numops_toBoolDecr(s.bIsNull___11947);
    if (!r0) { step = 13; continue; }
// base/pxt-helpers.ts(222,35): return -1;
    r0 = -1;
    { step = 17; continue; }
  case 13:
  case 14:
  case 15:
  case 16:
// base/pxt-helpers.ts(224,17): return (a + "").compare(b + "");
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.tmp_2 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_7);
    s.tmp_5 = r0;
    r0 = pxsim_String_.compare(s.tmp_2, s.tmp_5);
  case 17:
    return leave(s, r0)
  default: oops()
} } }
helpers_arraySort_inline__P11925.info = {"start":5826,"length":636,"line":209,"column":25,"endLine":224,"endColumn":13,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"inline","argumentNames":["a","b"]}

function helpers_arraySort_inline__P11925_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arraySort_inline__P11925, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  aIsUndef___11928: undefined,
  bIsUndef___11932: undefined,
  aIsNull___11943: undefined,
  bIsNull___11947: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_sortHelper__P2128(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___11982 = undefined;
    s.i___11985 = undefined;
    s.j___11991 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(193,9): if (arr.length <= 0 || !callbackfn) {...
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// base/pxt-helpers.ts(194,13): return arr;
    r0 = s.arg0;
    { step = 11; continue; }
  case 3:
  case 4:
// base/pxt-helpers.ts(196,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___11982 = (r0);
// base/pxt-helpers.ts(198,18): i = 0
    s.i___11985 = (0);
// base/pxt-helpers.ts(198,1): for (let i = 0; i < len - 1; ++i) {...
  case 5:
// base/pxt-helpers.ts(198,25): i < len - 1
    s.tmp_1 = r0 = s.i___11985;
    r0 = (s.len___11982 - 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// base/pxt-helpers.ts(199,22): j = i + 1
    r0 = (s.i___11985 + 1);
    s.j___11991 = (r0);
// base/pxt-helpers.ts(199,13): for (let j = i + 1; j < len; ++j) {...
  case 6:
// base/pxt-helpers.ts(199,33): j < len
    r0 = (s.j___11991 < s.len___11982);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// base/pxt-helpers.ts(200,17): if (callbackfn(arr[i], arr[j]) > 0) {...
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___11985);
    s.tmp_3.arg0 = r0;
    r0 = pxsim_Array__getAt(s.arg0, s.j___11991);
    s.tmp_3.arg1 = r0;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 1; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 7; continue; }
// base/pxt-helpers.ts(201,21): swap(arr, i, j)
    s.tmp_4 = helpers_swap__P2127_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.i___11985;
    s.tmp_4.arg2 = s.j___11991;
    s.callLocIdx = 2; s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
  case 7:
  case 8:
// base/pxt-helpers.ts(199,42): ++j
    r0 = (s.j___11991 + 1);
    s.j___11991 = (r0);
    { step = 6; continue; }
  case 9:
// base/pxt-helpers.ts(198,38): ++i
    r0 = (s.i___11985 + 1);
    s.i___11985 = (r0);
    { step = 5; continue; }
  case 10:
// base/pxt-helpers.ts(205,9): return arr;
    r0 = s.arg0;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
helpers_sortHelper__P2128.info = {"start":5176,"length":481,"line":191,"column":4,"endLine":205,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"sortHelper","argumentNames":["arr","callbackfn"]}

function helpers_sortHelper__P2128_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_sortHelper__P2128, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___11982: undefined,
  i___11985: undefined,
  j___11991: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_swap__P2127(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.temp___12020 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(187,13): temp: T = arr[i]
    r0 = pxsim_Array__getAt(s.arg0, s.arg1);
    s.temp___12020 = (r0);
// base/pxt-helpers.ts(188,9): arr[i] = arr[j]
    s.tmp_0 = r0 = s.arg0;
    s.tmp_1 = r0 = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.arg2);
    s.tmp_2 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, s.tmp_1, s.tmp_2);
// base/pxt-helpers.ts(189,9): arr[j] = temp
    r0 = pxsim_Array_.setAt(s.arg0, s.arg2, s.temp___12020);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
helpers_swap__P2127.info = {"start":5030,"length":140,"line":185,"column":4,"endLine":189,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"swap","argumentNames":["arr","i","j"]}

function helpers_swap__P2127_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_swap__P2127, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  temp___12020: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_accessPointPriorities__P1216(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// net/net.ts(182,9): return settings.readJSON(AP_PRI_KEY) || {}
    s.tmp_1 = settings_readJSON__P1088_mk(s);
    s.tmp_1.arg0 = globals.AP_PRI_KEY___2262;
    s.callLocIdx = 232; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtrt.mkMap();
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
net_accessPointPriorities__P1216.info = {"start":5522,"length":98,"line":180,"column":4,"endLine":182,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"accessPointPriorities","argumentNames":[]}

function net_accessPointPriorities__P1216_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_accessPointPriorities__P1216, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function net_Controller_scanNetworks__P1117(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(37,13): this.lastScanResults = this.scanNetworksCore()
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = net_Controller__C1112_v1_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_2.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.scanNetworksCore;
    s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["lastScanResults"] = (s.tmp_1);
// net/controller.ts(38,13): this.emitEvent(ControllerEvent.NewScan)
    s.tmp_0 = net_Controller_emitEvent__P2248_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 1;
    s.callLocIdx = 163; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// net/controller.ts(39,13): return this.lastScanResults
    r0 = s.arg0.fields["lastScanResults"];
    return leave(s, r0)
  default: oops()
} } }
net_Controller_scanNetworks__P1117.info = {"start":973,"length":203,"line":35,"column":8,"endLine":39,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"scanNetworks","argumentNames":["this"]}

function net_Controller_scanNetworks__P1117_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_scanNetworks__P1117, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function net_Controller_scanNetworksCore__P2249(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(43,13): return [];
    r0 = pxsim_Array__mk();
    return leave(s, r0)
  default: oops()
} } }
net_Controller_scanNetworksCore__P2249.info = {"start":1186,"length":82,"line":41,"column":8,"endLine":43,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"scanNetworksCore","argumentNames":["this"]}

function net_Controller_scanNetworksCore__P2249_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_scanNetworksCore__P2249, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_Controller_connectAP__P1127(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(73,54): return false
    r0 = false;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_connectAP__P1127.info = {"start":2063,"length":59,"line":72,"column":8,"endLine":72,"endColumn":67,"fileName":"pxt_modules/net/controller.ts","functionName":"connectAP","argumentNames":["this","bssid","password"]}

function net_Controller_connectAP__P1127_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_connectAP__P1127, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_Controller_emitEvent__P2248(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(29,13): control.raiseEvent(this.eventID, ev)
    r0 = s.arg0.fields["eventID"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_emitEvent__P2248.info = {"start":748,"length":101,"line":27,"column":8,"endLine":29,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"emitEvent","argumentNames":["this","ev"]}

function net_Controller_emitEvent__P2248_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_emitEvent__P2248, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_knownAccessPoints__P1212(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// net/net.ts(156,9): return settings.deviceSecrets.readSecret(AP_SECRETS_KEY) || {};
    s.tmp_1 = settings_SecretStore_readSecret__P1098_mk(s);
    s.tmp_1.arg0 = globals.deviceSecrets___1101;
    s.tmp_1.arg1 = globals.AP_SECRETS_KEY___2261;
    s.tmp_1.arg2 = false;
    s.callLocIdx = 226; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtrt.mkMap();
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
net_knownAccessPoints__P1212.info = {"start":4713,"length":126,"line":154,"column":4,"endLine":156,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"knownAccessPoints","argumentNames":[]}

function net_knownAccessPoints__P1212_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_knownAccessPoints__P1212, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function net_Controller_onEvent__P1116(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(33,13): control.onEvent(this.eventID, ev, h)
    s.tmp_0 = control_onEvent__P389_mk(s);
    r0 = s.arg0.fields["eventID"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.arg2;
    s.tmp_0.arg3 = 16;
    s.callLocIdx = 162; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_onEvent__P1116.info = {"start":859,"length":104,"line":31,"column":8,"endLine":33,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"onEvent","argumentNames":["this","ev","h"]}

function net_Controller_onEvent__P1116_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_onEvent__P1116, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Server_start__P1833(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(538,13): if (this.running) return
    r0 = s.arg0.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(538,31): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(539,13): this.running = true
    r0 = (s.arg0).fields["running"] = (true);
// jacdac/routing.ts(540,13): jacdac.start()
    s.tmp_0 = jacdac_start__P1900_mk(s);
    s.tmp_0.arg0 = undefined;
    s.callLocIdx = 908; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// jacdac/routing.ts(541,13): this.serviceIndex = jacdac.bus.hostServices.length
    s.tmp_0 = r0 = s.arg0;
    r0 = globals.bus___1822.fields["hostServices"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["serviceIndex"] = (s.tmp_1);
// jacdac/routing.ts(542,13): jacdac.bus.hostServices.push(this)
    r0 = globals.bus___1822.fields["hostServices"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.arg0);
// jacdac/routing.ts(543,13): this.log("start")
    s.tmp_0 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "start";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_start__P1833.info = {"start":18261,"length":255,"line":536,"column":8,"endLine":543,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Server_start__P1833_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_start__P1833, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function net_WifiController_constructor__P1970(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_isConnected"] = (false);
// wifi---esp32/controller.ts(10,13): super()
    s.tmp_0 = net_Controller_constructor__P1115_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 1148; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// wifi---esp32/controller.ts(11,13): control.internalOnEvent(_wifi.eventID(), WifiEvent.ScanDone, () => this.scanDone
    r0 = pxsim_pxtcore_mkAction(1, net_WifiController_inline__P12099);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim._wifi.eventID();
    s.tmp_1 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, 1, s.tmp_0, 16);
// wifi---esp32/controller.ts(12,13): control.internalOnEvent(_wifi.eventID(), WifiEvent.Disconnected, () => {
    r0 = pxsim_pxtcore_mkAction(1, net_WifiController_inline__P12107);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim._wifi.eventID();
    s.tmp_1 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, 3, s.tmp_0, 16);
// wifi---esp32/controller.ts(15,13): control.internalOnEvent(_wifi.eventID(), WifiEvent.GotIP, () => {
    r0 = pxsim_pxtcore_mkAction(1, net_WifiController_inline__P12115);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim._wifi.eventID();
    s.tmp_1 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_1, 2, s.tmp_0, 16);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_constructor__P1970.info = {"start":223,"length":415,"line":8,"column":8,"endLine":17,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":["this"]}

function net_WifiController_constructor__P1970_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_constructor__P1970, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_WifiController_inline__P12099(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_WifiController_scanDone__P2536_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 1149; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_inline__P12099.info = {"start":332,"length":21,"line":10,"column":73,"endLine":10,"endColumn":94,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_WifiController_inline__P12099_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_inline__P12099, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_WifiController_inline__P12107(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// wifi---esp32/controller.ts(13,17): this.setConnected(false)
    s.tmp_0 = net_Controller_setConnected__P2247_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = false;
    s.callLocIdx = 1150; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_inline__P12107.info = {"start":432,"length":62,"line":11,"column":77,"endLine":13,"endColumn":13,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_WifiController_inline__P12107_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_inline__P12107, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_WifiController_inline__P12115(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// wifi---esp32/controller.ts(16,17): this.setConnected(true)
    s.tmp_0 = net_Controller_setConnected__P2247_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.tmp_0.arg1 = true;
    s.callLocIdx = 1151; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_inline__P12115.info = {"start":566,"length":61,"line":14,"column":70,"endLine":16,"endColumn":13,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_WifiController_inline__P12115_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_inline__P12115, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_Controller_setConnected__P2247(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(22,13): if (this._isConnected != isConnected) {...
    r0 = s.arg0.fields["_isConnected"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// net/controller.ts(23,17): this._isConnected = isConnected
    r0 = (s.arg0).fields["_isConnected"] = (s.arg1);
// net/controller.ts(24,17): this.emitEvent(isConnected ? ControllerEvent.GotIP : ControllerEvent.LostIP)
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 1; continue; }
    r0 = 2;
    { step = 2; continue; }
  case 1:
    r0 = 3;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.tmp_1 = net_Controller_emitEvent__P2248_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 161; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_setConnected__P2247.info = {"start":475,"length":263,"line":20,"column":8,"endLine":25,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"setConnected","argumentNames":["this","isConnected"]}

function net_Controller_setConnected__P2247_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_setConnected__P2247, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_WifiController_scanDone__P2536(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___12131 = undefined;
    s.i___12143 = undefined;
    s.ap___12151 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(21,19): buf = _wifi.scanResults()
    r0 = pxsim._wifi.scanResults();
    s.buf___12131 = (r0);
// wifi---esp32/controller.ts(22,13): this.networks = []
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["networks"] = (s.tmp_1);
// wifi---esp32/controller.ts(23,13): this.inScan = false
    r0 = (s.arg0).fields["inScan"] = (false);
// wifi---esp32/controller.ts(24,13): if (!buf)...
    r0 = pxsim_numops_toBoolDecr(s.buf___12131);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// wifi---esp32/controller.ts(25,17): return
    { step = 5; continue; }
  case 1:
  case 2:
// wifi---esp32/controller.ts(26,17): i = 0
    s.i___12143 = (0);
// wifi---esp32/controller.ts(28,13): while (i < buf.length) {...
  case 3:
// wifi---esp32/controller.ts(28,20): i < buf.length
    s.tmp_1 = r0 = s.i___12143;
    r0 = pxsim.BufferMethods.length(s.buf___12131);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// wifi---esp32/controller.ts(29,23): ap = net.AccessPoint.fromBuffer(buf.slice(i, entrySize))
    s.tmp_3 = net_AccessPoint_fromBuffer__P1191_mk(s);
    r0 = pxsim.BufferMethods.slice(s.buf___12131, s.i___12143, 48);
    s.tmp_3.arg0 = r0;
    s.callLocIdx = 1152; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.ap___12151 = (r0);
// wifi---esp32/controller.ts(30,17): control.dmesg(`${ap.ssid} [${ap.rssi}dB]`)
    r0 = pxsim_String_.mkEmpty();
    s.tmp_4 = r0;
    r0 = s.ap___12151.fields["ssid"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " [");
    s.tmp_2 = r0;
    r0 = s.ap___12151.fields["rssi"];
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_7);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "dB]");
    s.tmp_0 = r0;
    r0 = pxsim.control.dmesg(s.tmp_0);
// wifi---esp32/controller.ts(31,17): this.networks.push(ap)
    r0 = s.arg0.fields["networks"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.ap___12151);
// wifi---esp32/controller.ts(32,17): i += entrySize
    r0 = (s.i___12143 + 48);
    s.i___12143 = (r0);
    { step = 3; continue; }
  case 4:
// wifi---esp32/controller.ts(34,13): control.dmesg(`scan completed`)
    r0 = pxsim.control.dmesg("scan completed");
// wifi---esp32/controller.ts(35,13): control.raiseEvent(_wifi.eventID(), EV_ScanCompleted)
    r0 = pxsim._wifi.eventID();
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, 1000);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_scanDone__P2536.info = {"start":648,"length":606,"line":19,"column":8,"endLine":35,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"scanDone","argumentNames":["this"]}

function net_WifiController_scanDone__P2536_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_scanDone__P2536, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  buf___12131: undefined,
  i___12143: undefined,
  ap___12151: undefined,
  arg0: undefined,
} }





function net_AccessPoint_fromBuffer__P1191(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.name___12191 = undefined;
    s.endp___12197 = undefined;
    s.res___12213 = undefined;
    s.flags___12226 = undefined;
    s._reserved___12227 = undefined;
    s.rssi___12228 = undefined;
    s.channel___12229 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// net/net.ts(49,19): name = buf.slice(16)
    r0 = pxsim.BufferMethods.slice(s.arg0, 16, -1);
    s.name___12191 = (r0);
// net/net.ts(50,17): endp = name.length - 1
    r0 = pxsim.BufferMethods.length(s.name___12191);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 - 1);
    s.endp___12197 = (r0);
// net/net.ts(51,13): while (endp > 0 && name[endp] == 0)...
  case 1:
// net/net.ts(51,20): endp > 0 && name[endp] == 0
    r0 = (s.endp___12197 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim.BufferMethods.getByte(s.name___12191, s.endp___12197);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
// net/net.ts(52,17): endp--
    r0 = (s.endp___12197 - 1);
    s.endp___12197 = (r0);
    { step = 1; continue; }
  case 4:
// net/net.ts(53,13): endp++
    r0 = (s.endp___12197 + 1);
    s.endp___12197 = (r0);
// net/net.ts(54,19): res = new AccessPoint(name.slice(0, endp).toString())
    r0 = pxsim_pxtcore_mkClassInstance(net_AccessPoint__C1185_VT);
    s.tmp_0 = r0;
    s.tmp_1 = net_AccessPoint_constructor__P1190_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    r0 = pxsim.BufferMethods.slice(s.name___12191, 0, s.endp___12197);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_2);
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 214; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.res___12213 = (s.tmp_0);
// net/net.ts(55,20): flags
    s.tmp_1 = helpers_bufferUnpack__P187_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "<IIbB";
    s.tmp_1.arg2 = undefined;
    s.callLocIdx = 215; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.flags___12226 = (r0);
// net/net.ts(55,27): _reserved
    r0 = pxsim_Array__getAt(s.tmp_0, 1);
    s._reserved___12227 = (r0);
// net/net.ts(55,38): rssi
    r0 = pxsim_Array__getAt(s.tmp_0, 2);
    s.rssi___12228 = (r0);
// net/net.ts(55,44): channel
    r0 = pxsim_Array__getAt(s.tmp_0, 3);
    s.channel___12229 = (r0);
// net/net.ts(56,13): res.flags = flags
    r0 = (s.res___12213).fields["flags"] = (s.flags___12226);
// net/net.ts(57,13): res.rssi = rssi
    r0 = (s.res___12213).fields["rssi"] = (s.rssi___12228);
// net/net.ts(58,13): res.channel = channel
    r0 = (s.res___12213).fields["channel"] = (s.channel___12229);
// net/net.ts(59,13): res.bssid = buf.slice(10, 6)
    s.tmp_0 = r0 = s.res___12213;
    r0 = pxsim.BufferMethods.slice(s.arg0, 10, 6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["bssid"] = (s.tmp_1);
// net/net.ts(60,13): if (res.bssid.toArray(NumberFormat.UInt16LE).every(x => x == 0))
    s.tmp_1 = helpers_arrayEvery__P108_mk(s);
    s.tmp_2 = helpers_bufferToArray__P190_mk(s);
    r0 = s.res___12213.fields["bssid"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = 4;
    s.callLocIdx = 216; s.pc = 10; return s.tmp_2;
  case 10:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = net_AccessPoint_fromBuffer_inline__P12249;
    s.callLocIdx = 217; s.pc = 9; return s.tmp_1;
  case 9:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// net/net.ts(61,17): res.bssid = null
    r0 = (s.res___12213).fields["bssid"] = (null);
  case 5:
  case 6:
// net/net.ts(62,13): return res
    r0 = s.res___12213;
    return leave(s, r0)
  default: oops()
} } }
net_AccessPoint_fromBuffer__P1191.info = {"start":1253,"length":622,"line":47,"column":8,"endLine":62,"endColumn":9,"fileName":"pxt_modules/net/net.ts","functionName":"fromBuffer","argumentNames":["buf"]}

function net_AccessPoint_fromBuffer__P1191_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_AccessPoint_fromBuffer__P1191, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  name___12191: undefined,
  endp___12197: undefined,
  res___12213: undefined,
  flags___12226: undefined,
  _reserved___12227: undefined,
  rssi___12228: undefined,
  channel___12229: undefined,
  arg0: undefined,
} }





function net_AccessPoint_fromBuffer_inline__P12249(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = (s.arg0 == 0);
    return leave(s, r0)
  default: oops()
} } }
net_AccessPoint_fromBuffer_inline__P12249.info = {"start":1796,"length":11,"line":59,"column":63,"endLine":59,"endColumn":74,"fileName":"pxt_modules/net/net.ts","functionName":"inline","argumentNames":["x"]}

function net_AccessPoint_fromBuffer_inline__P12249_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_AccessPoint_fromBuffer_inline__P12249, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function helpers_bufferToArray__P190(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.sz___12259 = undefined;
    s.len___12263 = undefined;
    s.r___12268 = undefined;
    s.i___12270 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(188,15): sz = Buffer.sizeOfNumberFormat(format)
    s.tmp_0 = Buffer_sizeOfNumberFormat__P213_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 29; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.sz___12259 = (r0);
// base/buffer.ts(189,15): len = buf.length - sz
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 - s.sz___12259);
    s.len___12263 = (r0);
// base/buffer.ts(190,15): r: number[] = []
    r0 = pxsim_Array__mk();
    s.r___12268 = (r0);
// base/buffer.ts(191,18): i = 0
    s.i___12270 = (0);
// base/buffer.ts(191,9): for (let i = 0; i <= len; i += sz)...
  case 1:
// base/buffer.ts(191,25): i <= len
    r0 = (s.i___12270 <= s.len___12263);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/buffer.ts(192,13): r.push(buf.getNumber(format, i))
    s.tmp_1 = r0 = s.r___12268;
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.arg1, s.i___12270);
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
// base/buffer.ts(191,35): i += sz
    r0 = (s.i___12270 + s.sz___12259);
    s.i___12270 = (r0);
    { step = 1; continue; }
  case 2:
// base/buffer.ts(193,9): return r
    r0 = s.r___12268;
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferToArray__P190.info = {"start":5411,"length":297,"line":186,"column":4,"endLine":193,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferToArray","argumentNames":["buf","format"]}

function helpers_bufferToArray__P190_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferToArray__P190, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  sz___12259: undefined,
  len___12263: undefined,
  r___12268: undefined,
  i___12270: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_arrayEvery__P108(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___12290 = undefined;
    s.i___12293 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(248,13): len = arr.length
    r0 = pxsim_Array__length(s.arg0);
    s.len___12290 = (r0);
// base/pxt-helpers.ts(249,18): i = 0
    s.i___12293 = (0);
// base/pxt-helpers.ts(249,1): for (let i = 0; i < len; ++i)...
  case 1:
// base/pxt-helpers.ts(249,25): i < len
    r0 = (s.i___12293 < s.len___12290);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/pxt-helpers.ts(250,13): if (!callbackfn(arr[i], i))...
    s.tmp_4 = lambda_3_mk(s);
    s.tmp_4.argL = s.arg1;
    r0 = pxsim_Array__getAt(s.arg0, s.i___12293);
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.i___12293;
    setupLambda(s.tmp_4, s.tmp_4.argL);
    s.callLocIdx = 6; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 2; continue; }
// base/pxt-helpers.ts(251,17): return false;
    r0 = false;
    { step = 5; continue; }
  case 2:
  case 3:
// base/pxt-helpers.ts(249,34): ++i
    r0 = (s.i___12293 + 1);
    s.i___12293 = (r0);
    { step = 1; continue; }
  case 4:
// base/pxt-helpers.ts(252,9): return true;
    r0 = true;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayEvery__P108.info = {"start":7135,"length":298,"line":246,"column":4,"endLine":252,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayEvery","argumentNames":["arr","callbackfn"]}

function helpers_arrayEvery__P108_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayEvery__P108, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  len___12290: undefined,
  i___12293: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function helpers_bufferUnpack__P187(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___12313 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(167,9): if (!offset) offset = 0
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/buffer.ts(167,22): offset = 0
    s.arg2 = (0);
  case 1:
  case 2:
// base/buffer.ts(168,13): res: number[] = []
    r0 = pxsim_Array__mk();
    s.res___12313 = (r0);
// base/buffer.ts(169,9): Buffer.__packUnpackCore(format, res, buf, false, offset)
    s.tmp_0 = Buffer___packUnpackCore__P212_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_0.arg1 = s.res___12313;
    s.tmp_0.arg2 = s.arg0;
    s.tmp_0.arg3 = false;
    s.tmp_0.arg4 = s.arg2;
    s.callLocIdx = 28; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// base/buffer.ts(170,9): return res
    r0 = s.res___12313;
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferUnpack__P187.info = {"start":4698,"length":229,"line":165,"column":4,"endLine":170,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferUnpack","argumentNames":["buf","format","offset"]}

function helpers_bufferUnpack__P187_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferUnpack__P187, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  res___12313: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function Buffer___packUnpackCore__P212(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.isBig___12326 = undefined;
    s.idx___12327 = undefined;
    s.i___12328 = undefined;
    s.i0___12339 = undefined;
    s.reps___12347 = undefined;
    s.fmt___12369 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(463,13): isBig = false
    s.isBig___12326 = (false);
// base/buffer.ts(464,13): idx = 0
    s.idx___12327 = (0);
// base/buffer.ts(465,18): i = 0
    s.i___12328 = (0);
// base/buffer.ts(465,9): for (let i = 0; i < format.length; ++i) {...
  case 1:
// base/buffer.ts(465,25): i < format.length
    s.tmp_1 = r0 = s.i___12328;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 23; continue; }
// base/buffer.ts(466,13): switch (format[i]) {...
    r0 = pxsim_String_.charAt(s.arg0, s.i___12328);
    s.tmp_3 = r0;
    r0 = pxsim_pxtcore.switch_eq(" ", s.tmp_3);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq("<", s.tmp_3);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq("=", s.tmp_3);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(">", s.tmp_3);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq("!", s.tmp_3);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_3;
    { step = 7; continue; }
  case 2:
  case 3:
  case 4:
// base/buffer.ts(470,21): isBig = false
    s.isBig___12326 = (false);
// base/buffer.ts(471,21): break
    { step = 22; continue; }
  case 5:
  case 6:
// base/buffer.ts(474,21): isBig = true
    s.isBig___12326 = (true);
// base/buffer.ts(475,21): break
    { step = 22; continue; }
  case 7:
// base/buffer.ts(477,27): i0 = i
    s.i0___12339 = (s.i___12328);
// base/buffer.ts(478,21): while (isDigit(format[i])) i++
  case 8:
// base/buffer.ts(478,28): isDigit(format[i])
    s.tmp_1 = Buffer_isDigit__P2149_mk(s);
    r0 = pxsim_String_.charAt(s.arg0, s.i___12328);
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 44; s.pc = 24; return s.tmp_1;
  case 24:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// base/buffer.ts(478,48): i++
    r0 = (s.i___12328 + 1);
    s.i___12328 = (r0);
    { step = 8; continue; }
  case 9:
// base/buffer.ts(479,25): reps = 1
    s.reps___12347 = (1);
// base/buffer.ts(480,21): if (i0 != i)...
    r0 = (s.i0___12339 != s.i___12328);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// base/buffer.ts(481,25): reps = parseInt(format.slice(i0, i))
    s.tmp_1 = parseInt__P97_mk(s);
    s.tmp_2 = helpers_stringSlice__P119_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.i0___12339;
    s.tmp_2.arg2 = s.i___12328;
    s.callLocIdx = 45; s.pc = 26; return s.tmp_2;
  case 26:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = undefined;
    s.callLocIdx = 46; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
    s.reps___12347 = (r0);
  case 10:
  case 11:
// base/buffer.ts(482,21): if (format[i] == 'x')...
    r0 = pxsim_String_.charAt(s.arg0, s.i___12328);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "x");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
// base/buffer.ts(483,25): off += reps
    r0 = (s.arg4 + s.reps___12347);
    s.arg4 = (r0);
    { step = 21; continue; }
  case 12:
// base/buffer.ts(485,25): while (reps--) {...
  case 13:
// base/buffer.ts(485,32): reps--
    s.tmp_0 = r0 = s.reps___12347;
    r0 = (s.tmp_0 - 1);
    s.reps___12347 = (r0);
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 20; continue; }
// base/buffer.ts(486,33): fmt = getFormat(format[i], isBig)
    s.tmp_1 = Buffer_getFormat__P2148_mk(s);
    r0 = pxsim_String_.charAt(s.arg0, s.i___12328);
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = s.isBig___12326;
    s.callLocIdx = 47; s.pc = 27; return s.tmp_1;
  case 27:
    r0 = s.retval;
    s.fmt___12369 = (r0);
// base/buffer.ts(487,29): if (fmt === null) {...
    r0 = (s.fmt___12369 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 14; continue; }
// base/buffer.ts(488,33): control.fail("Unsupported format character: " + format[i])
    s.tmp_1 = control_fail__P331_mk(s);
    r0 = pxsim_String_.charAt(s.arg0, s.i___12328);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 29);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 29:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("Unsupported format character: ", s.tmp_2);
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 48; s.pc = 28; return s.tmp_1;
  case 28:
    r0 = s.retval;
    { step = 19; continue; }
  case 14:
// base/buffer.ts(490,33): if (buf) {...
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 17; continue; }
// base/buffer.ts(491,37): if (isPack)...
    r0 = pxsim_numops_toBoolDecr(s.arg3);
    if (!r0) { step = 15; continue; }
// base/buffer.ts(492,41): buf.setNumber(fmt, off, nums[idx++])
    s.tmp_0 = r0 = s.idx___12327;
    r0 = (s.tmp_0 + 1);
    s.idx___12327 = (r0);
    s.tmp_1 = r0 = s.arg2;
    s.tmp_2 = r0 = s.fmt___12369;
    s.tmp_3 = r0 = s.arg4;
    r0 = pxsim_Array__getAt(s.arg1, s.tmp_0);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_1, s.tmp_2, s.tmp_3, s.tmp_4);
    { step = 16; continue; }
  case 15:
// base/buffer.ts(494,41): nums.push(buf.getNumber(fmt, off))
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim.BufferMethods.getNumber(s.arg2, s.fmt___12369, s.arg4);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
  case 16:
  case 17:
  case 18:
// base/buffer.ts(497,33): off += sizeOfNumberFormat(fmt)
    s.tmp_0 = r0 = s.arg4;
    s.tmp_2 = Buffer_sizeOfNumberFormat__P213_mk(s);
    s.tmp_2.arg0 = s.fmt___12369;
    s.callLocIdx = 49; s.pc = 30; return s.tmp_2;
  case 30:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.arg4 = (r0);
  case 19:
    { step = 13; continue; }
  case 20:
  case 21:
// base/buffer.ts(500,21): break
  case 22:
// base/buffer.ts(465,44): ++i
    r0 = (s.i___12328 + 1);
    s.i___12328 = (r0);
    { step = 1; continue; }
  case 23:
// base/buffer.ts(503,9): return off
    r0 = s.arg4;
    return leave(s, r0)
  default: oops()
} } }
Buffer___packUnpackCore__P212.info = {"start":13215,"length":1618,"line":461,"column":4,"endLine":503,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"__packUnpackCore","argumentNames":["format","nums","buf","isPack","off"]}

function Buffer___packUnpackCore__P212_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer___packUnpackCore__P212, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  isBig___12326: undefined,
  idx___12327: undefined,
  i___12328: undefined,
  i0___12339: undefined,
  reps___12347: undefined,
  fmt___12369: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function Buffer_getFormat__P2148(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(433,9): switch (pychar) {...
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_pxtcore.switch_eq("B", s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq("b", s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq("H", s.tmp_0);
    if (r0) { step = 3; continue; }
    r0 = pxsim_pxtcore.switch_eq("h", s.tmp_0);
    if (r0) { step = 6; continue; }
    r0 = pxsim_pxtcore.switch_eq("I", s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq("L", s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = pxsim_pxtcore.switch_eq("i", s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq("l", s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq("f", s.tmp_0);
    if (r0) { step = 17; continue; }
    r0 = pxsim_pxtcore.switch_eq("d", s.tmp_0);
    if (r0) { step = 20; continue; }
    r0 = s.tmp_0;
    { step = 23; continue; }
  case 1:
// base/buffer.ts(435,17): return NumberFormat.UInt8LE
    r0 = 2;
    { step = 24; continue; }
  case 2:
// base/buffer.ts(437,17): return NumberFormat.Int8LE
    r0 = 1;
    { step = 24; continue; }
  case 3:
// base/buffer.ts(439,17): return isBig ? NumberFormat.UInt16BE : NumberFormat.UInt16LE
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 4; continue; }
    r0 = 9;
    { step = 5; continue; }
  case 4:
    r0 = 4;
  case 5:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    { step = 24; continue; }
  case 6:
// base/buffer.ts(441,17): return isBig ? NumberFormat.Int16BE : NumberFormat.Int16LE
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 7; continue; }
    r0 = 8;
    { step = 8; continue; }
  case 7:
    r0 = 3;
  case 8:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    { step = 24; continue; }
  case 9:
  case 10:
// base/buffer.ts(444,17): return isBig ? NumberFormat.UInt32BE : NumberFormat.UInt32LE
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 11; continue; }
    r0 = 12;
    { step = 12; continue; }
  case 11:
    r0 = 11;
  case 12:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    { step = 24; continue; }
  case 13:
  case 14:
// base/buffer.ts(447,17): return isBig ? NumberFormat.Int32BE : NumberFormat.Int32LE
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 15; continue; }
    r0 = 10;
    { step = 16; continue; }
  case 15:
    r0 = 5;
  case 16:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
    { step = 24; continue; }
  case 17:
// base/buffer.ts(449,17): return isBig ? NumberFormat.Float32BE : NumberFormat.Float32LE
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 18; continue; }
    r0 = 15;
    { step = 19; continue; }
  case 18:
    r0 = 13;
  case 19:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = s.tmp_5;
    { step = 24; continue; }
  case 20:
// base/buffer.ts(451,17): return isBig ? NumberFormat.Float64BE : NumberFormat.Float64LE
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    if (!r0) { step = 21; continue; }
    r0 = 16;
    { step = 22; continue; }
  case 21:
    r0 = 14;
  case 22:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = s.tmp_6;
    { step = 24; continue; }
  case 23:
// base/buffer.ts(453,17): return null as NumberFormat
    r0 = null;
    { step = 24; continue; }
    r0 = undefined;
  case 24:
    return leave(s, r0)
  default: oops()
} } }
Buffer_getFormat__P2148.info = {"start":12157,"length":928,"line":431,"column":4,"endLine":454,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"getFormat","argumentNames":["pychar","isBig"]}

function Buffer_getFormat__P2148_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_getFormat__P2148, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Buffer_isDigit__P2149(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.code___12440 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(458,15): code = ch.charCodeAt(0)
    r0 = pxsim_String_.charCodeAt(s.arg0, 0);
    s.code___12440 = (r0);
// base/buffer.ts(459,9): return 0x30 <= code && code <= 0x39
    r0 = (48 <= s.code___12440);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.code___12440 <= 57);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
Buffer_isDigit__P2149.info = {"start":13091,"length":118,"line":456,"column":4,"endLine":459,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"isDigit","argumentNames":["ch"]}

function Buffer_isDigit__P2149_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_isDigit__P2149, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  code___12440: undefined,
  arg0: undefined,
} }





function net_AccessPoint_constructor__P1190(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_AccessPoint__C1185_VT)) failedCast(r0);
    r0 = (s.arg0).fields["ssid"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_AccessPoint_constructor__P1190.info = {"start":1208,"length":36,"line":46,"column":8,"endLine":46,"endColumn":44,"fileName":"pxt_modules/net/net.ts","functionName":"inline","argumentNames":["this","ssid"]}

function net_AccessPoint_constructor__P1190_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_AccessPoint_constructor__P1190, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_constructor__P1115(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
    r0 = (s.arg0).fields["_isConnected"] = (false);
// net/controller.ts(18,13): this.eventID = control.allocateEventSource()
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = control_allocateEventSource__P332_mk(s);
    s.callLocIdx = 160; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["eventID"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_constructor__P1115.info = {"start":383,"length":82,"line":16,"column":8,"endLine":18,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"inline","argumentNames":["this"]}

function net_Controller_constructor__P1115_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_constructor__P1115, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function net_Net_constructor__P1205(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Net__C1204_VT)) failedCast(r0);
    r0 = (s.arg0).fields["factory"] = (s.arg1);
// net/net.ts(96,13): Net.instance = this
    globals.net_Net_instance___1206 = (s.arg0);
// net/net.ts(97,13): this._controller = undefined
    r0 = (s.arg0).fields["_controller"] = (undefined);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Net_constructor__P1205.info = {"start":2962,"length":162,"line":94,"column":8,"endLine":97,"endColumn":9,"fileName":"pxt_modules/net/net.ts","functionName":"inline","argumentNames":["this","factory"]}

function net_Net_constructor__P1205_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Net_constructor__P1205, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_start__P1900(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.id___12466 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/routing.ts(1491,9): if (jacdac.bus.running) return
    s.tmp_1 = jacdac_Bus_running__P1809_mk(s);
    s.tmp_1.arg0 = globals.bus___1822;
    s.callLocIdx = 1073; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1491,33): return
    { step = 21; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(1492,1): if (!productIdentifier) {...
    r0 = pxsim_numops_toBoolDecr(globals.productIdentifier___1784);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 5; continue; }
// jacdac/routing.ts(1494,19): id = control.getConfigValue(DAL.CFG_BOOTLOADER_BOARD_ID, 0)
    r0 = pxsim_pxtcore.getConfig(208, 0);
    s.id___12466 = (r0);
// jacdac/routing.ts(1495,13): if (id) productIdentifier = (id & 0x0fffffff) | 0x30000000
    r0 = pxsim_numops_toBoolDecr(s.id___12466);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(1495,21): productIdentifier = (id & 0x0fffffff) | 0x30000000
    r0 = (s.id___12466 & 268435455);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 | 805306368);
    globals.productIdentifier___1784 = (r0);
  case 3:
  case 4:
  case 5:
  case 6:
// jacdac/routing.ts(1499,1): bus.start()
    s.tmp_0 = jacdac_Bus_start__P1810_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.callLocIdx = 1074; s.pc = 23; return s.tmp_0;
  case 23:
    r0 = s.retval;
// jacdac/routing.ts(1501,9): log("jacdac starting")
    s.tmp_0 = jacdac_log__P2472_mk(s);
    s.tmp_0.arg0 = "jacdac starting";
    s.callLocIdx = 1075; s.pc = 24; return s.tmp_0;
  case 24:
    r0 = s.retval;
// jacdac/routing.ts(1502,9): options = options || {}
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    r0 = pxsim_pxtrt.mkMap();
  case 8:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.arg0 = (s.tmp_1);
// jacdac/routing.ts(1503,9): if (options.disableBrain === undefined)...
    s.tmp_2 = if_disableBrain_1_mk(s);
    s.tmp_2.arg0 = s.arg0;
    if (!s.tmp_2.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_2.arg0, "disableBrain");
    } else {
      s.tmp_2.fn = s.tmp_2.arg0.vtable.iface["disableBrain"];
      if (s.tmp_2.fn == null) { s.retval = s.tmp_2.arg0.fields["disableBrain"]; }
      else if (!s.tmp_2.fn.isGetter) { s.retval = bind(s.tmp_2); }
     else { s.callLocIdx = 1076; s.pc = 25; return s.tmp_2; }
    }
  case 25:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// jacdac/routing.ts(1504,13): options.disableBrain = !!options.disableRoleManager
    s.tmp_3 = if_disableBrain_2_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_8 = if_disableRoleManager_1_mk(s);
    s.tmp_8.arg0 = s.arg0;
    if (!s.tmp_8.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_8.arg0, "disableRoleManager");
    } else {
      s.tmp_8.fn = s.tmp_8.arg0.vtable.iface["disableRoleManager"];
      if (s.tmp_8.fn == null) { s.retval = s.tmp_8.arg0.fields["disableRoleManager"]; }
      else if (!s.tmp_8.fn.isGetter) { s.retval = bind(s.tmp_8); }
     else { s.callLocIdx = 1077; s.pc = 27; return s.tmp_8; }
    }
  case 27:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.tmp_3.arg1 = r0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapSetByString(s.tmp_3.arg0, "disableBrain", s.tmp_3.arg1);
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["set/disableBrain"];
      if (s.tmp_3.fn === null) { s.tmp_3.arg0.fields["disableBrain"] = s.tmp_3.arg1; }
      else if (s.tmp_3.fn === undefined) { failedCast(s.tmp_3.arg0) } 
     else { s.callLocIdx = 1078; s.pc = 26; return s.tmp_3; }
    }
  case 26:
    r0 = s.retval;
  case 9:
  case 10:
// jacdac/routing.ts(1507,1): control.internalOnEvent(...
    s.tmp_1 = jacdac___physId__P1366_mk(s);
    s.callLocIdx = 1079; s.pc = 28; return s.tmp_1;
  case 28:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_0, 1, jacdac_consumePackets__P2515, 16);
// jacdac/routing.ts(1512,9): control.internalOnEvent(jacdac.__physId(), EVT_QUEUE_ANNOUNCE, () =>
    s.tmp_1 = jacdac___physId__P1366_mk(s);
    s.callLocIdx = 1080; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_0, 100, jacdac_start_inline__P12505, 16);
// jacdac/routing.ts(1516,9): enablePower(true)
    s.tmp_0 = jacdac_enablePower__P2510_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 1082; s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
// jacdac/routing.ts(1517,9): enablePowerFaultPin()
    s.tmp_0 = jacdac_enablePowerFaultPin__P2511_mk(s);
    s.callLocIdx = 1083; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
// jacdac/routing.ts(1518,9): enableIdentityLED()
    s.tmp_0 = jacdac_enableIdentityLED__P2512_mk(s);
    s.callLocIdx = 1084; s.pc = 32; return s.tmp_0;
  case 32:
    r0 = s.retval;
// jacdac/routing.ts(1520,9): if (!options.disableBrain) new BrainServer().start()
    s.tmp_3 = if_disableBrain_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "disableBrain");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["disableBrain"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["disableBrain"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 1085; s.pc = 33; return s.tmp_3; }
    }
  case 33:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// jacdac/routing.ts(1520,36): new BrainServer().start()
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_BrainServer__C2489_VT);
    s.tmp_4 = r0;
    s.tmp_5 = jacdac_BrainServer_constructor__P2491_mk(s);
    s.tmp_5.arg0 = s.tmp_4;
    s.callLocIdx = 1086; s.pc = 34; return s.tmp_5;
  case 34:
    r0 = s.retval;
    s.tmp_6 = jacdac_Server_start__P1833_mk(s);
    s.tmp_6.arg0 = s.tmp_4;
    s.callLocIdx = 1087; s.pc = 35; return s.tmp_6;
  case 35:
    r0 = s.retval;
  case 11:
  case 12:
// jacdac/routing.ts(1522,9): if (!options.disableLogger) {...
    s.tmp_3 = if_disableLogger_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "disableLogger");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["disableLogger"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["disableLogger"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 1088; s.pc = 36; return s.tmp_3; }
    }
  case 36:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// jacdac/routing.ts(1523,13): console.addListener(function (pri, msg) {...
    s.tmp_4 = console_addListener__P381_mk(s);
    s.tmp_4.arg0 = jacdac_start_inline__P12522;
    s.callLocIdx = 1090; s.pc = 37; return s.tmp_4;
  case 37:
    r0 = s.retval;
// jacdac/routing.ts(1526,13): jacdac.loggerServer.start()
    s.tmp_0 = jacdac_Server_start__P1833_mk(s);
    s.tmp_0.arg0 = globals.loggerServer___1653;
    s.callLocIdx = 1091; s.pc = 38; return s.tmp_0;
  case 38:
    r0 = s.retval;
  case 13:
  case 14:
// jacdac/routing.ts(1528,9): if (!options.disableRoleManager) {...
    s.tmp_3 = if_disableRoleManager_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "disableRoleManager");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["disableRoleManager"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["disableRoleManager"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 1092; s.pc = 39; return s.tmp_3; }
    }
  case 39:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
// jacdac/routing.ts(1529,13): roleManagerServer.start()
    s.tmp_4 = jacdac_Server_start__P1833_mk(s);
    s.tmp_4.arg0 = globals.roleManagerServer___1732;
    s.callLocIdx = 1093; s.pc = 40; return s.tmp_4;
  case 40:
    r0 = s.retval;
  case 15:
  case 16:
// jacdac/routing.ts(1531,9): if (!options.noWait) {...
    s.tmp_3 = if_noWait_1_mk(s);
    s.tmp_3.arg0 = s.arg0;
    if (!s.tmp_3.arg0.vtable.iface) {
      s.retval = pxsim_pxtrt.mapGetByString(s.tmp_3.arg0, "noWait");
    } else {
      s.tmp_3.fn = s.tmp_3.arg0.vtable.iface["noWait"];
      if (s.tmp_3.fn == null) { s.retval = s.tmp_3.arg0.fields["noWait"]; }
      else if (!s.tmp_3.fn.isGetter) { s.retval = bind(s.tmp_3); }
     else { s.callLocIdx = 1094; s.pc = 41; return s.tmp_3; }
    }
  case 41:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
// jacdac/routing.ts(1532,13): log("waiting for devices to enumerate...")
    s.tmp_4 = jacdac_log__P2472_mk(s);
    s.tmp_4.arg0 = "waiting for devices to enumerate...";
    s.callLocIdx = 1095; s.pc = 42; return s.tmp_4;
  case 42:
    r0 = s.retval;
// jacdac/routing.ts(1533,13): pause(1000)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 1000;
    s.callLocIdx = 1096; s.pc = 43; return s.tmp_0;
  case 43:
    r0 = s.retval;
// jacdac/routing.ts(1534,13): if (roleManagerServer.running) roleManagerServer.bindRoles()
    r0 = globals.roleManagerServer___1732.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
// jacdac/routing.ts(1534,44): roleManagerServer.bindRoles()
    s.tmp_1 = jacdac__rolemgr_RoleManagerServer_bindRoles__P1730_mk(s);
    s.tmp_1.arg0 = globals.roleManagerServer___1732;
    s.callLocIdx = 1097; s.pc = 44; return s.tmp_1;
  case 44:
    r0 = s.retval;
  case 17:
  case 18:
  case 19:
  case 20:
// jacdac/routing.ts(1537,1): log("jacdac started")
    s.tmp_0 = jacdac_log__P2472_mk(s);
    s.tmp_0.arg0 = "jacdac started";
    s.callLocIdx = 1098; s.pc = 45; return s.tmp_0;
  case 45:
    r0 = s.retval;
  case 21:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start__P1900.info = {"start":49590,"length":1735,"line":1484,"column":4,"endLine":1537,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["options"]}

function jacdac_start__P1900_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start__P1900, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  id___12466: undefined,
  arg0: undefined,
} }





function jacdac_start_inline__P12505(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = jacdac_Bus_queueAnnounce__P1815_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.callLocIdx = 1081; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start_inline__P12505.info = {"start":50541,"length":44,"line":1511,"column":71,"endLine":1512,"endColumn":38,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_start_inline__P12505_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start_inline__P12505, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_start_inline__P12522(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/routing.ts(1524,17): if (msg[0] != ":") jacdac.loggerServer.add(pri as number, msg)
    r0 = pxsim_String_.charAt(s.arg1, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != ":");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1524,36): jacdac.loggerServer.add(pri as number, msg)
    s.tmp_2 = jacdac_LoggerServer_add__P1652_mk(s);
    s.tmp_2.arg0 = globals.loggerServer___1653;
    s.tmp_2.arg1 = s.arg0;
    s.tmp_2.arg2 = s.arg1;
    s.callLocIdx = 1089; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_start_inline__P12522.info = {"start":50814,"length":114,"line":1522,"column":32,"endLine":1524,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["pri","msg"]}

function jacdac_start_inline__P12522_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_start_inline__P12522, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles__P1730(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.bindings___12559 = undefined;
    s.wraps___12561 = undefined;
    s.cl___12572 = undefined;
    s.unnamed148___U3 = undefined;
    s.unnamed149___U4 = undefined;
    s.b___12581 = undefined;
    s.w___12601 = undefined;
    s.unnamed150___U7 = undefined;
    s.unnamed151___U8 = undefined;
    s.servers___12620 = undefined;
    s.b___12623 = undefined;
    s.unnamed152___U11 = undefined;
    s.unnamed153___U12 = undefined;
    s.hn___12625 = undefined;
    s.h___12629 = undefined;
    s.h___12667 = undefined;
    s.d___12691 = undefined;
    s.unnamed154___U17 = undefined;
    s.unnamed155___U18 = undefined;
    s.dev___12699 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1726_VT)) failedCast(r0);
// jacdac/rolemgr.ts(244,13): if (!this.running) return
    r0 = s.arg0.fields["running"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/rolemgr.ts(244,32): return
    { step = 29; continue; }
  case 1:
  case 2:
// jacdac/rolemgr.ts(245,13): if (jacdac.bus.unattachedClients.length == 0) {...
    r0 = globals.bus___1822.fields["unattachedClients"];
    s.tmp_5 = r0;
    r0 = pxsim_Array__length(s.tmp_5);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == 0);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// jacdac/rolemgr.ts(246,17): this.checkChanges()
    s.tmp_6 = jacdac__rolemgr_RoleManagerServer_checkChanges__P2462_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.callLocIdx = 778; s.pc = 30; return s.tmp_6;
  case 30:
    r0 = s.retval;
// jacdac/rolemgr.ts(247,17): return
    { step = 29; continue; }
  case 3:
  case 4:
// jacdac/rolemgr.ts(253,19): bindings: RoleBinding[] = []
    r0 = pxsim_Array__mk();
    s.bindings___12559 = (r0);
// jacdac/rolemgr.ts(254,19): wraps = bus.devices.map(d => new DeviceWrapper(d))
    s.tmp_0 = helpers_arrayMap__P106_mk(s);
    r0 = globals.bus___1822.fields["devices"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = wraps_inline__P12563;
    s.callLocIdx = 780; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
    s.wraps___12561 = (r0);
// jacdac/rolemgr.ts(256,24): cl
    s.cl___12572 = (undefined);
    r0 = globals.bus___1822.fields["allClients"];
    s.unnamed148___U3 = (r0);
    s.unnamed149___U4 = (0);
// jacdac/rolemgr.ts(256,13): for (const cl of jacdac.bus.allClients) {...
  case 5:
    s.tmp_0 = r0 = s.unnamed149___U4;
    r0 = pxsim_Array__length(s.unnamed148___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 16; continue; }
    r0 = pxsim_Array__getAt(s.unnamed148___U3, s.unnamed149___U4);
    s.cl___12572 = (r0);
// jacdac/rolemgr.ts(257,17): if (!cl.broadcast && cl.role) {...
    r0 = s.cl___12572.fields["broadcast"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (r0) { step = 6; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 6:
    r0 = s.cl___12572.fields["role"];
  case 7:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 14; continue; }
// jacdac/rolemgr.ts(258,27): b = new RoleBinding(cl.role, cl.serviceClass)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_RoleBinding__C2451_VT);
    s.tmp_6 = r0;
    s.tmp_7 = jacdac__rolemgr_RoleBinding_constructor__P2454_mk(s);
    s.tmp_7.arg0 = s.tmp_6;
    r0 = s.cl___12572.fields["role"];
    s.tmp_7.arg1 = r0;
    r0 = s.cl___12572.fields["serviceClass"];
    s.tmp_7.arg2 = r0;
    s.callLocIdx = 781; s.pc = 32; return s.tmp_7;
  case 32:
    r0 = s.retval;
    s.b___12581 = (s.tmp_6);
// jacdac/rolemgr.ts(259,21): if (cl.device) {...
    s.tmp_1 = jacdac_Client_device__P1850_mk(s);
    s.tmp_1.arg0 = s.cl___12572;
    s.callLocIdx = 782; s.pc = 33; return s.tmp_1;
  case 33:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 12; continue; }
// jacdac/rolemgr.ts(260,25): b.boundToDev = cl.device
    s.tmp_2 = r0 = s.b___12581;
    s.tmp_4 = jacdac_Client_device__P1850_mk(s);
    s.tmp_4.arg0 = s.cl___12572;
    s.callLocIdx = 783; s.pc = 34; return s.tmp_4;
  case 34:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["boundToDev"] = (s.tmp_3);
// jacdac/rolemgr.ts(261,25): b.boundToServiceIdx = cl.serviceIndex
    r0 = s.cl___12572.fields["serviceIndex"];
    s.tmp_0 = r0;
    r0 = (s.b___12581).fields["boundToServiceIdx"] = (s.tmp_0);
// jacdac/rolemgr.ts(262,36): w
    s.w___12601 = (undefined);
    s.unnamed150___U7 = (s.wraps___12561);
    s.unnamed151___U8 = (0);
// jacdac/rolemgr.ts(262,25): for (const w of wraps)...
  case 8:
    s.tmp_0 = r0 = s.unnamed151___U8;
    r0 = pxsim_Array__length(s.unnamed150___U7);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 11; continue; }
    r0 = pxsim_Array__getAt(s.unnamed150___U7, s.unnamed151___U8);
    s.w___12601 = (r0);
// jacdac/rolemgr.ts(263,29): if (w.device == cl.device) {...
    r0 = s.w___12601.fields["device"];
    s.tmp_3 = r0;
    s.tmp_5 = jacdac_Client_device__P1850_mk(s);
    s.tmp_5.arg0 = s.cl___12572;
    s.callLocIdx = 784; s.pc = 35; return s.tmp_5;
  case 35:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_3 == s.tmp_4);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 9; continue; }
// jacdac/rolemgr.ts(264,33): w.bindings[cl.serviceIndex] = b
    r0 = s.w___12601.fields["bindings"];
    s.tmp_6 = r0;
    r0 = s.cl___12572.fields["serviceIndex"];
    s.tmp_7 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_6, s.tmp_7, s.b___12581);
// jacdac/rolemgr.ts(265,33): break
    { step = 11; continue; }
  case 9:
  case 10:
    r0 = (s.unnamed151___U8 + 1);
    s.unnamed151___U8 = (r0);
    { step = 8; continue; }
  case 11:
    s.unnamed150___U7 = (undefined);
  case 12:
  case 13:
// jacdac/rolemgr.ts(268,21): bindings.push(b)
    r0 = pxsim_Array__push(s.bindings___12559, s.b___12581);
  case 14:
  case 15:
    r0 = (s.unnamed149___U4 + 1);
    s.unnamed149___U4 = (r0);
    { step = 5; continue; }
  case 16:
    s.unnamed148___U3 = (undefined);
// jacdac/rolemgr.ts(272,17): servers: ServerBindings[] = []
    r0 = pxsim_Array__mk();
    s.servers___12620 = (r0);
// jacdac/rolemgr.ts(275,24): b
    s.b___12623 = (undefined);
    s.unnamed152___U11 = (s.bindings___12559);
    s.unnamed153___U12 = (0);
// jacdac/rolemgr.ts(275,1): for (const b of bindings) {...
  case 17:
    s.tmp_0 = r0 = s.unnamed153___U12;
    r0 = pxsim_Array__length(s.unnamed152___U11);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 20; continue; }
    r0 = pxsim_Array__getAt(s.unnamed152___U11, s.unnamed153___U12);
    s.b___12623 = (r0);
// jacdac/rolemgr.ts(276,23): hn = b.host()
    s.tmp_2 = jacdac__rolemgr_RoleBinding_host__P2452_mk(s);
    s.tmp_2.arg0 = s.b___12623;
    s.callLocIdx = 785; s.pc = 36; return s.tmp_2;
  case 36:
    r0 = s.retval;
    s.hn___12625 = (r0);
// jacdac/rolemgr.ts(277,21): h = servers.find(h => h.host == hn)
    r0 = pxsim_pxtcore_mkAction(1, h_inline__P12632);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.hn___12625);
    s.tmp_1 = helpers_arrayFind__P111_mk(s);
    s.tmp_1.arg0 = s.servers___12620;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 786; s.pc = 37; return s.tmp_1;
  case 37:
    r0 = s.retval;
    s.h___12629 = (r0);
// jacdac/rolemgr.ts(278,17): if (!h) {...
    r0 = pxsim_numops_toBoolDecr(s.h___12629);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
// jacdac/rolemgr.ts(279,21): h = new ServerBindings(hn)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_ServerBindings__C2455_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac__rolemgr_ServerBindings_constructor__P2458_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.tmp_3.arg1 = s.hn___12625;
    s.callLocIdx = 787; s.pc = 38; return s.tmp_3;
  case 38:
    r0 = s.retval;
    s.h___12629 = (s.tmp_2);
// jacdac/rolemgr.ts(280,21): servers.push(h)
    r0 = pxsim_Array__push(s.servers___12620, s.h___12629);
  case 18:
  case 19:
// jacdac/rolemgr.ts(282,17): h.bindings.push(b)
    r0 = s.h___12629.fields["bindings"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.b___12623);
    r0 = (s.unnamed153___U12 + 1);
    s.unnamed153___U12 = (r0);
    { step = 17; continue; }
  case 20:
    s.unnamed152___U11 = (undefined);
// jacdac/rolemgr.ts(286,1): servers = servers.filter(h => !h.fullyBound)
    s.tmp_0 = helpers_arrayFilter__P110_mk(s);
    s.tmp_0.arg0 = s.servers___12620;
    s.tmp_0.arg1 = jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12658;
    s.callLocIdx = 789; s.pc = 39; return s.tmp_0;
  case 39:
    r0 = s.retval;
    s.servers___12620 = (r0);
// jacdac/rolemgr.ts(288,13): while (servers.length > 0) {...
  case 21:
// jacdac/rolemgr.ts(288,20): servers.length > 0
    r0 = pxsim_Array__length(s.servers___12620);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 28; continue; }
// jacdac/rolemgr.ts(291,23): h = maxIn(...
    s.tmp_2 = jacdac__rolemgr_maxIn__P2459_mk(s);
    s.tmp_2.arg0 = s.servers___12620;
    s.tmp_2.arg1 = h_inline__P12671;
    s.tmp_2.arg2 = h_inline__P12681;
    s.callLocIdx = 790; s.pc = 40; return s.tmp_2;
  case 40:
    r0 = s.retval;
    s.h___12667 = (r0);
// jacdac/rolemgr.ts(297,28): d
    s.d___12691 = (undefined);
    s.unnamed154___U17 = (s.wraps___12561);
    s.unnamed155___U18 = (0);
// jacdac/rolemgr.ts(297,17): for (const d of wraps) d.score = h.scoreFor(d)
  case 22:
    s.tmp_0 = r0 = s.unnamed155___U18;
    r0 = pxsim_Array__length(s.unnamed154___U17);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 23; continue; }
    r0 = pxsim_Array__getAt(s.unnamed154___U17, s.unnamed155___U18);
    s.d___12691 = (r0);
// jacdac/rolemgr.ts(297,40): d.score = h.scoreFor(d)
    s.tmp_2 = r0 = s.d___12691;
    s.tmp_4 = jacdac__rolemgr_ServerBindings_scoreFor__P2457_mk(s);
    s.tmp_4.arg0 = s.h___12667;
    s.tmp_4.arg1 = s.d___12691;
    s.tmp_4.arg2 = false;
    s.callLocIdx = 791; s.pc = 41; return s.tmp_4;
  case 41:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["score"] = (s.tmp_3);
    r0 = (s.unnamed155___U18 + 1);
    s.unnamed155___U18 = (r0);
    { step = 22; continue; }
  case 23:
    s.unnamed154___U17 = (undefined);
// jacdac/rolemgr.ts(299,23): dev = maxIn(...
    s.tmp_0 = jacdac__rolemgr_maxIn__P2459_mk(s);
    s.tmp_0.arg0 = s.wraps___12561;
    s.tmp_0.arg1 = dev_inline__P12703;
    s.tmp_0.arg2 = dev_inline__P12711;
    s.callLocIdx = 792; s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
    s.dev___12699 = (r0);
// jacdac/rolemgr.ts(305,17): if (dev.score == 0) {...
    r0 = s.dev___12699.fields["score"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 24; continue; }
// jacdac/rolemgr.ts(307,1): servers.removeElement(h)
    r0 = pxsim_Array_.removeElement(s.servers___12620, s.h___12667);
// jacdac/rolemgr.ts(308,21): continue
    { step = 21; continue; }
  case 24:
  case 25:
// jacdac/rolemgr.ts(312,1): // in list of advertised services...
    s.tmp_0 = helpers_arraySort__P105_mk(s);
    r0 = s.h___12667.fields["bindings"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12732;
    s.callLocIdx = 793; s.pc = 43; return s.tmp_0;
  case 43:
    r0 = s.retval;
// jacdac/rolemgr.ts(316,1): h.scoreFor(dev, true)
    s.tmp_0 = jacdac__rolemgr_ServerBindings_scoreFor__P2457_mk(s);
    s.tmp_0.arg0 = s.h___12667;
    s.tmp_0.arg1 = s.dev___12699;
    s.tmp_0.arg2 = true;
    s.callLocIdx = 794; s.pc = 44; return s.tmp_0;
  case 44:
    r0 = s.retval;
// jacdac/rolemgr.ts(319,1): if (h.fullyBound) servers.removeElement(h)...
    s.tmp_1 = jacdac__rolemgr_ServerBindings_fullyBound__P2456_mk(s);
    s.tmp_1.arg0 = s.h___12667;
    s.callLocIdx = 795; s.pc = 45; return s.tmp_1;
  case 45:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 26; continue; }
// jacdac/rolemgr.ts(319,35): servers.removeElement(h)
    r0 = pxsim_Array_.removeElement(s.servers___12620, s.h___12667);
    { step = 27; continue; }
  case 26:
// jacdac/rolemgr.ts(322,1): // it's unclear we need this...
    r0 = pxsim_pxtcore_mkAction(1, jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12756);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.dev___12699);
    s.tmp_1 = r0 = s.h___12667;
    s.tmp_3 = helpers_arrayFilter__P110_mk(s);
    r0 = s.h___12667.fields["bindings"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.tmp_0;
    s.callLocIdx = 796; s.pc = 46; return s.tmp_3;
  case 46:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["bindings"] = (s.tmp_2);
  case 27:
    { step = 21; continue; }
  case 28:
// jacdac/rolemgr.ts(328,13): this.checkChanges()
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_checkChanges__P2462_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 797; s.pc = 47; return s.tmp_0;
  case 47:
    r0 = s.retval;
  case 29:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles__P1730.info = {"start":8967,"length":3381,"line":242,"column":8,"endLine":328,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"bindRoles","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles__P1730_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles__P1730, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  bindings___12559: undefined,
  wraps___12561: undefined,
  cl___12572: undefined,
  unnamed148___U3: undefined,
  unnamed149___U4: undefined,
  b___12581: undefined,
  w___12601: undefined,
  unnamed150___U7: undefined,
  unnamed151___U8: undefined,
  servers___12620: undefined,
  b___12623: undefined,
  unnamed152___U11: undefined,
  unnamed153___U12: undefined,
  hn___12625: undefined,
  h___12629: undefined,
  h___12667: undefined,
  d___12691: undefined,
  unnamed154___U17: undefined,
  unnamed155___U18: undefined,
  dev___12699: undefined,
  arg0: undefined,
} }





function wraps_inline__P12563(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtcore_mkClassInstance(jacdac__rolemgr_DeviceWrapper__C2449_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac__rolemgr_DeviceWrapper_constructor__P2450_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.callLocIdx = 779; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
wraps_inline__P12563.info = {"start":9386,"length":25,"line":253,"column":42,"endLine":253,"endColumn":67,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["d"]}

function wraps_inline__P12563_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: wraps_inline__P12563, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function h_inline__P12632(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["host"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == s.caps[0]);
    return leave(s, r0)
  default: oops()
} } }
h_inline__P12632.info = {"start":10266,"length":17,"line":276,"column":37,"endLine":276,"endColumn":54,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["h"]}

function h_inline__P12632_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: h_inline__P12632, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12658(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_2 = jacdac__rolemgr_ServerBindings_fullyBound__P2456_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 788; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12658.info = {"start":10563,"length":18,"line":285,"column":37,"endLine":285,"endColumn":55,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["h"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12658_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12658, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function h_inline__P12671(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["bindings"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__length(s.tmp_1);
    s.tmp_0 = r0;
    r0 = s.arg1.fields["bindings"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_0 - s.tmp_2);
    return leave(s, r0)
  default: oops()
} } }
h_inline__P12671.info = {"start":10916,"length":47,"line":292,"column":20,"endLine":292,"endColumn":67,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function h_inline__P12671_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: h_inline__P12671, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function h_inline__P12681(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg1.fields["host"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["host"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.compare(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
h_inline__P12681.info = {"start":10985,"length":32,"line":293,"column":20,"endLine":293,"endColumn":52,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function h_inline__P12681_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: h_inline__P12681, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function dev_inline__P12703(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["score"];
    s.tmp_0 = r0;
    r0 = s.arg1.fields["score"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
dev_inline__P12703.info = {"start":11183,"length":27,"line":300,"column":20,"endLine":300,"endColumn":47,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function dev_inline__P12703_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: dev_inline__P12703, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function dev_inline__P12711(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg1.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_0 = r0;
    r0 = s.arg0.fields["device"];
    r0 = r0.fields["deviceId"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.compare(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
dev_inline__P12711.info = {"start":11232,"length":54,"line":301,"column":20,"endLine":301,"endColumn":74,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function dev_inline__P12711_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: dev_inline__P12711, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12732(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["role"];
    s.tmp_0 = r0;
    r0 = s.arg1.fields["role"];
    s.tmp_1 = r0;
    r0 = pxsim_String_.compare(s.tmp_0, s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12732.info = {"start":11691,"length":32,"line":312,"column":32,"endLine":312,"endColumn":64,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["a","b"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12732_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12732, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12756(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_0 = r0;
    r0 = s.caps[0].fields["device"];
    s.tmp_1 = r0;
    r0 = (s.tmp_0 != s.tmp_1);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12756.info = {"start":12221,"length":31,"line":323,"column":24,"endLine":323,"endColumn":55,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["b"]}

function jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12756_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindRoles_inline__P12756, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_ServerBindings_scoreFor__P2457(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numBound___12767 = undefined;
    s.numPossible___12768 = undefined;
    s.dev___12769 = undefined;
    s.missing___12772 = undefined;
    s.b___12775 = undefined;
    s.unnamed146___U5 = undefined;
    s.unnamed147___U6 = undefined;
    s.sbuf___12790 = undefined;
    s.idx___12793 = undefined;
    s.serviceIndex___12799 = undefined;
    s.serviceClass___12805 = undefined;
    s.i___12811 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C2455_VT)) failedCast(r0);
// jacdac/rolemgr.ts(63,17): numBound = 0
    s.numBound___12767 = (0);
// jacdac/rolemgr.ts(64,17): numPossible = 0
    s.numPossible___12768 = (0);
// jacdac/rolemgr.ts(65,19): dev = devwrap.device
    r0 = s.arg1.fields["device"];
    s.dev___12769 = (r0);
// jacdac/rolemgr.ts(66,19): missing: RoleBinding[] = []
    r0 = pxsim_Array__mk();
    s.missing___12772 = (r0);
// jacdac/rolemgr.ts(67,24): b
    s.b___12775 = (undefined);
    r0 = s.arg0.fields["bindings"];
    s.unnamed146___U5 = (r0);
    s.unnamed147___U6 = (0);
// jacdac/rolemgr.ts(67,13): for (const b of this.bindings) {...
  case 1:
    s.tmp_0 = r0 = s.unnamed147___U6;
    r0 = pxsim_Array__length(s.unnamed146___U5);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 6; continue; }
    r0 = pxsim_Array__getAt(s.unnamed146___U5, s.unnamed147___U6);
    s.b___12775 = (r0);
// jacdac/rolemgr.ts(68,17): if (b.boundToDev) {...
    r0 = s.b___12775.fields["boundToDev"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
// jacdac/rolemgr.ts(69,21): if (b.boundToDev == dev) numBound++
    r0 = s.b___12775.fields["boundToDev"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.dev___12769);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 2; continue; }
// jacdac/rolemgr.ts(69,46): numBound++
    r0 = (s.numBound___12767 + 1);
    s.numBound___12767 = (r0);
  case 2:
  case 3:
    { step = 5; continue; }
  case 4:
// jacdac/rolemgr.ts(71,21): missing.push(b)
    r0 = pxsim_Array__push(s.missing___12772, s.b___12775);
  case 5:
    r0 = (s.unnamed147___U6 + 1);
    s.unnamed147___U6 = (r0);
    { step = 1; continue; }
  case 6:
    s.unnamed146___U5 = (undefined);
// jacdac/rolemgr.ts(75,19): sbuf = dev.services
    r0 = s.dev___12769.fields["services"];
    s.sbuf___12790 = (r0);
// jacdac/rolemgr.ts(76,22): idx = 4
    s.idx___12793 = (4);
// jacdac/rolemgr.ts(76,13): for (let idx = 4; idx < sbuf.length; idx += 4) {...
  case 7:
// jacdac/rolemgr.ts(76,31): idx < sbuf.length
    s.tmp_1 = r0 = s.idx___12793;
    r0 = pxsim.BufferMethods.length(s.sbuf___12790);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
// jacdac/rolemgr.ts(77,23): serviceIndex = idx >> 2
    r0 = (s.idx___12793 >> 2);
    s.serviceIndex___12799 = (r0);
// jacdac/rolemgr.ts(79,1): if (devwrap.bindings[serviceIndex]) continue
    r0 = s.arg1.fields["bindings"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_1, s.serviceIndex___12799);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// jacdac/rolemgr.ts(79,53): continue
    { step = 16; continue; }
  case 8:
  case 9:
// jacdac/rolemgr.ts(81,23): serviceClass = sbuf.getNumber(NumberFormat.UInt32LE, idx)
    r0 = pxsim.BufferMethods.getNumber(s.sbuf___12790, 11, s.idx___12793);
    s.serviceClass___12805 = (r0);
// jacdac/rolemgr.ts(82,26): i = 0
    s.i___12811 = (0);
// jacdac/rolemgr.ts(82,17): for (let i = 0; i < missing.length; ++i) {...
  case 10:
// jacdac/rolemgr.ts(82,33): i < missing.length
    s.tmp_1 = r0 = s.i___12811;
    r0 = pxsim_Array__length(s.missing___12772);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 15; continue; }
// jacdac/rolemgr.ts(83,21): if (missing[i].serviceClass == serviceClass) {...
    r0 = pxsim_Array__getAt(s.missing___12772, s.i___12811);
    r0 = r0.fields["serviceClass"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 == s.serviceClass___12805);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 13; continue; }
// jacdac/rolemgr.ts(85,1): numPossible++
    r0 = (s.numPossible___12768 + 1);
    s.numPossible___12768 = (r0);
// jacdac/rolemgr.ts(86,1): // in fact, assign if requested
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 11; continue; }
// jacdac/rolemgr.ts(88,29): console.add(...
    s.tmp_0 = console_add__P374_mk(s);
    s.tmp_0.arg0 = globals.logPriority___1823;
    r0 = pxsim_Array__getAt(s.missing___12772, s.i___12811);
    r0 = r0.fields["role"];
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat("autobind: ", s.tmp_9);
    s.tmp_8 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, " -> ");
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_5 = r0;
    s.tmp_13 = jacdac_Device_shortId__P1881_mk(s);
    s.tmp_13.arg0 = s.dev___12769;
    s.callLocIdx = 734; s.pc = 25; return s.tmp_13;
  case 25:
    r0 = s.retval;
    s.tmp_12 = r0;
    if ((s.tmp_12) && (s.tmp_12).vtable) {
    setupResume(s, 26);
    pxsim_String__stringConv(s.tmp_12);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_12) + ""; }
  case 26:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_11);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 27);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 27:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, ":");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 28);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 28:
    r0 = s.retval;
    s.tmp_1 = r0;
    if ((s.serviceIndex___12799) && (s.serviceIndex___12799).vtable) {
    setupResume(s, 29);
    pxsim_String__stringConv(s.serviceIndex___12799);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.serviceIndex___12799) + ""; }
  case 29:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_14);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 735; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
// jacdac/rolemgr.ts(97,29): missing[i].select(devwrap, serviceIndex)
    s.tmp_0 = jacdac__rolemgr_RoleBinding_select__P2453_mk(s);
    r0 = pxsim_Array__getAt(s.missing___12772, s.i___12811);
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.serviceIndex___12799;
    s.callLocIdx = 736; s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
  case 11:
  case 12:
// jacdac/rolemgr.ts(100,1): missing.splice(i, 1)
    s.tmp_0 = helpers_arraySplice__P100_mk(s);
    s.tmp_0.arg0 = s.missing___12772;
    s.tmp_0.arg1 = s.i___12811;
    s.tmp_0.arg2 = 1;
    s.callLocIdx = 737; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
// jacdac/rolemgr.ts(102,1): break
    { step = 15; continue; }
  case 13:
  case 14:
// jacdac/rolemgr.ts(82,53): ++i
    r0 = (s.i___12811 + 1);
    s.i___12811 = (r0);
    { step = 10; continue; }
  case 15:
  case 16:
// jacdac/rolemgr.ts(76,50): idx += 4
    r0 = (s.idx___12793 + 4);
    s.idx___12793 = (r0);
    { step = 7; continue; }
  case 17:
// jacdac/rolemgr.ts(108,1): if (numPossible == 0) return 0
    r0 = (s.numPossible___12768 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
// jacdac/rolemgr.ts(108,35): return 0
    r0 = 0;
    { step = 20; continue; }
  case 18:
  case 19:
// jacdac/rolemgr.ts(111,1): // numPossible can't be larger than ~64, leave it a few more bits
    r0 = (s.numBound___12767 << 8);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 | s.numPossible___12768);
  case 20:
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_scoreFor__P2457.info = {"start":2090,"length":2191,"line":61,"column":8,"endLine":112,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"scoreFor","argumentNames":["this","devwrap","select"]}

function jacdac__rolemgr_ServerBindings_scoreFor__P2457_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_scoreFor__P2457, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  numBound___12767: undefined,
  numPossible___12768: undefined,
  dev___12769: undefined,
  missing___12772: undefined,
  b___12775: undefined,
  unnamed146___U5: undefined,
  unnamed147___U6: undefined,
  sbuf___12790: undefined,
  idx___12793: undefined,
  serviceIndex___12799: undefined,
  serviceClass___12805: undefined,
  i___12811: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_RoleBinding_select__P2453(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.dev___12879 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C2451_VT)) failedCast(r0);
// jacdac/rolemgr.ts(39,19): dev = devwrap.device
    r0 = s.arg1.fields["device"];
    s.dev___12879 = (r0);
// jacdac/rolemgr.ts(40,13): if (dev == this.boundToDev && serviceIdx == this.boundToServiceIdx)
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_1 = r0;
    r0 = (s.dev___12879 == s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["boundToServiceIdx"];
    s.tmp_2 = r0;
    r0 = (s.arg2 == s.tmp_2);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// jacdac/rolemgr.ts(41,17): return
    { step = 7; continue; }
  case 3:
  case 4:
// jacdac/rolemgr.ts(42,13): if (this.boundToDev)...
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 5; continue; }
// jacdac/rolemgr.ts(43,17): setRole(this.boundToDev.deviceId, this.boundToServiceIdx, null)
    s.tmp_5 = jacdac__rolemgr_setRole__P1725_mk(s);
    r0 = s.arg0.fields["boundToDev"];
    r0 = r0.fields["deviceId"];
    s.tmp_5.arg0 = r0;
    r0 = s.arg0.fields["boundToServiceIdx"];
    s.tmp_5.arg1 = r0;
    s.tmp_5.arg2 = null;
    s.callLocIdx = 731; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
  case 5:
  case 6:
// jacdac/rolemgr.ts(44,13): devwrap.bindings[serviceIdx] = this
    r0 = s.arg1.fields["bindings"];
    s.tmp_0 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_0, s.arg2, s.arg0);
// jacdac/rolemgr.ts(45,13): setRole(dev.deviceId, serviceIdx, this.role)
    s.tmp_0 = jacdac__rolemgr_setRole__P1725_mk(s);
    r0 = s.dev___12879.fields["deviceId"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg2;
    r0 = s.arg0.fields["role"];
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 732; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// jacdac/rolemgr.ts(46,13): this.boundToDev = dev
    r0 = (s.arg0).fields["boundToDev"] = (s.dev___12879);
// jacdac/rolemgr.ts(47,13): this.boundToServiceIdx = serviceIdx
    r0 = (s.arg0).fields["boundToServiceIdx"] = (s.arg2);
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_select__P2453.info = {"start":1114,"length":504,"line":37,"column":8,"endLine":47,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"select","argumentNames":["this","devwrap","serviceIdx"]}

function jacdac__rolemgr_RoleBinding_select__P2453_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_select__P2453, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  dev___12879: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_setRole__P1725(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.key___12919 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// jacdac/rolemgr.ts(14,15): key = roleSettingPrefix + devid + ":" + servIdx
    if ((globals.roleSettingPrefix___2448) && (globals.roleSettingPrefix___2448).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(globals.roleSettingPrefix___2448);
    checkResumeConsumed();
    return;
    } else { s.retval = (globals.roleSettingPrefix___2448) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_4 = r0;
    if ((s.arg0) && (s.arg0).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.arg0);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg0) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_2, ":");
    s.tmp_1 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_6);
    s.key___12919 = (r0);
// jacdac/rolemgr.ts(15,9): if (role) settings.writeString(key, role)...
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    if (!r0) { step = 1; continue; }
// jacdac/rolemgr.ts(15,19): settings.writeString(key, role)
    s.tmp_0 = settings_writeString__P1082_mk(s);
    s.tmp_0.arg0 = s.key___12919;
    s.tmp_0.arg1 = s.arg2;
    s.callLocIdx = 727; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
// jacdac/rolemgr.ts(16,14): settings.remove(key)
    s.tmp_0 = settings_remove__P1092_mk(s);
    s.tmp_0.arg0 = s.key___12919;
    s.callLocIdx = 728; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 2:
// jacdac/rolemgr.ts(17,9): jacdac.bus.clearAttachCache()
    s.tmp_0 = jacdac_Bus_clearAttachCache__P1813_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.callLocIdx = 729; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_setRole__P1725.info = {"start":364,"length":261,"line":12,"column":4,"endLine":17,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"setRole","argumentNames":["devid","servIdx","role"]}

function jacdac__rolemgr_setRole__P1725_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_setRole__P1725, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  key___12919: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function settings_remove__P1092(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(167,9): _remove(key)
    r0 = pxsim.settings._remove(s.arg0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_remove__P1092.info = {"start":4098,"length":64,"line":165,"column":4,"endLine":167,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"remove","argumentNames":["key"]}

function settings_remove__P1092_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_remove__P1092, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac__rolemgr_maxIn__P2459(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.maxElt___12948 = undefined;
    s.i___12950 = undefined;
    s.c___12956 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// jacdac/rolemgr.ts(121,13): maxElt = arr[0]
    r0 = pxsim_Array__getAt(s.arg0, 0);
    s.maxElt___12948 = (r0);
// jacdac/rolemgr.ts(122,18): i = 1
    s.i___12950 = (1);
// jacdac/rolemgr.ts(122,9): for (let i = 1; i < arr.length; ++i) {...
  case 1:
// jacdac/rolemgr.ts(122,25): i < arr.length
    s.tmp_1 = r0 = s.i___12950;
    r0 = pxsim_Array__length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// jacdac/rolemgr.ts(123,19): c = cmp(maxElt, arr[i])
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg1;
    s.tmp_3.arg0 = s.maxElt___12948;
    r0 = pxsim_Array__getAt(s.arg0, s.i___12950);
    s.tmp_3.arg1 = r0;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 738; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    s.c___12956 = (r0);
// jacdac/rolemgr.ts(124,13): if (c < 0 || (c == 0 && cmdTie(maxElt, arr[i]) < 0)) maxElt = arr[i]
    r0 = (s.c___12956 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 2:
    r0 = (s.c___12956 == 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_1;
    { step = 4; continue; }
  case 3:
    s.tmp_3 = lambda_3_mk(s);
    s.tmp_3.argL = s.arg2;
    s.tmp_3.arg0 = s.maxElt___12948;
    r0 = pxsim_Array__getAt(s.arg0, s.i___12950);
    s.tmp_3.arg1 = r0;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 739; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 < 0);
  case 4:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = s.tmp_4;
  case 5:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 6; continue; }
// jacdac/rolemgr.ts(124,66): maxElt = arr[i]
    r0 = pxsim_Array__getAt(s.arg0, s.i___12950);
    s.maxElt___12948 = (r0);
  case 6:
  case 7:
// jacdac/rolemgr.ts(122,41): ++i
    r0 = (s.i___12950 + 1);
    s.i___12950 = (r0);
    { step = 1; continue; }
  case 8:
// jacdac/rolemgr.ts(126,9): return maxElt
    r0 = s.maxElt___12948;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_maxIn__P2459.info = {"start":4293,"length":356,"line":115,"column":4,"endLine":126,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"maxIn","argumentNames":["arr","cmp","cmdTie"]}

function jacdac__rolemgr_maxIn__P2459_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_maxIn__P2459, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  maxElt___12948: undefined,
  i___12950: undefined,
  c___12956: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_ServerBindings_fullyBound__P2456(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C2455_VT)) failedCast(r0);
// jacdac/rolemgr.ts(56,13): return this.bindings.every(b => b.boundToDev != null)
    s.tmp_0 = helpers_arrayEvery__P108_mk(s);
    r0 = s.arg0.fields["bindings"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = jacdac__rolemgr_ServerBindings_fullyBound_inline__P12985;
    s.callLocIdx = 733; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_fullyBound__P2456.info = {"start":1743,"length":94,"line":54,"column":8,"endLine":56,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"fullyBound","argumentNames":["this"]}
jacdac__rolemgr_ServerBindings_fullyBound__P2456.isGetter = true;

function jacdac__rolemgr_ServerBindings_fullyBound__P2456_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_fullyBound__P2456, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_ServerBindings_fullyBound_inline__P12985(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["boundToDev"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 != null);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_fullyBound_inline__P12985.info = {"start":1801,"length":25,"line":55,"column":39,"endLine":55,"endColumn":64,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["b"]}

function jacdac__rolemgr_ServerBindings_fullyBound_inline__P12985_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_fullyBound_inline__P12985, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_ServerBindings_constructor__P2458(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_ServerBindings__C2455_VT)) failedCast(r0);
    r0 = (s.arg0).fields["host"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["bindings"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_ServerBindings_constructor__P2458.info = {"start":1698,"length":35,"line":52,"column":8,"endLine":52,"endColumn":43,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","host"]}

function jacdac__rolemgr_ServerBindings_constructor__P2458_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_ServerBindings_constructor__P2458, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleBinding_host__P2452(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.slashIdx___12994 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C2451_VT)) failedCast(r0);
// jacdac/rolemgr.ts(33,19): slashIdx = this.role.indexOf("/")
    r0 = s.arg0.fields["role"];
    s.tmp_0 = r0;
    r0 = pxsim_String_.indexOf(s.tmp_0, "/", undefined);
    s.slashIdx___12994 = (r0);
// jacdac/rolemgr.ts(34,13): if (slashIdx < 0) return this.role...
    r0 = (s.slashIdx___12994 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/rolemgr.ts(34,31): return this.role
    r0 = s.arg0.fields["role"];
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
// jacdac/rolemgr.ts(35,18): return this.role.slice(0, slashIdx - 1)
    s.tmp_1 = helpers_stringSlice__P119_mk(s);
    r0 = s.arg0.fields["role"];
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 0;
    r0 = (s.slashIdx___12994 - 1);
    s.tmp_1.arg2 = r0;
    s.callLocIdx = 730; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_host__P2452.info = {"start":930,"length":174,"line":31,"column":8,"endLine":35,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"host","argumentNames":["this"]}

function jacdac__rolemgr_RoleBinding_host__P2452_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_host__P2452, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  slashIdx___12994: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleBinding_constructor__P2454(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleBinding__C2451_VT)) failedCast(r0);
    r0 = (s.arg0).fields["role"] = (s.arg1);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleBinding_constructor__P2454.info = {"start":856,"length":64,"line":29,"column":8,"endLine":29,"endColumn":72,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","role","serviceClass"]}

function jacdac__rolemgr_RoleBinding_constructor__P2454_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleBinding_constructor__P2454, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac__rolemgr_DeviceWrapper_constructor__P2450(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_DeviceWrapper__C2449_VT)) failedCast(r0);
    r0 = (s.arg0).fields["device"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["bindings"] = (s.tmp_1);
    r0 = (s.arg0).fields["score"] = (-1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_DeviceWrapper_constructor__P2450.info = {"start":717,"length":37,"line":22,"column":8,"endLine":22,"endColumn":45,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this","device"]}

function jacdac__rolemgr_DeviceWrapper_constructor__P2450_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_DeviceWrapper_constructor__P2450, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_checkChanges__P2462(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.newHash___13016 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1726_VT)) failedCast(r0);
// jacdac/rolemgr.ts(333,19): newHash = this.bindingHash()
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_bindingHash__P2461_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 798; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.newHash___13016 = (r0);
// jacdac/rolemgr.ts(334,13): if (this._oldBindingsHash !== newHash) {...
    r0 = s.arg0.fields["_oldBindingsHash"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== s.newHash___13016);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/rolemgr.ts(335,17): this._oldBindingsHash = newHash
    r0 = (s.arg0).fields["_oldBindingsHash"] = (s.newHash___13016);
// jacdac/rolemgr.ts(336,17): this.log(`roles: bindings changed`)
    s.tmp_0 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "roles: bindings changed";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// jacdac/rolemgr.ts(337,17): this.sendChangeEvent()
    s.tmp_0 = jacdac_Server_sendChangeEvent__P2385_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 799; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_checkChanges__P2462.info = {"start":12358,"length":416,"line":330,"column":8,"endLine":340,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"checkChanges","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_checkChanges__P2462_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_checkChanges__P2462, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  newHash___13016: undefined,
  arg0: undefined,
} }





function jacdac_Server_sendChangeEvent__P2385(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(402,13): this.sendEvent(SystemEvent.Change)
    s.tmp_0 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 3;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 895; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// jacdac/routing.ts(403,13): this.emit(CHANGE)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___1786;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 896; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_sendChangeEvent__P2385.info = {"start":13937,"length":122,"line":400,"column":8,"endLine":403,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendChangeEvent","argumentNames":["this"]}

function jacdac_Server_sendChangeEvent__P2385_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_sendChangeEvent__P2385, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_bindingHash__P2461(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___13037 = undefined;
    s.n___13038 = undefined;
    s.i___13042 = undefined;
    s.client___13047 = undefined;
    s.buf___13087 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1726_VT)) failedCast(r0);
// jacdac/rolemgr.ts(229,17): r = ""
    r0 = pxsim_String_.mkEmpty();
    s.r___13037 = (r0);
// jacdac/rolemgr.ts(230,19): n = jacdac.bus.allClients.length
    r0 = globals.bus___1822.fields["allClients"];
    s.tmp_0 = r0;
    r0 = pxsim_Array__length(s.tmp_0);
    s.n___13038 = (r0);
// jacdac/rolemgr.ts(231,22): i = 0
    s.i___13042 = (0);
// jacdac/rolemgr.ts(231,13): for (let i = 0; i < n; ++i) {...
  case 1:
// jacdac/rolemgr.ts(231,29): i < n
    r0 = (s.i___13042 < s.n___13038);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// jacdac/rolemgr.ts(232,23): client = jacdac.bus.allClients[i]
    r0 = globals.bus___1822.fields["allClients"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__getAt(s.tmp_1, s.i___13042);
    s.client___13047 = (r0);
// jacdac/rolemgr.ts(233,17): r += `${client.role || ""}:${...
    r0 = s.client___13047.fields["role"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim_String_.mkEmpty();
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.client___13047.fields["broadcast"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBool(s.tmp_2);
    if (!r0) { step = 4; continue; }
    r0 = s.tmp_2;
    { step = 7; continue; }
  case 4:
    s.tmp_4 = jacdac_Client_device__P1850_mk(s);
    s.tmp_4.arg0 = s.client___13047;
    s.callLocIdx = 776; s.pc = 11; return s.tmp_4;
  case 11:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBool(s.tmp_3);
    if (r0) { step = 5; continue; }
    r0 = s.tmp_3;
    { step = 6; continue; }
  case 5:
    s.tmp_5 = jacdac_Client_device__P1850_mk(s);
    s.tmp_5.arg0 = s.client___13047;
    s.callLocIdx = 777; s.pc = 12; return s.tmp_5;
  case 12:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
  case 6:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = s.tmp_6;
  case 7:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (!r0) { step = 8; continue; }
    r0 = s.tmp_7;
    { step = 9; continue; }
  case 8:
    r0 = pxsim_String_.mkEmpty();
  case 9:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    if ((s.r___13037) && (s.r___13037).vtable) {
    setupResume(s, 13);
    pxsim_String__stringConv(s.r___13037);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___13037) + ""; }
  case 13:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_16 = r0;
    if ((s.tmp_1) && (s.tmp_1).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_1) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_17 = r0;
    r0 = pxsim_String__concat(s.tmp_16, s.tmp_17);
    s.tmp_15 = r0;
    r0 = pxsim_String__concat(s.tmp_15, ":");
    s.tmp_14 = r0;
    if ((s.tmp_8) && (s.tmp_8).vtable) {
    setupResume(s, 15);
    pxsim_String__stringConv(s.tmp_8);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_8) + ""; }
  case 15:
    r0 = s.retval;
    s.tmp_18 = r0;
    r0 = pxsim_String__concat(s.tmp_14, s.tmp_18);
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_13, ":");
    s.tmp_12 = r0;
    r0 = s.client___13047.fields["serviceIndex"];
    s.tmp_20 = r0;
    if ((s.tmp_20) && (s.tmp_20).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.tmp_20);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_20) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_19 = r0;
    r0 = pxsim_String__concat(s.tmp_12, s.tmp_19);
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 17);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 17:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_9, s.tmp_10);
    s.r___13037 = (r0);
// jacdac/rolemgr.ts(231,36): ++i
    r0 = (s.i___13042 + 1);
    s.i___13042 = (r0);
    { step = 1; continue; }
  case 10:
// jacdac/rolemgr.ts(239,19): buf = Buffer.fromUTF8(r)
    r0 = pxsim.control.createBufferFromUTF8(s.r___13037);
    s.buf___13087 = (r0);
// jacdac/rolemgr.ts(240,13): return buf.hash(32)
    r0 = pxsim.BufferMethods.hash(s.buf___13087, 32);
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_bindingHash__P2461.info = {"start":8447,"length":510,"line":227,"column":8,"endLine":240,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"bindingHash","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_bindingHash__P2461_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_bindingHash__P2461, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  r___13037: undefined,
  n___13038: undefined,
  i___13042: undefined,
  client___13047: undefined,
  buf___13087: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_constructor__P1728(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1726_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["autoBind"] = (true);
// jacdac/rolemgr.ts(134,13): super("", jacdac.SRV_ROLE_MANAGER)
    s.tmp_2 = jacdac_Server_constructor__P1827_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2.arg1 = r0;
    s.tmp_2.arg2 = 508264038;
    s.callLocIdx = 740; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_constructor__P1728.info = {"start":4784,"length":72,"line":132,"column":8,"endLine":134,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["this"]}

function jacdac__rolemgr_RoleManagerServer_constructor__P1728_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_constructor__P1728, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_LoggerServer_constructor__P1646(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C1644_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = (s.arg0).fields["minPriority"] = (4);
// jacdac/logger-server/server.ts(7,13): super("", jacdac.SRV_LOGGER)
    s.tmp_2 = jacdac_Server_constructor__P1827_mk(s);
    s.tmp_2.arg0 = s.arg0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_2.arg1 = r0;
    s.tmp_2.arg2 = 316415946;
    s.callLocIdx = 712; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
// jacdac/logger-server/server.ts(8,13): this._lastListenerTime = 0
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_constructor__P1646.info = {"start":164,"length":105,"line":5,"column":8,"endLine":8,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_LoggerServer_constructor__P1646_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_constructor__P1646, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_LoggerServer_add__P1652(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___13143 = undefined;
    s.unnamed144___U1 = undefined;
    s.unnamed145___U2 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C1644_VT)) failedCast(r0);
// jacdac/logger-server/server.ts(55,13): if (...
    r0 = s.arg0.fields["running"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_numops_toBoolDecr(s.arg2);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_4;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_String_.length(s.arg2);
    s.tmp_6 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_6);
    s.tmp_5 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_5);
  case 4:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBool(s.tmp_7);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_7;
    { step = 6; continue; }
  case 5:
    s.tmp_10 = jacdac_Bus_running__P1809_mk(s);
    s.tmp_10.arg0 = globals.bus___1822;
    s.callLocIdx = 718; s.pc = 18; return s.tmp_10;
  case 18:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_9);
    s.tmp_8 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_8);
  case 6:
    // jmp value (already in r0)
    s.tmp_11 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_11);
    if (!r0) { step = 7; continue; }
// jacdac/logger-server/server.ts(61,17): return
    { step = 17; continue; }
  case 7:
  case 8:
// jacdac/logger-server/server.ts(62,1): if (priority < this.minPriority || !this._lastListenerTime) return
    r0 = s.arg0.fields["minPriority"];
    s.tmp_13 = r0;
    r0 = (s.arg1 < s.tmp_13);
    s.tmp_12 = r0;
    r0 = pxsim_numops_toBool(s.tmp_12);
    if (!r0) { step = 9; continue; }
    r0 = s.tmp_12;
    { step = 10; continue; }
  case 9:
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_15 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_15);
    s.tmp_14 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_14);
  case 10:
    // jmp value (already in r0)
    s.tmp_16 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_16);
    if (!r0) { step = 11; continue; }
// jacdac/logger-server/server.ts(62,73): return
    { step = 17; continue; }
  case 11:
  case 12:
// jacdac/logger-server/server.ts(65,1): if (control.millis() - this._lastListenerTime > 3000) {
    r0 = pxsim.control.millis();
    s.tmp_19 = r0;
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_20 = r0;
    r0 = (s.tmp_19 - s.tmp_20);
    s.tmp_18 = r0;
    r0 = (s.tmp_18 > 3000);
    s.tmp_17 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_17);
    if (!r0) { step = 13; continue; }
// jacdac/logger-server/server.ts(66,17): this._lastListenerTime = 0
    r0 = (s.arg0).fields["_lastListenerTime"] = (0);
// jacdac/logger-server/server.ts(67,17): this.minPriority = jacdac.LoggerPriority.Silent
    r0 = (s.arg0).fields["minPriority"] = (4);
// jacdac/logger-server/server.ts(68,17): return
    { step = 17; continue; }
  case 13:
  case 14:
// jacdac/logger-server/server.ts(71,24): buf
    s.buf___13143 = (undefined);
    s.tmp_0 = Buffer_chunkedFromUTF8__P207_mk(s);
    s.tmp_0.arg0 = s.arg2;
    s.tmp_0.arg1 = 236;
    s.callLocIdx = 719; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
    s.unnamed144___U1 = (r0);
    s.unnamed145___U2 = (0);
// jacdac/logger-server/server.ts(71,13): for (const buf of Buffer.chunkedFromUTF8(...
  case 15:
    s.tmp_0 = r0 = s.unnamed145___U2;
    r0 = pxsim_Array__length(s.unnamed144___U1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 16; continue; }
    r0 = pxsim_Array__getAt(s.unnamed144___U1, s.unnamed145___U2);
    s.buf___13143 = (r0);
// jacdac/logger-server/server.ts(75,17): this.sendReport(JDPacket.from(LoggerCmd.Debug + priority, buf))
    s.tmp_2 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_3 = jacdac_JDPacket_from__P1418_mk(s);
    r0 = (128 + s.arg1);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.buf___13143;
    s.callLocIdx = 720; s.pc = 21; return s.tmp_3;
  case 21:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 721; s.pc = 20; return s.tmp_2;
  case 20:
    r0 = s.retval;
    r0 = (s.unnamed145___U2 + 1);
    s.unnamed145___U2 = (r0);
    { step = 15; continue; }
  case 16:
    s.unnamed144___U1 = (undefined);
  case 17:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_add__P1652.info = {"start":1995,"length":833,"line":53,"column":8,"endLine":76,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"add","argumentNames":["this","priority","message"]}

function jacdac_LoggerServer_add__P1652_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_add__P1652, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  buf___13143: undefined,
  unnamed144___U1: undefined,
  unnamed145___U2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function Buffer_chunkedFromUTF8__P207(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.chunks___13158 = undefined;
    s.pos___13160 = undefined;
    s.len___13166 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(381,9): if (maxBytes < 3)...
    r0 = (s.arg1 < 3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/buffer.ts(382,13): throw "Oops"
    r0 = pxsim_pxtcore.throwValue("Oops");
  case 1:
  case 2:
// base/buffer.ts(383,15): chunks: Buffer[] = []
    r0 = pxsim_Array__mk();
    s.chunks___13158 = (r0);
// base/buffer.ts(384,13): pos = 0
    s.pos___13160 = (0);
// base/buffer.ts(385,9): while (pos < str.length) {...
  case 3:
// base/buffer.ts(385,16): pos < str.length
    s.tmp_1 = r0 = s.pos___13160;
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/buffer.ts(386,19): len = chunkLen(str, pos, maxBytes)
    s.tmp_3 = Buffer_chunkLen__P2147_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.pos___13160;
    s.tmp_3.arg2 = s.arg1;
    s.callLocIdx = 39; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.len___13166 = (r0);
// base/buffer.ts(387,13): chunks.push(fromUTF8(str.slice(pos, pos + len)))
    s.tmp_0 = r0 = s.chunks___13158;
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.pos___13160;
    r0 = (s.pos___13160 + s.len___13166);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 40; s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
// base/buffer.ts(388,13): pos += len
    r0 = (s.pos___13160 + s.len___13166);
    s.pos___13160 = (r0);
    { step = 3; continue; }
  case 4:
// base/buffer.ts(390,9): return chunks
    r0 = s.chunks___13158;
    return leave(s, r0)
  default: oops()
} } }
Buffer_chunkedFromUTF8__P207.info = {"start":10703,"length":381,"line":379,"column":4,"endLine":390,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"chunkedFromUTF8","argumentNames":["str","maxBytes"]}

function Buffer_chunkedFromUTF8__P207_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_chunkedFromUTF8__P207, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  chunks___13158: undefined,
  pos___13160: undefined,
  len___13166: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Buffer_chunkLen__P2147(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.L___13191 = undefined;
    s.R___13195 = undefined;
    s.m___13213 = undefined;
    s.ll___13222 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(360,13): L = Math.idiv(maxlen, 3)
    r0 = pxsim.Math_.idiv(s.arg2, 3);
    s.L___13191 = (r0);
// base/buffer.ts(361,13): R = maxlen
    s.R___13195 = (s.arg2);
// base/buffer.ts(363,9): if (fromUTF8(s.slice(off, off + R)).length <= maxlen)...
    s.tmp_4 = helpers_stringSlice__P119_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg1;
    r0 = (s.arg1 + s.R___13195);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 37; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/buffer.ts(364,13): return R
    r0 = s.R___13195;
    { step = 9; continue; }
  case 1:
  case 2:
// base/buffer.ts(366,9): while (L < R) {...
  case 3:
// base/buffer.ts(366,16): L < R
    r0 = (s.L___13191 < s.R___13195);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 8; continue; }
// base/buffer.ts(367,19): m = (L + R) >> 1
    r0 = (s.L___13191 + s.R___13195);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 >> 1);
    s.m___13213 = (r0);
// base/buffer.ts(368,13): if (m == L)...
    r0 = (s.m___13213 == s.L___13191);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// base/buffer.ts(369,17): break
    { step = 8; continue; }
  case 4:
  case 5:
// base/buffer.ts(370,19): ll = fromUTF8(s.slice(off, off + m)).length
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.arg1;
    r0 = (s.arg1 + s.m___13213);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 38; s.pc = 11; return s.tmp_3;
  case 11:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    s.ll___13222 = (r0);
// base/buffer.ts(371,13): if (ll <= maxlen)...
    r0 = (s.ll___13222 <= s.arg2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/buffer.ts(372,17): L = m
    s.L___13191 = (s.m___13213);
    { step = 7; continue; }
  case 6:
// base/buffer.ts(374,17): R = m
    s.R___13195 = (s.m___13213);
  case 7:
    { step = 3; continue; }
  case 8:
// base/buffer.ts(377,9): return L
    r0 = s.L___13191;
  case 9:
    return leave(s, r0)
  default: oops()
} } }
Buffer_chunkLen__P2147.info = {"start":10201,"length":496,"line":358,"column":4,"endLine":377,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"chunkLen","argumentNames":["s","off","maxlen"]}

function Buffer_chunkLen__P2147_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_chunkLen__P2147, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  L___13191: undefined,
  R___13195: undefined,
  m___13213: undefined,
  ll___13222: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function console_addListener__P381(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/console.ts(123,9): if (!listener || listeners.indexOf(listener) > -1) return;
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_Array_.indexOf(globals.listeners___2185, s.arg0, undefined);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > -1);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// base/console.ts(123,60): return;
    { step = 5; continue; }
  case 3:
  case 4:
// base/console.ts(124,9): listeners.push(listener)
    r0 = pxsim_Array__push(globals.listeners___2185, s.arg0);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
console_addListener__P381.info = {"start":3558,"length":197,"line":121,"column":4,"endLine":124,"endColumn":5,"fileName":"pxt_modules/base/console.ts","functionName":"addListener","argumentNames":["listener"]}

function console_addListener__P381_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: console_addListener__P381, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_BrainServer_constructor__P2491(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_BrainServer__C2489_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
// jacdac/routing.ts(1241,13): super("brain", SRV_UNIQUE_BRAIN)
    s.tmp_2 = jacdac_Server_constructor__P1827_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "brain";
    s.tmp_2.arg2 = 272387813;
    s.callLocIdx = 1007; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_BrainServer_constructor__P2491.info = {"start":41185,"length":70,"line":1239,"column":8,"endLine":1241,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_BrainServer_constructor__P2491_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_BrainServer_constructor__P2491, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_enableIdentityLED__P2512(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/routing.ts(1404,9): if (pins.pinByCfg(DAL.CFG_PIN_LED)) {...
    r0 = pxsim.pins.pinByCfg(13);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1405,13): log(`enabling identity LED`)
    s.tmp_1 = jacdac_log__P2472_mk(s);
    s.tmp_1.arg0 = "enabling identity LED";
    s.callLocIdx = 1048; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
// jacdac/routing.ts(1406,13): bus.on(IDENTIFY, () =>...
    s.tmp_0 = jacdac_EventSource_on__P1914_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = globals.IDENTIFY___1801;
    s.tmp_0.arg2 = jacdac_enableIdentityLED_inline__P13267;
    s.callLocIdx = 1054; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED__P2512.info = {"start":47276,"length":515,"line":1402,"column":4,"endLine":1416,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enableIdentityLED","argumentNames":[]}

function jacdac_enableIdentityLED__P2512_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED__P2512, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_enableIdentityLED_inline__P13267(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = control_runInBackground__P289_mk(s);
    s.tmp_0.arg0 = jacdac_enableIdentityLED_inline__P13269;
    s.callLocIdx = 1053; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED_inline__P13267.info = {"start":47423,"length":338,"line":1405,"column":29,"endLine":1413,"endColumn":18,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enableIdentityLED_inline__P13267_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED_inline__P13267, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_enableIdentityLED_inline__P13269(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___13270 = undefined;
// jacdac/routing.ts(1408,30): i = 0
    s.i___13270 = (0);
// jacdac/routing.ts(1408,21): for (let i = 0; i < 7; ++i) {...
  case 1:
// jacdac/routing.ts(1408,37): i < 7
    r0 = (s.i___13270 < 7);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(1409,25): setPinByCfg(DAL.CFG_PIN_LED, true)
    s.tmp_1 = jacdac_setPinByCfg__P2509_mk(s);
    s.tmp_1.arg0 = 13;
    s.tmp_1.arg1 = true;
    s.callLocIdx = 1049; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
// jacdac/routing.ts(1410,25): pause(50)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 50;
    s.callLocIdx = 1050; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// jacdac/routing.ts(1411,25): setPinByCfg(DAL.CFG_PIN_LED, false)
    s.tmp_0 = jacdac_setPinByCfg__P2509_mk(s);
    s.tmp_0.arg0 = 13;
    s.tmp_0.arg1 = false;
    s.callLocIdx = 1051; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
// jacdac/routing.ts(1412,25): pause(150)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 150;
    s.callLocIdx = 1052; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
// jacdac/routing.ts(1408,44): ++i
    r0 = (s.i___13270 + 1);
    s.i___13270 = (r0);
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enableIdentityLED_inline__P13269.info = {"start":47469,"length":291,"line":1406,"column":40,"endLine":1413,"endColumn":17,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enableIdentityLED_inline__P13269_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enableIdentityLED_inline__P13269, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  i___13270: undefined,
} }





function jacdac_setPinByCfg__P2509(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pin___13285 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/routing.ts(1367,15): pin = pins.pinByCfg(cfg)
    r0 = pxsim.pins.pinByCfg(s.arg0);
    s.pin___13285 = (r0);
// jacdac/routing.ts(1368,9): if (!pin) return
    r0 = pxsim_numops_toBoolDecr(s.pin___13285);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1368,19): return
    { step = 5; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(1369,9): if (control.getConfigValue(cfg, 0) & DAL.CFG_PIN_CONFIG_ACTIVE_LO)...
    r0 = pxsim_pxtcore.getConfig(s.arg0, 0);
    s.tmp_3 = r0;
    r0 = (s.tmp_3 & 65536);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(1370,13): val = !val
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_4 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_4);
    s.arg1 = (r0);
  case 3:
  case 4:
// jacdac/routing.ts(1371,9): pin.digitalWrite(val)
    r0 = pxsim.DigitalInOutPinMethods.digitalWrite(s.pin___13285, s.arg1);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_setPinByCfg__P2509.info = {"start":45768,"length":247,"line":1365,"column":4,"endLine":1371,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"setPinByCfg","argumentNames":["cfg","val"]}

function jacdac_setPinByCfg__P2509_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_setPinByCfg__P2509, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  pin___13285: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_enablePowerFaultPin__P2511(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.faultpin___13303 = undefined;
// jacdac/routing.ts(1381,15): faultpin = pins.pinByCfg(CFG_PIN_JDPWR_FAULT)
    r0 = pxsim.pins.pinByCfg(1105);
    s.faultpin___13303 = (r0);
// jacdac/routing.ts(1382,9): if (faultpin) {...
    r0 = pxsim_numops_toBoolDecr(s.faultpin___13303);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1383,13): log(`enabling power fault pin`)
    s.tmp_0 = jacdac_log__P2472_mk(s);
    s.tmp_0.arg0 = "enabling power fault pin";
    s.callLocIdx = 1041; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// jacdac/routing.ts(1385,1): // (and you should never pull it up to +5V!)...
    r0 = pxsim.DigitalInOutPinMethods.setPull(s.faultpin___13303, 1);
// jacdac/routing.ts(1387,13): faultpin.digitalRead()
    r0 = pxsim.DigitalInOutPinMethods.digitalRead(s.faultpin___13303);
// jacdac/routing.ts(1388,13): jacdac.bus.on(SELF_ANNOUNCE, () => {...
    r0 = pxsim_pxtcore_mkAction(1, jacdac_enablePowerFaultPin_inline__P13320);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.faultpin___13303);
    s.tmp_1 = jacdac_EventSource_on__P1914_mk(s);
    s.tmp_1.arg0 = globals.bus___1822;
    s.tmp_1.arg1 = globals.SELF_ANNOUNCE___1793;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1047; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin__P2511.info = {"start":46230,"length":1040,"line":1379,"column":4,"endLine":1400,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enablePowerFaultPin","argumentNames":[]}

function jacdac_enablePowerFaultPin__P2511_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin__P2511, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  faultpin___13303: undefined,
} }





function jacdac_enablePowerFaultPin_inline__P13320(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/routing.ts(1389,17): if (faultpin.digitalRead() == false) {...
    r0 = pxsim.DigitalInOutPinMethods.digitalRead(s.caps[0]);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == false);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1390,21): control.runInParallel(() => {...
    r0 = pxsim.control.runInParallel(jacdac_enablePowerFaultPin_inline__P13327);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin_inline__P13320.info = {"start":46660,"length":593,"line":1387,"column":41,"endLine":1398,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enablePowerFaultPin_inline__P13320_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin_inline__P13320, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_enablePowerFaultPin_inline__P13327(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/routing.ts(1391,25): control.dmesg("jacdac power overload; restarting power")
    r0 = pxsim.control.dmesg("jacdac power overload; restarting power");
// jacdac/routing.ts(1392,25): enablePower(false)
    s.tmp_0 = jacdac_enablePower__P2510_mk(s);
    s.tmp_0.arg0 = false;
    s.callLocIdx = 1042; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// jacdac/routing.ts(1393,25): setPinByCfg(CFG_PIN_JDPWR_OVERLOAD_LED, true)
    s.tmp_0 = jacdac_setPinByCfg__P2509_mk(s);
    s.tmp_0.arg0 = 1103;
    s.tmp_0.arg1 = true;
    s.callLocIdx = 1043; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// jacdac/routing.ts(1394,25): pause(200)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 200;
    s.callLocIdx = 1044; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// jacdac/routing.ts(1395,1): setPinByCfg(CFG_PIN_JDPWR_OVERLOAD_LED, false)
    s.tmp_0 = jacdac_setPinByCfg__P2509_mk(s);
    s.tmp_0.arg0 = 1103;
    s.tmp_0.arg1 = false;
    s.callLocIdx = 1045; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// jacdac/routing.ts(1396,25): enablePower(true)
    s.tmp_0 = jacdac_enablePower__P2510_mk(s);
    s.tmp_0.arg0 = true;
    s.callLocIdx = 1046; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePowerFaultPin_inline__P13327.info = {"start":46765,"length":455,"line":1389,"column":42,"endLine":1396,"endColumn":21,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_enablePowerFaultPin_inline__P13327_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePowerFaultPin_inline__P13327, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_enablePower__P2510(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/routing.ts(1376,1): // EN active-hi, AP2553A, AP22653A, TPS2553-1...
    s.tmp_0 = jacdac_setPinByCfg__P2509_mk(s);
    s.tmp_0.arg0 = 1104;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 1040; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_enablePower__P2510.info = {"start":46021,"length":203,"line":1373,"column":4,"endLine":1377,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"enablePower","argumentNames":["enabled"]}

function jacdac_enablePower__P2510_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_enablePower__P2510, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_Bus_queueAnnounce__P1815(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ids___13342 = undefined;
    s.buf___13374 = undefined;
    s.i___13380 = undefined;
    s.cl___13406 = undefined;
    s.unnamed158___U4 = undefined;
    s.unnamed159___U5 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(126,19): ids = this.hostServices.map(h =>...
    s.tmp_0 = helpers_arrayMap__P106_mk(s);
    r0 = s.arg0.fields["hostServices"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = ids_inline__P13344;
    s.callLocIdx = 812; s.pc = 15; return s.tmp_0;
  case 15:
    r0 = s.retval;
    s.ids___13342 = (r0);
// jacdac/routing.ts(129,13): if (this.restartCounter < 0xf) this.restartCounter++
    r0 = s.arg0.fields["restartCounter"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 15);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(129,44): this.restartCounter++
    s.tmp_2 = r0 = s.arg0;
    r0 = s.tmp_2.fields["restartCounter"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 1);
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["restartCounter"] = (s.tmp_3);
  case 1:
  case 2:
// jacdac/routing.ts(130,13): ids[0] =...
    s.tmp_1 = jacdac_Bus_isClient__P1814_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 813; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = 2048;
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = r0 = s.ids___13342;
    r0 = s.arg0.fields["restartCounter"];
    s.tmp_8 = r0;
    r0 = (s.tmp_8 | s.tmp_2);
    s.tmp_7 = r0;
    r0 = (s.tmp_7 | 256);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 | 512);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 | 1024);
    s.tmp_4 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_3, 0, s.tmp_4);
// jacdac/routing.ts(136,19): buf = Buffer.create(ids.length * 4)
    r0 = pxsim_Array__length(s.ids___13342);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 * 4);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___13374 = (r0);
// jacdac/routing.ts(137,22): i = 0
    s.i___13380 = (0);
// jacdac/routing.ts(137,13): for (let i = 0; i < ids.length; ++i)...
  case 5:
// jacdac/routing.ts(137,29): i < ids.length
    s.tmp_1 = r0 = s.i___13380;
    r0 = pxsim_Array__length(s.ids___13342);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// jacdac/routing.ts(138,17): buf.setNumber(NumberFormat.UInt32LE, i * 4, ids[i])
    s.tmp_3 = r0 = s.buf___13374;
    r0 = (s.i___13380 * 4);
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.ids___13342, s.i___13380);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_3, 11, s.tmp_4, s.tmp_5);
// jacdac/routing.ts(137,45): ++i
    r0 = (s.i___13380 + 1);
    s.i___13380 = (r0);
    { step = 5; continue; }
  case 6:
// jacdac/routing.ts(139,13): JDPacket.from(SystemCmd.Announce, buf)._sendReport(this.selfDevice)
    s.tmp_0 = jacdac_JDPacket__sendReport__P1458_mk(s);
    s.tmp_1 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_1.arg0 = 0;
    s.tmp_1.arg1 = s.buf___13374;
    s.callLocIdx = 814; s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_2 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 815; s.pc = 19; return s.tmp_2;
  case 19:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 816; s.pc = 17; return s.tmp_0;
  case 17:
    r0 = s.retval;
// jacdac/routing.ts(140,13): this.emit(SELF_ANNOUNCE)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.SELF_ANNOUNCE___1793;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 817; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
// jacdac/routing.ts(141,24): cl
    s.cl___13406 = (undefined);
    r0 = s.arg0.fields["allClients"];
    s.unnamed158___U4 = (r0);
    s.unnamed159___U5 = (0);
// jacdac/routing.ts(141,13): for (const cl of this.allClients) cl.announceCallback()
  case 7:
    s.tmp_0 = r0 = s.unnamed159___U5;
    r0 = pxsim_Array__length(s.unnamed158___U4);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 8; continue; }
    r0 = pxsim_Array__getAt(s.unnamed158___U4, s.unnamed159___U5);
    s.cl___13406 = (r0);
// jacdac/routing.ts(141,47): cl.announceCallback()
    s.tmp_2 = jacdac_Client__C1844_v1_1_mk(s);
    s.tmp_2.arg0 = s.cl___13406;
    if (!checkSubtype(s.tmp_2.arg0, jacdac_Client__C1844_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.announceCallback;
    s.pc = 21; return s.tmp_2;
  case 21:
    r0 = s.retval;
    r0 = (s.unnamed159___U5 + 1);
    s.unnamed159___U5 = (r0);
    { step = 7; continue; }
  case 8:
    s.unnamed158___U4 = (undefined);
// jacdac/routing.ts(142,13): this.gcDevices()
    s.tmp_0 = jacdac_Bus_gcDevices__P2468_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 818; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
// jacdac/routing.ts(145,1): if (this.resetIn)...
    r0 = s.arg0.fields["resetIn"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// jacdac/routing.ts(146,17): JDPacket.from(...
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = s.arg0.fields["resetIn"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_1, s.tmp_2);
    s.tmp_3 = jacdac_JDPacket_sendAsMultiCommand__P1461_mk(s);
    s.tmp_4 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_4.arg0 = 8320;
    s.tmp_5 = jacdac_jdpack__P1468_mk(s);
    s.tmp_5.arg0 = "u32";
    s.tmp_5.arg1 = s.tmp_1;
    s.callLocIdx = 819; s.pc = 25; return s.tmp_5;
  case 25:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 820; s.pc = 24; return s.tmp_4;
  case 24:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = 0;
    s.callLocIdx = 821; s.pc = 23; return s.tmp_3;
  case 23:
    r0 = s.retval;
  case 9:
  case 10:
// jacdac/routing.ts(151,13): if (jacdac.roleManagerServer.autoBind) {...
    r0 = globals.roleManagerServer___1732.fields["autoBind"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 13; continue; }
// jacdac/routing.ts(152,17): this.autoBindCnt++
    s.tmp_1 = r0 = s.arg0;
    r0 = s.tmp_1.fields["autoBindCnt"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 + 1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["autoBindCnt"] = (s.tmp_2);
// jacdac/routing.ts(154,1): if (this.autoBindCnt >= 2) {...
    r0 = s.arg0.fields["autoBindCnt"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// jacdac/routing.ts(155,21): this.autoBindCnt = 0
    r0 = (s.arg0).fields["autoBindCnt"] = (0);
// jacdac/routing.ts(156,21): jacdac.roleManagerServer.bindRoles()
    s.tmp_0 = jacdac__rolemgr_RoleManagerServer_bindRoles__P1730_mk(s);
    s.tmp_0.arg0 = globals.roleManagerServer___1732;
    s.callLocIdx = 822; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
  case 11:
  case 12:
  case 13:
  case 14:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_queueAnnounce__P1815.info = {"start":3861,"length":1483,"line":124,"column":8,"endLine":158,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"queueAnnounce","argumentNames":["this"]}

function jacdac_Bus_queueAnnounce__P1815_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_queueAnnounce__P1815, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  ids___13342: undefined,
  buf___13374: undefined,
  i___13380: undefined,
  cl___13406: undefined,
  unnamed158___U4: undefined,
  unnamed159___U5: undefined,
  arg0: undefined,
} }





function ids_inline__P13344(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["running"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["serviceClass"];
    { step = 2; continue; }
  case 1:
    r0 = -1;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = s.tmp_1;
    return leave(s, r0)
  default: oops()
} } }
ids_inline__P13344.info = {"start":3925,"length":52,"line":125,"column":46,"endLine":126,"endColumn":47,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["h"]}

function ids_inline__P13344_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: ids_inline__P13344, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_sendAsMultiCommand__P1461(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(294,13): this._header[3] |=...
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 | 5);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_0, 3, s.tmp_1);
// jacdac/packet.ts(297,13): this._header.setNumber(NumberFormat.UInt32LE, 4, serviceClass)
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 4, s.arg1);
// jacdac/packet.ts(298,13): this._header.setNumber(NumberFormat.UInt32LE, 8, 0)
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 8, 0);
// jacdac/packet.ts(299,13): this._sendCore()
    s.tmp_0 = jacdac_JDPacket__sendCore__P1457_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 651; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_sendAsMultiCommand__P1461.info = {"start":8894,"length":349,"line":292,"column":8,"endLine":299,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"sendAsMultiCommand","argumentNames":["this","serviceClass"]}

function jacdac_JDPacket_sendAsMultiCommand__P1461_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_sendAsMultiCommand__P1461, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_Bus_gcDevices__P2468(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___13461 = undefined;
    s.cutoff___13464 = undefined;
    s.numdel___13470 = undefined;
    s.i___13471 = undefined;
    s.dev___13478 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(68,19): now = control.millis()
    r0 = pxsim.control.millis();
    s.now___13461 = (r0);
// jacdac/routing.ts(69,19): cutoff = now - 2000
    r0 = (s.now___13461 - 2000);
    s.cutoff___13464 = (r0);
// jacdac/routing.ts(70,13): this.selfDevice.lastSeen = now
    s.tmp_1 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 805; s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0).fields["lastSeen"] = (s.now___13461);
// jacdac/routing.ts(72,17): numdel = 0
    s.numdel___13470 = (0);
// jacdac/routing.ts(73,22): i = 0
    s.i___13471 = (0);
// jacdac/routing.ts(73,13): for (let i = 0; i < this.devices.length; ++i) {...
  case 1:
// jacdac/routing.ts(73,29): i < this.devices.length
    s.tmp_1 = r0 = s.i___13471;
    r0 = s.arg0.fields["devices"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// jacdac/routing.ts(74,23): dev = this.devices[i]
    r0 = s.arg0.fields["devices"];
    s.tmp_4 = r0;
    r0 = pxsim_Array__getAt(s.tmp_4, s.i___13471);
    s.dev___13478 = (r0);
// jacdac/routing.ts(75,17): if (dev.lastSeen < cutoff) {...
    r0 = s.dev___13478.fields["lastSeen"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < s.cutoff___13464);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(76,21): this.devices.splice(i, 1)
    s.tmp_2 = helpers_arraySplice__P100_mk(s);
    r0 = s.arg0.fields["devices"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = s.i___13471;
    s.tmp_2.arg2 = 1;
    s.callLocIdx = 806; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
// jacdac/routing.ts(77,21): i--
    r0 = (s.i___13471 - 1);
    s.i___13471 = (r0);
// jacdac/routing.ts(78,21): dev._destroy()
    s.tmp_0 = jacdac_Device__destroy__P1894_mk(s);
    s.tmp_0.arg0 = s.dev___13478;
    s.callLocIdx = 807; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// jacdac/routing.ts(79,21): numdel++
    r0 = (s.numdel___13470 + 1);
    s.numdel___13470 = (r0);
  case 2:
  case 3:
// jacdac/routing.ts(73,54): ++i
    r0 = (s.i___13471 + 1);
    s.i___13471 = (r0);
    { step = 1; continue; }
  case 4:
// jacdac/routing.ts(82,13): if (numdel) {...
    r0 = pxsim_numops_toBoolDecr(s.numdel___13470);
    if (!r0) { step = 5; continue; }
// jacdac/routing.ts(83,17): this.emit(DEVICE_CHANGE)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.DEVICE_CHANGE___1791;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 808; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
// jacdac/routing.ts(84,17): this.emit(CHANGE)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = globals.CHANGE___1786;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 809; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_gcDevices__P2468.info = {"start":2028,"length":639,"line":66,"column":8,"endLine":85,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"gcDevices","argumentNames":["this"]}

function jacdac_Bus_gcDevices__P2468_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_gcDevices__P2468, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  now___13461: undefined,
  cutoff___13464: undefined,
  numdel___13470: undefined,
  i___13471: undefined,
  dev___13478: undefined,
  arg0: undefined,
} }





function jacdac_Client_announceCallback__P1868(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_announceCallback__P1868.info = {"start":32892,"length":21,"line":990,"column":8,"endLine":990,"endColumn":29,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"announceCallback","argumentNames":["this"]}

function jacdac_Client_announceCallback__P1868_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_announceCallback__P1868, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_Bus_isClient__P1814(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(122,13): return roleManagerServer.running
    r0 = globals.roleManagerServer___1732.fields["running"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Bus_isClient__P1814.info = {"start":3780,"length":71,"line":120,"column":8,"endLine":122,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"isClient","argumentNames":["this"]}
jacdac_Bus_isClient__P1814.isGetter = true;

function jacdac_Bus_isClient__P1814_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_isClient__P1814, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_consumePackets__P2515(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___13512 = undefined;
    s.pkt___13519 = undefined;
// jacdac/routing.ts(1475,9): while (null != (buf = jacdac.__physGetPacket())) {...
  case 1:
// jacdac/routing.ts(1475,16): null != (buf = jacdac.__physGetPacket())
    s.tmp_1 = jacdac___physGetPacket__P1368_mk(s);
    s.callLocIdx = 1069; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.buf___13512 = (r0);
    r0 = (null != s.tmp_0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(1476,19): pkt = JDPacket.fromBinary(buf)
    s.tmp_3 = jacdac_JDPacket_fromBinary__P1417_mk(s);
    s.tmp_3.arg0 = s.buf___13512;
    s.callLocIdx = 1070; s.pc = 4; return s.tmp_3;
  case 4:
    r0 = s.retval;
    s.pkt___13519 = (r0);
// jacdac/routing.ts(1477,13): pkt.timestamp = jacdac.__physGetTimestamp()
    s.tmp_0 = r0 = s.pkt___13519;
    s.tmp_2 = jacdac___physGetTimestamp__P1369_mk(s);
    s.callLocIdx = 1071; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["timestamp"] = (s.tmp_1);
// jacdac/routing.ts(1478,13): jacdac.bus.processPacket(pkt)
    s.tmp_0 = jacdac_Bus_processPacket__P1821_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = s.pkt___13519;
    s.callLocIdx = 1072; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_consumePackets__P2515.info = {"start":49262,"length":273,"line":1472,"column":4,"endLine":1479,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"consumePackets","argumentNames":[]}

function jacdac_consumePackets__P2515_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_consumePackets__P2515, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  buf___13512: undefined,
  pkt___13519: undefined,
} }





function jacdac___physGetTimestamp__P1369(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/jdsim.ts(54,9): if (!recvQ) return 0
    r0 = pxsim_numops_toBoolDecr(globals.recvQ___2306);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/jdsim.ts(54,21): return 0
    r0 = 0;
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/jdsim.ts(55,9): return control.millis()
    r0 = pxsim.control.millis();
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac___physGetTimestamp__P1369.info = {"start":1523,"length":121,"line":52,"column":4,"endLine":55,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physGetTimestamp","argumentNames":[]}

function jacdac___physGetTimestamp__P1369_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physGetTimestamp__P1369, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac_JDPacket_fromBinary__P1417(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___13534 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/packet.ts(48,19): p = new JDPacket()
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_JDPacket__C1412_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_JDPacket_constructor__P2333_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 588; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.p___13534 = (s.tmp_0);
// jacdac/packet.ts(49,13): p._header = buf.slice(0, JD_SERIAL_HEADER_SIZE)
    s.tmp_0 = r0 = s.p___13534;
    r0 = pxsim.BufferMethods.slice(s.arg0, 0, 16);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_header"] = (s.tmp_1);
// jacdac/packet.ts(50,13): p._data = buf.slice(JD_SERIAL_HEADER_SIZE, p._header[12])
    s.tmp_0 = r0 = s.p___13534;
    s.tmp_2 = r0 = s.arg0;
    r0 = s.p___13534.fields["_header"];
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_4, 12);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 16, s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_data"] = (s.tmp_1);
// jacdac/packet.ts(51,13): return p
    r0 = s.p___13534;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_fromBinary__P1417.info = {"start":1503,"length":230,"line":46,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"fromBinary","argumentNames":["buf"]}

function jacdac_JDPacket_fromBinary__P1417_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_fromBinary__P1417, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  p___13534: undefined,
  arg0: undefined,
} }





function jacdac___physGetPacket__P1368(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/jdsim.ts(45,9): if (!recvQ) return undefined
    r0 = pxsim_numops_toBoolDecr(globals.recvQ___2306);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/jdsim.ts(45,21): return undefined
    r0 = undefined;
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/jdsim.ts(46,9): return recvQ.shift()
    s.tmp_2 = helpers_arrayShift__P102_mk(s);
    s.tmp_2.arg0 = globals.recvQ___2306;
    s.callLocIdx = 581; s.pc = 4; return s.tmp_2;
  case 4:
    r0 = s.retval;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
jacdac___physGetPacket__P1368.info = {"start":1286,"length":115,"line":43,"column":4,"endLine":46,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physGetPacket","argumentNames":[]}

function jacdac___physGetPacket__P1368_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physGetPacket__P1368, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function jacdac___physId__P1366(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/jdsim.ts(9,9): return 30
    r0 = 30;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physId__P1366.info = {"start":139,"length":59,"line":7,"column":4,"endLine":9,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physId","argumentNames":[]}

function jacdac___physId__P1366_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physId__P1366, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_Bus_start__P1810(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(61,13): if (this.running) return
    s.tmp_1 = jacdac_Bus_running__P1809_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 802; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(61,31): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(63,13): this.controlServer = new ControlServer()
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ControlServer__C1895_VT);
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_ControlServer_constructor__P1896_mk(s);
    s.tmp_3.arg0 = s.tmp_2;
    s.callLocIdx = 803; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    r0 = (s.arg0).fields["controlServer"] = (s.tmp_2);
// jacdac/routing.ts(64,13): this.controlServer.start()
    s.tmp_0 = jacdac_Server_start__P1833_mk(s);
    r0 = s.arg0.fields["controlServer"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 804; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_start__P1810.info = {"start":1869,"length":149,"line":59,"column":8,"endLine":64,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"start","argumentNames":["this"]}

function jacdac_Bus_start__P1810_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_start__P1810, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_ControlServer_constructor__P1896(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C1895_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
// jacdac/routing.ts(1247,13): super("ctrl", 0)
    s.tmp_2 = jacdac_Server_constructor__P1827_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "ctrl";
    s.tmp_2.arg2 = 0;
    s.callLocIdx = 1008; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_constructor__P1896.info = {"start":41319,"length":54,"line":1245,"column":8,"endLine":1247,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_ControlServer_constructor__P1896_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_constructor__P1896, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_Bus_running__P1809(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
// jacdac/routing.ts(57,13): return !!this.controlServer
    r0 = s.arg0.fields["controlServer"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_Bus_running__P1809.info = {"start":1794,"length":65,"line":55,"column":8,"endLine":57,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"running","argumentNames":["this"]}
jacdac_Bus_running__P1809.isGetter = true;

function jacdac_Bus_running__P1809_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_running__P1809, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_startProxy__P2513(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.statusPhase___13600 = undefined;
    s.sim___13601 = undefined;
    s.phase___13608 = undefined;
    s.r___13610 = undefined;
    s.g___13612 = undefined;
    s.b___13614 = undefined;
// jacdac/routing.ts(1422,1): if (!settings.exists(JACDAC_PROXY_SETTING)) return
    s.tmp_3 = settings_exists__P1093_mk(s);
    s.tmp_3.arg0 = globals.JACDAC_PROXY_SETTING___1899;
    s.callLocIdx = 1055; s.pc = 12; return s.tmp_3;
  case 12:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1422,53): return
    { step = 11; continue; }
  case 1:
  case 2:
// jacdac/routing.ts(1424,9): log(`jacdac starting proxy`)
    s.tmp_4 = jacdac_log__P2472_mk(s);
    s.tmp_4.arg0 = "jacdac starting proxy";
    s.callLocIdx = 1056; s.pc = 13; return s.tmp_4;
  case 13:
    r0 = s.retval;
// jacdac/routing.ts(1426,1): settings.remove(JACDAC_PROXY_SETTING)
    s.tmp_0 = settings_remove__P1092_mk(s);
    s.tmp_0.arg0 = globals.JACDAC_PROXY_SETTING___1899;
    s.callLocIdx = 1057; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
// jacdac/routing.ts(1428,9): start({...
    r0 = pxsim_pxtrt.mkMap();
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "disableLogger", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "disableRoleManager", true);
    r0 = pxsim_pxtrt.mapSetByString(s.tmp_0, "noWait", true);
    s.tmp_1 = jacdac_start__P1900_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 1058; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
// jacdac/routing.ts(1434,9): new ProxyServer().start()
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ProxyServer__C2486_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_ProxyServer_constructor__P2488_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 1059; s.pc = 16; return s.tmp_1;
  case 16:
    r0 = s.retval;
    s.tmp_2 = jacdac_Server_start__P1833_mk(s);
    s.tmp_2.arg0 = s.tmp_0;
    s.callLocIdx = 1060; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
// jacdac/routing.ts(1435,9): jacdac.bus.proxyMode = true
    r0 = (globals.bus___1822).fields["proxyMode"] = (true);
// jacdac/routing.ts(1437,9): jacdac.bus.on(PACKET_PROCESS, () => {...
    s.tmp_0 = jacdac_EventSource_on__P1914_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = globals.PACKET_PROCESS___1794;
    s.tmp_0.arg2 = jacdac_startProxy_inline__P13590;
    s.callLocIdx = 1062; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
// jacdac/routing.ts(1442,1): jacdac.bus.emit(STATUS_EVENT, StatusEvent.ProxyStarted)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = globals.STATUS_EVENT___1800;
    s.tmp_0.arg2 = 200;
    s.callLocIdx = 1063; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
// jacdac/routing.ts(1444,13): statusPhase = 0
    s.statusPhase___13600 = (0);
// jacdac/routing.ts(1445,15): sim = control.deviceDalVersion() == "sim"
    r0 = pxsim.control.deviceDalVersion();
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == "sim");
    s.sim___13601 = (r0);
// jacdac/routing.ts(1448,1): while (true) {...
  case 3:
// jacdac/routing.ts(1448,16): true
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 10; continue; }
// jacdac/routing.ts(1449,13): statusPhase++
    r0 = (s.statusPhase___13600 + 1);
    s.statusPhase___13600 = (r0);
// jacdac/routing.ts(1451,17): phase = statusPhase
    s.phase___13608 = (s.statusPhase___13600);
// jacdac/routing.ts(1452,17): r = sim ? 0xf000 : 0x1600
    r0 = pxsim_numops_toBoolDecr(s.sim___13601);
    if (!r0) { step = 4; continue; }
    r0 = 61440;
    { step = 5; continue; }
  case 4:
    r0 = 5632;
  case 5:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.r___13610 = (s.tmp_0);
// jacdac/routing.ts(1453,17): g = sim ? 0xf000 : 0x0400
    r0 = pxsim_numops_toBoolDecr(s.sim___13601);
    if (!r0) { step = 6; continue; }
    r0 = 61440;
    { step = 7; continue; }
  case 6:
    r0 = 1024;
  case 7:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.g___13612 = (s.tmp_0);
// jacdac/routing.ts(1454,17): b = 0
    s.b___13614 = (0);
// jacdac/routing.ts(1456,13): phase = Math.abs((phase & 31) - 16)
    s.tmp_0 = Math_abs__P128_mk(s);
    r0 = (s.phase___13608 & 31);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 - 16);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1064; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    s.phase___13608 = (r0);
// jacdac/routing.ts(1457,13): if (phase > 15) phase = 15
    r0 = (s.phase___13608 > 15);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 8; continue; }
// jacdac/routing.ts(1457,29): phase = 15
    s.phase___13608 = (15);
  case 8:
  case 9:
// jacdac/routing.ts(1458,13): r = (r * phase) >> 4
    r0 = (s.r___13610 * s.phase___13608);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.r___13610 = (r0);
// jacdac/routing.ts(1459,13): g = (g * phase) >> 4
    r0 = (s.g___13612 * s.phase___13608);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.g___13612 = (r0);
// jacdac/routing.ts(1460,13): b = (b * phase) >> 4
    r0 = (s.b___13614 * s.phase___13608);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 >> 4);
    s.b___13614 = (r0);
// jacdac/routing.ts(1462,13): setLed(r, g, b)
    s.tmp_0 = jacdac_setLed__P1906_mk(s);
    s.tmp_0.arg0 = s.r___13610;
    s.tmp_0.arg1 = s.g___13612;
    s.tmp_0.arg2 = s.b___13614;
    s.callLocIdx = 1065; s.pc = 21; return s.tmp_0;
  case 21:
    r0 = s.retval;
// jacdac/routing.ts(1464,13): pause(100)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 100;
    s.callLocIdx = 1066; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
    { step = 3; continue; }
  case 10:
  case 11:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_startProxy__P2513.info = {"start":47854,"length":1251,"line":1419,"column":4,"endLine":1465,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"startProxy","argumentNames":[]}

function jacdac_startProxy__P2513_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_startProxy__P2513, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  statusPhase___13600: undefined,
  sim___13601: undefined,
  phase___13608: undefined,
  r___13610: undefined,
  g___13612: undefined,
  b___13614: undefined,
} }





function jacdac_startProxy_inline__P13590(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/routing.ts(1438,13): jacdac.bus.emit(STATUS_EVENT, StatusEvent.ProxyPacketReceived)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = globals.STATUS_EVENT___1800;
    s.tmp_0.arg2 = 201;
    s.callLocIdx = 1061; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_startProxy_inline__P13590.info = {"start":48334,"length":92,"line":1436,"column":38,"endLine":1438,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function jacdac_startProxy_inline__P13590_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_startProxy_inline__P13590, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_ProxyServer_constructor__P2488(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ProxyServer__C2486_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["_statusCode"] = (0);
// jacdac/routing.ts(1235,13): super("proxy", SRV_PROXY)
    s.tmp_2 = jacdac_Server_constructor__P1827_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "proxy";
    s.tmp_2.arg2 = 384932169;
    s.callLocIdx = 1006; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ProxyServer_constructor__P2488.info = {"start":41067,"length":63,"line":1233,"column":8,"endLine":1235,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_ProxyServer_constructor__P2488_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ProxyServer_constructor__P2488, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function settings_exists__P1093(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(174,9): return _exists(key)
    r0 = pxsim.settings._exists(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_exists__P1093.info = {"start":4224,"length":71,"line":172,"column":4,"endLine":174,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"exists","argumentNames":["key"]}

function settings_exists__P1093_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_exists__P1093, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_setLed__P1906(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// jacdac/routing.ts(1551,9): _setLedChannel(0, r)
    r0 = pxsim.jacdac._setLedChannel(0, s.arg0);
// jacdac/routing.ts(1552,9): _setLedChannel(1, g)
    r0 = pxsim.jacdac._setLedChannel(1, s.arg1);
// jacdac/routing.ts(1553,9): _setLedChannel(2, b)
    r0 = pxsim.jacdac._setLedChannel(2, s.arg2);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_setLed__P1906.info = {"start":51525,"length":150,"line":1549,"column":4,"endLine":1553,"endColumn":5,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"setLed","argumentNames":["r","g","b"]}

function jacdac_setLed__P1906_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_setLed__P1906, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac___physStart__P1371(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/jdsim.ts(71,9): if (__physIsRunning()) return
    s.tmp_1 = jacdac___physIsRunning__P1370_mk(s);
    s.callLocIdx = 582; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/jdsim.ts(71,32): return
    { step = 3; continue; }
  case 1:
  case 2:
// jacdac/jdsim.ts(72,9): recvQ = []
    r0 = pxsim_Array__mk();
    globals.recvQ___2306 = (r0);
// jacdac/jdsim.ts(73,9): control.simmessages.onReceived("jacdac", buf => {...
    s.tmp_0 = control_simmessages_onReceived__P433_mk(s);
    s.tmp_0.arg0 = "jacdac";
    s.tmp_0.arg1 = jacdac___physStart_inline__P13670;
    s.callLocIdx = 585; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
// jacdac/jdsim.ts(97,1): control.runInParallel(function () {...
    r0 = pxsim.control.runInParallel(jacdac___physStart_inline__P13771);
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart__P1371.info = {"start":1919,"length":1277,"line":69,"column":4,"endLine":102,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physStart","argumentNames":[]}

function jacdac___physStart__P1371_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart__P1371, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function jacdac___physStart_inline__P13670(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.crc___13696 = undefined;
    s.num___13712 = undefined;
    s.b0___13713 = undefined;
    s.tmp___13723 = undefined;
    s.nextoff___13735 = undefined;
    s.skip___13754 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/jdsim.ts(74,13): if (buf[2] + 12 != buf.length) {...
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_3 = r0;
    r0 = (s.tmp_1 != s.tmp_3);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/jdsim.ts(75,17): control.dmesg("bad size in sim jdpkt: " + buf.toHex())
    r0 = pxsim.BufferMethods.toHex(s.arg0);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("bad size in sim jdpkt: ", s.tmp_5);
    s.tmp_4 = r0;
    r0 = pxsim.control.dmesg(s.tmp_4);
// jacdac/jdsim.ts(76,17): buf = buf.slice(0, buf[2] + 12)
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 12);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 0, s.tmp_1);
    s.arg0 = (r0);
  case 1:
  case 2:
// jacdac/jdsim.ts(78,19): crc = jdCrc16(buf.slice(2))
    s.tmp_0 = jacdac_jdCrc16__P2307_mk(s);
    r0 = pxsim.BufferMethods.slice(s.arg0, 2, -1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 583; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.crc___13696 = (r0);
// jacdac/jdsim.ts(79,13): if (buf.getNumber(NumberFormat.UInt16LE, 0) != crc) {...
    r0 = pxsim.BufferMethods.getNumber(s.arg0, 4, 0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != s.crc___13696);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/jdsim.ts(80,17): control.dmesg("bad crc in sim")
    r0 = pxsim.control.dmesg("bad crc in sim");
    { step = 8; continue; }
  case 3:
// jacdac/jdsim.ts(82,21): num = 0
    s.num___13712 = (0);
// jacdac/jdsim.ts(83,23): b0 = buf.slice(0)
    r0 = pxsim.BufferMethods.slice(s.arg0, 0, -1);
    s.b0___13713 = (r0);
// jacdac/jdsim.ts(84,17): while (buf[2] >= 4) {...
  case 4:
// jacdac/jdsim.ts(84,24): buf[2] >= 4
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 4);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// jacdac/jdsim.ts(85,27): tmp = buf.slice(0, buf[12] + 16)
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.arg0, 12);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 + 16);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 0, s.tmp_3);
    s.tmp___13723 = (r0);
// jacdac/jdsim.ts(86,21): recvQ.push(tmp)
    r0 = pxsim_Array__push(globals.recvQ___2306, s.tmp___13723);
// jacdac/jdsim.ts(87,27): nextoff = (buf[12] + 16 + 3) & ~3
    r0 = pxsim.BufferMethods.getByte(s.arg0, 12);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 16);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 + 3);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 & -4);
    s.nextoff___13735 = (r0);
// jacdac/jdsim.ts(88,21): buf.write(12, buf.slice(nextoff))
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.slice(s.arg0, s.nextoff___13735, -1);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.tmp_0, 12, s.tmp_1);
// jacdac/jdsim.ts(89,27): skip = nextoff - 12
    r0 = (s.nextoff___13735 - 12);
    s.skip___13754 = (r0);
// jacdac/jdsim.ts(90,21): if (buf[2] <= skip) break
    r0 = pxsim.BufferMethods.getByte(s.arg0, 2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= s.skip___13754);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// jacdac/jdsim.ts(90,41): break
    { step = 7; continue; }
  case 5:
  case 6:
// jacdac/jdsim.ts(91,21): buf[2] -= skip
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_2, 2);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.skip___13754);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_2, 2, s.tmp_3);
    { step = 4; continue; }
  case 7:
// jacdac/jdsim.ts(93,17): control.raiseEvent(__physId(), 1)
    s.tmp_1 = jacdac___physId__P1366_mk(s);
    s.callLocIdx = 584; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, 1);
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart_inline__P13670.info = {"start":2063,"length":901,"line":72,"column":49,"endLine":94,"endColumn":9,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"inline","argumentNames":["buf"]}

function jacdac___physStart_inline__P13670_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart_inline__P13670, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  crc___13696: undefined,
  num___13712: undefined,
  b0___13713: undefined,
  tmp___13723: undefined,
  nextoff___13735: undefined,
  skip___13754: undefined,
  arg0: undefined,
} }





function jacdac___physStart_inline__P13771(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/jdsim.ts(98,13): while (true) {...
  case 1:
// jacdac/jdsim.ts(98,20): true
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 2; continue; }
// jacdac/jdsim.ts(99,17): control.raiseEvent(__physId(), 100)
    s.tmp_1 = jacdac___physId__P1366_mk(s);
    s.callLocIdx = 586; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(s.tmp_0, 100);
// jacdac/jdsim.ts(100,17): pause(500)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 500;
    s.callLocIdx = 587; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac___physStart_inline__P13771.info = {"start":3046,"length":143,"line":96,"column":30,"endLine":101,"endColumn":9,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"inline","argumentNames":[]}

function jacdac___physStart_inline__P13771_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physStart_inline__P13771, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function control_simmessages_onReceived__P433(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/controlmessage.ts(34,9): if (!channel) return;
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/controlmessage.ts(34,23): return;
    { step = 5; continue; }
  case 1:
  case 2:
// base/controlmessage.ts(36,9): if (!handlers)...
    r0 = pxsim_numops_toBoolDecr(globals.handlers___2213);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 3; continue; }
// base/controlmessage.ts(37,13): handlers = {}
    r0 = pxsim_pxtrt.mkMap();
    globals.handlers___2213 = (r0);
  case 3:
  case 4:
// base/controlmessage.ts(38,9): handlers[channel] = handler
    r0 = pxsim_pxtrt.mapSetGeneric(globals.handlers___2213, s.arg0, s.arg1);
// base/controlmessage.ts(39,9): control.onEvent(CONTROL_MESSAGE_EVT_ID, CONTROL_MESSAGE_RECEIVED, consumeMessage
    s.tmp_0 = control_onEvent__P389_mk(s);
    s.tmp_0.arg0 = 2999;
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = control_simmessages_consumeMessages__P2214;
    s.tmp_0.arg3 = 16;
    s.callLocIdx = 126; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_simmessages_onReceived__P433.info = {"start":1063,"length":293,"line":32,"column":4,"endLine":39,"endColumn":5,"fileName":"pxt_modules/base/controlmessage.ts","functionName":"onReceived","argumentNames":["channel","handler"]}

function control_simmessages_onReceived__P433_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_simmessages_onReceived__P433, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function control_simmessages_consumeMessages__P2214(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.channel___13793 = undefined;
    s.msg___13798 = undefined;
    s.handler___13801 = undefined;
// base/controlmessage.ts(17,9): while(true) {...
  case 1:
// base/controlmessage.ts(17,15): true
    r0 = pxsim_numops_toBoolDecr(true);
    if (!r0) { step = 8; continue; }
// base/controlmessage.ts(19,19): channel = peekMessageChannel()
    r0 = pxsim_pxtcore.peekMessageChannel();
    s.channel___13793 = (r0);
// base/controlmessage.ts(20,13): if (!channel) break;
    r0 = pxsim_numops_toBoolDecr(s.channel___13793);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// base/controlmessage.ts(20,27): break;
    { step = 8; continue; }
  case 2:
  case 3:
// base/controlmessage.ts(22,19): msg = readMessageData()
    r0 = pxsim_pxtcore.readMessageData();
    s.msg___13798 = (r0);
// base/controlmessage.ts(24,19): handler = handlers && handlers[channel]
    s.tmp_0 = r0 = globals.handlers___2213;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_0;
    { step = 5; continue; }
  case 4:
    r0 = pxsim_pxtrt.mapGetGeneric(globals.handlers___2213, s.channel___13793);
  case 5:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.handler___13801 = (s.tmp_1);
// base/controlmessage.ts(25,13): if (handler)...
    r0 = pxsim_numops_toBoolDecr(s.handler___13801);
    if (!r0) { step = 6; continue; }
// base/controlmessage.ts(26,17): handler(msg)
    s.tmp_0 = lambda_2_mk(s);
    s.tmp_0.argL = s.handler___13801;
    s.tmp_0.arg0 = s.msg___13798;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 125; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 6:
  case 7:
    { step = 1; continue; }
  case 8:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_simmessages_consumeMessages__P2214.info = {"start":564,"length":414,"line":15,"column":4,"endLine":27,"endColumn":5,"fileName":"pxt_modules/base/controlmessage.ts","functionName":"consumeMessages","argumentNames":[]}

function control_simmessages_consumeMessages__P2214_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_simmessages_consumeMessages__P2214, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  channel___13793: undefined,
  msg___13798: undefined,
  handler___13801: undefined,
} }





function jacdac___physIsRunning__P1370(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/jdsim.ts(63,9): return recvQ != null
    r0 = (globals.recvQ___2306 != null);
    return leave(s, r0)
  default: oops()
} } }
jacdac___physIsRunning__P1370.info = {"start":1743,"length":79,"line":61,"column":4,"endLine":63,"endColumn":5,"fileName":"pxt_modules/jacdac/jdsim.ts","functionName":"__physIsRunning","argumentNames":[]}

function jacdac___physIsRunning__P1370_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac___physIsRunning__P1370, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_Bus_constructor__P1808(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Bus__C1802_VT)) failedCast(r0);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["hostServices"] = (s.tmp_3);
    s.tmp_4 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_5 = r0;
    r0 = (s.tmp_4).fields["devices"] = (s.tmp_5);
    r0 = (s.arg0).fields["restartCounter"] = (0);
    r0 = (s.arg0).fields["resetIn"] = (2000000);
    r0 = (s.arg0).fields["autoBindCnt"] = (0);
    r0 = (s.arg0).fields["_eventCounter"] = (0);
    r0 = (s.arg0).fields["proxyMode"] = (false);
    s.tmp_6 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_7 = r0;
    r0 = (s.tmp_6).fields["unattachedClients"] = (s.tmp_7);
    s.tmp_8 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_9 = r0;
    r0 = (s.tmp_8).fields["allClients"] = (s.tmp_9);
// jacdac/routing.ts(53,13): super()
    s.tmp_10 = jacdac_EventSource_constructor__P1913_mk(s);
    s.tmp_10.arg0 = s.arg0;
    s.callLocIdx = 801; s.pc = 1; return s.tmp_10;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Bus_constructor__P1808.info = {"start":1739,"length":45,"line":51,"column":8,"endLine":53,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this"]}

function jacdac_Bus_constructor__P1808_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Bus_constructor__P1808, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  arg0: undefined,
} }





function settings_initScopes__P2240(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.rn___13818 = undefined;
// settings---esp32/settings.ts(43,15): rn = runNumber() + 1
    s.tmp_1 = settings_runNumber__P1079_mk(s);
    s.callLocIdx = 130; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = (s.tmp_0 + 1);
    s.rn___13818 = (r0);
// settings---esp32/settings.ts(44,9): writeNumber(RUN_KEY, rn)
    s.tmp_0 = settings_writeNumber__P1084_mk(s);
    s.tmp_0.arg0 = globals.RUN_KEY___2228;
    s.tmp_0.arg1 = s.rn___13818;
    s.callLocIdx = 131; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// settings---esp32/settings.ts(46,9): seedAddRandom(control.deviceSerialNumber() & 0x7fffffff)
    r0 = pxsim.control.deviceSerialNumber();
    s.tmp_1 = r0;
    r0 = (s.tmp_1 & 2147483647);
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.seedAddRandom(s.tmp_0);
// settings---esp32/settings.ts(47,9): seedAddRandom(rn)
    r0 = pxsim_pxtcore.seedAddRandom(s.rn___13818);
// settings---esp32/settings.ts(49,9): setScope(control.programName())
    s.tmp_0 = settings_setScope__P2239_mk(s);
    r0 = pxsim_pxtcore.programName();
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 132; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_initScopes__P2240.info = {"start":1104,"length":230,"line":41,"column":4,"endLine":49,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"initScopes","argumentNames":[]}

function settings_initScopes__P2240_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_initScopes__P2240, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  rn___13818: undefined,
} }





function settings_setScope__P2239(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.currScope___13847 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(33,9): if (!scope || scope.length > 100)...
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 100);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// settings---esp32/settings.ts(34,13): control.panic(922)
    r0 = pxsim_pxtrt.panic(922);
  case 3:
  case 4:
// settings---esp32/settings.ts(35,15): currScope = readString(SCOPE_KEY)
    s.tmp_0 = settings_readString__P1087_mk(s);
    s.tmp_0.arg0 = globals.SCOPE_KEY___2229;
    s.callLocIdx = 128; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    s.currScope___13847 = (r0);
// settings---esp32/settings.ts(36,9): if (currScope != scope) {...
    r0 = (s.currScope___13847 != s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// settings---esp32/settings.ts(37,13): _userClean()
    r0 = pxsim.settings._userClean();
// settings---esp32/settings.ts(38,13): writeString(SCOPE_KEY, scope)
    s.tmp_0 = settings_writeString__P1082_mk(s);
    s.tmp_0.arg0 = globals.SCOPE_KEY___2229;
    s.tmp_0.arg1 = s.arg0;
    s.callLocIdx = 129; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
  case 5:
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_setScope__P2239.info = {"start":826,"length":272,"line":31,"column":4,"endLine":39,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"setScope","argumentNames":["scope"]}

function settings_setScope__P2239_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_setScope__P2239, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  currScope___13847: undefined,
  arg0: undefined,
} }





function settings_runNumber__P1079(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// settings---esp32/settings.ts(29,9): return readNumber(RUN_KEY) || 0
    s.tmp_1 = settings_readNumber__P1089_mk(s);
    s.tmp_1.arg0 = globals.RUN_KEY___2228;
    s.callLocIdx = 127; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leave(s, r0)
  default: oops()
} } }
settings_runNumber__P1079.info = {"start":745,"length":75,"line":27,"column":4,"endLine":29,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"runNumber","argumentNames":[]}

function settings_runNumber__P1079_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_runNumber__P1079, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
} }





function settings_readNumber__P1089(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___13865 = undefined;
    s.nums___13872 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(133,15): buf = readBuffer(key)
    s.tmp_0 = settings_readBuffer__P1086_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 142; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.buf___13865 = (r0);
// settings---esp32/settings.ts(134,9): if (!buf)...
    r0 = pxsim_numops_toBoolDecr(s.buf___13865);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// settings---esp32/settings.ts(135,13): return undefined
    r0 = undefined;
    { step = 7; continue; }
    { step = 6; continue; }
  case 1:
// settings---esp32/settings.ts(137,19): nums = msgpack.unpackNumberArray(buf)
    s.tmp_2 = msgpack_unpackNumberArray__P181_mk(s);
    s.tmp_2.arg0 = s.buf___13865;
    s.tmp_2.arg1 = 0;
    s.callLocIdx = 143; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.nums___13872 = (r0);
// settings---esp32/settings.ts(138,13): if (nums && nums.length >= 1)...
    s.tmp_0 = r0 = s.nums___13872;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = pxsim_Array__length(s.nums___13872);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 1);
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
// settings---esp32/settings.ts(139,17): return nums[0]
    r0 = pxsim_Array__getAt(s.nums___13872, 0);
    { step = 7; continue; }
  case 4:
  case 5:
// settings---esp32/settings.ts(140,13): return undefined
    r0 = undefined;
    { step = 7; continue; }
  case 6:
    r0 = undefined;
  case 7:
    return leave(s, r0)
  default: oops()
} } }
settings_readNumber__P1089.info = {"start":3283,"length":313,"line":131,"column":4,"endLine":141,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"readNumber","argumentNames":["key"]}

function settings_readNumber__P1089_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_readNumber__P1089, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  buf___13865: undefined,
  nums___13872: undefined,
  arg0: undefined,
} }





function msgpack_unpackNumberArray__P181(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___13885 = undefined;
    s.fmt___13892 = undefined;
    s.v___13901 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(93,13): res: number[] = []
    r0 = pxsim_Array__mk();
    s.res___13885 = (r0);
// base/buffer.ts(95,9): while (offset < buf.length) {...
  case 1:
// base/buffer.ts(95,16): offset < buf.length
    s.tmp_1 = r0 = s.arg1;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// base/buffer.ts(96,17): fmt = tagFormat(buf[offset++])
    s.tmp_3 = r0 = s.arg1;
    r0 = (s.tmp_3 + 1);
    s.arg1 = (r0);
    s.tmp_4 = msgpack_tagFormat__P2143_mk(s);
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.tmp_3);
    s.tmp_4.arg0 = r0;
    s.callLocIdx = 24; s.pc = 12; return s.tmp_4;
  case 12:
    r0 = s.retval;
    s.fmt___13892 = (r0);
// base/buffer.ts(97,13): if (fmt === null) {...
    r0 = (s.fmt___13892 === null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/buffer.ts(98,21): v = buf.getNumber(NumberFormat.Int8BE, offset - 1)
    s.tmp_1 = r0 = s.arg0;
    r0 = (s.arg1 - 1);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_1, 6, s.tmp_2);
    s.v___13901 = (r0);
// base/buffer.ts(99,17): if (-31 <= v && v <= 127)...
    r0 = (-31 <= s.v___13901);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.v___13901 <= 127);
  case 3:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 4; continue; }
// base/buffer.ts(100,21): res.push(v)
    r0 = pxsim_Array__push(s.res___13885, s.v___13901);
    { step = 5; continue; }
  case 4:
// base/buffer.ts(102,21): return null
    r0 = null;
    { step = 11; continue; }
  case 5:
    { step = 7; continue; }
  case 6:
// base/buffer.ts(104,17): res.push(buf.getNumber(fmt, offset))
    s.tmp_0 = r0 = s.res___13885;
    r0 = pxsim.BufferMethods.getNumber(s.arg0, s.fmt___13892, s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
// base/buffer.ts(105,17): offset += pins.sizeOf(fmt)
    s.tmp_0 = r0 = s.arg1;
    s.tmp_2 = pins_sizeOf__P173_mk(s);
    s.tmp_2.arg0 = s.fmt___13892;
    s.callLocIdx = 25; s.pc = 13; return s.tmp_2;
  case 13:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.arg1 = (r0);
  case 7:
// base/buffer.ts(108,1): while (buf[offset] === 0xc1) offset++;
  case 8:
// base/buffer.ts(108,20): buf[offset] === 0xc1
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.arg1);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === 193);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 9; continue; }
// base/buffer.ts(108,42): offset++
    r0 = (s.arg1 + 1);
    s.arg1 = (r0);
    { step = 8; continue; }
  case 9:
    { step = 1; continue; }
  case 10:
// base/buffer.ts(111,9): return res
    r0 = s.res___13885;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
msgpack_unpackNumberArray__P181.info = {"start":2650,"length":669,"line":91,"column":4,"endLine":111,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"unpackNumberArray","argumentNames":["buf","offset"]}

function msgpack_unpackNumberArray__P181_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: msgpack_unpackNumberArray__P181, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  res___13885: undefined,
  fmt___13892: undefined,
  v___13901: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ControlServer_handlePacketOuter__P1898(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C1895_VT)) failedCast(r0);
// jacdac/routing.ts(1282,13): if (pkt.isRegGet) {...
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1441_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 1017; s.pc = 22; return s.tmp_1;
  case 22:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 11; continue; }
// jacdac/routing.ts(1283,17): switch (pkt.regCode) {...
    s.tmp_3 = jacdac_JDPacket_regCode__P1442_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 1018; s.pc = 23; return s.tmp_3;
  case 23:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtcore.switch_eq(385, s.tmp_2);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(390, s.tmp_2);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(389, s.tmp_2);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(384, s.tmp_2);
    if (r0) { step = 8; continue; }
    r0 = s.tmp_2;
    { step = 9; continue; }
  case 1:
// jacdac/routing.ts(1285,25): if (productIdentifier)...
    r0 = pxsim_numops_toBoolDecr(globals.productIdentifier___1784);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(1286,29): this.sendReport(...
    r0 = pxsim_Array__mk();
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_4, globals.productIdentifier___1784);
    s.tmp_5 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.tmp_6 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_7 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_7.arg0 = s.arg1;
    s.callLocIdx = 1019; s.pc = 26; return s.tmp_7;
  case 26:
    r0 = s.retval;
    s.tmp_6.arg0 = r0;
    s.tmp_8 = jacdac_jdpack__P1468_mk(s);
    s.tmp_8.arg0 = "u32";
    s.tmp_8.arg1 = s.tmp_4;
    s.callLocIdx = 1020; s.pc = 27; return s.tmp_8;
  case 27:
    r0 = s.retval;
    s.tmp_6.arg1 = r0;
    s.callLocIdx = 1021; s.pc = 25; return s.tmp_6;
  case 25:
    r0 = s.retval;
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 1022; s.pc = 24; return s.tmp_5;
  case 24:
    r0 = s.retval;
  case 2:
  case 3:
// jacdac/routing.ts(1292,25): break
    { step = 10; continue; }
  case 4:
// jacdac/routing.ts(1295,25): this.sendUptime()
    s.tmp_0 = jacdac_ControlServer_sendUptime__P1897_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 1023; s.pc = 28; return s.tmp_0;
  case 28:
    r0 = s.retval;
// jacdac/routing.ts(1296,25): break
    { step = 10; continue; }
  case 5:
// jacdac/routing.ts(1299,25): if (jacdac.firmwareVersion)...
    r0 = pxsim_numops_toBoolDecr(globals.firmwareVersion___1785);
    if (!r0) { step = 6; continue; }
// jacdac/routing.ts(1300,29): this.sendReport(...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, globals.firmwareVersion___1785);
    s.tmp_1 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_2 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_3 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 1024; s.pc = 31; return s.tmp_3;
  case 31:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.tmp_4 = jacdac_jdpack__P1468_mk(s);
    s.tmp_4.arg0 = "s";
    s.tmp_4.arg1 = s.tmp_0;
    s.callLocIdx = 1025; s.pc = 32; return s.tmp_4;
  case 32:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 1026; s.pc = 30; return s.tmp_2;
  case 30:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 1027; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
  case 6:
  case 7:
// jacdac/routing.ts(1306,25): break
    { step = 10; continue; }
  case 8:
// jacdac/routing.ts(1308,25): this.sendReport(...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.programName();
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    s.tmp_2 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_3 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_4 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.callLocIdx = 1028; s.pc = 35; return s.tmp_4;
  case 35:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_5 = jacdac_jdpack__P1468_mk(s);
    s.tmp_5.arg0 = "s";
    s.tmp_5.arg1 = s.tmp_0;
    s.callLocIdx = 1029; s.pc = 36; return s.tmp_5;
  case 36:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 1030; s.pc = 34; return s.tmp_3;
  case 34:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 1031; s.pc = 33; return s.tmp_2;
  case 33:
    r0 = s.retval;
// jacdac/routing.ts(1314,25): break
    { step = 10; continue; }
  case 9:
// jacdac/routing.ts(1317,25): pkt.possiblyNotImplemented()
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P1424_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1032; s.pc = 37; return s.tmp_0;
  case 37:
    r0 = s.retval;
// jacdac/routing.ts(1318,25): break
  case 10:
    { step = 21; continue; }
  case 11:
// jacdac/routing.ts(1321,17): switch (pkt.serviceCommand) {...
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 1033; s.pc = 38; return s.tmp_1;
  case 38:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(0, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = pxsim_pxtcore.switch_eq(131, s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq(133, s.tmp_0);
    if (r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 19; continue; }
  case 12:
// jacdac/routing.ts(1323,25): bus.queueAnnounce()
    s.tmp_2 = jacdac_Bus_queueAnnounce__P1815_mk(s);
    s.tmp_2.arg0 = globals.bus___1822;
    s.callLocIdx = 1034; s.pc = 39; return s.tmp_2;
  case 39:
    r0 = s.retval;
// jacdac/routing.ts(1324,25): break
    { step = 20; continue; }
  case 13:
// jacdac/routing.ts(1326,25): this.log("identify")
    s.tmp_0 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "identify";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 40; return s.tmp_0;
  case 40:
    r0 = s.retval;
// jacdac/routing.ts(1327,25): bus.emit(IDENTIFY)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = globals.IDENTIFY___1801;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1035; s.pc = 41; return s.tmp_0;
  case 41:
    r0 = s.retval;
// jacdac/routing.ts(1328,25): bus.emit(STATUS_EVENT, StatusEvent.Identify)
    s.tmp_0 = jacdac_EventSource_emit__P1917_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.tmp_0.arg1 = globals.STATUS_EVENT___1800;
    s.tmp_0.arg2 = 202;
    s.callLocIdx = 1036; s.pc = 42; return s.tmp_0;
  case 42:
    r0 = s.retval;
// jacdac/routing.ts(1329,25): break
    { step = 20; continue; }
  case 14:
// jacdac/routing.ts(1331,25): this.log("reset requested")
    s.tmp_0 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "reset requested";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 43; return s.tmp_0;
  case 43:
    r0 = s.retval;
// jacdac/routing.ts(1332,25): control.reset()
    setupResume(s, 44);
    pxsim.control.reset();
    checkResumeConsumed();
    return;
  case 44:
    r0 = s.retval;
// jacdac/routing.ts(1333,25): break
    { step = 20; continue; }
  case 15:
// jacdac/routing.ts(1335,25): this.log("flood")
    s.tmp_0 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "flood";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 45; return s.tmp_0;
  case 45:
    r0 = s.retval;
// jacdac/routing.ts(1336,25): this.handleFloodPing(pkt)
    s.tmp_0 = jacdac_ControlServer_handleFloodPing__P2493_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 1037; s.pc = 46; return s.tmp_0;
  case 46:
    r0 = s.retval;
// jacdac/routing.ts(1337,25): break
    { step = 20; continue; }
  case 16:
// jacdac/routing.ts(1339,25): if (!jacdac.bus.proxyMode) resetToProxy()
    r0 = globals.bus___1822.fields["proxyMode"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 17; continue; }
// jacdac/routing.ts(1339,52): resetToProxy()
    s.tmp_3 = jacdac_resetToProxy__P2514_mk(s);
    s.callLocIdx = 1038; s.pc = 47; return s.tmp_3;
  case 47:
    r0 = s.retval;
  case 17:
  case 18:
// jacdac/routing.ts(1340,25): break
    { step = 20; continue; }
  case 19:
// jacdac/routing.ts(1342,25): pkt.possiblyNotImplemented()
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P1424_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1039; s.pc = 48; return s.tmp_0;
  case 48:
    r0 = s.retval;
// jacdac/routing.ts(1343,25): break
  case 20:
  case 21:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_handlePacketOuter__P1898.info = {"start":42588,"length":2658,"line":1280,"column":8,"endLine":1345,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handlePacketOuter","argumentNames":["this","pkt"]}

function jacdac_ControlServer_handlePacketOuter__P1898_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_handlePacketOuter__P1898, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ControlServer_handleFloodPing__P2493(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.numResponses___14016 = undefined;
    s.counter___14017 = undefined;
    s.size___14018 = undefined;
    s.payload___14019 = undefined;
    s.i___14025 = undefined;
    s.queuePing___14039 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C1895_VT)) failedCast(r0);
    r0 = pxsim_pxtrt.mklocRef();
    s.numResponses___14016 = (r0);
// jacdac/routing.ts(1257,18): numResponses
    s.tmp_0 = r0 = s.numResponses___14016;
    s.tmp_3 = jacdac_JDPacket_jdunpack__P1448_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.tmp_3.arg1 = "u32 u32 u8";
    s.callLocIdx = 1011; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_Array__getAt(s.tmp_2, 0);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
    r0 = pxsim_pxtrt.mklocRef();
    s.counter___14017 = (r0);
// jacdac/routing.ts(1257,32): counter
    s.tmp_4 = r0 = s.counter___14017;
    r0 = pxsim_Array__getAt(s.tmp_2, 1);
    s.tmp_5 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_4, s.tmp_5);
// jacdac/routing.ts(1257,41): size
    r0 = pxsim_Array__getAt(s.tmp_2, 2);
    s.size___14018 = (r0);
// jacdac/routing.ts(1259,19): payload = Buffer.create(4 + size)
    r0 = (4 + s.size___14018);
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.payload___14019 = (r0);
// jacdac/routing.ts(1260,22): i = 0
    s.i___14025 = (0);
// jacdac/routing.ts(1260,13): for (let i = 0; i < size; ++i) payload[4 + i] = i
  case 1:
// jacdac/routing.ts(1260,29): i < size
    r0 = (s.i___14025 < s.size___14018);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(1260,44): payload[4 + i] = i
    s.tmp_1 = r0 = s.payload___14019;
    r0 = (4 + s.i___14025);
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.setByte(s.tmp_1, s.tmp_2, s.i___14025);
// jacdac/routing.ts(1260,39): ++i
    r0 = (s.i___14025 + 1);
    s.i___14025 = (r0);
    { step = 1; continue; }
  case 2:
// jacdac/routing.ts(1261,19): queuePing = () => {...
    r0 = pxsim_pxtcore_mkAction(4, queuePing_inline__P14040);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.numResponses___14016);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.payload___14019);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.counter___14017);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 3, s.arg0);
    s.queuePing___14039 = (s.tmp_0);
// jacdac/routing.ts(1277,13): control.internalOnEvent(jacdac.__physId(), EVT_TX_EMPTY, queuePing)
    s.tmp_1 = jacdac___physId__P1366_mk(s);
    s.callLocIdx = 1015; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_0, 101, s.queuePing___14039, 16);
// jacdac/routing.ts(1278,13): queuePing()
    s.tmp_0 = lambda_1_mk(s);
    s.tmp_0.argL = s.queuePing___14039;
    setupLambda(s.tmp_0, s.tmp_0.argL);
    s.callLocIdx = 1016; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_handleFloodPing__P2493.info = {"start":41609,"length":969,"line":1255,"column":8,"endLine":1278,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleFloodPing","argumentNames":["this","pkt"]}

function jacdac_ControlServer_handleFloodPing__P2493_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_handleFloodPing__P2493, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  numResponses___14016: undefined,
  counter___14017: undefined,
  size___14018: undefined,
  payload___14019: undefined,
  i___14025: undefined,
  queuePing___14039: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function queuePing_inline__P14040(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/routing.ts(1262,17): if (numResponses <= 0) {...
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 <= 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(1263,21): control.internalOnEvent(...
    s.tmp_3 = jacdac___physId__P1366_mk(s);
    s.callLocIdx = 1012; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.control.internalOnEvent(s.tmp_2, 101, jacdac_doNothing__P2485, 16);
    { step = 2; continue; }
  case 1:
// jacdac/routing.ts(1269,21): payload.setNumber(NumberFormat.UInt32LE, 0, counter)
    s.tmp_0 = r0 = s.caps[1];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[2]);
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 0, s.tmp_1);
// jacdac/routing.ts(1270,21): this.sendReport(...
    s.tmp_0 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_0.arg0 = s.caps[3];
    s.tmp_1 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_1.arg0 = 131;
    s.tmp_1.arg1 = s.caps[1];
    s.callLocIdx = 1013; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1014; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
// jacdac/routing.ts(1273,21): numResponses--
    s.tmp_0 = r0 = s.caps[0];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[0]);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 - 1);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
// jacdac/routing.ts(1274,21): counter++
    s.tmp_0 = r0 = s.caps[2];
    r0 = pxsim_pxtrt_ldlocRef(s.caps[2]);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stlocRef(s.tmp_0, s.tmp_1);
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
queuePing_inline__P14040.info = {"start":41911,"length":553,"line":1260,"column":30,"endLine":1275,"endColumn":13,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":[]}

function queuePing_inline__P14040_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: queuePing_inline__P14040, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function jacdac_doNothing__P2485(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_doNothing__P2485.info = {"start":40995,"length":23,"line":1230,"column":4,"endLine":1230,"endColumn":27,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"doNothing","argumentNames":[]}

function jacdac_doNothing__P2485_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_doNothing__P2485, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
} }





function jacdac_JDPacket_possiblyNotImplemented__P1424(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___14076 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(87,13): if (...
    s.tmp_1 = jacdac_JDPacket_handled__P1422_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 595; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_3 = jacdac_JDPacket_packetFlags__P1427_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 596; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_2 & 4);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 3; continue; }
// jacdac/packet.ts(91,17): return
    { step = 5; continue; }
  case 3:
  case 4:
// jacdac/packet.ts(92,13): this.markHandled()
    s.tmp_5 = jacdac_JDPacket_markHandled__P1423_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 597; s.pc = 8; return s.tmp_5;
  case 8:
    r0 = s.retval;
// jacdac/packet.ts(93,19): p = JDPacket.jdpacked(...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    s.tmp_2 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 598; s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    s.tmp_4 = jacdac_JDPacket_crc__P1434_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 599; s.pc = 10; return s.tmp_4;
  case 10:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_3);
    s.tmp_5 = jacdac_JDPacket_jdpacked__P1420_mk(s);
    s.tmp_5.arg0 = 3;
    s.tmp_5.arg1 = "u16 u16";
    s.tmp_5.arg2 = s.tmp_0;
    s.callLocIdx = 600; s.pc = 11; return s.tmp_5;
  case 11:
    r0 = s.retval;
    s.p___14076 = (r0);
// jacdac/packet.ts(98,13): p.serviceIndex = this.serviceIndex
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_0.arg0 = s.p___14076;
    s.tmp_1 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 601; s.pc = 13; return s.tmp_1;
  case 13:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 602; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
// jacdac/packet.ts(99,13): p._sendReport(bus.selfDevice)
    s.tmp_0 = jacdac_JDPacket__sendReport__P1458_mk(s);
    s.tmp_0.arg0 = s.p___14076;
    s.tmp_1 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_1.arg0 = globals.bus___1822;
    s.callLocIdx = 603; s.pc = 15; return s.tmp_1;
  case 15:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 604; s.pc = 14; return s.tmp_0;
  case 14:
    r0 = s.retval;
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_possiblyNotImplemented__P1424.info = {"start":2761,"length":516,"line":85,"column":8,"endLine":99,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"possiblyNotImplemented","argumentNames":["this"]}

function jacdac_JDPacket_possiblyNotImplemented__P1424_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_possiblyNotImplemented__P1424, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  p___14076: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_handled__P1422(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(79,13): return !!this._handled
    r0 = s.arg0.fields["_handled"];
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_handled__P1422.info = {"start":2623,"length":60,"line":77,"column":8,"endLine":79,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"handled","argumentNames":["this"]}
jacdac_JDPacket_handled__P1422.isGetter = true;

function jacdac_JDPacket_handled__P1422_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_handled__P1422, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function jacdac_ControlServer_sendUptime__P1897(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___14096 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ControlServer__C1895_VT)) failedCast(r0);
// jacdac/routing.ts(1251,19): buf = Buffer.create(4)
    r0 = pxsim.control.createBuffer(4);
    s.buf___14096 = (r0);
// jacdac/routing.ts(1252,13): buf.setNumber(NumberFormat.UInt32LE, 0, control.micros())
    s.tmp_0 = r0 = s.buf___14096;
    r0 = pxsim.control.micros();
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.setNumber(s.tmp_0, 11, 0, s.tmp_1);
// jacdac/routing.ts(1253,13): this.sendReport(JDPacket.from(CMD_GET_REG | ControlReg.Uptime, buf))
    s.tmp_0 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_1.arg0 = 4486;
    s.tmp_1.arg1 = s.buf___14096;
    s.callLocIdx = 1009; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1010; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ControlServer_sendUptime__P1897.info = {"start":41383,"length":216,"line":1249,"column":8,"endLine":1253,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"sendUptime","argumentNames":["this"]}

function jacdac_ControlServer_sendUptime__P1897_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ControlServer_sendUptime__P1897, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  buf___14096: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_handlePacket__P1729(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.name___14154 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac__rolemgr_RoleManagerServer__C1726_VT)) failedCast(r0);
// jacdac/rolemgr.ts(138,13): this.autoBind = this.handleRegBool(...
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegBool__P2390_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 128;
    r0 = s.arg0.fields["autoBind"];
    s.tmp_2.arg3 = r0;
    s.callLocIdx = 741; s.pc = 17; return s.tmp_2;
  case 17:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["autoBind"] = (s.tmp_1);
// jacdac/rolemgr.ts(144,13): switch (packet.serviceCommand) {...
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 742; s.pc = 18; return s.tmp_1;
  case 18:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(4481, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(128, s.tmp_0);
    if (r0) { step = 4; continue; }
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(131, s.tmp_0);
    if (r0) { step = 13; continue; }
    r0 = pxsim_pxtcore.switch_eq(132, s.tmp_0);
    if (r0) { step = 14; continue; }
    r0 = s.tmp_0;
    { step = 15; continue; }
  case 1:
// jacdac/rolemgr.ts(146,21): this.sendReport(...
    s.tmp_3 = helpers_arrayEvery__P108_mk(s);
    r0 = globals.bus___1822.fields["allClients"];
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14141;
    s.callLocIdx = 744; s.pc = 19; return s.tmp_3;
  case 19:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 2; continue; }
    r0 = 1;
    { step = 3; continue; }
  case 2:
    r0 = 0;
  case 3:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    r0 = pxsim_Array__mk();
    s.tmp_5 = r0;
    r0 = pxsim_Array__push(s.tmp_5, s.tmp_4);
    s.tmp_6 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_6.arg0 = s.arg0;
    s.tmp_7 = jacdac_JDPacket_jdpacked__P1420_mk(s);
    s.tmp_7.arg0 = 4481;
    s.tmp_7.arg1 = "u8";
    s.tmp_7.arg2 = s.tmp_5;
    s.callLocIdx = 745; s.pc = 21; return s.tmp_7;
  case 21:
    r0 = s.retval;
    s.tmp_6.arg1 = r0;
    s.callLocIdx = 746; s.pc = 20; return s.tmp_6;
  case 20:
    r0 = s.retval;
// jacdac/rolemgr.ts(160,21): break
    { step = 16; continue; }
  case 4:
// jacdac/rolemgr.ts(162,21): if (packet.data.length == 9) {...
    s.tmp_3 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 747; s.pc = 22; return s.tmp_3;
  case 22:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == 9);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// jacdac/rolemgr.ts(163,31): name =...
    s.tmp_5 = jacdac__rolemgr_getRole__P1724_mk(s);
    s.tmp_8 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_8.arg0 = s.arg1;
    s.callLocIdx = 748; s.pc = 24; return s.tmp_8;
  case 24:
    r0 = s.retval;
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_7, 0, 8);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_6);
    s.tmp_5.arg0 = r0;
    s.tmp_10 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_10.arg0 = s.arg1;
    s.callLocIdx = 749; s.pc = 25; return s.tmp_10;
  case 25:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_9, 8);
    s.tmp_5.arg1 = r0;
    s.callLocIdx = 750; s.pc = 23; return s.tmp_5;
  case 23:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBool(s.tmp_4);
    if (!r0) { step = 5; continue; }
    r0 = s.tmp_4;
    { step = 6; continue; }
  case 5:
    r0 = pxsim_String_.mkEmpty();
  case 6:
    // jmp value (already in r0)
    s.tmp_11 = r0;
    s.name___14154 = (s.tmp_11);
// jacdac/rolemgr.ts(168,25): this.sendReport(...
    s.tmp_0 = jacdac_Server_sendReport__P2383_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_1 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_1.arg0 = 128;
    s.tmp_2 = helpers_bufferConcat__P184_mk(s);
    s.tmp_3 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 751; s.pc = 29; return s.tmp_3;
  case 29:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.name___14154);
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 752; s.pc = 28; return s.tmp_2;
  case 28:
    r0 = s.retval;
    s.tmp_1.arg1 = r0;
    s.callLocIdx = 753; s.pc = 27; return s.tmp_1;
  case 27:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 754; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
  case 7:
  case 8:
// jacdac/rolemgr.ts(175,21): break
    { step = 16; continue; }
  case 9:
// jacdac/rolemgr.ts(177,21): if (packet.data.length >= 9)...
    s.tmp_3 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 755; s.pc = 30; return s.tmp_3;
  case 30:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >= 9);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// jacdac/rolemgr.ts(178,25): setRole(...
    s.tmp_4 = jacdac__rolemgr_setRole__P1725_mk(s);
    s.tmp_7 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_7.arg0 = s.arg1;
    s.callLocIdx = 756; s.pc = 32; return s.tmp_7;
  case 32:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_6, 0, 8);
    s.tmp_5 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_5);
    s.tmp_4.arg0 = r0;
    s.tmp_9 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_9.arg0 = s.arg1;
    s.callLocIdx = 757; s.pc = 33; return s.tmp_9;
  case 33:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_8, 8);
    s.tmp_4.arg1 = r0;
    s.tmp_12 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_12.arg0 = s.arg1;
    s.callLocIdx = 758; s.pc = 34; return s.tmp_12;
  case 34:
    r0 = s.retval;
    s.tmp_11 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_11, 9, -1);
    s.tmp_10 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_10);
    s.tmp_4.arg2 = r0;
    s.callLocIdx = 759; s.pc = 31; return s.tmp_4;
  case 31:
    r0 = s.retval;
  case 10:
  case 11:
// jacdac/rolemgr.ts(183,21): break
    { step = 16; continue; }
  case 12:
// jacdac/rolemgr.ts(185,21): OutPipe.respondForEach(...
    s.tmp_0 = jacdac_OutPipe_respondForEach__P1492_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = settings_list__P1091_mk(s);
    s.tmp_1.arg0 = globals.roleSettingPrefix___2448;
    s.callLocIdx = 760; s.pc = 36; return s.tmp_1;
  case 36:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14199;
    s.callLocIdx = 767; s.pc = 35; return s.tmp_0;
  case 35:
    r0 = s.retval;
// jacdac/rolemgr.ts(198,21): break
    { step = 16; continue; }
  case 13:
// jacdac/rolemgr.ts(200,21): OutPipe.respondForEach(...
    s.tmp_0 = jacdac_OutPipe_respondForEach__P1492_mk(s);
    s.tmp_0.arg0 = s.arg1;
    r0 = globals.bus___1822.fields["allClients"];
    s.tmp_0.arg1 = r0;
    s.tmp_0.arg2 = packName__P14231;
    s.callLocIdx = 768; s.pc = 37; return s.tmp_0;
  case 37:
    r0 = s.retval;
// jacdac/rolemgr.ts(205,21): break
    { step = 16; continue; }
  case 14:
// jacdac/rolemgr.ts(207,21): clearRoles()
    s.tmp_0 = jacdac__rolemgr_clearRoles__P1723_mk(s);
    s.callLocIdx = 769; s.pc = 38; return s.tmp_0;
  case 38:
    r0 = s.retval;
// jacdac/rolemgr.ts(208,21): break
    { step = 16; continue; }
  case 15:
// jacdac/rolemgr.ts(210,21): packet.possiblyNotImplemented()
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P1424_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 770; s.pc = 39; return s.tmp_0;
  case 39:
    r0 = s.retval;
// jacdac/rolemgr.ts(211,21): break
  case 16:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_handlePacket__P1729.info = {"start":4866,"length":3571,"line":136,"column":8,"endLine":225,"endColumn":9,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac__rolemgr_RoleManagerServer_handlePacket__P1729_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_handlePacket__P1729, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  name___14154: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14141(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["broadcast"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_5 = jacdac_Client_device__P1850_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 743; s.pc = 3; return s.tmp_5;
  case 3:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_6 = r0;
    r0 = s.tmp_6;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14141.info = {"start":5548,"length":30,"line":152,"column":36,"endLine":152,"endColumn":66,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["c"]}

function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14141_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14141, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14199(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.name___14201 = undefined;
    s.len___14205 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/rolemgr.ts(189,35): name = settings.readString(k)
    s.tmp_0 = settings_readString__P1087_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 761; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.name___14201 = (r0);
// jacdac/rolemgr.ts(190,35): len = roleSettingPrefix.length
    r0 = pxsim_String_.length(globals.roleSettingPrefix___2448);
    s.len___14205 = (r0);
// jacdac/rolemgr.ts(191,29): return jdpack("b[8] u8 s", [...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    s.tmp_2 = Buffer_fromHex__P204_mk(s);
    s.tmp_3 = helpers_stringSlice__P119_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = s.len___14205;
    r0 = (s.len___14205 + 16);
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 762; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 763; s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    s.tmp_5 = parseInt__P97_mk(s);
    s.tmp_6 = helpers_stringSlice__P119_mk(s);
    s.tmp_6.arg0 = s.arg0;
    r0 = (s.len___14205 + 16);
    s.tmp_6.arg1 = r0;
    s.tmp_6.arg2 = undefined;
    s.callLocIdx = 764; s.pc = 5; return s.tmp_6;
  case 5:
    r0 = s.retval;
    s.tmp_5.arg0 = r0;
    s.tmp_5.arg1 = undefined;
    s.callLocIdx = 765; s.pc = 4; return s.tmp_5;
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_4);
    r0 = pxsim_Array__push(s.tmp_0, s.name___14201);
    s.tmp_7 = jacdac_jdpack__P1468_mk(s);
    s.tmp_7.arg0 = "b[8] u8 s";
    s.tmp_7.arg1 = s.tmp_0;
    s.callLocIdx = 766; s.pc = 6; return s.tmp_7;
  case 6:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14199.info = {"start":7017,"length":420,"line":187,"column":24,"endLine":195,"endColumn":25,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"inline","argumentNames":["k"]}

function jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14199_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_RoleManagerServer_handlePacket_inline__P14199, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  name___14201: undefined,
  len___14205: undefined,
  arg0: undefined,
} }





function packName__P14231(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.devid___14236 = undefined;
    s.servidx___14246 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/rolemgr.ts(215,23): devid = c.device...
    s.tmp_1 = jacdac_Client_device__P1850_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 771; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    s.tmp_2 = Buffer_fromHex__P204_mk(s);
    s.tmp_3 = jacdac_Client_device__P1850_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.callLocIdx = 772; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    r0 = r0.fields["deviceId"];
    s.tmp_2.arg0 = r0;
    s.callLocIdx = 773; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = pxsim.control.createBuffer(8);
  case 2:
    // jmp value (already in r0)
    s.tmp_4 = r0;
    s.devid___14236 = (s.tmp_4);
// jacdac/rolemgr.ts(218,23): servidx = c.device ? c.serviceIndex : 0
    s.tmp_1 = jacdac_Client_device__P1850_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 774; s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.arg0.fields["serviceIndex"];
    { step = 4; continue; }
  case 3:
    r0 = 0;
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.servidx___14246 = (s.tmp_2);
// jacdac/rolemgr.ts(219,17): return jdpack("b[8] u32 u8 s", [...
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.devid___14236);
    r0 = s.arg0.fields["serviceClass"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = pxsim_Array__push(s.tmp_0, s.servidx___14246);
    r0 = s.arg0.fields["role"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_2);
    s.tmp_3 = jacdac_jdpack__P1468_mk(s);
    s.tmp_3.arg0 = "b[8] u32 u8 s";
    s.tmp_3.arg1 = s.tmp_0;
    s.callLocIdx = 775; s.pc = 9; return s.tmp_3;
  case 9:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
packName__P14231.info = {"start":7999,"length":428,"line":213,"column":12,"endLine":224,"endColumn":13,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"packName","argumentNames":["c"]}

function packName__P14231_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: packName__P14231, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  devid___14236: undefined,
  servidx___14246: undefined,
  arg0: undefined,
} }





function jacdac__rolemgr_clearRoles__P1723(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/rolemgr.ts(5,9): settings.list(roleSettingPrefix).forEach(settings.remove)
    s.tmp_0 = helpers_arrayForEach__P109_mk(s);
    s.tmp_1 = settings_list__P1091_mk(s);
    s.tmp_1.arg0 = globals.roleSettingPrefix___2448;
    s.callLocIdx = 723; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = settings_remove__P1092;
    s.callLocIdx = 724; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// jacdac/rolemgr.ts(6,9): jacdac.bus.clearAttachCache()
    s.tmp_0 = jacdac_Bus_clearAttachCache__P1813_mk(s);
    s.tmp_0.arg0 = globals.bus___1822;
    s.callLocIdx = 725; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac__rolemgr_clearRoles__P1723.info = {"start":71,"length":140,"line":3,"column":4,"endLine":6,"endColumn":5,"fileName":"pxt_modules/jacdac/rolemgr.ts","functionName":"clearRoles","argumentNames":[]}

function jacdac__rolemgr_clearRoles__P1723_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac__rolemgr_clearRoles__P1723, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
} }





function settings_list__P1091(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(159,9): if (!prefix) prefix = ""
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// settings---esp32/settings.ts(159,22): prefix = ""
    r0 = pxsim_String_.mkEmpty();
    s.arg0 = (r0);
  case 1:
  case 2:
// settings---esp32/settings.ts(160,9): return _list(prefix)
    r0 = pxsim.settings._list(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
settings_list__P1091.info = {"start":3940,"length":107,"line":157,"column":4,"endLine":160,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"list","argumentNames":["prefix"]}

function settings_list__P1091_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_list__P1091, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_respondForEach__P1492(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
// jacdac/pipes.ts(115,13): control.runInParallel(() => {...
    r0 = pxsim_pxtcore_mkAction(3, jacdac_OutPipe_respondForEach_inline__P14278);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 2, s.arg2);
    r0 = pxsim.control.runInParallel(s.tmp_0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_respondForEach__P1492.info = {"start":3112,"length":408,"line":113,"column":8,"endLine":123,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"respondForEach","argumentNames":["pkt","inp","f"]}

function jacdac_OutPipe_respondForEach__P1492_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_respondForEach__P1492, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_OutPipe_respondForEach_inline__P14278(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.outp___14280 = undefined;
    s.e___14285 = undefined;
    s.unnamed142___U2 = undefined;
    s.unnamed143___U3 = undefined;
    s.e___14293 = undefined;
// jacdac/pipes.ts(116,17): try {...
    r0 = pxsim_pxtcore.beginTry(3);
// jacdac/pipes.ts(117,27): outp = OutPipe.from(pkt)
    s.tmp_0 = jacdac_OutPipe_from__P1491_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 697; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.outp___14280 = (r0);
// jacdac/pipes.ts(118,32): e
    s.e___14285 = (undefined);
    s.unnamed142___U2 = (s.caps[1]);
    s.unnamed143___U3 = (0);
// jacdac/pipes.ts(118,21): for (const e of inp) outp.write(f(e))
  case 1:
    s.tmp_0 = r0 = s.unnamed143___U3;
    r0 = pxsim_Array__length(s.unnamed142___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed142___U2, s.unnamed143___U3);
    s.e___14285 = (r0);
// jacdac/pipes.ts(118,42): outp.write(f(e))
    s.tmp_2 = jacdac_OutPipe_write__P1494_mk(s);
    s.tmp_2.arg0 = s.outp___14280;
    s.tmp_3 = lambda_2_mk(s);
    s.tmp_3.argL = s.caps[2];
    s.tmp_3.arg0 = s.e___14285;
    setupLambda(s.tmp_3, s.tmp_3.argL);
    s.callLocIdx = 698; s.pc = 7; return s.tmp_3;
  case 7:
    r0 = s.retval;
    s.tmp_2.arg1 = r0;
    s.callLocIdx = 699; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
    r0 = (s.unnamed143___U3 + 1);
    s.unnamed143___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed142___U2 = (undefined);
// jacdac/pipes.ts(119,21): outp.close()
    s.tmp_0 = jacdac_OutPipe_close__P1496_mk(s);
    s.tmp_0.arg0 = s.outp___14280;
    s.callLocIdx = 700; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 4; continue; }
  case 3:
    r0 = pxsim_pxtcore.getThrownValue();
    s.e___14293 = (r0);
// jacdac/pipes.ts(121,21): console.error("respondForEach " + e)
    s.tmp_0 = console_error__P377_mk(s);
    if ((s.e___14293) && (s.e___14293).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.e___14293);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.e___14293) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat("respondForEach ", s.tmp_1);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 701; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_respondForEach_inline__P14278.info = {"start":3219,"length":290,"line":114,"column":34,"endLine":122,"endColumn":13,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"inline","argumentNames":[]}

function jacdac_OutPipe_respondForEach_inline__P14278_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_respondForEach_inline__P14278, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  outp___14280: undefined,
  e___14285: undefined,
  unnamed142___U2: undefined,
  unnamed143___U3: undefined,
  e___14293: undefined,
} }





function jacdac_OutPipe_close__P1496(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1489_VT)) failedCast(r0);
// jacdac/pipes.ts(156,13): this.writeAndClose(Buffer.create(0))
    s.tmp_0 = jacdac_OutPipe_writeAndClose__P1495_mk(s);
    s.tmp_0.arg0 = s.arg0;
    r0 = pxsim.control.createBuffer(0);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 707; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_close__P1496.info = {"start":4333,"length":68,"line":154,"column":8,"endLine":156,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"close","argumentNames":["this"]}

function jacdac_OutPipe_close__P1496_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_close__P1496, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_writeAndClose__P1495(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1489_VT)) failedCast(r0);
// jacdac/pipes.ts(152,13): this.writeEx(buf, CLOSE_MASK)
    s.tmp_0 = jacdac_OutPipe_writeEx__P2406_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 32;
    s.callLocIdx = 706; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_writeAndClose__P1495.info = {"start":4243,"length":80,"line":150,"column":8,"endLine":152,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"writeAndClose","argumentNames":["this","buf"]}

function jacdac_OutPipe_writeAndClose__P1495_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_writeAndClose__P1495, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_OutPipe_writeEx__P2406(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pkt___14316 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1489_VT)) failedCast(r0);
// jacdac/pipes.ts(131,13): if (!this.port) return
    r0 = s.arg0.fields["port"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/pipes.ts(131,29): return
    { step = 7; continue; }
  case 1:
  case 2:
// jacdac/pipes.ts(132,19): pkt = JDPacket.from(...
    s.tmp_3 = jacdac_JDPacket_from__P1418_mk(s);
    r0 = s.arg0.fields["nextCnt"];
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 31);
    s.tmp_5 = r0;
    r0 = s.arg0.fields["port"];
    s.tmp_8 = r0;
    r0 = (s.tmp_8 << 7);
    s.tmp_7 = r0;
    r0 = (s.tmp_5 | s.tmp_7);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 | s.arg2);
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = s.arg1;
    s.callLocIdx = 702; s.pc = 8; return s.tmp_3;
  case 8:
    r0 = s.retval;
    s.pkt___14316 = (r0);
// jacdac/pipes.ts(138,13): this.nextCnt++
    s.tmp_0 = r0 = s.arg0;
    r0 = s.tmp_0.fields["nextCnt"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextCnt"] = (s.tmp_1);
// jacdac/pipes.ts(139,13): if (flags & CLOSE_MASK) this.port = null
    r0 = (s.arg2 & 32);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/pipes.ts(139,37): this.port = null
    r0 = (s.arg0).fields["port"] = (null);
  case 3:
  case 4:
// jacdac/pipes.ts(140,13): pkt.serviceIndex = JD_SERVICE_INDEX_PIPE
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_0.arg0 = s.pkt___14316;
    s.tmp_0.arg1 = 62;
    s.callLocIdx = 703; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// jacdac/pipes.ts(141,13): if (!pkt._sendWithAck(this.deviceId)) {...
    s.tmp_3 = jacdac_JDPacket__sendWithAck__P1462_mk(s);
    s.tmp_3.arg0 = s.pkt___14316;
    r0 = s.arg0.fields["deviceId"];
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 704; s.pc = 10; return s.tmp_3;
  case 10:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// jacdac/pipes.ts(142,17): this.port = null
    r0 = (s.arg0).fields["port"] = (null);
// jacdac/pipes.ts(143,17): throw "out pipe error: no ACK"
    r0 = pxsim_pxtcore.throwValue("out pipe error: no ACK");
  case 5:
  case 6:
  case 7:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_writeEx__P2406.info = {"start":3595,"length":565,"line":129,"column":8,"endLine":144,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"writeEx","argumentNames":["this","buf","flags"]}

function jacdac_OutPipe_writeEx__P2406_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_writeEx__P2406, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  pkt___14316: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket__sendWithAck__P1462(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.aw___14374 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(304,13): if (!devId) return false
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(304,25): return false
    r0 = false;
    { step = 7; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(305,13): this.requiresAck = true
    s.tmp_2 = jacdac_JDPacket_requiresAck__P1431_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = true;
    s.callLocIdx = 652; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
// jacdac/packet.ts(306,13): this._sendCmdId(devId)
    s.tmp_0 = jacdac_JDPacket__sendCmdId__P1460_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 653; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// jacdac/packet.ts(308,13): if (!ackAwaiters) {...
    r0 = pxsim_numops_toBoolDecr(globals.ackAwaiters___2330);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac/packet.ts(309,17): ackAwaiters = []
    r0 = pxsim_Array__mk();
    globals.ackAwaiters___2330 = (r0);
// jacdac/packet.ts(310,17): control.runInParallel(() => {...
    r0 = pxsim.control.runInParallel(jacdac_JDPacket__sendWithAck_inline__P14368);
  case 3:
  case 4:
// jacdac/packet.ts(318,19): aw = new AckAwaiter(this, devId)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_AckAwaiter__C2334_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_AckAwaiter_constructor__P2335_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.tmp_1.arg2 = s.arg1;
    s.callLocIdx = 656; s.pc = 10; return s.tmp_1;
  case 10:
    r0 = s.retval;
    s.aw___14374 = (s.tmp_0);
// jacdac/packet.ts(319,13): ackAwaiters.push(aw)
    r0 = pxsim_Array__push(globals.ackAwaiters___2330, s.aw___14374);
// jacdac/packet.ts(320,13): while (aw.nextRetry > 0)...
  case 5:
// jacdac/packet.ts(320,20): aw.nextRetry > 0
    r0 = s.aw___14374.fields["nextRetry"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// jacdac/packet.ts(321,17): control.waitForEvent(DAL.DEVICE_ID_NOTIFY, aw.eventId)
    r0 = s.aw___14374.fields["eventId"];
    s.tmp_2 = r0;
    setupResume(s, 11);
    pxsim.control.waitForEvent(1023, s.tmp_2);
    checkResumeConsumed();
    return;
  case 11:
    r0 = s.retval;
    { step = 5; continue; }
  case 6:
// jacdac/packet.ts(322,13): return aw.nextRetry == 0
    r0 = s.aw___14374.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 0);
  case 7:
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendWithAck__P1462.info = {"start":9300,"length":675,"line":302,"column":8,"endLine":322,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"_sendWithAck","argumentNames":["this","devId"]}

function jacdac_JDPacket__sendWithAck__P1462_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendWithAck__P1462, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  aw___14374: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket__sendWithAck_inline__P14368(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// jacdac/packet.ts(311,21): while (1) {...
  case 1:
// jacdac/packet.ts(311,28): 1
    r0 = pxsim_numops_toBoolDecr(1);
    if (!r0) { step = 2; continue; }
// jacdac/packet.ts(312,25): pause(Math.randomRange(20, 50))
    s.tmp_0 = pause__P411_mk(s);
    r0 = pxsim.Math_.randomRange(20, 50);
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 654; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// jacdac/packet.ts(313,25): checkAckAwaiters()
    s.tmp_0 = jacdac_checkAckAwaiters__P2336_mk(s);
    s.callLocIdx = 655; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket__sendWithAck_inline__P14368.info = {"start":9542,"length":178,"line":309,"column":38,"endLine":314,"endColumn":17,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":[]}

function jacdac_JDPacket__sendWithAck_inline__P14368_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket__sendWithAck_inline__P14368, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function jacdac_AckAwaiter_constructor__P2335(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_AckAwaiter__C2334_VT)) failedCast(r0);
    r0 = (s.arg0).fields["pkt"] = (s.arg1);
    r0 = (s.arg0).fields["srcId"] = (s.arg2);
    r0 = (s.arg0).fields["numTries"] = (1);
// jacdac/packet.ts(335,13): this.crc = pkt.crc
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_JDPacket_crc__P1434_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 657; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["crc"] = (s.tmp_1);
// jacdac/packet.ts(336,13): this.nextRetry = control.millis() + ACK_DELAY
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 40);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextRetry"] = (s.tmp_1);
// jacdac/packet.ts(337,13): this.eventId = control.allocateNotifyEvent()
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["eventId"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_AckAwaiter_constructor__P2335.info = {"start":10123,"length":265,"line":330,"column":8,"endLine":337,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["this","pkt","srcId"]}

function jacdac_AckAwaiter_constructor__P2335_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_AckAwaiter_constructor__P2335, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_checkAckAwaiters__P2336(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___14411 = undefined;
    s.toRetry___14414 = undefined;
    s.a___14428 = undefined;
    s.unnamed134___U3 = undefined;
    s.unnamed135___U4 = undefined;
// jacdac/packet.ts(342,15): now = control.millis()
    r0 = pxsim.control.millis();
    s.now___14411 = (r0);
// jacdac/packet.ts(343,15): toRetry = ackAwaiters.filter(a => now > a.nextRetry)
    r0 = pxsim_pxtcore_mkAction(1, toRetry_inline__P14416);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.now___14411);
    s.tmp_1 = helpers_arrayFilter__P110_mk(s);
    s.tmp_1.arg0 = globals.ackAwaiters___2330;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 658; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.toRetry___14414 = (r0);
// jacdac/packet.ts(344,9): if (!toRetry.length) return
    r0 = pxsim_Array__length(s.toRetry___14414);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(344,30): return
    { step = 10; continue; }
  case 1:
  case 2:
// jacdac/packet.ts(345,18): a
    s.a___14428 = (undefined);
    s.unnamed134___U3 = (s.toRetry___14414);
    s.unnamed135___U4 = (0);
// jacdac/packet.ts(345,9): for (let a of toRetry) {...
  case 3:
    s.tmp_0 = r0 = s.unnamed135___U4;
    r0 = pxsim_Array__length(s.unnamed134___U3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 9; continue; }
    r0 = pxsim_Array__getAt(s.unnamed134___U3, s.unnamed135___U4);
    s.a___14428 = (r0);
// jacdac/packet.ts(346,13): if (a.nextRetry == 0) continue
    r0 = s.a___14428.fields["nextRetry"];
    s.tmp_3 = r0;
    r0 = (s.tmp_3 == 0);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
// jacdac/packet.ts(346,35): continue
    { step = 8; continue; }
  case 4:
  case 5:
// jacdac/packet.ts(347,1): if (a.numTries >= ACK_RETRIES) {...
    r0 = s.a___14428.fields["numTries"];
    s.tmp_5 = r0;
    r0 = (s.tmp_5 >= 4);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 6; continue; }
// jacdac/packet.ts(348,17): a.nextRetry = -1
    r0 = (s.a___14428).fields["nextRetry"] = (-1);
// jacdac/packet.ts(349,17): control.raiseEvent(DAL.DEVICE_ID_NOTIFY, a.eventId)
    r0 = s.a___14428.fields["eventId"];
    s.tmp_0 = r0;
    r0 = pxsim.control.raiseEvent(1023, s.tmp_0);
    { step = 7; continue; }
  case 6:
// jacdac/packet.ts(351,17): a.numTries++
    s.tmp_0 = r0 = s.a___14428;
    r0 = s.tmp_0.fields["numTries"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 + 1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["numTries"] = (s.tmp_1);
// jacdac/packet.ts(352,17): a.nextRetry = now + a.numTries * ACK_DELAY
    s.tmp_0 = r0 = s.a___14428;
    s.tmp_2 = r0 = s.now___14411;
    r0 = s.a___14428.fields["numTries"];
    s.tmp_4 = r0;
    r0 = (s.tmp_4 * 40);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["nextRetry"] = (s.tmp_1);
// jacdac/packet.ts(353,17): a.pkt._sendCore()
    s.tmp_0 = jacdac_JDPacket__sendCore__P1457_mk(s);
    r0 = s.a___14428.fields["pkt"];
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 659; s.pc = 12; return s.tmp_0;
  case 12:
    r0 = s.retval;
  case 7:
  case 8:
    r0 = (s.unnamed135___U4 + 1);
    s.unnamed135___U4 = (r0);
    { step = 3; continue; }
  case 9:
    s.unnamed134___U3 = (undefined);
// jacdac/packet.ts(356,9): ackAwaiters = ackAwaiters.filter(a => a.nextRetry > 0)
    s.tmp_0 = helpers_arrayFilter__P110_mk(s);
    s.tmp_0.arg0 = globals.ackAwaiters___2330;
    s.tmp_0.arg1 = jacdac_checkAckAwaiters_inline__P14463;
    s.callLocIdx = 660; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
    globals.ackAwaiters___2330 = (r0);
  case 10:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_checkAckAwaiters__P2336.info = {"start":10400,"length":646,"line":340,"column":4,"endLine":356,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"checkAckAwaiters","argumentNames":[]}

function jacdac_checkAckAwaiters__P2336_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_checkAckAwaiters__P2336, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  now___14411: undefined,
  toRetry___14414: undefined,
  a___14428: undefined,
  unnamed134___U3: undefined,
  unnamed135___U4: undefined,
} }





function toRetry_inline__P14416(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.caps[0] > s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
toRetry_inline__P14416.info = {"start":10510,"length":22,"line":342,"column":43,"endLine":342,"endColumn":65,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function toRetry_inline__P14416_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: toRetry_inline__P14416, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_checkAckAwaiters_inline__P14463(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0.fields["nextRetry"];
    s.tmp_0 = r0;
    r0 = (s.tmp_0 > 0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_checkAckAwaiters_inline__P14463.info = {"start":11019,"length":20,"line":355,"column":41,"endLine":355,"endColumn":61,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"inline","argumentNames":["a"]}

function jacdac_checkAckAwaiters_inline__P14463_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_checkAckAwaiters_inline__P14463, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_write__P1494(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1489_VT)) failedCast(r0);
// jacdac/pipes.ts(148,13): this.writeEx(buf, 0)
    s.tmp_0 = jacdac_OutPipe_writeEx__P2406_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 0;
    s.callLocIdx = 705; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_write__P1494.info = {"start":4170,"length":63,"line":146,"column":8,"endLine":148,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"write","argumentNames":["this","buf"]}

function jacdac_OutPipe_write__P1494_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_write__P1494, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_OutPipe_from__P1491(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.idbuf___14477 = undefined;
    s.port___14478 = undefined;
    s.id___14479 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// jacdac/pipes.ts(106,20): idbuf
    s.tmp_1 = jacdac_jdunpack__P1467_mk(s);
    s.tmp_2 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 694; s.pc = 2; return s.tmp_2;
  case 2:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = "b[8] u16";
    s.callLocIdx = 695; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.idbuf___14477 = (r0);
// jacdac/pipes.ts(106,27): port
    r0 = pxsim_Array__getAt(s.tmp_0, 1);
    s.port___14478 = (r0);
// jacdac/pipes.ts(110,19): id = idbuf.toHex()
    r0 = pxsim.BufferMethods.toHex(s.idbuf___14477);
    s.id___14479 = (r0);
// jacdac/pipes.ts(111,13): return new OutPipe(id, port)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_OutPipe__C1489_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_OutPipe_constructor__P1490_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.id___14479;
    s.tmp_1.arg2 = s.port___14478;
    s.callLocIdx = 696; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    r0 = s.tmp_0;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_from__P1491.info = {"start":2857,"length":245,"line":104,"column":8,"endLine":111,"endColumn":9,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"from","argumentNames":["pkt"]}

function jacdac_OutPipe_from__P1491_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_from__P1491, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  idbuf___14477: undefined,
  port___14478: undefined,
  id___14479: undefined,
  arg0: undefined,
} }





function jacdac_OutPipe_constructor__P1490(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_OutPipe__C1489_VT)) failedCast(r0);
    r0 = (s.arg0).fields["deviceId"] = (s.arg1);
    r0 = (s.arg0).fields["port"] = (s.arg2);
    r0 = (s.arg0).fields["nextCnt"] = (0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_OutPipe_constructor__P1490.info = {"start":2778,"length":69,"line":102,"column":8,"endLine":102,"endColumn":77,"fileName":"pxt_modules/jacdac/pipes.ts","functionName":"inline","argumentNames":["this","deviceId","port"]}

function jacdac_OutPipe_constructor__P1490_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_OutPipe_constructor__P1490, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_Server_handleRegBool__P2390(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___14492 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Server__C1824_VT)) failedCast(r0);
// jacdac/routing.ts(478,19): res = this.handleRegValue(...
    r0 = pxsim_numops_toBoolDecr(s.arg3);
    if (!r0) { step = 1; continue; }
    r0 = 1;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_Server_handleRegValue__P2389_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    s.tmp_1.arg2 = s.arg2;
    s.tmp_1.arg3 = "u8";
    s.tmp_1.arg4 = s.tmp_0;
    s.callLocIdx = 906; s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.res___14492 = (r0);
// jacdac/routing.ts(484,13): return !!res
    r0 = pxsim_numops_toBoolDecr(s.res___14492);
    s.tmp_2 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_0);
    return leave(s, r0)
  default: oops()
} } }
jacdac_Server_handleRegBool__P2390.info = {"start":16306,"length":326,"line":472,"column":8,"endLine":484,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"handleRegBool","argumentNames":["this","pkt","register","current"]}

function jacdac_Server_handleRegBool__P2390_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Server_handleRegBool__P2390, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  res___14492: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }





function jacdac_LoggerServer_log__P1649(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C1644_VT)) failedCast(r0);
// jacdac/logger-server/server.ts(45,13): this.add(jacdac.LoggerPriority.Log, message)
    s.tmp_0 = jacdac_LoggerServer_add__P1652_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 1;
    s.tmp_0.arg2 = s.arg1;
    s.callLocIdx = 717; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_log__P1649.info = {"start":1673,"length":95,"line":43,"column":8,"endLine":45,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"log","argumentNames":["this","message"]}

function jacdac_LoggerServer_log__P1649_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_log__P1649, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_LoggerServer_handlePacket__P1647(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.now___14523 = undefined;
    s.d___14526 = undefined;
    s.elapsed___14531 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_LoggerServer__C1644_VT)) failedCast(r0);
// jacdac/logger-server/server.ts(12,13): this.minPriority = this.handleRegValue(...
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = jacdac_Server_handleRegValue__P2389_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = s.arg1;
    s.tmp_2.arg2 = 128;
    s.tmp_2.arg3 = "u8";
    r0 = s.arg0.fields["minPriority"];
    s.tmp_2.arg4 = r0;
    s.callLocIdx = 713; s.pc = 10; return s.tmp_2;
  case 10:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["minPriority"] = (s.tmp_1);
// jacdac/logger-server/server.ts(20,13): switch (packet.serviceCommand) {...
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 714; s.pc = 11; return s.tmp_1;
  case 11:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(8320, s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 1:
// jacdac/logger-server/server.ts(22,27): now = control.millis()
    r0 = pxsim.control.millis();
    s.now___14523 = (r0);
// jacdac/logger-server/server.ts(25,27): d = packet.jdunpack("u8")[0]
    s.tmp_1 = jacdac_JDPacket_jdunpack__P1448_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = "u8";
    s.callLocIdx = 715; s.pc = 12; return s.tmp_1;
  case 12:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.d___14526 = (r0);
// jacdac/logger-server/server.ts(26,27): elapsed = now - this._lastListenerTime
    r0 = s.arg0.fields["_lastListenerTime"];
    s.tmp_0 = r0;
    r0 = (s.now___14523 - s.tmp_0);
    s.elapsed___14531 = (r0);
// jacdac/logger-server/server.ts(27,21): if (d <= this.minPriority || elapsed > 1500) {...
    r0 = s.arg0.fields["minPriority"];
    s.tmp_1 = r0;
    r0 = (s.d___14526 <= s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = (s.elapsed___14531 > 1500);
  case 3:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 4; continue; }
// jacdac/logger-server/server.ts(28,25): this.minPriority = d
    r0 = (s.arg0).fields["minPriority"] = (s.d___14526);
// jacdac/logger-server/server.ts(29,25): this._lastListenerTime = now
    r0 = (s.arg0).fields["_lastListenerTime"] = (s.now___14523);
  case 4:
  case 5:
// jacdac/logger-server/server.ts(31,21): if ((console.minPriority as number) > (this.minPriority as number))
    r0 = s.arg0.fields["minPriority"];
    s.tmp_1 = r0;
    r0 = (globals.minPriority___373 > s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// jacdac/logger-server/server.ts(32,25): console.minPriority = this.minPriority as number as ConsolePriority
    r0 = s.arg0.fields["minPriority"];
    globals.minPriority___373 = (r0);
  case 6:
  case 7:
// jacdac/logger-server/server.ts(33,21): break
    { step = 9; continue; }
  case 8:
// jacdac/logger-server/server.ts(36,21): packet.possiblyNotImplemented()
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P1424_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 716; s.pc = 13; return s.tmp_0;
  case 13:
    r0 = s.retval;
// jacdac/logger-server/server.ts(37,21): break
  case 9:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_LoggerServer_handlePacket__P1647.info = {"start":279,"length":1276,"line":10,"column":8,"endLine":38,"endColumn":9,"fileName":"pxt_modules/jacdac/logger-server/server.ts","functionName":"handlePacket","argumentNames":["this","packet"]}

function jacdac_LoggerServer_handlePacket__P1647_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_LoggerServer_handlePacket__P1647, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  now___14523: undefined,
  d___14526: undefined,
  elapsed___14531: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_WiFiServer_handlePacket__P2114(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.controller___14561 = undefined;
    s.newEn___14564 = undefined;
    s.ssid___14652 = undefined;
    s.pwd___14653 = undefined;
    s.pri___14663 = undefined;
    s.ssid___14664 = undefined;
    s.ssid___14671 = undefined;
    s.pri___14687 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_WiFiServer__C2111_VT)) failedCast(r0);
// jacdac-wifi-server/server.ts(34,19): controller = net.instance().controller
    s.tmp_0 = net_Net_controller__P1207_mk(s);
    s.tmp_1 = net_instance__P1211_mk(s);
    s.callLocIdx = 1175; s.pc = 28; return s.tmp_1;
  case 28:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.callLocIdx = 1176; s.pc = 27; return s.tmp_0;
  case 27:
    r0 = s.retval;
    s.controller___14561 = (r0);
// jacdac-wifi-server/server.ts(36,19): newEn = this.handleRegBool(...
    s.tmp_0 = jacdac_Server_handleRegBool__P2390_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 1;
    r0 = s.arg0.fields["enabled"];
    s.tmp_0.arg3 = r0;
    s.callLocIdx = 1177; s.pc = 29; return s.tmp_0;
  case 29:
    r0 = s.retval;
    s.newEn___14564 = (r0);
// jacdac-wifi-server/server.ts(41,13): if (newEn != this.enabled) {...
    r0 = s.arg0.fields["enabled"];
    s.tmp_1 = r0;
    r0 = (s.newEn___14564 != s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac-wifi-server/server.ts(42,17): this.enabled = newEn
    r0 = (s.arg0).fields["enabled"] = (s.newEn___14564);
// jacdac-wifi-server/server.ts(43,17): if (this.enabled) controller.autoconnect()...
    r0 = s.arg0.fields["enabled"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac-wifi-server/server.ts(43,35): controller.autoconnect()
    s.tmp_1 = net_Controller_autoconnect__P1130_mk(s);
    s.tmp_1.arg0 = s.controller___14561;
    s.callLocIdx = 1178; s.pc = 30; return s.tmp_1;
  case 30:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
// jacdac-wifi-server/server.ts(44,22): controller.disconnect()
    s.tmp_0 = net_Controller_disconnect__P1131_mk(s);
    s.tmp_0.arg0 = s.controller___14561;
    s.callLocIdx = 1179; s.pc = 31; return s.tmp_0;
  case 31:
    r0 = s.retval;
  case 2:
  case 3:
  case 4:
// jacdac-wifi-server/server.ts(47,13): switch (pkt.serviceCommand) {...
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 1180; s.pc = 32; return s.tmp_1;
  case 32:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(4481, s.tmp_0);
    if (r0) { step = 5; continue; }
    r0 = pxsim_pxtcore.switch_eq(4482, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(4483, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(4484, s.tmp_0);
    if (r0) { step = 12; continue; }
    r0 = pxsim_pxtcore.switch_eq(128, s.tmp_0);
    if (r0) { step = 15; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 18; continue; }
    r0 = pxsim_pxtcore.switch_eq(134, s.tmp_0);
    if (r0) { step = 19; continue; }
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 20; continue; }
    r0 = pxsim_pxtcore.switch_eq(133, s.tmp_0);
    if (r0) { step = 21; continue; }
    r0 = pxsim_pxtcore.switch_eq(131, s.tmp_0);
    if (r0) { step = 22; continue; }
    r0 = pxsim_pxtcore.switch_eq(132, s.tmp_0);
    if (r0) { step = 23; continue; }
    r0 = pxsim_pxtcore.switch_eq(135, s.tmp_0);
    if (r0) { step = 24; continue; }
    r0 = s.tmp_0;
    { step = 25; continue; }
  case 5:
// jacdac-wifi-server/server.ts(49,21): pkt.respond(...
    s.tmp_3 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_3.arg0 = s.controller___14561;
    if (!checkSubtype(s.tmp_3.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.isConnected;
    s.pc = 33; return s.tmp_3;
  case 33:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    if (!r0) { step = 6; continue; }
    s.tmp_4 = net_Controller__C1112_v14_1_mk(s);
    s.tmp_4.arg0 = s.controller___14561;
    if (!checkSubtype(s.tmp_4.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_4.arg0);
    s.tmp_4.fn = s.tmp_4.arg0.vtable.methods.IPaddress;
    s.pc = 34; return s.tmp_4;
  case 34:
    r0 = s.retval;
    { step = 7; continue; }
  case 6:
    r0 = pxsim.control.createBuffer(0);
  case 7:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    s.tmp_6 = jacdac_JDPacket_respond__P1456_mk(s);
    s.tmp_6.arg0 = s.arg1;
    s.tmp_6.arg1 = s.tmp_5;
    s.callLocIdx = 1181; s.pc = 35; return s.tmp_6;
  case 35:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(54,21): break
    { step = 26; continue; }
  case 8:
// jacdac-wifi-server/server.ts(56,21): pkt.respond(controller.MACaddress)
    s.tmp_0 = jacdac_JDPacket_respond__P1456_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.tmp_1 = net_Controller__C1112_v13_1_mk(s);
    s.tmp_1.arg0 = s.controller___14561;
    if (!checkSubtype(s.tmp_1.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.MACaddress;
    s.pc = 37; return s.tmp_1;
  case 37:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 1182; s.pc = 36; return s.tmp_0;
  case 36:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(57,21): break
    { step = 26; continue; }
  case 9:
// jacdac-wifi-server/server.ts(59,21): pkt.respond(Buffer.fromUTF8(controller.ssid || ""))
    s.tmp_1 = net_Controller__C1112_v11_1_mk(s);
    s.tmp_1.arg0 = s.controller___14561;
    if (!checkSubtype(s.tmp_1.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.ssid;
    s.pc = 38; return s.tmp_1;
  case 38:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 10:
    r0 = pxsim_String_.mkEmpty();
  case 11:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    s.tmp_3 = jacdac_JDPacket_respond__P1456_mk(s);
    s.tmp_3.arg0 = s.arg1;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 1183; s.pc = 39; return s.tmp_3;
  case 39:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(60,21): break
    { step = 26; continue; }
  case 12:
// jacdac-wifi-server/server.ts(62,21): pkt.respond(jacdac.jdpack("i8", [controller.rssi || 0]))
    s.tmp_1 = net_Controller__C1112_v12_1_mk(s);
    s.tmp_1.arg0 = s.controller___14561;
    if (!checkSubtype(s.tmp_1.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.rssi;
    s.pc = 40; return s.tmp_1;
  case 40:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 13; continue; }
    r0 = s.tmp_0;
    { step = 14; continue; }
  case 13:
    r0 = 0;
  case 14:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_3, s.tmp_2);
    s.tmp_4 = jacdac_JDPacket_respond__P1456_mk(s);
    s.tmp_4.arg0 = s.arg1;
    s.tmp_5 = jacdac_jdpack__P1468_mk(s);
    s.tmp_5.arg0 = "i8";
    s.tmp_5.arg1 = s.tmp_3;
    s.callLocIdx = 1184; s.pc = 42; return s.tmp_5;
  case 42:
    r0 = s.retval;
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 1185; s.pc = 41; return s.tmp_4;
  case 41:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(63,21): break
    { step = 26; continue; }
  case 15:
// jacdac-wifi-server/server.ts(65,21): jacdac.OutPipe.respondForEach(...
    r0 = s.controller___14561.fields["lastScanResults"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 16; continue; }
    r0 = s.tmp_0;
    { step = 17; continue; }
  case 16:
    r0 = pxsim_Array__mk();
  case 17:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    s.tmp_2 = jacdac_OutPipe_respondForEach__P1492_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.tmp_2.arg1 = s.tmp_1;
    s.tmp_2.arg2 = servers_WiFiServer_handlePacket_inline__P14639;
    s.callLocIdx = 1187; s.pc = 43; return s.tmp_2;
  case 43:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(70,21): break
    { step = 26; continue; }
  case 18:
// jacdac-wifi-server/server.ts(72,21): controller.disconnectAP()
    s.tmp_0 = net_Controller__C1112_v10_1_mk(s);
    s.tmp_0.arg0 = s.controller___14561;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.disconnectAP;
    s.pc = 44; return s.tmp_0;
  case 44:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(73,21): break
    { step = 26; continue; }
  case 19:
// jacdac-wifi-server/server.ts(75,21): control.runInBackground(() => controller.scanNetworks())
    r0 = pxsim_pxtcore_mkAction(1, servers_WiFiServer_handlePacket_inline__P14646);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.controller___14561);
    s.tmp_1 = control_runInBackground__P289_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.callLocIdx = 1188; s.pc = 45; return s.tmp_1;
  case 45:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(76,21): break
    { step = 26; continue; }
  case 20:
// jacdac-wifi-server/server.ts(78,28): ssid
    s.tmp_1 = jacdac_JDPacket_jdunpack__P1448_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = "z z";
    s.callLocIdx = 1189; s.pc = 46; return s.tmp_1;
  case 46:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.ssid___14652 = (r0);
// jacdac-wifi-server/server.ts(78,34): pwd
    r0 = pxsim_Array__getAt(s.tmp_0, 1);
    s.pwd___14653 = (r0);
// jacdac-wifi-server/server.ts(79,21): net.updateAccessPoint(ssid, pwd)
    s.tmp_0 = net_updateAccessPoint__P1214_mk(s);
    s.tmp_0.arg0 = s.ssid___14652;
    s.tmp_0.arg1 = s.pwd___14653;
    s.callLocIdx = 1190; s.pc = 47; return s.tmp_0;
  case 47:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(80,21): this.sendEvent(jacdac.WifiEvent.NetworksChanged)
    s.tmp_0 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 129;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1191; s.pc = 48; return s.tmp_0;
  case 48:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(81,21): break
    { step = 26; continue; }
  case 21:
// jacdac-wifi-server/server.ts(84,28): pri
    s.tmp_1 = jacdac_JDPacket_jdunpack__P1448_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_1.arg1 = "i16 s";
    s.callLocIdx = 1192; s.pc = 49; return s.tmp_1;
  case 49:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_Array__getAt(s.tmp_0, 0);
    s.pri___14663 = (r0);
// jacdac-wifi-server/server.ts(84,33): ssid
    r0 = pxsim_Array__getAt(s.tmp_0, 1);
    s.ssid___14664 = (r0);
// jacdac-wifi-server/server.ts(85,21): net.setAccessPointPriority(ssid, pri)
    s.tmp_0 = net_setAccessPointPriority__P1215_mk(s);
    s.tmp_0.arg0 = s.ssid___14664;
    s.tmp_0.arg1 = s.pri___14663;
    s.callLocIdx = 1193; s.pc = 50; return s.tmp_0;
  case 50:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(86,21): this.sendEvent(jacdac.WifiEvent.NetworksChanged)
    s.tmp_0 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 129;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1194; s.pc = 51; return s.tmp_0;
  case 51:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(87,21): break
    { step = 26; continue; }
  case 22:
// jacdac-wifi-server/server.ts(90,27): ssid = pkt.stringData
    s.tmp_0 = jacdac_JDPacket_stringData__P1447_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1195; s.pc = 52; return s.tmp_0;
  case 52:
    r0 = s.retval;
    s.ssid___14671 = (r0);
// jacdac-wifi-server/server.ts(91,21): net.clearAccessPoint(ssid)
    s.tmp_0 = net_clearAccessPoint__P1213_mk(s);
    s.tmp_0.arg0 = s.ssid___14671;
    s.callLocIdx = 1196; s.pc = 53; return s.tmp_0;
  case 53:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(93,1): controller.disconnectAP()
    s.tmp_0 = net_Controller__C1112_v10_1_mk(s);
    s.tmp_0.arg0 = s.controller___14561;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.disconnectAP;
    s.pc = 54; return s.tmp_0;
  case 54:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(94,21): this.sendEvent(jacdac.WifiEvent.NetworksChanged)
    s.tmp_0 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 129;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1197; s.pc = 55; return s.tmp_0;
  case 55:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(95,21): break
    { step = 26; continue; }
  case 23:
// jacdac-wifi-server/server.ts(98,21): net.clearAccessPoints()
    s.tmp_0 = net_clearAccessPoints__P1217_mk(s);
    s.callLocIdx = 1198; s.pc = 56; return s.tmp_0;
  case 56:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(100,1): controller.disconnectAP()
    s.tmp_0 = net_Controller__C1112_v10_1_mk(s);
    s.tmp_0.arg0 = s.controller___14561;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.disconnectAP;
    s.pc = 57; return s.tmp_0;
  case 57:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(101,21): this.sendEvent(jacdac.WifiEvent.NetworksChanged)
    s.tmp_0 = jacdac_Server_sendEvent__P2384_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 129;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 1199; s.pc = 58; return s.tmp_0;
  case 58:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(102,21): break
    { step = 26; continue; }
  case 24:
// jacdac-wifi-server/server.ts(104,27): pri = net.accessPointPriorities()
    s.tmp_0 = net_accessPointPriorities__P1216_mk(s);
    s.callLocIdx = 1200; s.pc = 59; return s.tmp_0;
  case 59:
    r0 = s.retval;
    s.pri___14687 = (r0);
// jacdac-wifi-server/server.ts(105,21): jacdac.OutPipe.respondForEach(...
    r0 = pxsim_pxtcore_mkAction(1, servers_WiFiServer_handlePacket_inline__P14695);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.pri___14687);
    s.tmp_1 = jacdac_OutPipe_respondForEach__P1492_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.tmp_3 = net_knownAccessPoints__P1212_mk(s);
    s.callLocIdx = 1201; s.pc = 61; return s.tmp_3;
  case 61:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt.keysOf(s.tmp_2);
    s.tmp_1.arg1 = r0;
    s.tmp_1.arg2 = s.tmp_0;
    s.callLocIdx = 1203; s.pc = 60; return s.tmp_1;
  case 60:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(110,21): break
    { step = 26; continue; }
  case 25:
// jacdac-wifi-server/server.ts(113,21): pkt.possiblyNotImplemented()
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P1424_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1204; s.pc = 62; return s.tmp_0;
  case 62:
    r0 = s.retval;
// jacdac-wifi-server/server.ts(114,21): break
  case 26:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_handlePacket__P2114.info = {"start":1275,"length":3517,"line":32,"column":8,"endLine":115,"endColumn":9,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function servers_WiFiServer_handlePacket__P2114_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_handlePacket__P2114, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  controller___14561: undefined,
  newEn___14564: undefined,
  ssid___14652: undefined,
  pwd___14653: undefined,
  pri___14663: undefined,
  ssid___14664: undefined,
  ssid___14671: undefined,
  pri___14687: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_WiFiServer_handlePacket_inline__P14639(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    s.tmp_0 = net_AccessPoint_toBuffer__P1192_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 1186; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_handlePacket_inline__P14639.info = {"start":2740,"length":19,"line":67,"column":24,"endLine":67,"endColumn":43,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":["ap"]}

function servers_WiFiServer_handlePacket_inline__P14639_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_handlePacket_inline__P14639, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_WiFiServer_handlePacket_inline__P14646(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_Controller__C1112_v0_1_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.scanNetworks;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_handlePacket_inline__P14646.info = {"start":3013,"length":31,"line":74,"column":44,"endLine":74,"endColumn":75,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":[]}

function servers_WiFiServer_handlePacket_inline__P14646_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_handlePacket_inline__P14646, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function servers_WiFiServer_handlePacket_inline__P14695(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.arg0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = 0;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_Array__mk();
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_2, s.tmp_1);
    r0 = pxsim_Array__push(s.tmp_2, 0);
    r0 = pxsim_Array__push(s.tmp_2, s.arg0);
    s.tmp_3 = jacdac_jdpack__P1468_mk(s);
    s.tmp_3.arg0 = "i16 i16 s";
    s.tmp_3.arg1 = s.tmp_2;
    s.callLocIdx = 1202; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
servers_WiFiServer_handlePacket_inline__P14695.info = {"start":4547,"length":55,"line":107,"column":24,"endLine":107,"endColumn":79,"fileName":"pxt_modules/jacdac-wifi-server/server.ts","functionName":"inline","argumentNames":["ap"]}

function servers_WiFiServer_handlePacket_inline__P14695_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_WiFiServer_handlePacket_inline__P14695, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function net_clearAccessPoints__P1217(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// net/net.ts(186,9): settings.deviceSecrets.setSecret(AP_SECRETS_KEY, undefined)
    s.tmp_0 = settings_SecretStore_setSecret__P1096_mk(s);
    s.tmp_0.arg0 = globals.deviceSecrets___1101;
    s.tmp_0.arg1 = globals.AP_SECRETS_KEY___2261;
    s.tmp_0.arg2 = undefined;
    s.callLocIdx = 233; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_clearAccessPoints__P1217.info = {"start":5626,"length":112,"line":184,"column":4,"endLine":186,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"clearAccessPoints","argumentNames":[]}

function net_clearAccessPoints__P1217_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_clearAccessPoints__P1217, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_clearAccessPoint__P1213(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.ap___14711 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// net/net.ts(160,15): ap = knownAccessPoints()
    s.tmp_0 = net_knownAccessPoints__P1212_mk(s);
    s.callLocIdx = 227; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.ap___14711 = (r0);
// net/net.ts(161,9): if (ap[ssid] !== undefined) {...
    r0 = pxsim_pxtrt.mapGetGeneric(s.ap___14711, s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 !== undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/net.ts(162,13): delete ap[ssid]
    r0 = pxsim_pxtrt.mapDeleteByString(s.ap___14711, s.arg0);
// net/net.ts(163,13): settings.deviceSecrets.setSecret(AP_SECRETS_KEY, ap)
    s.tmp_0 = settings_SecretStore_setSecret__P1096_mk(s);
    s.tmp_0.arg0 = globals.deviceSecrets___1101;
    s.tmp_0.arg1 = globals.AP_SECRETS_KEY___2261;
    s.tmp_0.arg2 = s.ap___14711;
    s.callLocIdx = 228; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_clearAccessPoint__P1213.info = {"start":4845,"length":234,"line":158,"column":4,"endLine":164,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"clearAccessPoint","argumentNames":["ssid"]}

function net_clearAccessPoint__P1213_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_clearAccessPoint__P1213, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  ap___14711: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_stringData__P1447(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(206,13): return this._data && this._data.toString()
    r0 = s.arg0.fields["_data"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["_data"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.toString(s.tmp_1);
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_stringData__P1447.info = {"start":6223,"length":83,"line":204,"column":8,"endLine":206,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"stringData","argumentNames":["this"]}
jacdac_JDPacket_stringData__P1447.isGetter = true;

function jacdac_JDPacket_stringData__P1447_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_stringData__P1447, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function net_setAccessPointPriority__P1215(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.s___14735 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// net/net.ts(174,15): s = accessPointPriorities()
    s.tmp_0 = net_accessPointPriorities__P1216_mk(s);
    s.callLocIdx = 230; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.s___14735 = (r0);
// net/net.ts(175,9): if (s[ssid] != pri) {...
    r0 = pxsim_pxtrt.mapGetGeneric(s.s___14735, s.arg0);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 != s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/net.ts(176,13): s[ssid] = pri
    r0 = pxsim_pxtrt.mapSetGeneric(s.s___14735, s.arg0, s.arg1);
// net/net.ts(177,13): settings.writeJSON(AP_PRI_KEY, s)
    s.tmp_0 = settings_writeJSON__P1083_mk(s);
    s.tmp_0.arg0 = globals.AP_PRI_KEY___2262;
    s.tmp_0.arg1 = s.s___14735;
    s.callLocIdx = 231; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_setAccessPointPriority__P1215.info = {"start":5289,"length":227,"line":172,"column":4,"endLine":178,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"setAccessPointPriority","argumentNames":["ssid","pri"]}

function net_setAccessPointPriority__P1215_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_setAccessPointPriority__P1215, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  s___14735: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_updateAccessPoint__P1214(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.k___14752 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// net/net.ts(168,15): k: StringMap = {}
    r0 = pxsim_pxtrt.mkMap();
    s.k___14752 = (r0);
// net/net.ts(169,9): k[ssid] = password
    r0 = pxsim_pxtrt.mapSetGeneric(s.k___14752, s.arg0, s.arg1);
// net/net.ts(170,9): settings.deviceSecrets.updateSecret(AP_SECRETS_KEY, k)
    s.tmp_0 = settings_SecretStore_updateSecret__P1097_mk(s);
    s.tmp_0.arg0 = globals.deviceSecrets___1101;
    s.tmp_0.arg1 = globals.AP_SECRETS_KEY___2261;
    s.tmp_0.arg2 = s.k___14752;
    s.callLocIdx = 229; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_updateAccessPoint__P1214.info = {"start":5085,"length":198,"line":166,"column":4,"endLine":170,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"updateAccessPoint","argumentNames":["ssid","password"]}

function net_updateAccessPoint__P1214_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_updateAccessPoint__P1214, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  k___14752: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function settings_SecretStore_updateSecret__P1097(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.secrets___14765 = undefined;
    s.secret___14768 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, settings_SecretStore__C1094_VT)) failedCast(r0);
// settings---esp32/settings.ts(209,19): secrets = this.readSecrets()
    s.tmp_0 = settings_SecretStore_readSecrets__P1100_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 153; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    s.secrets___14765 = (r0);
// settings---esp32/settings.ts(210,19): secret = secrets[name]
    r0 = pxsim_pxtrt.mapGetGeneric(s.secrets___14765, s.arg1);
    s.secret___14768 = (r0);
// settings---esp32/settings.ts(211,13): if (secret === undefined)...
    r0 = (s.secret___14768 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// settings---esp32/settings.ts(212,17): secrets[name] = value
    r0 = pxsim_pxtrt.mapSetGeneric(s.secrets___14765, s.arg1, s.arg2);
    { step = 2; continue; }
  case 1:
// settings---esp32/settings.ts(213,18): jsonMergeFrom(secret, value)
    s.tmp_0 = settings_jsonMergeFrom__P2244_mk(s);
    s.tmp_0.arg0 = s.secret___14768;
    s.tmp_0.arg1 = s.arg2;
    s.callLocIdx = 154; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
  case 2:
// settings---esp32/settings.ts(214,13): writeJSON(this.key, secrets)
    s.tmp_0 = settings_writeJSON__P1083_mk(s);
    r0 = s.arg0.fields["key"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.secrets___14765;
    s.callLocIdx = 155; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_SecretStore_updateSecret__P1097.info = {"start":5145,"length":305,"line":207,"column":8,"endLine":214,"endColumn":9,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"updateSecret","argumentNames":["this","name","value"]}

function settings_SecretStore_updateSecret__P1097_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_SecretStore_updateSecret__P1097, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  secrets___14765: undefined,
  secret___14768: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function settings_jsonMergeFrom__P2244(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.keys___14790 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(187,9): if (!src) return;
    r0 = pxsim_numops_toBoolDecr(s.arg1);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// settings---esp32/settings.ts(187,19): return;
    { step = 3; continue; }
  case 1:
  case 2:
// settings---esp32/settings.ts(188,15): keys = Object.keys(src)
    r0 = pxsim_pxtrt.keysOf(s.arg1);
    s.keys___14790 = (r0);
// settings---esp32/settings.ts(189,9): keys.forEach(k => {...
    r0 = pxsim_pxtcore_mkAction(2, settings_jsonMergeFrom_inline__P14796);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg1);
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 1, s.arg0);
    s.tmp_1 = helpers_arrayForEach__P109_mk(s);
    s.tmp_1.arg0 = s.keys___14790;
    s.tmp_1.arg1 = s.tmp_0;
    s.callLocIdx = 150; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 3:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_jsonMergeFrom__P2244.info = {"start":4522,"length":331,"line":185,"column":4,"endLine":195,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"jsonMergeFrom","argumentNames":["trg","src"]}

function settings_jsonMergeFrom__P2244_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_jsonMergeFrom__P2244, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  keys___14790: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function settings_jsonMergeFrom_inline__P14796(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.srck___14798 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(190,19): srck = src[k]
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[0], s.arg0);
    s.srck___14798 = (r0);
// settings---esp32/settings.ts(191,13): if (isKV(trg[k]) && isKV(srck))...
    s.tmp_1 = settings_isKV__P2243_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[1], s.arg0);
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 146; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    s.tmp_2 = settings_isKV__P2243_mk(s);
    s.tmp_2.arg0 = s.srck___14798;
    s.callLocIdx = 147; s.pc = 6; return s.tmp_2;
  case 6:
    r0 = s.retval;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// settings---esp32/settings.ts(192,17): jsonMergeFrom(trg[k], srck)
    s.tmp_4 = settings_jsonMergeFrom__P2244_mk(s);
    r0 = pxsim_pxtrt.mapGetGeneric(s.caps[1], s.arg0);
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = s.srck___14798;
    s.callLocIdx = 148; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    { step = 4; continue; }
  case 3:
// settings---esp32/settings.ts(194,17): trg[k] = clone(srck)
    s.tmp_0 = r0 = s.caps[1];
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = settings_clone__P2242_mk(s);
    s.tmp_3.arg0 = s.srck___14798;
    s.callLocIdx = 149; s.pc = 8; return s.tmp_3;
  case 8:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtrt.mapSetGeneric(s.tmp_0, s.tmp_1, s.tmp_2);
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
settings_jsonMergeFrom_inline__P14796.info = {"start":4652,"length":193,"line":188,"column":21,"endLine":194,"endColumn":9,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"inline","argumentNames":["k"]}

function settings_jsonMergeFrom_inline__P14796_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_jsonMergeFrom_inline__P14796, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  srck___14798: undefined,
  arg0: undefined,
} }





function settings_clone__P2242(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(178,9): if (v == null) return null
    r0 = (s.arg0 == null);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// settings---esp32/settings.ts(178,24): return null
    r0 = null;
    { step = 3; continue; }
  case 1:
  case 2:
// settings---esp32/settings.ts(179,9): return JSON.parse(JSON.stringify(v))
    s.tmp_1 = JSON_parse__P386_mk(s);
    s.tmp_2 = JSON_stringify__P385_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = null;
    s.tmp_2.arg2 = 0;
    s.callLocIdx = 144; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.callLocIdx = 145; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
settings_clone__P2242.info = {"start":4301,"length":115,"line":176,"column":4,"endLine":179,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"clone","argumentNames":["v"]}

function settings_clone__P2242_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_clone__P2242, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function settings_isKV__P2243(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// settings---esp32/settings.ts(183,9): return !!v && typeof v === "object" && !Array.isArray(v)
    r0 = pxsim_numops_toBoolDecr(s.arg0);
    s.tmp_3 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_3);
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = pxsim_pxtcore.typeOf(s.arg0);
    s.tmp_4 = r0;
    r0 = (s.tmp_4 === "object");
  case 2:
    // jmp value (already in r0)
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBool(s.tmp_5);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_5;
    { step = 4; continue; }
  case 3:
    r0 = pxsim_Array_.isArray(s.arg0);
    s.tmp_7 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_7);
    s.tmp_6 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_6);
  case 4:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = s.tmp_8;
    return leave(s, r0)
  default: oops()
} } }
settings_isKV__P2243.info = {"start":4422,"length":94,"line":181,"column":4,"endLine":183,"endColumn":5,"fileName":"pxt_modules/settings---esp32/settings.ts","functionName":"isKV","argumentNames":["v"]}

function settings_isKV__P2243_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: settings_isKV__P2243, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  arg0: undefined,
} }





function net_Controller_disconnectAP__P1128(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_disconnectAP__P1128.info = {"start":2131,"length":18,"line":73,"column":8,"endLine":73,"endColumn":26,"fileName":"pxt_modules/net/controller.ts","functionName":"disconnectAP","argumentNames":["this"]}

function net_Controller_disconnectAP__P1128_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_disconnectAP__P1128, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_AccessPoint_toBuffer__P1192(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.pref___14842 = undefined;
    s.bssid___14852 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_AccessPoint__C1185_VT)) failedCast(r0);
// net/net.ts(73,19): pref = Buffer.pack("<IIbB", [this.flags, 0, this.rssi, this.channel])
    r0 = pxsim_Array__mk();
    s.tmp_0 = r0;
    r0 = s.arg0.fields["flags"];
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
    r0 = pxsim_Array__push(s.tmp_0, 0);
    r0 = s.arg0.fields["rssi"];
    s.tmp_2 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_2);
    r0 = s.arg0.fields["channel"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_3);
    s.tmp_4 = Buffer_pack__P211_mk(s);
    s.tmp_4.arg0 = "<IIbB";
    s.tmp_4.arg1 = s.tmp_0;
    s.callLocIdx = 218; s.pc = 3; return s.tmp_4;
  case 3:
    r0 = s.retval;
    s.pref___14842 = (r0);
// net/net.ts(74,19): bssid = Buffer.create(6)
    r0 = pxsim.control.createBuffer(6);
    s.bssid___14852 = (r0);
// net/net.ts(75,13): if (this.bssid) bssid.write(0, this.bssid)
    r0 = s.arg0.fields["bssid"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/net.ts(75,29): bssid.write(0, this.bssid)
    r0 = s.arg0.fields["bssid"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.write(s.bssid___14852, 0, s.tmp_1);
  case 1:
  case 2:
// net/net.ts(76,13): return pref.concat(bssid).concat(Buffer.fromUTF8(this.ssid))
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    s.tmp_1 = helpers_bufferConcat__P184_mk(s);
    s.tmp_1.arg0 = s.pref___14842;
    s.tmp_1.arg1 = s.bssid___14852;
    s.callLocIdx = 219; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["ssid"];
    s.tmp_2 = r0;
    r0 = pxsim.control.createBufferFromUTF8(s.tmp_2);
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 220; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_AccessPoint_toBuffer__P1192.info = {"start":1884,"length":555,"line":63,"column":8,"endLine":76,"endColumn":9,"fileName":"pxt_modules/net/net.ts","functionName":"toBuffer","argumentNames":["this"]}

function net_AccessPoint_toBuffer__P1192_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_AccessPoint_toBuffer__P1192, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  pref___14842: undefined,
  bssid___14852: undefined,
  arg0: undefined,
} }





function Buffer_pack__P211(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___14873 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(427,13): buf = Buffer.create(packedSize(format))
    s.tmp_1 = Buffer_packedSize__P210_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 42; s.pc = 1; return s.tmp_1;
  case 1:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim.control.createBuffer(s.tmp_0);
    s.buf___14873 = (r0);
// base/buffer.ts(428,9): __packUnpackCore(format, nums, buf, true)
    s.tmp_0 = Buffer___packUnpackCore__P212_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = s.buf___14873;
    s.tmp_0.arg3 = true;
    s.tmp_0.arg4 = 0;
    s.callLocIdx = 43; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// base/buffer.ts(429,9): return buf
    r0 = s.buf___14873;
    return leave(s, r0)
  default: oops()
} } }
Buffer_pack__P211.info = {"start":11970,"length":181,"line":425,"column":4,"endLine":429,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"pack","argumentNames":["format","nums"]}

function Buffer_pack__P211_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_pack__P211, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  buf___14873: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function Buffer_packedSize__P210(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(423,9): return __packUnpackCore(format, null, null, true)
    s.tmp_0 = Buffer___packUnpackCore__P212_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = null;
    s.tmp_0.arg2 = null;
    s.tmp_0.arg3 = true;
    s.tmp_0.arg4 = 0;
    s.callLocIdx = 41; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
Buffer_packedSize__P210.info = {"start":11856,"length":108,"line":421,"column":4,"endLine":423,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"packedSize","argumentNames":["format"]}

function Buffer_packedSize__P210_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_packedSize__P210, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function net_Controller_rssi__P1134(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(163,30): return undefined;
    r0 = undefined;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Controller_rssi__P1134.info = {"start":5050,"length":40,"line":162,"column":8,"endLine":162,"endColumn":48,"fileName":"pxt_modules/net/controller.ts","functionName":"rssi","argumentNames":["this"]}
net_Controller_rssi__P1134.isGetter = true;

function net_Controller_rssi__P1134_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_rssi__P1134, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_Controller_ssid__P1133(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(162,30): return undefined;
    r0 = undefined;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Controller_ssid__P1133.info = {"start":5001,"length":40,"line":161,"column":8,"endLine":161,"endColumn":48,"fileName":"pxt_modules/net/controller.ts","functionName":"ssid","argumentNames":["this"]}
net_Controller_ssid__P1133.isGetter = true;

function net_Controller_ssid__P1133_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_ssid__P1133, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_Controller_MACaddress__P1135(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(164,36): return undefined;
    r0 = undefined;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Controller_MACaddress__P1135.info = {"start":5099,"length":46,"line":163,"column":8,"endLine":163,"endColumn":54,"fileName":"pxt_modules/net/controller.ts","functionName":"MACaddress","argumentNames":["this"]}
net_Controller_MACaddress__P1135.isGetter = true;

function net_Controller_MACaddress__P1135_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_MACaddress__P1135, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_Controller_IPaddress__P1136(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(165,35): return undefined;
    r0 = undefined;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_Controller_IPaddress__P1136.info = {"start":5154,"length":45,"line":164,"column":8,"endLine":164,"endColumn":53,"fileName":"pxt_modules/net/controller.ts","functionName":"IPaddress","argumentNames":["this"]}
net_Controller_IPaddress__P1136.isGetter = true;

function net_Controller_IPaddress__P1136_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_IPaddress__P1136, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function jacdac_JDPacket_respond__P1456(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.p___14898 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(263,19): p = JDPacket.from(this.serviceCommand, data)
    s.tmp_0 = jacdac_JDPacket_from__P1418_mk(s);
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 637; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 638; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    s.p___14898 = (r0);
// jacdac/packet.ts(264,13): p.serviceIndex = this.serviceIndex
    s.tmp_0 = jacdac_JDPacket_serviceIndex__P1433_mk(s);
    s.tmp_0.arg0 = s.p___14898;
    s.tmp_1 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 639; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 640; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// jacdac/packet.ts(265,13): p._sendReport(bus.selfDevice)
    s.tmp_0 = jacdac_JDPacket__sendReport__P1458_mk(s);
    s.tmp_0.arg0 = s.p___14898;
    s.tmp_1 = jacdac_Bus_selfDevice__P1811_mk(s);
    s.tmp_1.arg0 = globals.bus___1822;
    s.callLocIdx = 641; s.pc = 6; return s.tmp_1;
  case 6:
    r0 = s.retval;
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 642; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
// jacdac/packet.ts(266,13): this.markHandled()
    s.tmp_0 = jacdac_JDPacket_markHandled__P1423_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 643; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_respond__P1456.info = {"start":7962,"length":216,"line":261,"column":8,"endLine":266,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"respond","argumentNames":["this","data"]}

function jacdac_JDPacket_respond__P1456_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_respond__P1456, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  p___14898: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_disconnect__P1131(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(98,13): this.reconnectRunning = null
    r0 = (s.arg0).fields["reconnectRunning"] = (null);
// net/controller.ts(99,13): this.disconnectAP()
    s.tmp_0 = net_Controller__C1112_v10_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.disconnectAP;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_disconnect__P1131.info = {"start":2815,"length":97,"line":96,"column":8,"endLine":99,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"disconnect","argumentNames":["this"]}

function net_Controller_disconnect__P1131_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_disconnect__P1131, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_AzureIotHubHealthServer_handlePacket__P1946(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
// jacdac-azure-iot-hub-health-server/server.ts(94,1): if (pkt.isRegGet) {...
    s.tmp_1 = jacdac_JDPacket_isRegGet__P1441_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 1133; s.pc = 14; return s.tmp_1;
  case 14:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// jacdac-azure-iot-hub-health-server/server.ts(95,17): switch (pkt.regCode) {...
    s.tmp_3 = jacdac_JDPacket_regCode__P1442_mk(s);
    s.tmp_3.arg0 = s.arg1;
    s.callLocIdx = 1134; s.pc = 15; return s.tmp_3;
  case 15:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_pxtcore.switch_eq(386, s.tmp_2);
    if (r0) { step = 1; continue; }
    r0 = pxsim_pxtcore.switch_eq(384, s.tmp_2);
    if (r0) { step = 2; continue; }
    r0 = pxsim_pxtcore.switch_eq(385, s.tmp_2);
    if (r0) { step = 3; continue; }
    r0 = s.tmp_2;
    { step = 4; continue; }
  case 1:
// jacdac-azure-iot-hub-health-server/server.ts(97,25): this.handleRegValue(...
    s.tmp_4 = jacdac_Server_handleRegValue__P2389_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg1;
    s.tmp_4.arg2 = 386;
    s.tmp_4.arg3 = "u16";
    s.tmp_5 = servers_AzureIotHubHealthServer_connectionStatus__P1943_mk(s);
    s.tmp_5.arg0 = s.arg0;
    s.callLocIdx = 1135; s.pc = 17; return s.tmp_5;
  case 17:
    r0 = s.retval;
    s.tmp_4.arg4 = r0;
    s.callLocIdx = 1136; s.pc = 16; return s.tmp_4;
  case 16:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(103,25): break
    { step = 5; continue; }
  case 2:
// jacdac-azure-iot-hub-health-server/server.ts(106,25): this.handleRegValue(...
    s.tmp_0 = jacdac_Server_handleRegValue__P2389_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 384;
    s.tmp_0.arg3 = "s";
    s.tmp_1 = servers_AzureIotHubHealthServer_hubName__P1944_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 1137; s.pc = 19; return s.tmp_1;
  case 19:
    r0 = s.retval;
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 1138; s.pc = 18; return s.tmp_0;
  case 18:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(112,25): break
    { step = 5; continue; }
  case 3:
// jacdac-azure-iot-hub-health-server/server.ts(115,25): this.handleRegValue(...
    s.tmp_0 = jacdac_Server_handleRegValue__P2389_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.tmp_0.arg2 = 385;
    s.tmp_0.arg3 = "s";
    s.tmp_1 = servers_AzureIotHubHealthServer_hubDeviceId__P1945_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 1139; s.pc = 21; return s.tmp_1;
  case 21:
    r0 = s.retval;
    s.tmp_0.arg4 = r0;
    s.callLocIdx = 1140; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(121,25): break
    { step = 5; continue; }
  case 4:
// jacdac-azure-iot-hub-health-server/server.ts(124,25): pkt.possiblyNotImplemented()
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P1424_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1141; s.pc = 22; return s.tmp_0;
  case 22:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(125,25): break
  case 5:
// jacdac-azure-iot-hub-health-server/server.ts(127,17): return
    { step = 13; continue; }
  case 6:
  case 7:
// jacdac-azure-iot-hub-health-server/server.ts(130,13): switch (pkt.serviceCommand) {...
    s.tmp_1 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 1142; s.pc = 23; return s.tmp_1;
  case 23:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_pxtcore.switch_eq(129, s.tmp_0);
    if (r0) { step = 8; continue; }
    r0 = pxsim_pxtcore.switch_eq(130, s.tmp_0);
    if (r0) { step = 9; continue; }
    r0 = pxsim_pxtcore.switch_eq(134, s.tmp_0);
    if (r0) { step = 10; continue; }
    r0 = s.tmp_0;
    { step = 11; continue; }
  case 8:
// jacdac-azure-iot-hub-health-server/server.ts(132,21): this.connect()
    s.tmp_2 = servers_AzureIotHubHealthServer_connect__P2529_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 1143; s.pc = 24; return s.tmp_2;
  case 24:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(133,21): break
    { step = 12; continue; }
  case 9:
// jacdac-azure-iot-hub-health-server/server.ts(135,21): this.disconnect()
    s.tmp_0 = servers_AzureIotHubHealthServer_disconnect__P2530_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 1144; s.pc = 25; return s.tmp_0;
  case 25:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(136,21): break
    { step = 12; continue; }
  case 10:
// jacdac-azure-iot-hub-health-server/server.ts(138,21): this.handleSetConnectionString(pkt)
    s.tmp_0 = servers_AzureIotHubHealthServer_handleSetConnectionString__P2531_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 1145; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(139,21): break
    { step = 12; continue; }
  case 11:
// jacdac-azure-iot-hub-health-server/server.ts(141,21): pkt.possiblyNotImplemented()
    s.tmp_0 = jacdac_JDPacket_possiblyNotImplemented__P1424_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1146; s.pc = 27; return s.tmp_0;
  case 27:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(142,21): break
  case 12:
  case 13:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_handlePacket__P1946.info = {"start":3204,"length":1990,"line":91,"column":8,"endLine":143,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"handlePacket","argumentNames":["this","pkt"]}

function servers_AzureIotHubHealthServer_handlePacket__P1946_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_handlePacket__P1946, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function servers_AzureIotHubHealthServer_handleSetConnectionString__P2531(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.newConnString___14954 = undefined;
    s.connString___14957 = undefined;
    s.wasConnected___14966 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
// jacdac-azure-iot-hub-health-server/server.ts(79,19): newConnString = pkt.stringData
    s.tmp_0 = jacdac_JDPacket_stringData__P1447_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 1128; s.pc = 5; return s.tmp_0;
  case 5:
    r0 = s.retval;
    s.newConnString___14954 = (r0);
// jacdac-azure-iot-hub-health-server/server.ts(80,19): connString = settings.programSecrets.readSecret(...
    s.tmp_0 = settings_SecretStore_readSecret__P1098_mk(s);
    s.tmp_0.arg0 = globals.programSecrets___1102;
    s.tmp_0.arg1 = globals.SECRETS_KEY___1341;
    s.tmp_0.arg2 = false;
    s.callLocIdx = 1129; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.connString___14957 = (r0);
// jacdac-azure-iot-hub-health-server/server.ts(84,13): if (connString !== newConnString) {...
    r0 = (s.connString___14957 !== s.newConnString___14954);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac-azure-iot-hub-health-server/server.ts(85,17): this.log(`updated connection string`)
    s.tmp_1 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = "updated connection string";
    if (!checkSubtype(s.tmp_1.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.log;
    s.pc = 7; return s.tmp_1;
  case 7:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(86,23): wasConnected = azureiot.isConnected()
    s.tmp_0 = azureiot_isConnected__P1350_mk(s);
    s.callLocIdx = 1130; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
    s.wasConnected___14966 = (r0);
// jacdac-azure-iot-hub-health-server/server.ts(87,17): azureiot.setConnectionString(newConnString)
    s.tmp_0 = azureiot_setConnectionString__P1346_mk(s);
    s.tmp_0.arg0 = s.newConnString___14954;
    s.callLocIdx = 1131; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(88,17): if (wasConnected) this.connect()
    r0 = pxsim_numops_toBoolDecr(s.wasConnected___14966);
    if (!r0) { step = 1; continue; }
// jacdac-azure-iot-hub-health-server/server.ts(88,35): this.connect()
    s.tmp_0 = servers_AzureIotHubHealthServer_connect__P2529_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 1132; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 1:
  case 2:
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_handleSetConnectionString__P2531.info = {"start":2652,"length":542,"line":77,"column":8,"endLine":89,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"handleSetConnectionString","argumentNames":["this","pkt"]}

function servers_AzureIotHubHealthServer_handleSetConnectionString__P2531_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_handleSetConnectionString__P2531, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  newConnString___14954: undefined,
  connString___14957: undefined,
  wasConnected___14966: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function azureiot_setConnectionString__P1346(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// azureiot/azureiot.ts(144,9): disconnect()
    s.tmp_0 = azureiot_disconnect__P1347_mk(s);
    s.callLocIdx = 514; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// azureiot/azureiot.ts(145,9): settings.programSecrets.setSecret(SECRETS_KEY, connectionString)
    s.tmp_0 = settings_SecretStore_setSecret__P1096_mk(s);
    s.tmp_0.arg0 = globals.programSecrets___1102;
    s.tmp_0.arg1 = globals.SECRETS_KEY___1341;
    s.tmp_0.arg2 = s.arg0;
    s.callLocIdx = 515; s.pc = 2; return s.tmp_0;
  case 2:
    r0 = s.retval;
// azureiot/azureiot.ts(146,9): parseConnectionString()
    s.tmp_0 = azureiot_parseConnectionString__P2298_mk(s);
    s.callLocIdx = 516; s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
azureiot_setConnectionString__P1346.info = {"start":4780,"length":195,"line":142,"column":4,"endLine":146,"endColumn":5,"fileName":"pxt_modules/azureiot/azureiot.ts","functionName":"setConnectionString","argumentNames":["connectionString"]}

function azureiot_setConnectionString__P1346_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: azureiot_setConnectionString__P1346, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_AzureIotHubHealthServer_disconnect__P2530(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
// jacdac-azure-iot-hub-health-server/server.ts(75,1): this.log(`disconnecting`)
    s.tmp_0 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "disconnecting";
    if (!checkSubtype(s.tmp_0.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.log;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_disconnect__P2530.info = {"start":2540,"length":102,"line":72,"column":8,"endLine":75,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"disconnect","argumentNames":["this"]}

function servers_AzureIotHubHealthServer_disconnect__P2530_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_disconnect__P2530, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_AzureIotHubHealthServer_hubDeviceId__P1945(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
// jacdac-azure-iot-hub-health-server/server.ts(38,13): return azureiot.hubDeviceId()
    s.tmp_0 = azureiot_hubDeviceId__P1345_mk(s);
    s.callLocIdx = 1120; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_hubDeviceId__P1945.info = {"start":1295,"length":71,"line":36,"column":8,"endLine":38,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"hubDeviceId","argumentNames":["this"]}
servers_AzureIotHubHealthServer_hubDeviceId__P1945.isGetter = true;

function servers_AzureIotHubHealthServer_hubDeviceId__P1945_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_hubDeviceId__P1945, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_AzureIotHubHealthServer_hubName__P1944(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
// jacdac-azure-iot-hub-health-server/server.ts(34,13): return azureiot.hubName()
    s.tmp_0 = azureiot_hubName__P1344_mk(s);
    s.callLocIdx = 1119; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leaveAccessor(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_hubName__P1944.info = {"start":1222,"length":63,"line":32,"column":8,"endLine":34,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"hubName","argumentNames":["this"]}
servers_AzureIotHubHealthServer_hubName__P1944.isGetter = true;

function servers_AzureIotHubHealthServer_hubName__P1944_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_hubName__P1944, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function servers_AzureIotHubHealthServer_connectionStatus__P1943(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
// jacdac-azure-iot-hub-health-server/server.ts(30,13): return this._connectionStatus
    r0 = s.arg0.fields["_connectionStatus"];
    return leaveAccessor(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_connectionStatus__P1943.info = {"start":1136,"length":76,"line":28,"column":8,"endLine":30,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"connectionStatus","argumentNames":["this"]}
servers_AzureIotHubHealthServer_connectionStatus__P1943.isGetter = true;

function servers_AzureIotHubHealthServer_connectionStatus__P1943_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_connectionStatus__P1943, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function servers_AzureIotHubHealthServer_connect__P2529(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, servers_AzureIotHubHealthServer__C1941_VT)) failedCast(r0);
// jacdac-azure-iot-hub-health-server/server.ts(55,13): if (!azureiot.isConnected()) {...
    s.tmp_3 = azureiot_isConnected__P1350_mk(s);
    s.callLocIdx = 1123; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// jacdac-azure-iot-hub-health-server/server.ts(56,17): this.log(`connecting`)
    s.tmp_4 = jacdac_Server__C1824_v2_2_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = "connecting";
    if (!checkSubtype(s.tmp_4.arg0, jacdac_Server__C1824_VT)) failedCast(s.tmp_4.arg0);
    s.tmp_4.fn = s.tmp_4.arg0.vtable.methods.log;
    s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(57,17): this.setConnectionStatus(...
    s.tmp_0 = servers_AzureIotHubHealthServer_setConnectionStatus__P2528_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 3;
    s.callLocIdx = 1124; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(60,17): try {...
    r0 = pxsim_pxtcore.beginTry(1);
// jacdac-azure-iot-hub-health-server/server.ts(61,21): azureiot.connect()
    s.tmp_0 = azureiot_connect__P1348_mk(s);
    s.callLocIdx = 1125; s.pc = 8; return s.tmp_0;
  case 8:
    r0 = s.retval;
// jacdac-azure-iot-hub-health-server/server.ts(62,21): this.setConnectionStatus(...
    s.tmp_0 = servers_AzureIotHubHealthServer_setConnectionStatus__P2528_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 1;
    s.callLocIdx = 1126; s.pc = 9; return s.tmp_0;
  case 9:
    r0 = s.retval;
    r0 = pxsim_pxtcore.endTry();
    { step = 2; continue; }
  case 1:
// jacdac-azure-iot-hub-health-server/server.ts(66,21): this.setConnectionStatus(...
    s.tmp_0 = servers_AzureIotHubHealthServer_setConnectionStatus__P2528_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = 2;
    s.callLocIdx = 1127; s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
  case 2:
  case 3:
  case 4:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
servers_AzureIotHubHealthServer_connect__P2529.info = {"start":1879,"length":651,"line":53,"column":8,"endLine":70,"endColumn":9,"fileName":"pxt_modules/jacdac-azure-iot-hub-health-server/server.ts","functionName":"connect","argumentNames":["this"]}

function servers_AzureIotHubHealthServer_connect__P2529_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: servers_AzureIotHubHealthServer_connect__P2529, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }





function control_EventContext_constructor__P397(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, control_EventContext__C393_VT)) failedCast(r0);
// base/eventcontext.ts(60,13): this.handlers = []
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["handlers"] = (s.tmp_1);
// base/eventcontext.ts(61,13): this.framesInSample = 0
    r0 = (s.arg0).fields["framesInSample"] = (0);
// base/eventcontext.ts(62,13): this.timeInSample = 0
    r0 = (s.arg0).fields["timeInSample"] = (0);
// base/eventcontext.ts(63,13): this.deltaTimeMillis = 0
    r0 = (s.arg0).fields["deltaTimeMillis"] = (0);
// base/eventcontext.ts(64,13): this.frameWorker = 0
    r0 = (s.arg0).fields["frameWorker"] = (0);
// base/eventcontext.ts(65,13): this.idleCallbacks = undefined
    r0 = (s.arg0).fields["idleCallbacks"] = (undefined);
// base/eventcontext.ts(66,13): if (!EventContext.lastStats) {...
    r0 = pxsim_numops_toBoolDecr(globals.control_EventContext_lastStats___395);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// base/eventcontext.ts(67,17): EventContext.lastStats = ""
    r0 = pxsim_String_.mkEmpty();
    globals.control_EventContext_lastStats___395 = (r0);
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
control_EventContext_constructor__P397.info = {"start":1740,"length":347,"line":58,"column":8,"endLine":68,"endColumn":9,"fileName":"pxt_modules/base/eventcontext.ts","functionName":"inline","argumentNames":["this"]}

function control_EventContext_constructor__P397_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: control_EventContext_constructor__P397, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function net_Response_toString__P1234(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Response__C1223_VT)) failedCast(r0);
// net/requests.ts(79,13): return `HTTP ${this.status_code}; ${Object.keys(this.headers).length} headers; $
    r0 = s.arg0.fields["_cached"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_cached"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_1);
    { step = 2; continue; }
  case 1:
    r0 = -1;
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.arg0.fields["status_code"];
    s.tmp_9 = r0;
    if ((s.tmp_9) && (s.tmp_9).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.tmp_9);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_9) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat("HTTP ", s.tmp_8);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, "; ");
    s.tmp_6 = r0;
    r0 = s.arg0.fields["headers"];
    s.tmp_13 = r0;
    r0 = pxsim_pxtrt.keysOf(s.tmp_13);
    s.tmp_12 = r0;
    r0 = pxsim_Array__length(s.tmp_12);
    s.tmp_11 = r0;
    if ((s.tmp_11) && (s.tmp_11).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_11);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_11) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_10);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, " headers; ");
    s.tmp_4 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_14 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_14);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " bytes content");
    return leave(s, r0)
  default: oops()
} } }
net_Response_toString__P1234.info = {"start":2123,"length":178,"line":77,"column":8,"endLine":79,"endColumn":9,"fileName":"pxt_modules/net/requests.ts","functionName":"toString","argumentNames":["this"]}

function net_Response_toString__P1234_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Response_toString__P1234, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  arg0: undefined,
} }





function jacdac_ClientPacketQueue_constructor__P2478(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C2473_VT)) failedCast(r0);
    r0 = (s.arg0).fields["parent"] = (s.arg1);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["pkts"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_constructor__P2478.info = {"start":19332,"length":46,"line":575,"column":8,"endLine":575,"endColumn":54,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","parent"]}

function jacdac_ClientPacketQueue_constructor__P2478_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_constructor__P2478, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ClientPacketQueue_send__P2476(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C2473_VT)) failedCast(r0);
// jacdac/routing.ts(594,13): if (pkt.isRegSet || this.parent.serviceIndex == null)...
    s.tmp_1 = jacdac_JDPacket_isRegSet__P1440_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 915; s.pc = 5; return s.tmp_1;
  case 5:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = s.arg0.fields["parent"];
    r0 = r0.fields["serviceIndex"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == null);
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// jacdac/routing.ts(595,17): this.updateQueue(pkt)
    s.tmp_4 = jacdac_ClientPacketQueue_updateQueue__P2474_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = s.arg1;
    s.callLocIdx = 916; s.pc = 6; return s.tmp_4;
  case 6:
    r0 = s.retval;
  case 3:
  case 4:
// jacdac/routing.ts(596,13): this.parent.sendCommand(pkt)
    s.tmp_0 = jacdac_Client_sendCommand__P1862_mk(s);
    r0 = s.arg0.fields["parent"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg1;
    s.callLocIdx = 917; s.pc = 7; return s.tmp_0;
  case 7:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_send__P2476.info = {"start":19849,"length":176,"line":592,"column":8,"endLine":596,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"send","argumentNames":["this","pkt"]}

function jacdac_ClientPacketQueue_send__P2476_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_send__P2476, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_ClientPacketQueue_updateQueue__P2474(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.cmd___15072 = undefined;
    s.i___15075 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_ClientPacketQueue__C2473_VT)) failedCast(r0);
// jacdac/routing.ts(579,19): cmd = pkt.serviceCommand
    s.tmp_0 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_0.arg0 = s.arg1;
    s.callLocIdx = 912; s.pc = 6; return s.tmp_0;
  case 6:
    r0 = s.retval;
    s.cmd___15072 = (r0);
// jacdac/routing.ts(580,22): i = 0
    s.i___15075 = (0);
// jacdac/routing.ts(580,13): for (let i = 0; i < this.pkts.length; ++i) {...
  case 1:
// jacdac/routing.ts(580,29): i < this.pkts.length
    s.tmp_1 = r0 = s.i___15075;
    r0 = s.arg0.fields["pkts"];
    s.tmp_3 = r0;
    r0 = pxsim_Array__length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// jacdac/routing.ts(581,17): if (this.pkts[i].getNumber(NumberFormat.UInt16LE, 2) == cmd) {
    r0 = s.arg0.fields["pkts"];
    s.tmp_7 = r0;
    r0 = pxsim_Array__getAt(s.tmp_7, s.i___15075);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getNumber(s.tmp_6, 4, 2);
    s.tmp_5 = r0;
    r0 = (s.tmp_5 == s.cmd___15072);
    s.tmp_4 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_4);
    if (!r0) { step = 2; continue; }
// jacdac/routing.ts(582,21): this.pkts[i] = pkt.withFrameStripped()
    r0 = s.arg0.fields["pkts"];
    s.tmp_8 = r0;
    s.tmp_9 = r0 = s.i___15075;
    s.tmp_11 = jacdac_JDPacket_withFrameStripped__P1450_mk(s);
    s.tmp_11.arg0 = s.arg1;
    s.callLocIdx = 913; s.pc = 7; return s.tmp_11;
  case 7:
    r0 = s.retval;
    s.tmp_10 = r0;
    r0 = pxsim_Array_.setAt(s.tmp_8, s.tmp_9, s.tmp_10);
// jacdac/routing.ts(583,21): return
    { step = 5; continue; }
  case 2:
  case 3:
// jacdac/routing.ts(580,51): ++i
    r0 = (s.i___15075 + 1);
    s.i___15075 = (r0);
    { step = 1; continue; }
  case 4:
// jacdac/routing.ts(586,13): this.pkts.push(pkt.withFrameStripped())
    r0 = s.arg0.fields["pkts"];
    s.tmp_0 = r0;
    s.tmp_2 = jacdac_JDPacket_withFrameStripped__P1450_mk(s);
    s.tmp_2.arg0 = s.arg1;
    s.callLocIdx = 914; s.pc = 8; return s.tmp_2;
  case 8:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_Array__push(s.tmp_0, s.tmp_1);
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_ClientPacketQueue_updateQueue__P2474.info = {"start":19388,"length":395,"line":577,"column":8,"endLine":586,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"updateQueue","argumentNames":["this","pkt"]}

function jacdac_ClientPacketQueue_updateQueue__P2474_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_ClientPacketQueue_updateQueue__P2474, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  cmd___15072: undefined,
  i___15075: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function jacdac_JDPacket_withFrameStripped__P1450(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(232,13): return this._header.slice(12, 4).concat(this._data)
    s.tmp_0 = helpers_bufferConcat__P184_mk(s);
    r0 = s.arg0.fields["_header"];
    s.tmp_1 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_1, 12, 4);
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_data"];
    s.tmp_0.arg1 = r0;
    s.callLocIdx = 624; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_withFrameStripped__P1450.info = {"start":7021,"length":95,"line":230,"column":8,"endLine":232,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"withFrameStripped","argumentNames":["this"]}

function jacdac_JDPacket_withFrameStripped__P1450_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_withFrameStripped__P1450, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_isRegSet__P1440(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(176,13): return this.serviceCommand >> 12 == CMD_SET_REG >> 12
    s.tmp_2 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 617; s.pc = 1; return s.tmp_2;
  case 1:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 >> 12);
    s.tmp_0 = r0;
    r0 = (s.tmp_0 == 2);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_isRegSet__P1440.info = {"start":5515,"length":92,"line":174,"column":8,"endLine":176,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"isRegSet","argumentNames":["this"]}
jacdac_JDPacket_isRegSet__P1440.isGetter = true;

function jacdac_JDPacket_isRegSet__P1440_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_isRegSet__P1440, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function jacdac_RegisterClient_constructor__P1836(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_RegisterClient__C1835_VT)) failedCast(r0);
    r0 = (s.arg0).fields["service"] = (s.arg1);
    r0 = (s.arg0).fields["code"] = (s.arg2);
    r0 = (s.arg0).fields["packFormat"] = (s.arg3);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
// jacdac/routing.ts(634,13): super()
    s.tmp_2 = jacdac_EventSource_constructor__P1913_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 922; s.pc = 3; return s.tmp_2;
  case 3:
    r0 = s.retval;
// jacdac/routing.ts(635,13): this._data = defaultValue...
    r0 = pxsim_numops_toBoolDecr(s.arg4);
    if (!r0) { step = 1; continue; }
    s.tmp_0 = jacdac_jdpack__P1468_mk(s);
    r0 = s.arg0.fields["packFormat"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = s.arg4;
    s.callLocIdx = 923; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["_data"] = (s.tmp_1);
// jacdac/routing.ts(638,13): this._localTime = control.millis()
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.millis();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_localTime"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_RegisterClient_constructor__P1836.info = {"start":20923,"length":393,"line":627,"column":8,"endLine":638,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","service","code","packFormat","defaultValue"]}

function jacdac_RegisterClient_constructor__P1836_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_RegisterClient_constructor__P1836, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function jacdac_Client_constructor__P1849(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_Client__C1844_VT)) failedCast(r0);
    r0 = (s.arg0).fields["serviceClass"] = (s.arg1);
    r0 = (s.arg0).fields["role"] = (s.arg2);
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["listeners"] = (s.tmp_1);
    r0 = (s.arg0).fields["systemActive"] = (false);
    s.tmp_2 = r0 = s.arg0;
    r0 = pxsim_Array__mk();
    s.tmp_3 = r0;
    r0 = (s.tmp_2).fields["registers"] = (s.tmp_3);
// jacdac/routing.ts(722,13): super()
    s.tmp_4 = jacdac_EventSource_constructor__P1913_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.callLocIdx = 931; s.pc = 3; return s.tmp_4;
  case 3:
    r0 = s.retval;
// jacdac/routing.ts(723,13): this.eventId = control.allocateNotifyEvent()
    s.tmp_0 = r0 = s.arg0;
    r0 = pxsim.control.allocateNotifyEvent();
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["eventId"] = (s.tmp_1);
// jacdac/routing.ts(724,13): this.config = new ClientPacketQueue(this)
    r0 = pxsim_pxtcore_mkClassInstance(jacdac_ClientPacketQueue__C2473_VT);
    s.tmp_0 = r0;
    s.tmp_1 = jacdac_ClientPacketQueue_constructor__P2478_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg0;
    s.callLocIdx = 932; s.pc = 4; return s.tmp_1;
  case 4:
    r0 = s.retval;
    r0 = (s.arg0).fields["config"] = (s.tmp_0);
// jacdac/routing.ts(725,13): if (!this.role) throw "no role"
    r0 = s.arg0.fields["role"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/routing.ts(725,29): throw "no role"
    r0 = pxsim_pxtcore.throwValue("no role");
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
jacdac_Client_constructor__P1849.info = {"start":23956,"length":257,"line":720,"column":8,"endLine":725,"endColumn":9,"fileName":"pxt_modules/jacdac/routing.ts","functionName":"inline","argumentNames":["this","serviceClass","role"]}

function jacdac_Client_constructor__P1849_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_Client_constructor__P1849, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function jacdac_JDPacket_toString__P1455(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.msg___15152 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(252,17): msg = `${jacdac.shortDeviceId(this.deviceIdentifier)}/${...
    r0 = pxsim_String_.mkEmpty();
    s.tmp_8 = r0;
    s.tmp_11 = jacdac_shortDeviceId__P1869_mk(s);
    s.tmp_12 = jacdac_JDPacket_deviceIdentifier__P1425_mk(s);
    s.tmp_12.arg0 = s.arg0;
    s.callLocIdx = 627; s.pc = 4; return s.tmp_12;
  case 4:
    r0 = s.retval;
    s.tmp_11.arg0 = r0;
    s.callLocIdx = 628; s.pc = 3; return s.tmp_11;
  case 3:
    r0 = s.retval;
    s.tmp_10 = r0;
    if ((s.tmp_10) && (s.tmp_10).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.tmp_10);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_10) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_8, s.tmp_9);
    s.tmp_7 = r0;
    r0 = pxsim_String__concat(s.tmp_7, "/");
    s.tmp_6 = r0;
    s.tmp_15 = jacdac_JDPacket_serviceIndex__P1432_mk(s);
    s.tmp_15.arg0 = s.arg0;
    s.callLocIdx = 629; s.pc = 6; return s.tmp_15;
  case 6:
    r0 = s.retval;
    s.tmp_14 = r0;
    if ((s.tmp_14) && (s.tmp_14).vtable) {
    setupResume(s, 7);
    pxsim_String__stringConv(s.tmp_14);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_14) + ""; }
  case 7:
    r0 = s.retval;
    s.tmp_13 = r0;
    r0 = pxsim_String__concat(s.tmp_6, s.tmp_13);
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_5, "[");
    s.tmp_4 = r0;
    s.tmp_18 = jacdac_JDPacket_packetFlags__P1427_mk(s);
    s.tmp_18.arg0 = s.arg0;
    s.callLocIdx = 630; s.pc = 8; return s.tmp_18;
  case 8:
    r0 = s.retval;
    s.tmp_17 = r0;
    if ((s.tmp_17) && (s.tmp_17).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_17);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_17) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_16 = r0;
    r0 = pxsim_String__concat(s.tmp_4, s.tmp_16);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "]: ");
    s.tmp_2 = r0;
    s.tmp_21 = jacdac_hexNum__P2332_mk(s);
    s.tmp_22 = jacdac_JDPacket_serviceCommand__P1435_mk(s);
    s.tmp_22.arg0 = s.arg0;
    s.callLocIdx = 631; s.pc = 11; return s.tmp_22;
  case 11:
    r0 = s.retval;
    s.tmp_21.arg0 = r0;
    s.tmp_21.arg1 = 4;
    s.callLocIdx = 632; s.pc = 10; return s.tmp_21;
  case 10:
    r0 = s.retval;
    s.tmp_20 = r0;
    if ((s.tmp_20) && (s.tmp_20).vtable) {
    setupResume(s, 12);
    pxsim_String__stringConv(s.tmp_20);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_20) + ""; }
  case 12:
    r0 = s.retval;
    s.tmp_19 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_19);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, " sz=");
    s.tmp_0 = r0;
    s.tmp_25 = jacdac_JDPacket_size__P1429_mk(s);
    s.tmp_25.arg0 = s.arg0;
    s.callLocIdx = 633; s.pc = 13; return s.tmp_25;
  case 13:
    r0 = s.retval;
    s.tmp_24 = r0;
    if ((s.tmp_24) && (s.tmp_24).vtable) {
    setupResume(s, 14);
    pxsim_String__stringConv(s.tmp_24);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_24) + ""; }
  case 14:
    r0 = s.retval;
    s.tmp_23 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_23);
    s.msg___15152 = (r0);
// jacdac/packet.ts(257,13): if (this.size < 20) msg += ": " + this.data.toHex()...
    s.tmp_2 = jacdac_JDPacket_size__P1429_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 634; s.pc = 15; return s.tmp_2;
  case 15:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 20);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// jacdac/packet.ts(257,33): msg += ": " + this.data.toHex()
    if ((s.msg___15152) && (s.msg___15152).vtable) {
    setupResume(s, 16);
    pxsim_String__stringConv(s.msg___15152);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.msg___15152) + ""; }
  case 16:
    r0 = s.retval;
    s.tmp_3 = r0;
    s.tmp_9 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_9.arg0 = s.arg0;
    s.callLocIdx = 635; s.pc = 17; return s.tmp_9;
  case 17:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_8);
    s.tmp_7 = r0;
    if ((s.tmp_7) && (s.tmp_7).vtable) {
    setupResume(s, 18);
    pxsim_String__stringConv(s.tmp_7);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_7) + ""; }
  case 18:
    r0 = s.retval;
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(": ", s.tmp_6);
    s.tmp_5 = r0;
    if ((s.tmp_5) && (s.tmp_5).vtable) {
    setupResume(s, 19);
    pxsim_String__stringConv(s.tmp_5);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_5) + ""; }
  case 19:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_3, s.tmp_4);
    s.msg___15152 = (r0);
    { step = 2; continue; }
  case 1:
// jacdac/packet.ts(258,18): msg += ": " + this.data.slice(0, 20).toHex() + "..."
    if ((s.msg___15152) && (s.msg___15152).vtable) {
    setupResume(s, 20);
    pxsim_String__stringConv(s.msg___15152);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.msg___15152) + ""; }
  case 20:
    r0 = s.retval;
    s.tmp_0 = r0;
    s.tmp_9 = jacdac_JDPacket_data__P1443_mk(s);
    s.tmp_9.arg0 = s.arg0;
    s.callLocIdx = 636; s.pc = 21; return s.tmp_9;
  case 21:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_8, 0, 20);
    s.tmp_7 = r0;
    r0 = pxsim.BufferMethods.toHex(s.tmp_7);
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 22);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 22:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(": ", s.tmp_5);
    s.tmp_4 = r0;
    if ((s.tmp_4) && (s.tmp_4).vtable) {
    setupResume(s, 23);
    pxsim_String__stringConv(s.tmp_4);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_4) + ""; }
  case 23:
    r0 = s.retval;
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, "...");
    s.tmp_2 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 24);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 24:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_0, s.tmp_1);
    s.msg___15152 = (r0);
  case 2:
// jacdac/packet.ts(259,13): return msg
    r0 = s.msg___15152;
    return leave(s, r0)
  default: oops()
} } }
jacdac_JDPacket_toString__P1455.info = {"start":7541,"length":411,"line":250,"column":8,"endLine":259,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"toString","argumentNames":["this"]}

function jacdac_JDPacket_toString__P1455_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_toString__P1455, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  tmp_11: undefined,
  tmp_12: undefined,
  tmp_13: undefined,
  tmp_14: undefined,
  tmp_15: undefined,
  tmp_16: undefined,
  tmp_17: undefined,
  tmp_18: undefined,
  tmp_19: undefined,
  tmp_20: undefined,
  tmp_21: undefined,
  tmp_22: undefined,
  tmp_23: undefined,
  tmp_24: undefined,
  tmp_25: undefined,
  msg___15152: undefined,
  arg0: undefined,
} }





function jacdac_JDPacket_size__P1429(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, jacdac_JDPacket__C1412_VT)) failedCast(r0);
// jacdac/packet.ts(123,13): return this._header[12]
    r0 = s.arg0.fields["_header"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_0, 12);
    return leaveAccessor(s, r0)
  default: oops()
} } }
jacdac_JDPacket_size__P1429.info = {"start":3897,"length":66,"line":121,"column":8,"endLine":123,"endColumn":9,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"size","argumentNames":["this"]}
jacdac_JDPacket_size__P1429.isGetter = true;

function jacdac_JDPacket_size__P1429_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_JDPacket_size__P1429, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function jacdac_hexNum__P2332(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.hex___15217 = undefined;
    s.r___15219 = undefined;
    s.i___15220 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// jacdac/packet.ts(29,15): hex = "0123456789abcdef"
    s.hex___15217 = ("0123456789abcdef");
// jacdac/packet.ts(30,13): r = "0x"
    s.r___15219 = ("0x");
// jacdac/packet.ts(31,18): i = 0
    s.i___15220 = (0);
// jacdac/packet.ts(31,9): for (let i = 0; i < len; ++i) {...
  case 1:
// jacdac/packet.ts(31,25): i < len
    r0 = (s.i___15220 < s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// jacdac/packet.ts(32,13): r += hex[(n >>> ((len - 1 - i) * 4)) & 0xf]
    if ((s.r___15219) && (s.r___15219).vtable) {
    setupResume(s, 3);
    pxsim_String__stringConv(s.r___15219);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.r___15219) + ""; }
  case 3:
    r0 = s.retval;
    s.tmp_1 = r0;
    s.tmp_4 = r0 = s.hex___15217;
    s.tmp_7 = r0 = s.arg0;
    r0 = (s.arg1 - 1);
    s.tmp_10 = r0;
    r0 = (s.tmp_10 - s.i___15220);
    s.tmp_9 = r0;
    r0 = (s.tmp_9 * 4);
    s.tmp_8 = r0;
    r0 = (s.tmp_7 >>> s.tmp_8);
    s.tmp_6 = r0;
    r0 = (s.tmp_6 & 15);
    s.tmp_5 = r0;
    r0 = pxsim_String_.charAt(s.tmp_4, s.tmp_5);
    s.tmp_3 = r0;
    if ((s.tmp_3) && (s.tmp_3).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.tmp_3);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_3) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat(s.tmp_1, s.tmp_2);
    s.r___15219 = (r0);
// jacdac/packet.ts(31,34): ++i
    r0 = (s.i___15220 + 1);
    s.i___15220 = (r0);
    { step = 1; continue; }
  case 2:
// jacdac/packet.ts(34,9): return r
    r0 = s.r___15219;
    return leave(s, r0)
  default: oops()
} } }
jacdac_hexNum__P2332.info = {"start":1051,"length":226,"line":27,"column":4,"endLine":34,"endColumn":5,"fileName":"pxt_modules/jacdac/packet.ts","functionName":"hexNum","argumentNames":["n","len"]}

function jacdac_hexNum__P2332_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: jacdac_hexNum__P2332, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  tmp_10: undefined,
  hex___15217: undefined,
  r___15219: undefined,
  i___15220: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_close__P1166(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(181,13): this._closed = true
    r0 = (s.arg0).fields["_closed"] = (true);
// net/controllersocket.ts(182,13): this._buffer = hex``
    r0 = (s.arg0).fields["_buffer"] = (_hex15252);
// net/controllersocket.ts(183,13): this.controller.socketClose(this._socknum)
    s.tmp_0 = net_Controller__C1112_v7_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.socketClose;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
// net/controllersocket.ts(184,13): if (this._closeHandler)...
    r0 = s.arg0.fields["_closeHandler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/controllersocket.ts(185,17): this._closeHandler()
    s.tmp_1 = if__closeHandler_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_closeHandler"), 1);
      s.callLocIdx = 212; s.pc = 4; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_closeHandler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_closeHandler"], 1); s.callLocIdx = 212; s.pc = 4; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 212; s.pc = 4; return s.tmp_1;; }
     else { s.callLocIdx = 212; s.pc = 4; return s.tmp_1; }
    }
  case 4:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_close__P1166.info = {"start":6809,"length":221,"line":179,"column":8,"endLine":185,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"close","argumentNames":["this"]}

function net_ControllerSocket_close__P1166_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_close__P1166, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
} }

const _hex15252 = pxsim.BufferMethods.createBufferFromHex("")




function net_Controller_socketClose__P1123(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketClose__P1123.info = {"start":1790,"length":56,"line":64,"column":8,"endLine":65,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketClose","argumentNames":["this","socket_num"]}

function net_Controller_socketClose__P1123_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketClose__P1123, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_read__P1164(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.avail___15271 = undefined;
    s.ret___15292 = undefined;
    s.stamp___15300 = undefined;
    s.to_read___15302 = undefined;
    s.received___15308 = undefined;
    s.avail___15313 = undefined;
    s.recv___15325 = undefined;
    s.ret___15366 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(126,1): if (size == 0) {...
    r0 = (s.arg1 == 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 7; continue; }
// net/controllersocket.ts(127,17): if (this._buffer.length == 0) {...
    r0 = s.arg0.fields["_buffer"];
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_3);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 == 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 5; continue; }
// net/controllersocket.ts(128,25): avail = Math.min(this.controller.socketAvailable(this._socknum), MAX_PACKET)
    s.tmp_4 = Math_min__P131_mk(s);
    s.tmp_5 = net_Controller__C1112_v5_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_5.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_5.arg1 = r0;
    if (!checkSubtype(s.tmp_5.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_5.arg0);
    s.tmp_5.fn = s.tmp_5.arg0.vtable.methods.socketAvailable;
    s.pc = 23; return s.tmp_5;
  case 23:
    r0 = s.retval;
    s.tmp_4.arg0 = r0;
    s.tmp_4.arg1 = 4000;
    s.callLocIdx = 202; s.pc = 22; return s.tmp_4;
  case 22:
    r0 = s.retval;
    s.avail___15271 = (r0);
// net/controllersocket.ts(129,21): if (avail > 0)...
    r0 = (s.avail___15271 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/controllersocket.ts(130,25): this._buffer = this.controller.socketRead(this._socknum, avail)
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = net_Controller__C1112_v6_3_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_3.arg1 = r0;
    s.tmp_3.arg2 = s.avail___15271;
    if (!checkSubtype(s.tmp_3.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.socketRead;
    s.pc = 24; return s.tmp_3;
  case 24:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["_buffer"] = (s.tmp_2);
  case 1:
  case 2:
// net/controllersocket.ts(131,21): if (avail < 0)...
    r0 = (s.avail___15271 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// net/controllersocket.ts(132,25): this.close()
    s.tmp_1 = net_ControllerSocket_close__P1166_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.callLocIdx = 203; s.pc = 25; return s.tmp_1;
  case 25:
    r0 = s.retval;
  case 3:
  case 4:
  case 5:
  case 6:
// net/controllersocket.ts(134,21): ret = this._buffer
    r0 = s.arg0.fields["_buffer"];
    s.ret___15292 = (r0);
// net/controllersocket.ts(135,17): this._buffer = hex``
    r0 = (s.arg0).fields["_buffer"] = (_hex15298);
// net/controllersocket.ts(136,17): return ret
    r0 = s.ret___15292;
    { step = 21; continue; }
  case 7:
  case 8:
// net/controllersocket.ts(139,17): stamp = monotonic()
    s.tmp_0 = net_monotonic__P1172_mk(s);
    s.callLocIdx = 204; s.pc = 26; return s.tmp_0;
  case 26:
    r0 = s.retval;
    s.stamp___15300 = (r0);
// net/controllersocket.ts(140,17): to_read = size - this._buffer.length
    s.tmp_0 = r0 = s.arg1;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    s.to_read___15302 = (r0);
// net/controllersocket.ts(141,17): received = []
    r0 = pxsim_Array__mk();
    s.received___15308 = (r0);
// net/controllersocket.ts(142,13): while (to_read > 0) {...
  case 9:
// net/controllersocket.ts(142,20): to_read > 0
    r0 = (s.to_read___15302 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 18; continue; }
// net/controllersocket.ts(144,21): avail = Math.min(this.controller.socketAvailable(this._socknum), MAX_PACKET)
    s.tmp_1 = Math_min__P131_mk(s);
    s.tmp_2 = net_Controller__C1112_v5_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_2.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_2.arg1 = r0;
    if (!checkSubtype(s.tmp_2.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.socketAvailable;
    s.pc = 28; return s.tmp_2;
  case 28:
    r0 = s.retval;
    s.tmp_1.arg0 = r0;
    s.tmp_1.arg1 = 4000;
    s.callLocIdx = 205; s.pc = 27; return s.tmp_1;
  case 27:
    r0 = s.retval;
    s.avail___15313 = (r0);
// net/controllersocket.ts(145,17): if (avail > 0) {...
    r0 = (s.avail___15313 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// net/controllersocket.ts(146,21): stamp = monotonic()
    s.tmp_1 = net_monotonic__P1172_mk(s);
    s.callLocIdx = 206; s.pc = 29; return s.tmp_1;
  case 29:
    r0 = s.retval;
    s.stamp___15300 = (r0);
// net/controllersocket.ts(147,25): recv = this.controller.socketRead(this._socknum, Math.min(to_read, avail))
    s.tmp_0 = net_Controller__C1112_v6_3_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_0.arg1 = r0;
    s.tmp_1 = Math_min__P131_mk(s);
    s.tmp_1.arg0 = s.to_read___15302;
    s.tmp_1.arg1 = s.avail___15313;
    s.callLocIdx = 207; s.pc = 31; return s.tmp_1;
  case 31:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.socketRead;
    s.pc = 30; return s.tmp_0;
  case 30:
    r0 = s.retval;
    s.recv___15325 = (r0);
// net/controllersocket.ts(148,21): received.push(recv)
    r0 = pxsim_Array__push(s.received___15308, s.recv___15325);
// net/controllersocket.ts(149,21): to_read -= recv.length
    s.tmp_0 = r0 = s.to_read___15302;
    r0 = pxsim.BufferMethods.length(s.recv___15325);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 - s.tmp_1);
    s.to_read___15302 = (r0);
    { step = 11; continue; }
  case 10:
// net/controllersocket.ts(151,21): pause(20)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 20;
    s.callLocIdx = 208; s.pc = 32; return s.tmp_0;
  case 32:
    r0 = s.retval;
  case 11:
// net/controllersocket.ts(154,17): if (avail < 0 || (this._timeout > 0 && monotonic() - stamp > this._timeout)) {
    r0 = (s.avail___15313 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 12; continue; }
    r0 = s.tmp_0;
    { step = 15; continue; }
  case 12:
    r0 = s.arg0.fields["_timeout"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 13; continue; }
    r0 = s.tmp_1;
    { step = 14; continue; }
  case 13:
    s.tmp_5 = net_monotonic__P1172_mk(s);
    s.callLocIdx = 209; s.pc = 33; return s.tmp_5;
  case 33:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.stamp___15300);
    s.tmp_3 = r0;
    r0 = s.arg0.fields["_timeout"];
    s.tmp_6 = r0;
    r0 = (s.tmp_3 > s.tmp_6);
  case 14:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 15:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 16; continue; }
// net/controllersocket.ts(155,21): break
    { step = 18; continue; }
  case 16:
  case 17:
    { step = 9; continue; }
  case 18:
// net/controllersocket.ts(160,1): received.unshift(this._buffer)
    s.tmp_9 = helpers_arrayUnshift__P104_mk(s);
    s.tmp_9.arg0 = s.received___15308;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_9.arg1 = r0;
    s.callLocIdx = 210; s.pc = 34; return s.tmp_9;
  case 34:
    r0 = s.retval;
// net/controllersocket.ts(161,13): this._buffer = pins.concatBuffers(received)
    s.tmp_0 = r0 = s.arg0;
    s.tmp_2 = pins_concatBuffers__P179_mk(s);
    s.tmp_2.arg0 = s.received___15308;
    s.callLocIdx = 211; s.pc = 35; return s.tmp_2;
  case 35:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_buffer"] = (s.tmp_1);
// net/controllersocket.ts(162,17): ret = null
    s.ret___15366 = (null);
// net/controllersocket.ts(163,13): if (this._buffer.length == size) {...
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.length(s.tmp_2);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == s.arg1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 19; continue; }
// net/controllersocket.ts(164,17): ret = this._buffer
    r0 = s.arg0.fields["_buffer"];
    s.ret___15366 = (r0);
// net/controllersocket.ts(165,17): this._buffer = hex``
    r0 = (s.arg0).fields["_buffer"] = (_hex15379);
    { step = 20; continue; }
  case 19:
// net/controllersocket.ts(167,17): ret = this._buffer.slice(0, size)
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 0, s.arg1);
    s.ret___15366 = (r0);
// net/controllersocket.ts(168,17): this._buffer = this._buffer.slice(size)
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, s.arg1, -1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_buffer"] = (s.tmp_1);
  case 20:
// net/controllersocket.ts(171,13): return ret
    r0 = s.ret___15366;
  case 21:
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_read__P1164.info = {"start":4744,"length":1826,"line":123,"column":8,"endLine":171,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"read","argumentNames":["this","size"]}

function net_ControllerSocket_read__P1164_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_read__P1164, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  avail___15271: undefined,
  ret___15292: undefined,
  stamp___15300: undefined,
  to_read___15302: undefined,
  received___15308: undefined,
  avail___15313: undefined,
  recv___15325: undefined,
  ret___15366: undefined,
  arg0: undefined,
  arg1: undefined,
} }

const _hex15298 = pxsim.BufferMethods.createBufferFromHex("")
const _hex15379 = pxsim.BufferMethods.createBufferFromHex("")




function pins_concatBuffers__P179(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(34,9): return Buffer.concat(bufs)
    s.tmp_0 = Buffer_concat__P209_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 21; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
pins_concatBuffers__P179.info = {"start":863,"length":88,"line":32,"column":4,"endLine":34,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"concatBuffers","argumentNames":["bufs"]}

function pins_concatBuffers__P179_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: pins_concatBuffers__P179, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function Buffer_concat__P209(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.len___15399 = undefined;
    s.b___15401 = undefined;
    s.unnamed110___U2 = undefined;
    s.unnamed111___U3 = undefined;
    s.r___15408 = undefined;
    s.b___15414 = undefined;
    s.unnamed112___U6 = undefined;
    s.unnamed113___U7 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(408,13): len = 0
    s.len___15399 = (0);
// base/buffer.ts(409,18): b
    s.b___15401 = (undefined);
    s.unnamed110___U2 = (s.arg0);
    s.unnamed111___U3 = (0);
// base/buffer.ts(409,9): for (let b of buffers)...
  case 1:
    s.tmp_0 = r0 = s.unnamed111___U3;
    r0 = pxsim_Array__length(s.unnamed110___U2);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 2; continue; }
    r0 = pxsim_Array__getAt(s.unnamed110___U2, s.unnamed111___U3);
    s.b___15401 = (r0);
// base/buffer.ts(410,13): len += b.length
    s.tmp_2 = r0 = s.len___15399;
    r0 = pxsim.BufferMethods.length(s.b___15401);
    s.tmp_3 = r0;
    r0 = (s.tmp_2 + s.tmp_3);
    s.len___15399 = (r0);
    r0 = (s.unnamed111___U3 + 1);
    s.unnamed111___U3 = (r0);
    { step = 1; continue; }
  case 2:
    s.unnamed110___U2 = (undefined);
// base/buffer.ts(411,15): r = Buffer.create(len)
    r0 = pxsim.control.createBuffer(s.len___15399);
    s.r___15408 = (r0);
// base/buffer.ts(412,9): len = 0
    s.len___15399 = (0);
// base/buffer.ts(413,18): b
    s.b___15414 = (undefined);
    s.unnamed112___U6 = (s.arg0);
    s.unnamed113___U7 = (0);
// base/buffer.ts(413,9): for (let b of buffers) {...
  case 3:
    s.tmp_0 = r0 = s.unnamed113___U7;
    r0 = pxsim_Array__length(s.unnamed112___U6);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 < s.tmp_1);
    if (!r0) { step = 4; continue; }
    r0 = pxsim_Array__getAt(s.unnamed112___U6, s.unnamed113___U7);
    s.b___15414 = (r0);
// base/buffer.ts(414,13): r.write(len, b)
    r0 = pxsim.BufferMethods.write(s.r___15408, s.len___15399, s.b___15414);
// base/buffer.ts(415,13): len += b.length
    s.tmp_0 = r0 = s.len___15399;
    r0 = pxsim.BufferMethods.length(s.b___15414);
    s.tmp_1 = r0;
    r0 = (s.tmp_0 + s.tmp_1);
    s.len___15399 = (r0);
    r0 = (s.unnamed113___U7 + 1);
    s.unnamed113___U7 = (r0);
    { step = 3; continue; }
  case 4:
    s.unnamed112___U6 = (undefined);
// base/buffer.ts(417,9): return r
    r0 = s.r___15408;
    return leave(s, r0)
  default: oops()
} } }
Buffer_concat__P209.info = {"start":11474,"length":297,"line":406,"column":4,"endLine":417,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"concat","argumentNames":["buffers"]}

function Buffer_concat__P209_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: Buffer_concat__P209, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  len___15399: undefined,
  b___15401: undefined,
  unnamed110___U2: undefined,
  unnamed111___U3: undefined,
  r___15408: undefined,
  b___15414: undefined,
  unnamed112___U6: undefined,
  unnamed113___U7: undefined,
  arg0: undefined,
} }





function helpers_arrayUnshift__P104(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/pxt-helpers.ts(182,9): arr.insertAt(0, value)
    r0 = pxsim_Array_.insertAt(s.arg0, 0, s.arg1);
// base/pxt-helpers.ts(183,9): return arr.length;
    r0 = pxsim_Array__length(s.arg0);
    return leave(s, r0)
  default: oops()
} } }
helpers_arrayUnshift__P104.info = {"start":4898,"length":126,"line":180,"column":4,"endLine":183,"endColumn":5,"fileName":"pxt_modules/base/pxt-helpers.ts","functionName":"arrayUnshift","argumentNames":["arr","value"]}

function helpers_arrayUnshift__P104_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_arrayUnshift__P104, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_monotonic__P1172(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// net/net.ts(25,9): return control.millis() / 1000.0;
    r0 = pxsim.control.millis();
    s.tmp_0 = r0;
    r0 = (s.tmp_0 / 1000);
    return leave(s, r0)
  default: oops()
} } }
net_monotonic__P1172.info = {"start":598,"length":85,"line":23,"column":4,"endLine":25,"endColumn":5,"fileName":"pxt_modules/net/net.ts","functionName":"monotonic","argumentNames":[]}

function net_monotonic__P1172_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_monotonic__P1172, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_Controller_socketRead__P1122(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(62,13): return undefined;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketRead__P1122.info = {"start":1679,"length":101,"line":60,"column":8,"endLine":62,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketRead","argumentNames":["this","socket_num","size"]}

function net_Controller_socketRead__P1122_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketRead__P1122, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_Controller_socketAvailable__P1121(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(58,13): return -1;
    r0 = -1;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketAvailable__P1121.info = {"start":1584,"length":85,"line":56,"column":8,"endLine":58,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketAvailable","argumentNames":["this","socket_num"]}

function net_Controller_socketAvailable__P1121_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketAvailable__P1121, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_readLine__P1163(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.stamp___15447 = undefined;
    s.avail___15457 = undefined;
    s.pos___15494 = undefined;
    s.pref___15501 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(102,17): stamp = monotonic()
    s.tmp_0 = net_monotonic__P1172_mk(s);
    s.callLocIdx = 194; s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
    s.stamp___15447 = (r0);
// net/controllersocket.ts(103,13): while (this._buffer.indexOf(hex`0d0a`) < 0) {...
  case 1:
// net/controllersocket.ts(103,20): this._buffer.indexOf(hex`0d0a`) < 0
    s.tmp_2 = helpers_bufferIndexOf__P186_mk(s);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2.arg0 = r0;
    s.tmp_2.arg1 = _hex15452;
    s.callLocIdx = 195; s.pc = 12; return s.tmp_2;
  case 12:
    r0 = s.retval;
    s.tmp_1 = r0;
    r0 = (s.tmp_1 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// net/controllersocket.ts(105,21): avail = Math.min(this.controller.socketAvailable(this._socknum), MAX_PACKET)
    s.tmp_3 = Math_min__P131_mk(s);
    s.tmp_4 = net_Controller__C1112_v5_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_4.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_4.arg1 = r0;
    if (!checkSubtype(s.tmp_4.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_4.arg0);
    s.tmp_4.fn = s.tmp_4.arg0.vtable.methods.socketAvailable;
    s.pc = 14; return s.tmp_4;
  case 14:
    r0 = s.retval;
    s.tmp_3.arg0 = r0;
    s.tmp_3.arg1 = 4000;
    s.callLocIdx = 196; s.pc = 13; return s.tmp_3;
  case 13:
    r0 = s.retval;
    s.avail___15457 = (r0);
// net/controllersocket.ts(106,17): if (avail > 0) {...
    r0 = (s.avail___15457 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// net/controllersocket.ts(107,21): this._buffer = this._buffer.concat(this.controller.socketRead(this._socknum, ava
    s.tmp_1 = r0 = s.arg0;
    s.tmp_3 = helpers_bufferConcat__P184_mk(s);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_3.arg0 = r0;
    s.tmp_4 = net_Controller__C1112_v6_3_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_4.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_4.arg1 = r0;
    s.tmp_4.arg2 = s.avail___15457;
    if (!checkSubtype(s.tmp_4.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_4.arg0);
    s.tmp_4.fn = s.tmp_4.arg0.vtable.methods.socketRead;
    s.pc = 16; return s.tmp_4;
  case 16:
    r0 = s.retval;
    s.tmp_3.arg1 = r0;
    s.callLocIdx = 197; s.pc = 15; return s.tmp_3;
  case 15:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = (s.tmp_1).fields["_buffer"] = (s.tmp_2);
    { step = 9; continue; }
  case 2:
// net/controllersocket.ts(108,24): if (avail < 0 || (this._timeout > 0 && monotonic() - stamp > this._timeout)) {
    r0 = (s.avail___15457 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = s.tmp_0;
    { step = 6; continue; }
  case 3:
    r0 = s.arg0.fields["_timeout"];
    s.tmp_2 = r0;
    r0 = (s.tmp_2 > 0);
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBool(s.tmp_1);
    if (r0) { step = 4; continue; }
    r0 = s.tmp_1;
    { step = 5; continue; }
  case 4:
    s.tmp_5 = net_monotonic__P1172_mk(s);
    s.callLocIdx = 198; s.pc = 17; return s.tmp_5;
  case 17:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = (s.tmp_4 - s.stamp___15447);
    s.tmp_3 = r0;
    r0 = s.arg0.fields["_timeout"];
    s.tmp_6 = r0;
    r0 = (s.tmp_3 > s.tmp_6);
  case 5:
    // jmp value (already in r0)
    s.tmp_7 = r0;
    r0 = s.tmp_7;
  case 6:
    // jmp value (already in r0)
    s.tmp_8 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_8);
    if (!r0) { step = 7; continue; }
// net/controllersocket.ts(110,1): this.close()
    s.tmp_9 = net_ControllerSocket_close__P1166_mk(s);
    s.tmp_9.arg0 = s.arg0;
    s.callLocIdx = 199; s.pc = 18; return s.tmp_9;
  case 18:
    r0 = s.retval;
// net/controllersocket.ts(111,21): throw "Didn't receive full response, failing out"
    r0 = pxsim_pxtcore.throwValue("Didn't receive full response, failing out");
    { step = 8; continue; }
  case 7:
// net/controllersocket.ts(113,21): pause(20)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 20;
    s.callLocIdx = 200; s.pc = 19; return s.tmp_0;
  case 19:
    r0 = s.retval;
  case 8:
  case 9:
    { step = 1; continue; }
  case 10:
// net/controllersocket.ts(116,19): pos = this._buffer.indexOf(hex`0d0a`)
    s.tmp_0 = helpers_bufferIndexOf__P186_mk(s);
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0.arg0 = r0;
    s.tmp_0.arg1 = _hex15496;
    s.callLocIdx = 201; s.pc = 20; return s.tmp_0;
  case 20:
    r0 = s.retval;
    s.pos___15494 = (r0);
// net/controllersocket.ts(117,19): pref = this._buffer.slice(0, pos)
    r0 = s.arg0.fields["_buffer"];
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 0, s.pos___15494);
    s.pref___15501 = (r0);
// net/controllersocket.ts(118,13): this._buffer = this._buffer.slice(pos + 2)
    s.tmp_0 = r0 = s.arg0;
    r0 = s.arg0.fields["_buffer"];
    s.tmp_2 = r0;
    r0 = (s.pos___15494 + 2);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, s.tmp_3, -1);
    s.tmp_1 = r0;
    r0 = (s.tmp_0).fields["_buffer"] = (s.tmp_1);
// net/controllersocket.ts(120,1): return pref.toString()
    r0 = pxsim.BufferMethods.toString(s.pref___15501);
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_readLine__P1163.info = {"start":3440,"length":1145,"line":99,"column":8,"endLine":120,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"readLine","argumentNames":["this"]}

function net_ControllerSocket_readLine__P1163_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_readLine__P1163, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  stamp___15447: undefined,
  avail___15457: undefined,
  pos___15494: undefined,
  pref___15501: undefined,
  arg0: undefined,
} }

const _hex15452 = pxsim.BufferMethods.createBufferFromHex("0d0a")
const _hex15496 = pxsim.BufferMethods.createBufferFromHex("0d0a")




function helpers_bufferIndexOf__P186(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.i___15522 = undefined;
    s.j___15536 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
// base/buffer.ts(151,18): i = 0
    s.i___15522 = (0);
// base/buffer.ts(151,9): for (let i = 0; i <= a.length - b.length; ++i) {...
  case 1:
// base/buffer.ts(151,25): i <= a.length - b.length
    s.tmp_1 = r0 = s.i___15522;
    r0 = pxsim.BufferMethods.length(s.arg0);
    s.tmp_3 = r0;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_4 = r0;
    r0 = (s.tmp_3 - s.tmp_4);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 <= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 10; continue; }
// base/buffer.ts(152,13): if (a[i] == b[0]) {...
    r0 = pxsim.BufferMethods.getByte(s.arg0, s.i___15522);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, 0);
    s.tmp_7 = r0;
    r0 = (s.tmp_6 == s.tmp_7);
    s.tmp_5 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_5);
    if (!r0) { step = 8; continue; }
// base/buffer.ts(153,21): j = 0
    s.j___15536 = (0);
// base/buffer.ts(154,17): while (j < b.length) {...
  case 2:
// base/buffer.ts(154,24): j < b.length
    s.tmp_1 = r0 = s.j___15536;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 < s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// base/buffer.ts(155,21): if (a[i + j] != b[j])...
    s.tmp_5 = r0 = s.arg0;
    r0 = (s.i___15522 + s.j___15536);
    s.tmp_6 = r0;
    r0 = pxsim.BufferMethods.getByte(s.tmp_5, s.tmp_6);
    s.tmp_4 = r0;
    r0 = pxsim.BufferMethods.getByte(s.arg1, s.j___15536);
    s.tmp_7 = r0;
    r0 = (s.tmp_4 != s.tmp_7);
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 3; continue; }
// base/buffer.ts(156,25): break
    { step = 5; continue; }
  case 3:
  case 4:
// base/buffer.ts(157,21): j++
    r0 = (s.j___15536 + 1);
    s.j___15536 = (r0);
    { step = 2; continue; }
  case 5:
// base/buffer.ts(159,17): if (j >= b.length)...
    s.tmp_1 = r0 = s.j___15536;
    r0 = pxsim.BufferMethods.length(s.arg1);
    s.tmp_2 = r0;
    r0 = (s.tmp_1 >= s.tmp_2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 6; continue; }
// base/buffer.ts(160,21): return i
    r0 = s.i___15522;
    { step = 11; continue; }
  case 6:
  case 7:
  case 8:
  case 9:
// base/buffer.ts(151,51): ++i
    r0 = (s.i___15522 + 1);
    s.i___15522 = (r0);
    { step = 1; continue; }
  case 10:
// base/buffer.ts(163,9): return -1
    r0 = -1;
  case 11:
    return leave(s, r0)
  default: oops()
} } }
helpers_bufferIndexOf__P186.info = {"start":4259,"length":433,"line":149,"column":4,"endLine":163,"endColumn":5,"fileName":"pxt_modules/base/buffer.ts","functionName":"bufferIndexOf","argumentNames":["a","b"]}

function helpers_bufferIndexOf__P186_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: helpers_bufferIndexOf__P186, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  i___15522: undefined,
  j___15536: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onMessage__P1162(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.src___15568 = undefined;
    s.value___15575 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(81,13): if (this._messageHandler === undefined) {...
    r0 = s.arg0.fields["_messageHandler"];
    s.tmp_1 = r0;
    r0 = (s.tmp_1 === undefined);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 5; continue; }
// net/controllersocket.ts(82,23): src = this.controller.dataAvailableSrc(this._socknum)
    s.tmp_2 = net_Controller__C1112_v15_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_2.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_2.arg1 = r0;
    if (!checkSubtype(s.tmp_2.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_2.arg0);
    s.tmp_2.fn = s.tmp_2.arg0.vtable.methods.dataAvailableSrc;
    s.pc = 9; return s.tmp_2;
  case 9:
    r0 = s.retval;
    s.src___15568 = (r0);
// net/controllersocket.ts(83,23): value = this.controller.dataAvailableValue(this._socknum)
    s.tmp_0 = net_Controller__C1112_v16_2_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_0.arg1 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.dataAvailableValue;
    s.pc = 10; return s.tmp_0;
  case 10:
    r0 = s.retval;
    s.value___15575 = (r0);
// net/controllersocket.ts(84,17): if (src > 0 && value > 0) {...
    r0 = (s.src___15568 > 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 1; continue; }
    r0 = s.tmp_0;
    { step = 2; continue; }
  case 1:
    r0 = (s.value___15575 > 0);
  case 2:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// net/controllersocket.ts(85,21): this.flushReadBuffer()
    s.tmp_2 = net_ControllerSocket_flushReadBuffer__P2258_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.callLocIdx = 190; s.pc = 11; return s.tmp_2;
  case 11:
    r0 = s.retval;
// net/controllersocket.ts(86,21): control.internalOnEvent(src, value, () => this.flushReadBuffer())
    r0 = pxsim_pxtcore_mkAction(1, net_ControllerSocket_onMessage_inline__P15593);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.control.internalOnEvent(s.src___15568, s.value___15575, s.tmp_0, 16);
    { step = 4; continue; }
  case 3:
// net/controllersocket.ts(88,21): control.runInParallel(() => {...
    r0 = pxsim_pxtcore_mkAction(1, net_ControllerSocket_onMessage_inline__P15597);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    r0 = pxsim.control.runInParallel(s.tmp_0);
  case 4:
  case 5:
  case 6:
// net/controllersocket.ts(96,13): this._messageHandler = handler || null
    s.tmp_0 = r0 = s.arg1;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (!r0) { step = 7; continue; }
    r0 = s.tmp_0;
    { step = 8; continue; }
  case 7:
    r0 = null;
  case 8:
    // jmp value (already in r0)
    s.tmp_1 = r0;
    r0 = (s.arg0).fields["_messageHandler"] = (s.tmp_1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onMessage__P1162.info = {"start":2553,"length":789,"line":79,"column":8,"endLine":96,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"onMessage","argumentNames":["this","handler"]}

function net_ControllerSocket_onMessage__P1162_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onMessage__P1162, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  src___15568: undefined,
  value___15575: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onMessage_inline__P15593(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_ControllerSocket_flushReadBuffer__P2258_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    s.callLocIdx = 191; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onMessage_inline__P15593.info = {"start":2957,"length":28,"line":85,"column":56,"endLine":85,"endColumn":84,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"inline","argumentNames":[]}

function net_ControllerSocket_onMessage_inline__P15593_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onMessage_inline__P15593, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_ControllerSocket_onMessage_inline__P15597(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

// net/controllersocket.ts(89,25): while (!this._closed) {...
  case 1:
// net/controllersocket.ts(89,32): !this._closed
    r0 = s.caps[0].fields["_closed"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 2; continue; }
// net/controllersocket.ts(90,29): this.flushReadBuffer()
    s.tmp_3 = net_ControllerSocket_flushReadBuffer__P2258_mk(s);
    s.tmp_3.arg0 = s.caps[0];
    s.callLocIdx = 192; s.pc = 3; return s.tmp_3;
  case 3:
    r0 = s.retval;
// net/controllersocket.ts(91,29): pause(200)
    s.tmp_0 = pause__P411_mk(s);
    s.tmp_0.arg0 = 200;
    s.callLocIdx = 193; s.pc = 4; return s.tmp_0;
  case 4:
    r0 = s.retval;
    { step = 1; continue; }
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onMessage_inline__P15597.info = {"start":3054,"length":193,"line":87,"column":42,"endLine":92,"endColumn":21,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"inline","argumentNames":[]}

function net_ControllerSocket_onMessage_inline__P15597_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onMessage_inline__P15597, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
} }





function net_ControllerSocket_flushReadBuffer__P2258(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.buf___15617 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(70,13): while (!this._closed && this._messageHandler) {...
  case 1:
// net/controllersocket.ts(70,20): !this._closed && this._messageHandler
    r0 = s.arg0.fields["_closed"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBool(s.tmp_0);
    if (r0) { step = 2; continue; }
    r0 = s.tmp_0;
    { step = 3; continue; }
  case 2:
    r0 = s.arg0.fields["_messageHandler"];
  case 3:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_3);
    if (!r0) { step = 6; continue; }
// net/controllersocket.ts(71,23): buf = this.read()
    s.tmp_4 = net_ControllerSocket_read__P1164_mk(s);
    s.tmp_4.arg0 = s.arg0;
    s.tmp_4.arg1 = 0;
    s.callLocIdx = 188; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
    s.buf___15617 = (r0);
// net/controllersocket.ts(72,17): if (buf.length) {...
    r0 = pxsim.BufferMethods.length(s.buf___15617);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 4; continue; }
// net/controllersocket.ts(73,21): this._messageHandler(buf)
    s.tmp_1 = if__messageHandler_2_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.buf___15617;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_messageHandler"), 2);
      s.callLocIdx = 189; s.pc = 8; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_messageHandler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_messageHandler"], 2); s.callLocIdx = 189; s.pc = 8; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 189; s.pc = 8; return s.tmp_1;; }
     else { s.callLocIdx = 189; s.pc = 8; return s.tmp_1; }
    }
  case 8:
    r0 = s.retval;
    { step = 5; continue; }
  case 4:
// net/controllersocket.ts(75,21): break
    { step = 6; continue; }
  case 5:
    { step = 1; continue; }
  case 6:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_flushReadBuffer__P2258.info = {"start":2243,"length":300,"line":68,"column":8,"endLine":77,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"flushReadBuffer","argumentNames":["this"]}

function net_ControllerSocket_flushReadBuffer__P2258_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_flushReadBuffer__P2258, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  buf___15617: undefined,
  arg0: undefined,
} }





function net_Controller_dataAvailableValue__P1139(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(170,65): return -1;
    r0 = -1;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_dataAvailableValue__P1139.info = {"start":5400,"length":68,"line":169,"column":8,"endLine":169,"endColumn":76,"fileName":"pxt_modules/net/controller.ts","functionName":"dataAvailableValue","argumentNames":["this","socket_num"]}

function net_Controller_dataAvailableValue__P1139_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_dataAvailableValue__P1139, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_dataAvailableSrc__P1138(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(169,63): return -1;
    r0 = -1;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_dataAvailableSrc__P1138.info = {"start":5325,"length":66,"line":168,"column":8,"endLine":168,"endColumn":74,"fileName":"pxt_modules/net/controller.ts","functionName":"dataAvailableSrc","argumentNames":["this","socket_num"]}

function net_Controller_dataAvailableSrc__P1138_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_dataAvailableSrc__P1138, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onError__P1161(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(66,13): this._errorHandler = handler
    r0 = (s.arg0).fields["_errorHandler"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onError__P1161.info = {"start":2134,"length":99,"line":64,"column":8,"endLine":66,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"onError","argumentNames":["this","handler"]}

function net_ControllerSocket_onError__P1161_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onError__P1161, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onClose__P1160(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(63,13): this._closeHandler = handler
    r0 = (s.arg0).fields["_closeHandler"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onClose__P1160.info = {"start":2037,"length":88,"line":61,"column":8,"endLine":63,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"onClose","argumentNames":["this","handler"]}

function net_ControllerSocket_onClose__P1160_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onClose__P1160, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_onOpen__P1159(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(60,13): this._openHandler = handler
    r0 = (s.arg0).fields["_openHandler"] = (s.arg1);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_onOpen__P1159.info = {"start":1942,"length":86,"line":58,"column":8,"endLine":60,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"onOpen","argumentNames":["this","handler"]}

function net_ControllerSocket_onOpen__P1159_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_onOpen__P1159, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_ControllerSocket_send__P1158(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(51,1): this.controller.socketWrite(this._socknum, net.dataAsBuffer(data))
    s.tmp_0 = net_Controller__C1112_v4_3_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_0.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_0.arg1 = r0;
    s.tmp_1 = net_dataAsBuffer__P1241_mk(s);
    s.tmp_1.arg0 = s.arg1;
    s.callLocIdx = 186; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.socketWrite;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_send__P1158.info = {"start":1637,"length":171,"line":48,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"send","argumentNames":["this","data"]}

function net_ControllerSocket_send__P1158_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_send__P1158, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_socketWrite__P1120(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketWrite__P1120.info = {"start":1502,"length":72,"line":53,"column":8,"endLine":54,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketWrite","argumentNames":["this","socket_num","buffer"]}

function net_Controller_socketWrite__P1120_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketWrite__P1120, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_ControllerSocket_connect__P1157(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(37,13): if (!this.controller.socketConnect(this._socknum, this.host, this.port, this.con
    s.tmp_3 = net_Controller__C1112_v3_5_mk(s);
    r0 = s.arg0.fields["controller"];
    s.tmp_3.arg0 = r0;
    r0 = s.arg0.fields["_socknum"];
    s.tmp_3.arg1 = r0;
    r0 = s.arg0.fields["host"];
    s.tmp_3.arg2 = r0;
    r0 = s.arg0.fields["port"];
    s.tmp_3.arg3 = r0;
    r0 = s.arg0.fields["conntype"];
    s.tmp_3.arg4 = r0;
    if (!checkSubtype(s.tmp_3.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_3.arg0);
    s.tmp_3.fn = s.tmp_3.arg0.vtable.methods.socketConnect;
    s.pc = 6; return s.tmp_3;
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/controllersocket.ts(38,17): this.error(`failed to connect to ${this.host}`)
    s.tmp_4 = net_ControllerSocket_error__P2257_mk(s);
    s.tmp_4.arg0 = s.arg0;
    r0 = s.arg0.fields["host"];
    s.tmp_6 = r0;
    if ((s.tmp_6) && (s.tmp_6).vtable) {
    setupResume(s, 8);
    pxsim_String__stringConv(s.tmp_6);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_6) + ""; }
  case 8:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat("failed to connect to ", s.tmp_5);
    s.tmp_4.arg1 = r0;
    s.callLocIdx = 184; s.pc = 7; return s.tmp_4;
  case 7:
    r0 = s.retval;
// net/controllersocket.ts(39,17): return;
    { step = 5; continue; }
  case 1:
  case 2:
// net/controllersocket.ts(42,13): this._buffer = hex``
    r0 = (s.arg0).fields["_buffer"] = (_hex15682);
// net/controllersocket.ts(44,13): if (this._openHandler)...
    r0 = s.arg0.fields["_openHandler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
// net/controllersocket.ts(45,17): this._openHandler()
    s.tmp_1 = if__openHandler_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_openHandler"), 1);
      s.callLocIdx = 185; s.pc = 9; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_openHandler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_openHandler"], 1); s.callLocIdx = 185; s.pc = 9; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 185; s.pc = 9; return s.tmp_1;; }
     else { s.callLocIdx = 185; s.pc = 9; return s.tmp_1; }
    }
  case 9:
    r0 = s.retval;
  case 3:
  case 4:
  case 5:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_connect__P1157.info = {"start":1244,"length":339,"line":35,"column":8,"endLine":45,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"connect","argumentNames":["this"]}

function net_ControllerSocket_connect__P1157_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_connect__P1157, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  arg0: undefined,
} }

const _hex15682 = pxsim.BufferMethods.createBufferFromHex("")




function net_ControllerSocket_error__P2257(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_ControllerSocket__C1147_VT)) failedCast(r0);
// net/controllersocket.ts(55,13): if (this._errorHandler)...
    r0 = s.arg0.fields["_errorHandler"];
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// net/controllersocket.ts(56,17): this._errorHandler(msg)
    s.tmp_1 = if__errorHandler_2_mk(s);
    s.tmp_1.arg0 = s.arg0;
    s.tmp_1.arg1 = s.arg1;
    if (!s.tmp_1.arg0.vtable.iface) {
      setupLambda(s.tmp_1, pxsim_pxtrt.mapGetByString(s.tmp_1.arg0, "_errorHandler"), 2);
      s.callLocIdx = 187; s.pc = 3; return s.tmp_1;
    } else {
      s.tmp_1.fn = s.tmp_1.arg0.vtable.iface["_errorHandler"];
      if (s.tmp_1.fn == null) { setupLambda(s.tmp_1, s.tmp_1.arg0.fields["_errorHandler"], 2); s.callLocIdx = 187; s.pc = 3; return s.tmp_1; }
      else if (s.tmp_1.fn.isGetter) { s.tmp_1.stage2Call = true; s.callLocIdx = 187; s.pc = 3; return s.tmp_1;; }
     else { s.callLocIdx = 187; s.pc = 3; return s.tmp_1; }
    }
  case 3:
    r0 = s.retval;
  case 1:
  case 2:
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_ControllerSocket_error__P2257.info = {"start":1818,"length":114,"line":53,"column":8,"endLine":56,"endColumn":9,"fileName":"pxt_modules/net/controllersocket.ts","functionName":"error","argumentNames":["this","msg"]}

function net_ControllerSocket_error__P2257_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_ControllerSocket_error__P2257, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_socketConnect__P1119(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(51,13): return false;
    r0 = false;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_socketConnect__P1119.info = {"start":1346,"length":146,"line":49,"column":8,"endLine":51,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"socketConnect","argumentNames":["this","socket_num","dest","port","conn_mode"]}

function net_Controller_socketConnect__P1119_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_socketConnect__P1119, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function net_WifiController_socket__P1974(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(63,13): return _wifi.socketAlloc()
    r0 = pxsim._wifi.socketAlloc();
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socket__P1974.info = {"start":2052,"length":74,"line":61,"column":8,"endLine":63,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socket","argumentNames":["this"]}

function net_WifiController_socket__P1974_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socket__P1974, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_WifiController_connectAP__P1973(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.res___15715 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(52,13): control.dmesg(`connecting to [${ssid}]...`)
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 6);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 6:
    r0 = s.retval;
    s.tmp_2 = r0;
    r0 = pxsim_String__concat("connecting to [", s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_String__concat(s.tmp_1, "]...");
    s.tmp_0 = r0;
    r0 = pxsim.control.dmesg(s.tmp_0);
// wifi---esp32/controller.ts(53,13): this._ssid = ssid
    r0 = (s.arg0).fields["_ssid"] = (s.arg1);
// wifi---esp32/controller.ts(54,19): res = _wifi.connect(ssid, pass)
    r0 = pxsim._wifi.connect(s.arg1, s.arg2);
    s.res___15715 = (r0);
// wifi---esp32/controller.ts(55,13): if (res != 0)...
    r0 = (s.res___15715 != 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// wifi---esp32/controller.ts(56,17): return false
    r0 = false;
    { step = 5; continue; }
  case 1:
  case 2:
// wifi---esp32/controller.ts(57,13): pauseUntil(() => this.isConnected, 15000)
    r0 = pxsim_pxtcore_mkAction(1, net_WifiController_connectAP_inline__P15723);
    s.tmp_1 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_1, 0, s.arg0);
    s.tmp_2 = pauseUntil__P365_mk(s);
    s.tmp_2.arg0 = s.tmp_1;
    s.tmp_2.arg1 = 15000;
    s.callLocIdx = 1153; s.pc = 7; return s.tmp_2;
  case 7:
    r0 = s.retval;
// wifi---esp32/controller.ts(58,13): control.dmesg(`${this.isConnected ? "" : "not "}connected to [${ssid}]`)
    s.tmp_1 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_1.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.isConnected;
    s.pc = 8; return s.tmp_1;
  case 8:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 3; continue; }
    r0 = pxsim_String_.mkEmpty();
    { step = 4; continue; }
  case 3:
    r0 = "not ";
  case 4:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = pxsim_String_.mkEmpty();
    s.tmp_7 = r0;
    if ((s.tmp_2) && (s.tmp_2).vtable) {
    setupResume(s, 9);
    pxsim_String__stringConv(s.tmp_2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.tmp_2) + ""; }
  case 9:
    r0 = s.retval;
    s.tmp_8 = r0;
    r0 = pxsim_String__concat(s.tmp_7, s.tmp_8);
    s.tmp_6 = r0;
    r0 = pxsim_String__concat(s.tmp_6, "connected to [");
    s.tmp_5 = r0;
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 10);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 10:
    r0 = s.retval;
    s.tmp_9 = r0;
    r0 = pxsim_String__concat(s.tmp_5, s.tmp_9);
    s.tmp_4 = r0;
    r0 = pxsim_String__concat(s.tmp_4, "]");
    s.tmp_3 = r0;
    r0 = pxsim.control.dmesg(s.tmp_3);
// wifi---esp32/controller.ts(59,13): return this.isConnected
    s.tmp_0 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.isConnected;
    s.pc = 11; return s.tmp_0;
  case 11:
    r0 = s.retval;
  case 5:
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_connectAP__P1973.info = {"start":1620,"length":422,"line":50,"column":8,"endLine":59,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"connectAP","argumentNames":["this","ssid","pass"]}

function net_WifiController_connectAP__P1973_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_connectAP__P1973, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  tmp_6: undefined,
  tmp_7: undefined,
  tmp_8: undefined,
  tmp_9: undefined,
  res___15715: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_WifiController_connectAP_inline__P15723(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.isConnected;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_connectAP_inline__P15723.info = {"start":1881,"length":22,"line":56,"column":23,"endLine":56,"endColumn":45,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"inline","argumentNames":[]}

function net_WifiController_connectAP_inline__P15723_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_connectAP_inline__P15723, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_WifiController_scanNetworksCore__P1971(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(39,13): if (!this.inScan) {...
    r0 = s.arg0.fields["inScan"];
    s.tmp_2 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_2);
    s.tmp_1 = r0;
    r0 = pxsim_Boolean__bang(s.tmp_1);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// wifi---esp32/controller.ts(40,17): this.inScan = true
    r0 = (s.arg0).fields["inScan"] = (true);
// wifi---esp32/controller.ts(41,17): _wifi.scanStart()
    r0 = pxsim._wifi.scanStart();
  case 1:
  case 2:
// wifi---esp32/controller.ts(43,13): control.waitForEvent(_wifi.eventID(), EV_ScanCompleted)
    r0 = pxsim._wifi.eventID();
    s.tmp_0 = r0;
    setupResume(s, 3);
    pxsim.control.waitForEvent(s.tmp_0, 1000);
    checkResumeConsumed();
    return;
  case 3:
    r0 = s.retval;
// wifi---esp32/controller.ts(44,13): return this.networks
    r0 = s.arg0.fields["networks"];
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_scanNetworksCore__P1971.info = {"start":1264,"length":272,"line":37,"column":8,"endLine":44,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"scanNetworksCore","argumentNames":["this"]}

function net_WifiController_scanNetworksCore__P1971_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_scanNetworksCore__P1971, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function net_Controller_connect__P1132(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_Controller__C1112_VT)) failedCast(r0);
// net/controller.ts(157,13): this.autoconnect()
    s.tmp_0 = net_Controller_autoconnect__P1130_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.callLocIdx = 181; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
// net/controller.ts(158,13): pauseUntil(() => this.isConnected, timeout_ms)
    r0 = pxsim_pxtcore_mkAction(1, net_Controller_connect_inline__P15758);
    s.tmp_0 = r0;
    r0 = pxsim_pxtrt_stclo(s.tmp_0, 0, s.arg0);
    s.tmp_1 = pauseUntil__P365_mk(s);
    s.tmp_1.arg0 = s.tmp_0;
    s.tmp_1.arg1 = s.arg1;
    s.callLocIdx = 182; s.pc = 2; return s.tmp_1;
  case 2:
    r0 = s.retval;
// net/controller.ts(159,13): return this.isConnected
    s.tmp_0 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_0.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.isConnected;
    s.pc = 3; return s.tmp_0;
  case 3:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_connect__P1132.info = {"start":4816,"length":175,"line":155,"column":8,"endLine":159,"endColumn":9,"fileName":"pxt_modules/net/controller.ts","functionName":"connect","argumentNames":["this","timeout_ms"]}

function net_Controller_connect__P1132_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_connect__P1132, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_Controller_connect_inline__P15758(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.tmp_0 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_0.arg0 = s.caps[0];
    if (!checkSubtype(s.tmp_0.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_0.arg0);
    s.tmp_0.fn = s.tmp_0.arg0.vtable.methods.isConnected;
    s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_Controller_connect_inline__P15758.info = {"start":4910,"length":22,"line":157,"column":23,"endLine":157,"endColumn":45,"fileName":"pxt_modules/net/controller.ts","functionName":"inline","argumentNames":[]}

function net_Controller_connect_inline__P15758_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_Controller_connect_inline__P15758, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
} }





function net_WifiController_dataAvailableValue__P1988(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(115,65): return 1000 + socket_num;
    r0 = (1000 + s.arg1);
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_dataAvailableValue__P1988.info = {"start":4145,"length":83,"line":114,"column":8,"endLine":114,"endColumn":91,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"dataAvailableValue","argumentNames":["this","socket_num"]}

function net_WifiController_dataAvailableValue__P1988_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_dataAvailableValue__P1988, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_WifiController_dataAvailableSrc__P1987(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(114,63): return _wifi.eventID();
    r0 = pxsim._wifi.eventID();
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_dataAvailableSrc__P1987.info = {"start":4057,"length":79,"line":113,"column":8,"endLine":113,"endColumn":87,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"dataAvailableSrc","argumentNames":["this","socket_num"]}

function net_WifiController_dataAvailableSrc__P1987_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_dataAvailableSrc__P1987, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_WifiController_rssi__P1985(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(111,30): return _wifi.rssi()
    r0 = pxsim._wifi.rssi();
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_WifiController_rssi__P1985.info = {"start":3929,"length":42,"line":110,"column":8,"endLine":110,"endColumn":50,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"rssi","argumentNames":["this"]}
net_WifiController_rssi__P1985.isGetter = true;

function net_WifiController_rssi__P1985_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_rssi__P1985, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }





function net_WifiController_ssid__P1984(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(110,30): return this.isConnected ? this._ssid : ""
    s.tmp_1 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_1.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.isConnected;
    s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = s.arg0.fields["_ssid"];
    { step = 2; continue; }
  case 1:
    r0 = pxsim_String_.mkEmpty();
  case 2:
    // jmp value (already in r0)
    s.tmp_2 = r0;
    r0 = s.tmp_2;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_WifiController_ssid__P1984.info = {"start":3856,"length":64,"line":109,"column":8,"endLine":109,"endColumn":72,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"ssid","argumentNames":["this"]}
net_WifiController_ssid__P1984.isGetter = true;

function net_WifiController_ssid__P1984_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_ssid__P1984, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  arg0: undefined,
} }





function net_WifiController_IPaddress__P1983(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(109,35): return this.isConnected ? _wifi.ipInfo().slice(0, 4) : undefined;
    s.tmp_1 = net_Controller__C1112_v8_1_mk(s);
    s.tmp_1.arg0 = s.arg0;
    if (!checkSubtype(s.tmp_1.arg0, net_Controller__C1112_VT)) failedCast(s.tmp_1.arg0);
    s.tmp_1.fn = s.tmp_1.arg0.vtable.methods.isConnected;
    s.pc = 3; return s.tmp_1;
  case 3:
    r0 = s.retval;
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
    r0 = pxsim._wifi.ipInfo();
    s.tmp_2 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_2, 0, 4);
    { step = 2; continue; }
  case 1:
    r0 = undefined;
  case 2:
    // jmp value (already in r0)
    s.tmp_3 = r0;
    r0 = s.tmp_3;
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_WifiController_IPaddress__P1983.info = {"start":3754,"length":93,"line":108,"column":8,"endLine":108,"endColumn":101,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"IPaddress","argumentNames":["this"]}
net_WifiController_IPaddress__P1983.isGetter = true;

function net_WifiController_IPaddress__P1983_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_IPaddress__P1983, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
} }





function net_WifiController_MACaddress__P1982(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(108,36): return control.deviceLongSerialNumber().slice(1, 6);
    r0 = pxsim.control.deviceLongSerialNumber();
    s.tmp_0 = r0;
    r0 = pxsim.BufferMethods.slice(s.tmp_0, 1, 6);
    return leaveAccessor(s, r0)
  default: oops()
} } }
net_WifiController_MACaddress__P1982.info = {"start":3664,"length":81,"line":107,"column":8,"endLine":107,"endColumn":89,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"MACaddress","argumentNames":["this"]}
net_WifiController_MACaddress__P1982.isGetter = true;

function net_WifiController_MACaddress__P1982_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_MACaddress__P1982, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
} }





function net_WifiController_socketClose__P1979(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(101,13): this.logError("close", _wifi.socketClose(socket_num))
    s.tmp_0 = net_WifiController_logError__P2537_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "close";
    r0 = pxsim._wifi.socketClose(s.arg1);
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 1157; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketClose__P1979.info = {"start":3391,"length":122,"line":99,"column":8,"endLine":101,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketClose","argumentNames":["this","socket_num"]}

function net_WifiController_socketClose__P1979_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketClose__P1979, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
} }





function net_WifiController_logError__P2537(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(67,13): if (res < 0) {...
    r0 = (s.arg2 < 0);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// wifi---esp32/controller.ts(68,17): control.dmesg(`sock ${lbl} failed: ${res}`)
    if ((s.arg1) && (s.arg1).vtable) {
    setupResume(s, 4);
    pxsim_String__stringConv(s.arg1);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg1) + ""; }
  case 4:
    r0 = s.retval;
    s.tmp_4 = r0;
    r0 = pxsim_String__concat("sock ", s.tmp_4);
    s.tmp_3 = r0;
    r0 = pxsim_String__concat(s.tmp_3, " failed: ");
    s.tmp_2 = r0;
    if ((s.arg2) && (s.arg2).vtable) {
    setupResume(s, 5);
    pxsim_String__stringConv(s.arg2);
    checkResumeConsumed();
    return;
    } else { s.retval = (s.arg2) + ""; }
  case 5:
    r0 = s.retval;
    s.tmp_5 = r0;
    r0 = pxsim_String__concat(s.tmp_2, s.tmp_5);
    s.tmp_1 = r0;
    r0 = pxsim.control.dmesg(s.tmp_1);
// wifi---esp32/controller.ts(69,17): return false
    r0 = false;
    { step = 3; continue; }
  case 1:
  case 2:
// wifi---esp32/controller.ts(71,13): return true
    r0 = true;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_logError__P2537.info = {"start":2136,"length":208,"line":65,"column":8,"endLine":71,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"logError","argumentNames":["this","lbl","res"]}

function net_WifiController_logError__P2537_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_logError__P2537, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  tmp_5: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_WifiController_socketRead__P1978(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    s.r___15815 = undefined;
    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(91,19): r = _wifi.socketRead(socket_num, size)
    (function(cb) { pxsim._wifi.socketRead(s.arg1, s.arg2).then(cb) })(buildResume(s, 4));
    checkResumeConsumed();
    return;
  case 4:
    r0 = s.retval;
    s.r___15815 = (r0);
// wifi---esp32/controller.ts(92,13): if (typeof r == "number") {...
    r0 = pxsim_pxtcore.typeOf(s.r___15815);
    s.tmp_1 = r0;
    r0 = (s.tmp_1 == "number");
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// wifi---esp32/controller.ts(93,17): this.logError("read", r)
    s.tmp_2 = net_WifiController_logError__P2537_mk(s);
    s.tmp_2.arg0 = s.arg0;
    s.tmp_2.arg1 = "read";
    s.tmp_2.arg2 = s.r___15815;
    s.callLocIdx = 1156; s.pc = 5; return s.tmp_2;
  case 5:
    r0 = s.retval;
// wifi---esp32/controller.ts(94,17): return undefined
    r0 = undefined;
    { step = 3; continue; }
    { step = 2; continue; }
  case 1:
// wifi---esp32/controller.ts(96,17): return (r as any) as Buffer
    r0 = s.r___15815;
    { step = 3; continue; }
  case 2:
    r0 = undefined;
  case 3:
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketRead__P1978.info = {"start":3060,"length":321,"line":89,"column":8,"endLine":97,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketRead","argumentNames":["this","socket_num","size"]}

function net_WifiController_socketRead__P1978_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketRead__P1978, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  r___15815: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_WifiController_socketAvailable__P1977(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(87,13): return _wifi.socketBytesAvailable(socket_num)
    r0 = pxsim._wifi.socketBytesAvailable(s.arg1);
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketAvailable__P1977.info = {"start":2930,"length":120,"line":85,"column":8,"endLine":87,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketAvailable","argumentNames":["this","socket_num"]}

function net_WifiController_socketAvailable__P1977_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketAvailable__P1977, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
  arg1: undefined,
} }





function net_WifiController_socketWrite__P1976(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(83,13): this.logError("write", _wifi.socketWrite(socket_num, buffer))
    s.tmp_0 = net_WifiController_logError__P2537_mk(s);
    s.tmp_0.arg0 = s.arg0;
    s.tmp_0.arg1 = "write";
    (function(cb) { pxsim._wifi.socketWrite(s.arg1, s.arg2).then(cb) })(buildResume(s, 2));
    checkResumeConsumed();
    return;
  case 2:
    r0 = s.retval;
    s.tmp_0.arg2 = r0;
    s.callLocIdx = 1155; s.pc = 1; return s.tmp_0;
  case 1:
    r0 = s.retval;
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketWrite__P1976.info = {"start":2774,"length":146,"line":81,"column":8,"endLine":83,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketWrite","argumentNames":["this","socket_num","buffer"]}

function net_WifiController_socketWrite__P1976_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketWrite__P1976, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }





function net_WifiController_socketConnect__P1975(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.arg1 = (s.lambdaArgs[1]);
      s.arg2 = (s.lambdaArgs[2]);
      s.arg3 = (s.lambdaArgs[3]);
      s.arg4 = (s.lambdaArgs[4]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(75,13): if (conn_mode != TLS_MODE)...
    r0 = (s.arg4 != 2);
    s.tmp_0 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_0);
    if (!r0) { step = 1; continue; }
// wifi---esp32/controller.ts(76,17): throw "only TLS supported for now"
    r0 = pxsim_pxtcore.throwValue("only TLS supported for now");
  case 1:
  case 2:
// wifi---esp32/controller.ts(77,13): if (typeof dest != "string")...
    r0 = pxsim_pxtcore.typeOf(s.arg2);
    s.tmp_2 = r0;
    r0 = (s.tmp_2 != "string");
    s.tmp_1 = r0;
    r0 = pxsim_numops_toBoolDecr(s.tmp_1);
    if (!r0) { step = 3; continue; }
// wifi---esp32/controller.ts(78,17): throw "connection by IP not supported in TLS mode"
    r0 = pxsim_pxtcore.throwValue("connection by IP not supported in TLS mode");
  case 3:
  case 4:
// wifi---esp32/controller.ts(79,13): return this.logError("connect", _wifi.socketConnectTLS(socket_num, dest, port))
    s.tmp_3 = net_WifiController_logError__P2537_mk(s);
    s.tmp_3.arg0 = s.arg0;
    s.tmp_3.arg1 = "connect";
    (function(cb) { pxsim._wifi.socketConnectTLS(s.arg1, s.arg2, s.arg3).then(cb) })(buildResume(s, 6));
    checkResumeConsumed();
    return;
  case 6:
    r0 = s.retval;
    s.tmp_3.arg2 = r0;
    s.callLocIdx = 1154; s.pc = 5; return s.tmp_3;
  case 5:
    r0 = s.retval;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_socketConnect__P1975.info = {"start":2354,"length":410,"line":73,"column":8,"endLine":79,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"socketConnect","argumentNames":["this","socket_num","dest","port","conn_mode"]}

function net_WifiController_socketConnect__P1975_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_socketConnect__P1975, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }





function net_WifiController_disconnectAP__P1972(s) {
let r0 = s.r0, step = s.pc;
s.pc = -1;


while (true) {
if (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;
switch (step) {
  case 0:

    if (s.lambdaArgs) {
      s.arg0 = (s.lambdaArgs[0]);
      s.lambdaArgs = null;
    }
    r0 = s.arg0;
    if (!checkSubtype(r0, net_WifiController__C1969_VT)) failedCast(r0);
// wifi---esp32/controller.ts(48,13): _wifi.disconnect()
    r0 = pxsim._wifi.disconnect();
    r0 = undefined;
    return leave(s, r0)
  default: oops()
} } }
net_WifiController_disconnectAP__P1972.info = {"start":1546,"length":64,"line":46,"column":8,"endLine":48,"endColumn":9,"fileName":"pxt_modules/wifi---esp32/controller.ts","functionName":"disconnectAP","argumentNames":["this"]}

function net_WifiController_disconnectAP__P1972_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: net_WifiController_disconnectAP__P1972, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  arg0: undefined,
} }




function lambda_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v8_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function lambda_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function lambda_4_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
} }


function if_clientId_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function lambda_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_send_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_topic_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_content_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_host_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_port_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_onOpen_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_onMessage_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_onError_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_onClose_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_connect_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_handler_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_qos_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_pid_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_func_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_pid_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_will_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_message_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_username_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_password_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_retain_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v2_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_close_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_port_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_clientId_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_qos_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_retain_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_registers_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_code_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_name_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_packf_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Server__C1824_v0_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_Client__C1844_v0_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function jacdac_Server__C1824_v1_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_flags_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_fields_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_headers_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_headers_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_read_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_setTimeout_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_timeout_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_json_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_data_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_data_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_readLine_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_factory_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_handler_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_condition_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Server__C1824_v2_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_Controller__C1112_v9_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function net_Controller__C1112_v0_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_onConnectSSIDFailed_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_Controller__C1112_v1_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_disableBrain_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_disableBrain_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if_disableRoleManager_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_disableLogger_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if_noWait_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function jacdac_Client__C1844_v1_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v14_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v13_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v11_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v12_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v10_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v7_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if__closeHandler_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function net_Controller__C1112_v5_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_Controller__C1112_v6_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function net_Controller__C1112_v15_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_Controller__C1112_v16_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function if__messageHandler_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }


function net_Controller__C1112_v4_3_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
} }


function net_Controller__C1112_v3_5_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
  arg2: undefined,
  arg3: undefined,
  arg4: undefined,
} }


function if__openHandler_1_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
} }


function if__errorHandler_2_mk(s) {
    checkStack(s.depth);
    return {
        parent: s, fn: null, depth: s.depth + 1,
        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,
  tmp_0: undefined,
  tmp_1: undefined,
  tmp_2: undefined,
  tmp_3: undefined,
  tmp_4: undefined,
  arg0: undefined,
  arg1: undefined,
} }

const jacdac_EventSource__C1912_VT = mkVTable({
  name: "EventSource",
  numFields: 1,
  classNo: 16,
  lastSubtypeNo: 28,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac_Bus__C1802_VT = mkVTable({
  name: "Bus",
  numFields: 12,
  classNo: 17,
  lastSubtypeNo: 17,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "hostServices": null,
    "set/hostServices": null,
    "devices": null,
    "set/devices": null,
    "_myDevice": null,
    "set/_myDevice": null,
    "restartCounter": null,
    "set/restartCounter": null,
    "resetIn": null,
    "set/resetIn": null,
    "autoBindCnt": null,
    "set/autoBindCnt": null,
    "_eventCounter": null,
    "set/_eventCounter": null,
    "controlServer": null,
    "set/controlServer": null,
    "proxyMode": null,
    "set/proxyMode": null,
    "unattachedClients": null,
    "set/unattachedClients": null,
    "allClients": null,
    "set/allClients": null,
    "running": jacdac_Bus_running__P1809,
    "start": jacdac_Bus_start__P1810,
    "gcDevices": jacdac_Bus_gcDevices__P2468,
    "selfDevice": jacdac_Bus_selfDevice__P1811,
    "mkEventCmd": jacdac_Bus_mkEventCmd__P1812,
    "clearAttachCache": jacdac_Bus_clearAttachCache__P1813,
    "isClient": jacdac_Bus_isClient__P1814,
    "queueAnnounce": jacdac_Bus_queueAnnounce__P1815,
    "detachClient": jacdac_Bus_detachClient__P1816,
    "attachClient": jacdac_Bus_attachClient__P1817,
    "startClient": jacdac_Bus_startClient__P1818,
    "reattach": jacdac_Bus_reattach__P1820,
    "processPacket": jacdac_Bus_processPacket__P1821,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const net_Net__C1204_VT = mkVTable({
  name: "Net",
  numFields: 2,
  classNo: 29,
  lastSubtypeNo: 29,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_controller": null,
    "set/_controller": null,
    "factory": null,
    "set/factory": null,
    "controller": net_Net_controller__P1207,
    "createSocket": net_Net_createSocket__P1209,
  },
});
const net_Controller__C1112_VT = mkVTable({
  name: "Controller",
  numFields: 5,
  classNo: 30,
  lastSubtypeNo: 31,
  maxBgInstances: null,
  methods: {
    "scanNetworks": net_Controller_scanNetworks__P1117,
    "scanNetworksCore": net_Controller_scanNetworksCore__P2249,
    "socket": net_Controller_socket__P1118,
    "socketConnect": net_Controller_socketConnect__P1119,
    "socketWrite": net_Controller_socketWrite__P1120,
    "socketAvailable": net_Controller_socketAvailable__P1121,
    "socketRead": net_Controller_socketRead__P1122,
    "socketClose": net_Controller_socketClose__P1123,
    "isConnected": net_Controller_isConnected__P1126,
    "connectAP": net_Controller_connectAP__P1127,
    "disconnectAP": net_Controller_disconnectAP__P1128,
    "ssid": net_Controller_ssid__P1133,
    "rssi": net_Controller_rssi__P1134,
    "MACaddress": net_Controller_MACaddress__P1135,
    "IPaddress": net_Controller_IPaddress__P1136,
    "dataAvailableSrc": net_Controller_dataAvailableSrc__P1138,
    "dataAvailableValue": net_Controller_dataAvailableValue__P1139,
  },
  iface: {
    "eventID": null,
    "set/eventID": null,
    "_isConnected": null,
    "set/_isConnected": null,
    "onConnectSSIDFailed": null,
    "set/onConnectSSIDFailed": null,
    "lastScanResults": null,
    "set/lastScanResults": null,
    "reconnectRunning": null,
    "set/reconnectRunning": null,
    "setConnected": net_Controller_setConnected__P2247,
    "emitEvent": net_Controller_emitEvent__P2248,
    "onEvent": net_Controller_onEvent__P1116,
    "scanNetworks": net_Controller_scanNetworks__P1117,
    "scanNetworksCore": net_Controller_scanNetworksCore__P2249,
    "socket": net_Controller_socket__P1118,
    "socketConnect": net_Controller_socketConnect__P1119,
    "socketWrite": net_Controller_socketWrite__P1120,
    "socketAvailable": net_Controller_socketAvailable__P1121,
    "socketRead": net_Controller_socketRead__P1122,
    "socketClose": net_Controller_socketClose__P1123,
    "isConnected": net_Controller_isConnected__P1126,
    "connectAP": net_Controller_connectAP__P1127,
    "disconnectAP": net_Controller_disconnectAP__P1128,
    "autoconnect": net_Controller_autoconnect__P1130,
    "disconnect": net_Controller_disconnect__P1131,
    "connectCore": net_Controller_connectCore__P2250,
    "connect": net_Controller_connect__P1132,
    "ssid": net_Controller_ssid__P1133,
    "rssi": net_Controller_rssi__P1134,
    "MACaddress": net_Controller_MACaddress__P1135,
    "IPaddress": net_Controller_IPaddress__P1136,
    "dataAvailableSrc": net_Controller_dataAvailableSrc__P1138,
    "dataAvailableValue": net_Controller_dataAvailableValue__P1139,
  },
});
const net_WifiController__C1969_VT = mkVTable({
  name: "WifiController",
  numFields: 8,
  classNo: 31,
  lastSubtypeNo: 31,
  maxBgInstances: null,
  methods: {
    "scanNetworks": net_Controller_scanNetworks__P1117,
    "scanNetworksCore": net_WifiController_scanNetworksCore__P1971,
    "socket": net_WifiController_socket__P1974,
    "socketConnect": net_WifiController_socketConnect__P1975,
    "socketWrite": net_WifiController_socketWrite__P1976,
    "socketAvailable": net_WifiController_socketAvailable__P1977,
    "socketRead": net_WifiController_socketRead__P1978,
    "socketClose": net_WifiController_socketClose__P1979,
    "isConnected": net_Controller_isConnected__P1126,
    "connectAP": net_WifiController_connectAP__P1973,
    "disconnectAP": net_WifiController_disconnectAP__P1972,
    "ssid": net_WifiController_ssid__P1984,
    "rssi": net_WifiController_rssi__P1985,
    "MACaddress": net_WifiController_MACaddress__P1982,
    "IPaddress": net_WifiController_IPaddress__P1983,
    "dataAvailableSrc": net_WifiController_dataAvailableSrc__P1987,
    "dataAvailableValue": net_WifiController_dataAvailableValue__P1988,
  },
  iface: {
    "eventID": null,
    "set/eventID": null,
    "_isConnected": null,
    "set/_isConnected": null,
    "onConnectSSIDFailed": null,
    "set/onConnectSSIDFailed": null,
    "lastScanResults": null,
    "set/lastScanResults": null,
    "reconnectRunning": null,
    "set/reconnectRunning": null,
    "networks": null,
    "set/networks": null,
    "inScan": null,
    "set/inScan": null,
    "_ssid": null,
    "set/_ssid": null,
    "scanDone": net_WifiController_scanDone__P2536,
    "scanNetworksCore": net_WifiController_scanNetworksCore__P1971,
    "disconnectAP": net_WifiController_disconnectAP__P1972,
    "connectAP": net_WifiController_connectAP__P1973,
    "socket": net_WifiController_socket__P1974,
    "logError": net_WifiController_logError__P2537,
    "socketConnect": net_WifiController_socketConnect__P1975,
    "socketWrite": net_WifiController_socketWrite__P1976,
    "socketAvailable": net_WifiController_socketAvailable__P1977,
    "socketRead": net_WifiController_socketRead__P1978,
    "socketClose": net_WifiController_socketClose__P1979,
    "MACaddress": net_WifiController_MACaddress__P1982,
    "IPaddress": net_WifiController_IPaddress__P1983,
    "ssid": net_WifiController_ssid__P1984,
    "rssi": net_WifiController_rssi__P1985,
    "dataAvailableSrc": net_WifiController_dataAvailableSrc__P1987,
    "dataAvailableValue": net_WifiController_dataAvailableValue__P1988,
    "setConnected": net_Controller_setConnected__P2247,
    "emitEvent": net_Controller_emitEvent__P2248,
    "onEvent": net_Controller_onEvent__P1116,
    "scanNetworks": net_Controller_scanNetworks__P1117,
    "isConnected": net_Controller_isConnected__P1126,
    "autoconnect": net_Controller_autoconnect__P1130,
    "disconnect": net_Controller_disconnect__P1131,
    "connectCore": net_Controller_connectCore__P2250,
    "connect": net_Controller_connect__P1132,
  },
});
const jacdac_Server__C1824_VT = mkVTable({
  name: "Server",
  numFields: 8,
  classNo: 18,
  lastSubtypeNo: 25,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": jacdac_Server_handlePacket__P1831,
    "log": jacdac_Server_log__P2394,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": jacdac_Server_handlePacket__P1831,
    "sendReport": jacdac_Server_sendReport__P2383,
    "sendEvent": jacdac_Server_sendEvent__P2384,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2385,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2386,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2387,
    "handleRegValue": jacdac_Server_handleRegValue__P2389,
    "handleRegBool": jacdac_Server_handleRegBool__P2390,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2392,
    "start": jacdac_Server_start__P1833,
    "log": jacdac_Server_log__P2394,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac_Device__C1870_VT = mkVTable({
  name: "Device",
  numFields: 9,
  classNo: 26,
  lastSubtypeNo: 26,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "lastSeen": null,
    "set/lastSeen": null,
    "clients": null,
    "set/clients": null,
    "_eventCounter": null,
    "set/_eventCounter": null,
    "_shortId": null,
    "set/_shortId": null,
    "queries": null,
    "set/queries": null,
    "_score": null,
    "set/_score": null,
    "deviceId": null,
    "set/deviceId": null,
    "services": null,
    "set/services": null,
    "isBrain": jacdac_Device_isBrain__P1875,
    "announceflags": jacdac_Device_announceflags__P1876,
    "restartCounter": jacdac_Device_restartCounter__P1877,
    "shortId": jacdac_Device_shortId__P1881,
    "toString": jacdac_Device_toString__P1882,
    "matchesRoleAt": jacdac_Device_matchesRoleAt__P1883,
    "lookupQuery": jacdac_Device_lookupQuery__P2484,
    "serviceClassLength": jacdac_Device_serviceClassLength__P1884,
    "serviceClassAt": jacdac_Device_serviceClassAt__P1885,
    "query": jacdac_Device_query__P1886,
    "processPacket": jacdac_Device_processPacket__P1890,
    "hasService": jacdac_Device_hasService__P1891,
    "_destroy": jacdac_Device__destroy__P1894,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
  toStringMethod: jacdac_Device_toString__P1882,
});
const jacdac_twins_DeviceTwin__C2649_VT = mkVTable({
  name: "DeviceTwin",
  numFields: 3,
  classNo: 32,
  lastSubtypeNo: 32,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "id": null,
    "set/id": null,
    "services": null,
    "set/services": null,
    "device": null,
    "set/device": null,
    "applyTwinUpdate": jacdac_twins_DeviceTwin_applyTwinUpdate__P2650,
    "tick": jacdac_twins_DeviceTwin_tick__P2651,
    "serialize": jacdac_twins_DeviceTwin_serialize__P2652,
    "computeTwin": jacdac_twins_DeviceTwin_computeTwin__P2653,
  },
});
const mqtt_EventEmitter__C1312_VT = mkVTable({
  name: "EventEmitter",
  numFields: 1,
  classNo: 33,
  lastSubtypeNo: 34,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "handlers": null,
    "set/handlers": null,
    "on": mqtt_EventEmitter_on__P1314,
    "emit": mqtt_EventEmitter_emit__P2272,
  },
});
const mqtt_Client__C1320_VT = mkVTable({
  name: "Client",
  numFields: 12,
  classNo: 34,
  lastSubtypeNo: 34,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "handlers": null,
    "set/handlers": null,
    "logPriority": null,
    "set/logPriority": null,
    "tracePriority": null,
    "set/tracePriority": null,
    "opt": null,
    "set/opt": null,
    "net": null,
    "set/net": null,
    "sct": null,
    "set/sct": null,
    "wdId": null,
    "set/wdId": null,
    "piId": null,
    "set/piId": null,
    "buf": null,
    "set/buf": null,
    "subs": null,
    "set/subs": null,
    "status": null,
    "set/status": null,
    "mqttHandlers": null,
    "set/mqttHandlers": null,
    "log": mqtt_Client_log__P2276,
    "trace": mqtt_Client_trace__P2277,
    "connected": mqtt_Client_connected__P1325,
    "describe": mqtt_Client_describe__P2278,
    "disconnect": mqtt_Client_disconnect__P1327,
    "connect": mqtt_Client_connect__P1328,
    "canSend": mqtt_Client_canSend__P2279,
    "doneSending": mqtt_Client_doneSending__P2280,
    "publish": mqtt_Client_publish__P1329,
    "startPublish": mqtt_Client_startPublish__P1330,
    "continuePublish": mqtt_Client_continuePublish__P1331,
    "finishPublish": mqtt_Client_finishPublish__P1332,
    "subscribeCore": mqtt_Client_subscribeCore__P2281,
    "subscribe": mqtt_Client_subscribe__P1333,
    "send": mqtt_Client_send__P2282,
    "handleMessage": mqtt_Client_handleMessage__P2283,
    "send1": mqtt_Client_send1__P2284,
    "ping": mqtt_Client_ping__P2285,
    "on": mqtt_EventEmitter_on__P1314,
    "emit": mqtt_EventEmitter_emit__P2272,
  },
});
const control_Interval__C2173_VT = mkVTable({
  name: "Interval",
  numFields: 4,
  classNo: 35,
  lastSubtypeNo: 35,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "id": null,
    "set/id": null,
    "func": null,
    "set/func": null,
    "delay": null,
    "set/delay": null,
    "mode": null,
    "set/mode": null,
    "work": control_Interval_work__P2174,
    "cancel": control_Interval_cancel__P2175,
  },
});
const net_ControllerSocket__C1147_VT = mkVTable({
  name: "ControllerSocket",
  numFields: 12,
  classNo: 36,
  lastSubtypeNo: 36,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_buffer": null,
    "set/_buffer": null,
    "_socknum": null,
    "set/_socknum": null,
    "_timeout": null,
    "set/_timeout": null,
    "_closed": null,
    "set/_closed": null,
    "_openHandler": null,
    "set/_openHandler": null,
    "_closeHandler": null,
    "set/_closeHandler": null,
    "_errorHandler": null,
    "set/_errorHandler": null,
    "_messageHandler": null,
    "set/_messageHandler": null,
    "controller": null,
    "set/controller": null,
    "host": null,
    "set/host": null,
    "port": null,
    "set/port": null,
    "conntype": null,
    "set/conntype": null,
    "connect": net_ControllerSocket_connect__P1157,
    "send": net_ControllerSocket_send__P1158,
    "error": net_ControllerSocket_error__P2257,
    "onOpen": net_ControllerSocket_onOpen__P1159,
    "onClose": net_ControllerSocket_onClose__P1160,
    "onError": net_ControllerSocket_onError__P1161,
    "flushReadBuffer": net_ControllerSocket_flushReadBuffer__P2258,
    "onMessage": net_ControllerSocket_onMessage__P1162,
    "readLine": net_ControllerSocket_readLine__P1163,
    "read": net_ControllerSocket_read__P1164,
    "setTimeout": net_ControllerSocket_setTimeout__P1165,
    "close": net_ControllerSocket_close__P1166,
  },
});
const settings_SecretStore__C1094_VT = mkVTable({
  name: "SecretStore",
  numFields: 1,
  classNo: 37,
  lastSubtypeNo: 37,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "key": null,
    "set/key": null,
    "setSecret": settings_SecretStore_setSecret__P1096,
    "updateSecret": settings_SecretStore_updateSecret__P1097,
    "readSecret": settings_SecretStore_readSecret__P1098,
    "readSecrets": settings_SecretStore_readSecrets__P1100,
  },
});
const JSON_Parser__C2186_VT = mkVTable({
  name: "Parser",
  numFields: 3,
  classNo: 38,
  lastSubtypeNo: 38,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "ptr": null,
    "set/ptr": null,
    "s": null,
    "set/s": null,
    "errorMsg": null,
    "set/errorMsg": null,
    "error": JSON_Parser_error__P2187,
    "skipWS": JSON_Parser_skipWS__P2188,
    "nextChar": JSON_Parser_nextChar__P2189,
    "doString": JSON_Parser_doString__P2190,
    "doArray": JSON_Parser_doArray__P2191,
    "doObject": JSON_Parser_doObject__P2192,
    "doNumber": JSON_Parser_doNumber__P2193,
    "checkKw": JSON_Parser_checkKw__P2194,
    "value": JSON_Parser_value__P2195,
  },
});
const jacdac_twins_ServiceTwin__C2628_VT = mkVTable({
  name: "ServiceTwin",
  numFields: 8,
  classNo: 39,
  lastSubtypeNo: 39,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "id": null,
    "set/id": null,
    "enabled": null,
    "set/enabled": null,
    "readingBuffer": null,
    "set/readingBuffer": null,
    "readingPtr": null,
    "set/readingPtr": null,
    "header": null,
    "set/header": null,
    "parent": null,
    "set/parent": null,
    "serviceIdx": null,
    "set/serviceIdx": null,
    "spec": null,
    "set/spec": null,
    "serialize": jacdac_twins_ServiceTwin_serialize__P2629,
    "tick": jacdac_twins_ServiceTwin_tick__P2630,
    "applyTwinUpdate": jacdac_twins_ServiceTwin_applyTwinUpdate__P2631,
    "computeTwin": jacdac_twins_ServiceTwin_computeTwin__P2632,
    "process": jacdac_twins_ServiceTwin_process__P2633,
  },
});
const jacdac_TokenParser__C2365_VT = mkVTable({
  name: "TokenParser",
  numFields: 9,
  classNo: 40,
  lastSubtypeNo: 40,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "c0": null,
    "set/c0": null,
    "size": null,
    "set/size": null,
    "div": null,
    "set/div": null,
    "fp": null,
    "set/fp": null,
    "nfmt": null,
    "set/nfmt": null,
    "nfmt2": null,
    "set/nfmt2": null,
    "word": null,
    "set/word": null,
    "isArray": null,
    "set/isArray": null,
    "fmt": null,
    "set/fmt": null,
    "parse": jacdac_TokenParser_parse__P2366,
  },
});
const jacdac_JDPacket__C1412_VT = mkVTable({
  name: "JDPacket",
  numFields: 4,
  classNo: 41,
  lastSubtypeNo: 41,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_header": null,
    "set/_header": null,
    "_data": null,
    "set/_data": null,
    "timestamp": null,
    "set/timestamp": null,
    "_handled": null,
    "set/_handled": null,
    "fromBinary": jacdac_JDPacket_fromBinary__P1417,
    "from": jacdac_JDPacket_from__P1418,
    "onlyHeader": jacdac_JDPacket_onlyHeader__P1419,
    "jdpacked": jacdac_JDPacket_jdpacked__P1420,
    "handled": jacdac_JDPacket_handled__P1422,
    "markHandled": jacdac_JDPacket_markHandled__P1423,
    "possiblyNotImplemented": jacdac_JDPacket_possiblyNotImplemented__P1424,
    "deviceIdentifier": jacdac_JDPacket_deviceIdentifier__P1425,
    "set/deviceIdentifier": jacdac_JDPacket_deviceIdentifier__P1426,
    "packetFlags": jacdac_JDPacket_packetFlags__P1427,
    "multicommandClass": jacdac_JDPacket_multicommandClass__P1428,
    "size": jacdac_JDPacket_size__P1429,
    "requiresAck": jacdac_JDPacket_requiresAck__P1430,
    "set/requiresAck": jacdac_JDPacket_requiresAck__P1431,
    "serviceIndex": jacdac_JDPacket_serviceIndex__P1432,
    "set/serviceIndex": jacdac_JDPacket_serviceIndex__P1433,
    "crc": jacdac_JDPacket_crc__P1434,
    "serviceCommand": jacdac_JDPacket_serviceCommand__P1435,
    "set/serviceCommand": jacdac_JDPacket_serviceCommand__P1436,
    "isEvent": jacdac_JDPacket_isEvent__P1437,
    "eventCode": jacdac_JDPacket_eventCode__P1438,
    "eventCounter": jacdac_JDPacket_eventCounter__P1439,
    "isRegSet": jacdac_JDPacket_isRegSet__P1440,
    "isRegGet": jacdac_JDPacket_isRegGet__P1441,
    "regCode": jacdac_JDPacket_regCode__P1442,
    "data": jacdac_JDPacket_data__P1443,
    "set/data": jacdac_JDPacket_data__P1444,
    "intData": jacdac_JDPacket_intData__P1445,
    "stringData": jacdac_JDPacket_stringData__P1447,
    "jdunpack": jacdac_JDPacket_jdunpack__P1448,
    "compress": jacdac_JDPacket_compress__P1449,
    "withFrameStripped": jacdac_JDPacket_withFrameStripped__P1450,
    "getNumber": jacdac_JDPacket_getNumber__P1451,
    "isCommand": jacdac_JDPacket_isCommand__P1453,
    "isReport": jacdac_JDPacket_isReport__P1454,
    "toString": jacdac_JDPacket_toString__P1455,
    "respond": jacdac_JDPacket_respond__P1456,
    "_sendCore": jacdac_JDPacket__sendCore__P1457,
    "_sendReport": jacdac_JDPacket__sendReport__P1458,
    "_sendCmd": jacdac_JDPacket__sendCmd__P1459,
    "_sendCmdId": jacdac_JDPacket__sendCmdId__P1460,
    "sendAsMultiCommand": jacdac_JDPacket_sendAsMultiCommand__P1461,
    "_sendWithAck": jacdac_JDPacket__sendWithAck__P1462,
  },
  toStringMethod: jacdac_JDPacket_toString__P1455,
});
const jacdac_Client__C1844_VT = mkVTable({
  name: "Client",
  numFields: 14,
  classNo: 27,
  lastSubtypeNo: 27,
  maxBgInstances: null,
  methods: {
    "handlePacket": jacdac_Client_handlePacket__P1859,
    "announceCallback": jacdac_Client_announceCallback__P1868,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "_device": null,
    "set/_device": null,
    "eventId": null,
    "set/eventId": null,
    "broadcast": null,
    "set/broadcast": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "supressLog": null,
    "set/supressLog": null,
    "started": null,
    "set/started": null,
    "advertisementData": null,
    "set/advertisementData": null,
    "handlers": null,
    "set/handlers": null,
    "systemActive": null,
    "set/systemActive": null,
    "config": null,
    "set/config": null,
    "registers": null,
    "set/registers": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "role": null,
    "set/role": null,
    "device": jacdac_Client_device__P1850,
    "set/device": jacdac_Client_device__P1851,
    "handlePacketOuter": jacdac_Client_handlePacketOuter__P1858,
    "handlePacket": jacdac_Client_handlePacket__P1859,
    "_attach": jacdac_Client__attach__P1860,
    "handleConnected": jacdac_Client_handleConnected__P2375,
    "_detach": jacdac_Client__detach__P1861,
    "sendCommand": jacdac_Client_sendCommand__P1862,
    "raiseEvent": jacdac_Client_raiseEvent__P2377,
    "start": jacdac_Client_start__P1866,
    "announceCallback": jacdac_Client_announceCallback__P1868,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac_RegisterClient__C1835_VT = mkVTable({
  name: "RegisterClient",
  numFields: 6,
  classNo: 28,
  lastSubtypeNo: 28,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "_data": null,
    "set/_data": null,
    "_localTime": null,
    "set/_localTime": null,
    "service": null,
    "set/service": null,
    "code": null,
    "set/code": null,
    "packFormat": null,
    "set/packFormat": null,
    "reset": jacdac_RegisterClient_reset__P1837,
    "handlePacket": jacdac_RegisterClient_handlePacket__P1843,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac_ClientPacketQueue__C2473_VT = mkVTable({
  name: "ClientPacketQueue",
  numFields: 2,
  classNo: 42,
  lastSubtypeNo: 42,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "pkts": null,
    "set/pkts": null,
    "parent": null,
    "set/parent": null,
    "updateQueue": jacdac_ClientPacketQueue_updateQueue__P2474,
    "send": jacdac_ClientPacketQueue_send__P2476,
    "resend": jacdac_ClientPacketQueue_resend__P2477,
  },
});
const mqtt_MQTTHandler__C2273_VT = mkVTable({
  name: "MQTTHandler",
  numFields: 3,
  classNo: 43,
  lastSubtypeNo: 43,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "status": null,
    "set/status": null,
    "topic": null,
    "set/topic": null,
    "handler": null,
    "set/handler": null,
  },
});
const azureiot_ValueAwaiter__C1355_VT = mkVTable({
  name: "ValueAwaiter",
  numFields: 2,
  classNo: 44,
  lastSubtypeNo: 44,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "evid": null,
    "set/evid": null,
    "value": null,
    "set/value": null,
    "setValue": azureiot_ValueAwaiter_setValue__P1357,
    "wait": azureiot_ValueAwaiter_wait__P1358,
  },
});
const JSON_Stringifier__C2196_VT = mkVTable({
  name: "Stringifier",
  numFields: 3,
  classNo: 45,
  lastSubtypeNo: 45,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "currIndent": null,
    "set/currIndent": null,
    "indentStep": null,
    "set/indentStep": null,
    "indent": null,
    "set/indent": null,
    "doString": JSON_Stringifier_doString__P2197,
    "go": JSON_Stringifier_go__P2198,
  },
});
const jacdac_RegQuery__C2481_VT = mkVTable({
  name: "RegQuery",
  numFields: 6,
  classNo: 46,
  lastSubtypeNo: 46,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "lastQuery": null,
    "set/lastQuery": null,
    "lastReport": null,
    "set/lastReport": null,
    "value": null,
    "set/value": null,
    "notImplemented": null,
    "set/notImplemented": null,
    "reg": null,
    "set/reg": null,
    "serviceIdx": null,
    "set/serviceIdx": null,
  },
});
const jacdac_EventListener__C1909_VT = mkVTable({
  name: "EventListener",
  numFields: 3,
  classNo: 47,
  lastSubtypeNo: 47,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "key": null,
    "set/key": null,
    "handler": null,
    "set/handler": null,
    "once": null,
    "set/once": null,
  },
});
const net_Response__C1223_VT = mkVTable({
  name: "Response",
  numFields: 6,
  classNo: 48,
  lastSubtypeNo: 48,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "_cached": null,
    "set/_cached": null,
    "status_code": null,
    "set/status_code": null,
    "reason": null,
    "set/reason": null,
    "_read_so_far": null,
    "set/_read_so_far": null,
    "headers": null,
    "set/headers": null,
    "socket": null,
    "set/socket": null,
    "close": net_Response_close__P1230,
    "content": net_Response_content__P1231,
    "text": net_Response_text__P1232,
    "json": net_Response_json__P1233,
    "toString": net_Response_toString__P1234,
  },
  toStringMethod: net_Response_toString__P1234,
});
const control_PollEvent__C2178_VT = mkVTable({
  name: "PollEvent",
  numFields: 6,
  classNo: 49,
  lastSubtypeNo: 49,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "eid": null,
    "set/eid": null,
    "vid": null,
    "set/vid": null,
    "start": null,
    "set/start": null,
    "timeOut": null,
    "set/timeOut": null,
    "condition": null,
    "set/condition": null,
    "once": null,
    "set/once": null,
  },
});
const control_EventContext__C393_VT = mkVTable({
  name: "EventContext",
  numFields: 9,
  classNo: 50,
  lastSubtypeNo: 50,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "handlers": null,
    "set/handlers": null,
    "frameCallbacks": null,
    "set/frameCallbacks": null,
    "frameWorker": null,
    "set/frameWorker": null,
    "framesInSample": null,
    "set/framesInSample": null,
    "timeInSample": null,
    "set/timeInSample": null,
    "deltaTimeMillis": null,
    "set/deltaTimeMillis": null,
    "prevTimeMillis": null,
    "set/prevTimeMillis": null,
    "idleCallbacks": null,
    "set/idleCallbacks": null,
    "runningCallbacks": null,
    "set/runningCallbacks": null,
    "registerHandler": control_EventContext_registerHandler__P403,
  },
});
const control_EventHandler__C2199_VT = mkVTable({
  name: "EventHandler",
  numFields: 4,
  classNo: 51,
  lastSubtypeNo: 51,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "src": null,
    "set/src": null,
    "value": null,
    "set/value": null,
    "handler": null,
    "set/handler": null,
    "flags": null,
    "set/flags": null,
    "register": control_EventHandler_register__P2200,
  },
});
const servers_AzureIotHubHealthServer__C1941_VT = mkVTable({
  name: "AzureIotHubHealthServer",
  numFields: 9,
  classNo: 19,
  lastSubtypeNo: 19,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": servers_AzureIotHubHealthServer_handlePacket__P1946,
    "log": jacdac_Server_log__P2394,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "_connectionStatus": null,
    "set/_connectionStatus": null,
    "connectionStatus": servers_AzureIotHubHealthServer_connectionStatus__P1943,
    "hubName": servers_AzureIotHubHealthServer_hubName__P1944,
    "hubDeviceId": servers_AzureIotHubHealthServer_hubDeviceId__P1945,
    "setConnectionStatus": servers_AzureIotHubHealthServer_setConnectionStatus__P2528,
    "connect": servers_AzureIotHubHealthServer_connect__P2529,
    "disconnect": servers_AzureIotHubHealthServer_disconnect__P2530,
    "handleSetConnectionString": servers_AzureIotHubHealthServer_handleSetConnectionString__P2531,
    "handlePacket": servers_AzureIotHubHealthServer_handlePacket__P1946,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "sendReport": jacdac_Server_sendReport__P2383,
    "sendEvent": jacdac_Server_sendEvent__P2384,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2385,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2386,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2387,
    "handleRegValue": jacdac_Server_handleRegValue__P2389,
    "handleRegBool": jacdac_Server_handleRegBool__P2390,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2392,
    "start": jacdac_Server_start__P1833,
    "log": jacdac_Server_log__P2394,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac_DelayedPacket__C2411_VT = mkVTable({
  name: "DelayedPacket",
  numFields: 2,
  classNo: 52,
  lastSubtypeNo: 52,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "timestamp": null,
    "set/timestamp": null,
    "pkt": null,
    "set/pkt": null,
  },
});
const servers_WiFiServer__C2111_VT = mkVTable({
  name: "WiFiServer",
  numFields: 9,
  classNo: 20,
  lastSubtypeNo: 20,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": servers_WiFiServer_handlePacket__P2114,
    "log": jacdac_Server_log__P2394,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "enabled": null,
    "set/enabled": null,
    "handlePacket": servers_WiFiServer_handlePacket__P2114,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "sendReport": jacdac_Server_sendReport__P2383,
    "sendEvent": jacdac_Server_sendEvent__P2384,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2385,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2386,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2387,
    "handleRegValue": jacdac_Server_handleRegValue__P2389,
    "handleRegBool": jacdac_Server_handleRegBool__P2390,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2392,
    "start": jacdac_Server_start__P1833,
    "log": jacdac_Server_log__P2394,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const net_AccessPoint__C1185_VT = mkVTable({
  name: "AccessPoint",
  numFields: 5,
  classNo: 53,
  lastSubtypeNo: 53,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "flags": null,
    "set/flags": null,
    "rssi": null,
    "set/rssi": null,
    "bssid": null,
    "set/bssid": null,
    "channel": null,
    "set/channel": null,
    "ssid": null,
    "set/ssid": null,
    "fromBuffer": net_AccessPoint_fromBuffer__P1191,
    "toBuffer": net_AccessPoint_toBuffer__P1192,
  },
});
const jacdac_BrainServer__C2489_VT = mkVTable({
  name: "BrainServer",
  numFields: 8,
  classNo: 21,
  lastSubtypeNo: 21,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": jacdac_Server_handlePacket__P1831,
    "log": jacdac_Server_log__P2394,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": jacdac_Server_handlePacket__P1831,
    "sendReport": jacdac_Server_sendReport__P2383,
    "sendEvent": jacdac_Server_sendEvent__P2384,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2385,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2386,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2387,
    "handleRegValue": jacdac_Server_handleRegValue__P2389,
    "handleRegBool": jacdac_Server_handleRegBool__P2390,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2392,
    "start": jacdac_Server_start__P1833,
    "log": jacdac_Server_log__P2394,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac_LoggerServer__C1644_VT = mkVTable({
  name: "LoggerServer",
  numFields: 10,
  classNo: 22,
  lastSubtypeNo: 22,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": jacdac_LoggerServer_handlePacket__P1647,
    "log": jacdac_LoggerServer_log__P1649,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "_lastListenerTime": null,
    "set/_lastListenerTime": null,
    "minPriority": null,
    "set/minPriority": null,
    "handlePacket": jacdac_LoggerServer_handlePacket__P1647,
    "log": jacdac_LoggerServer_log__P1649,
    "add": jacdac_LoggerServer_add__P1652,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "sendReport": jacdac_Server_sendReport__P2383,
    "sendEvent": jacdac_Server_sendEvent__P2384,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2385,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2386,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2387,
    "handleRegValue": jacdac_Server_handleRegValue__P2389,
    "handleRegBool": jacdac_Server_handleRegBool__P2390,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2392,
    "start": jacdac_Server_start__P1833,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac__rolemgr_RoleManagerServer__C1726_VT = mkVTable({
  name: "RoleManagerServer",
  numFields: 10,
  classNo: 23,
  lastSubtypeNo: 23,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": jacdac__rolemgr_RoleManagerServer_handlePacket__P1729,
    "log": jacdac_Server_log__P2394,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "_oldBindingsHash": null,
    "set/_oldBindingsHash": null,
    "autoBind": null,
    "set/autoBind": null,
    "handlePacket": jacdac__rolemgr_RoleManagerServer_handlePacket__P1729,
    "bindingHash": jacdac__rolemgr_RoleManagerServer_bindingHash__P2461,
    "bindRoles": jacdac__rolemgr_RoleManagerServer_bindRoles__P1730,
    "checkChanges": jacdac__rolemgr_RoleManagerServer_checkChanges__P2462,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "sendReport": jacdac_Server_sendReport__P2383,
    "sendEvent": jacdac_Server_sendEvent__P2384,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2385,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2386,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2387,
    "handleRegValue": jacdac_Server_handleRegValue__P2389,
    "handleRegBool": jacdac_Server_handleRegBool__P2390,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2392,
    "start": jacdac_Server_start__P1833,
    "log": jacdac_Server_log__P2394,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac__rolemgr_DeviceWrapper__C2449_VT = mkVTable({
  name: "DeviceWrapper",
  numFields: 3,
  classNo: 54,
  lastSubtypeNo: 54,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "bindings": null,
    "set/bindings": null,
    "score": null,
    "set/score": null,
    "device": null,
    "set/device": null,
  },
});
const jacdac__rolemgr_RoleBinding__C2451_VT = mkVTable({
  name: "RoleBinding",
  numFields: 4,
  classNo: 55,
  lastSubtypeNo: 55,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "boundToDev": null,
    "set/boundToDev": null,
    "boundToServiceIdx": null,
    "set/boundToServiceIdx": null,
    "role": null,
    "set/role": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "host": jacdac__rolemgr_RoleBinding_host__P2452,
    "select": jacdac__rolemgr_RoleBinding_select__P2453,
  },
});
const jacdac__rolemgr_ServerBindings__C2455_VT = mkVTable({
  name: "ServerBindings",
  numFields: 2,
  classNo: 56,
  lastSubtypeNo: 56,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "bindings": null,
    "set/bindings": null,
    "host": null,
    "set/host": null,
    "fullyBound": jacdac__rolemgr_ServerBindings_fullyBound__P2456,
    "scoreFor": jacdac__rolemgr_ServerBindings_scoreFor__P2457,
  },
});
const jacdac_ControlServer__C1895_VT = mkVTable({
  name: "ControlServer",
  numFields: 8,
  classNo: 24,
  lastSubtypeNo: 24,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_ControlServer_handlePacketOuter__P1898,
    "handlePacket": jacdac_Server_handlePacket__P1831,
    "log": jacdac_Server_log__P2394,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "sendUptime": jacdac_ControlServer_sendUptime__P1897,
    "handleFloodPing": jacdac_ControlServer_handleFloodPing__P2493,
    "handlePacketOuter": jacdac_ControlServer_handlePacketOuter__P1898,
    "handlePacket": jacdac_Server_handlePacket__P1831,
    "sendReport": jacdac_Server_sendReport__P2383,
    "sendEvent": jacdac_Server_sendEvent__P2384,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2385,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2386,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2387,
    "handleRegValue": jacdac_Server_handleRegValue__P2389,
    "handleRegBool": jacdac_Server_handleRegBool__P2390,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2392,
    "start": jacdac_Server_start__P1833,
    "log": jacdac_Server_log__P2394,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac_ProxyServer__C2486_VT = mkVTable({
  name: "ProxyServer",
  numFields: 8,
  classNo: 25,
  lastSubtypeNo: 25,
  maxBgInstances: null,
  methods: {
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": jacdac_Server_handlePacket__P1831,
    "log": jacdac_Server_log__P2394,
  },
  iface: {
    "listeners": null,
    "set/listeners": null,
    "supressLog": null,
    "set/supressLog": null,
    "running": null,
    "set/running": null,
    "serviceIndex": null,
    "set/serviceIndex": null,
    "stateUpdated": null,
    "set/stateUpdated": null,
    "_statusCode": null,
    "set/_statusCode": null,
    "instanceName": null,
    "set/instanceName": null,
    "serviceClass": null,
    "set/serviceClass": null,
    "handlePacketOuter": jacdac_Server_handlePacketOuter__P1830,
    "handlePacket": jacdac_Server_handlePacket__P1831,
    "sendReport": jacdac_Server_sendReport__P2383,
    "sendEvent": jacdac_Server_sendEvent__P2384,
    "sendChangeEvent": jacdac_Server_sendChangeEvent__P2385,
    "handleStatusCode": jacdac_Server_handleStatusCode__P2386,
    "handleInstanceName": jacdac_Server_handleInstanceName__P2387,
    "handleRegValue": jacdac_Server_handleRegValue__P2389,
    "handleRegBool": jacdac_Server_handleRegBool__P2390,
    "handleRegUInt32": jacdac_Server_handleRegUInt32__P2392,
    "start": jacdac_Server_start__P1833,
    "log": jacdac_Server_log__P2394,
    "on": jacdac_EventSource_on__P1914,
    "addListenerInternal": jacdac_EventSource_addListenerInternal__P2372,
    "emit": jacdac_EventSource_emit__P1917,
  },
});
const jacdac_OutPipe__C1489_VT = mkVTable({
  name: "OutPipe",
  numFields: 3,
  classNo: 57,
  lastSubtypeNo: 57,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "nextCnt": null,
    "set/nextCnt": null,
    "deviceId": null,
    "set/deviceId": null,
    "port": null,
    "set/port": null,
    "from": jacdac_OutPipe_from__P1491,
    "respondForEach": jacdac_OutPipe_respondForEach__P1492,
    "writeEx": jacdac_OutPipe_writeEx__P2406,
    "write": jacdac_OutPipe_write__P1494,
    "writeAndClose": jacdac_OutPipe_writeAndClose__P1495,
    "close": jacdac_OutPipe_close__P1496,
  },
});
const jacdac_AckAwaiter__C2334_VT = mkVTable({
  name: "AckAwaiter",
  numFields: 6,
  classNo: 58,
  lastSubtypeNo: 58,
  maxBgInstances: null,
  methods: {
  },
  iface: {
    "nextRetry": null,
    "set/nextRetry": null,
    "numTries": null,
    "set/numTries": null,
    "crc": null,
    "set/crc": null,
    "eventId": null,
    "set/eventId": null,
    "pkt": null,
    "set/pkt": null,
    "srcId": null,
    "set/srcId": null,
  },
});

const breakpoints = setupDebugger(1, ["streamingIntervalSpec___2624","sim___2667","twins___2609","exclusions___2610","messageBuffer___2617","lastReadingsSent___2616","currTwin___2611","pendingMessageSize___2615","pendingReadings___2613","numMsg___2621","messagePtr___2619","sendTick___2664","ignoredServices___2647","statusPhase___2662"])

return _main___P2120
})
